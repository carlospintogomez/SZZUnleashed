{"36fa5c2e5efb429896d48299080a14294b4aa60a":{"changes":{"src\/tree.js":"MODIFY","demos\/test.html":"MODIFY"},"diff":{"src\/tree.js":[{"add":["334","","336","      item.getEdges().forEach(edge => {","337","        items.push(edge);","338","      });"],"delete":["334","    item.getEdges().forEach(edge => {","335","      items.push(edge);","336","    });"]}],"demos\/test.html":[{"add":["51","G6.registerGuide('tag', {","52","  draw(item) {","53","    const group = item.getGraphicGroup();","54","    const model = item.getModel();","55","    const {nodeId, label} = model;","56","    const graph = item.getGraph();","57","    const node = graph.find(nodeId);","58","    const nodeBox = node.getBBox();","59","    const dy = 32;","60","    return group.addShape('path', {","61","          attrs: {","62","            path: [['M', nodeBox.centerX, nodeBox.minY - dy], ['L', nodeBox.centerX, nodeBox.minY]],","63","            stroke: 'red',","64","            lineDash: [2, 2],","65","            endArrow: true,","66","          },","67","        });;","68","  }","69","});","70","const data = {","71","  roots: [{","72","    id:'root1',","73","    label: 'root',","74","    children: [{","75","      label: 'child1',","76","      children: [","77","        {","78","          label: 'child\\n1.1'","80","      ]","81","    }, {","82","      label: 'child2'","83","    }] ","84","  }]","85","};","86","const graph = new G6.Tree({","87","  container: 'mountNode',","88","  width: 500,","89","  height: 500","90","});","91","graph.read(data);","92","","93","graph.add('guide', {","94","  id:'gd',","95","  shape: 'tag',","96","  nodeId: 'root1',","97","  label: '这是 node1'","98","});","99","graph.focus('gd');","100","setTimeout(() => {","101","      graph.remove('gd');","102","    }, 2000);"],"delete":["51","      const { forceSimulation, forceManyBody, forceCollide } = d3;","52","      const Util = G6.Util;","53","      class ParticleTransport {","54","        constructor(options) {","55","          this.options = {","56","            getGravitys(graph) {","57","              const colors = [ '#FD8C3D', '#D83F43', '#F7BED6', '#E487C7', '#46A848', '#D83F43', '#3B85BA', '#48335B', '#B7CDE9' ]; \/\/ 重力点附上颜色","58","              const width = graph.getWidth();","59","              const height = graph.getHeight();","60","              const padding = 70;","61","              const center = [","62","                width \/ 2,","63","                height \/ 2","64","              ];","65","              const gravityCount = 8;","66","              const angleStep = Math.PI * 2 \/ gravityCount;","67","              const radius = Math.min(width, height) \/ 2 - padding;","68","              const initialv = [ 0, -radius ];","69","              const gravitys = [ initialv ];","70","              for (let index = 1; index < gravityCount; index++) {","71","                const v = Util.vec2.rotate([], initialv, [ 0, 0 ], angleStep * index);","72","                gravitys.push(v);","73","              }","74","              gravitys.forEach((gravity, index) => {","75","                gravity[0] = center[0] + gravity[0];","76","                gravity[1] = center[1] + gravity[1];","77","                gravity[2] = colors[index];","78","              });","79","              return gravitys;","80","            },","81","            ...options","82","          };","83","          this.init();","85","        initGraph() {","86","          const graph = new G6.Graph({","87","            container: 'mountNode',","88","            height: window.innerHeight, \/\/ 画布高","89","            animate: {","90","              update({ element, endKeyFrame }) {","91","                const { props } = endKeyFrame;","92","                element.animate({","93","                  matrix: props.matrix,","94","                  ...props.attrs","95","                }, 3000, 'easeQuadOut');","96","              },","97","              show: 'fadeIn',","98","              hide: 'fadeOut'","99","            }","100","          });","101","          this.graph = graph;","102","        }","103","        getRandom(array) {","104","          return array[parseInt(array.length * Math.random())];","105","        }","106","        initData() {","107","          const { gravitys } = this;","108","          const data = {","109","            nodes: []","110","          };","111","          gravitys.forEach((gravity, index) => {","112","            const maxCount = 16 * (index + 1);","113","            const minCount = 2 * (index + 1);","114","            const nodeCount = parseInt(Math.random() * maxCount);","115","      ","116","            for (let index = 0; index < nodeCount; index++) {","117","              data.nodes.push({","118","                size: 4 + 6 * Math.random(),","119","                color: gravity[2],","120","                gx: gravity[0],","121","                gy: gravity[1],","122","                x: gravity[0] + Math.random() * 5,","123","                y: gravity[1] + Math.random() * 5,","124","                style: {","125","                  stroke: null","126","                }","127","              });","128","            }","129","          });","130","          this.graph.read(data);","131","          this.data = data;","132","        }","133","        initSimulation() {","134","          const { nodes } = this.data;","135","          const graph = this.graph;","136","          this.simulation = forceSimulation(nodes)","137","            .force('charge', forceManyBody())","138","            .force('collision', forceCollide().radius(model => {","139","              return model.size \/ 2 + 2;","140","            }))","141","            .on('tick', function() {","142","              \/\/ const alpha = 1\/node.gx - node.x;","143","              nodes.forEach(node => {","144","                node.x += (node.gx - node.x) * 0.04;","145","                node.y += (node.gy - node.y) * 0.04;","146","              });","147","              graph.preventAnimate(() => {","148","                graph.updateNodePosition();","149","              });","150","            });","151","        }","152","        initGravitys() {","153","          const { getGravitys } = this.options;","154","          this.gravitys = getGravitys(this.graph);","155","        }","156","        init() {","157","          this.initGraph();","158","          this.initGravitys();","159","          this.initData();","160","          this.initSimulation();","161","          const graph = this.graph;","162","          let time = 3000;","163","          let showStep = 1000;","164","          let hideStep = 3000;","165","          graph.add('node', {","166","            id: 'title',","167","            label: {","168","              text: '2018 AntV 品牌日',","169","              fontSize: 18","170","            },","171","            x: graph.getWidth()\/2,","172","            y: graph.getHeight()\/2,","173","            style: {","174","              fillOpacity: 0,","175","              strokeOpacity: 0","176","            }","177","          });","178","          setTimeout(()=>{","179","            graph.hide('title');","180","          }, time);","181","          time += showStep;","182","          setTimeout(()=>{","183","            graph.preventAnimate(()=>{","184","              graph.update('title', {","185","                label: {","186","                  text: '2018.11.22 14:00 ~ 16:00',","187","                  fontSize: 18","188","                },","189","              });","190","            });","191","            graph.show('title');","192","          }, time);","193","          time += hideStep;","194","          setTimeout(()=>{","195","            graph.hide('title');","196","          }, time);","197","          time += showStep;","198","          setTimeout(()=>{","199","            graph.preventAnimate(()=>{","200","              graph.update('title', {","201","                label: {","202","                  text: '黄龙万科中心 I 座 3-15',","203","                  fontSize: 18","204","                },","205","              });","206","            });","207","            graph.show('title');","208","          }, time);","209","          time += hideStep;","210","          setTimeout(()=>{","211","            graph.hide('title');","212","          }, time);","213","          time += showStep;","214","          setTimeout(()=>{","215","            graph.preventAnimate(()=>{","216","              graph.update('title', {","217","                label: {","218","                  text: '欢迎大家到来',","219","                  fontSize: 18","220","                },","221","              });","222","            });","223","            graph.show('title');","224","          }, time);","225","          time += hideStep;","226","          setTimeout(()=>{","227","            graph.hide('title');","228","          }, time);","229","          time += showStep;","230","          setTimeout(()=>{","231","            graph.preventAnimate(()=>{","232","              graph.update('title', {","233","                label: {","234","                  text: 'Power By G6',","235","                  fontSize: 18","236","                },","237","              });","238","            });","239","            graph.show('title');","240","          }, time);","241","          \/\/ setTimeout(()=>{","242","          \/\/   graph.preventAnimate(()=>{","243","          \/\/     graph.update('title', {","244","          \/\/       label: '欢迎大家到来'","245","          \/\/     });","246","          \/\/   });","247","          \/\/   graph.show('title');","248","          \/\/ }, time);","249","          \/\/ setTimeout(()=>{","250","          \/\/   graph.hide('title');","251","          \/\/ }, time);","252","          \/\/ setTimeout(()=>{","253","          \/\/   graph.preventAnimate(()=>{","254","          \/\/     graph.update('title', {","255","          \/\/       label: {","256","          \/\/         text: 'Power By G6',","257","          \/\/         fontSize: 18","258","          \/\/       },","259","          \/\/     });","260","          \/\/   });","261","          \/\/   graph.show('title');","262","          \/\/ }, time);","263","          \/\/ setTimeout(()=>{","264","          \/\/   graph.hide('title');","265","          \/\/ }, time);","266","          setInterval(() => {","267","            const { nodes } = this.data;","268","            const count = 10;","269","            for (let index = 0; index < count; index++) {","270","              const node = this.getRandom(nodes);","271","              const gravity = this.getRandom(this.gravitys);","272","              graph.update(node.id, {","273","                gx: gravity[0],","274","                gy: gravity[1],","275","                color: gravity[2]","276","              });","277","            }","278","            this.simulation.alpha(0.003).restart();","279","          }, 200);","280","        }","281","      }","282","      new ParticleTransport();"]}]}},"c57e4ef68c6988f5d34638f924f4c4e5b8e10e1d":{"changes":{"src\/shape\/edges\/polyline.ts":"MODIFY"},"diff":{"src\/shape\/edges\/polyline.ts":[{"add":["121","      console.log('path of polyline', points, source, target, polylinePoints, res)"],"delete":[]}]}},"9ba756a7b1bb7fdc24e19e948a46cc074f478b0d":{"changes":{"src\/plugins\/tooltip\/index.ts":"MODIFY","stories\/Plugins\/component\/tooltip.tsx":"MODIFY"},"diff":{"src\/plugins\/tooltip\/index.ts":[{"add":["90","","120","","144","    const shouldBegin = this.get('shouldBegin');","145","    const tooltip = this.get('tooltip');","146","    if (!shouldBegin(e)) {","147","      modifyCSS(tooltip, {","148","        visibility: 'hidden',","149","      });","150","      return","151","    };"],"delete":["89","    const shouldBegin = this.get('shouldBegin');","90","    if (!shouldBegin(e)) return;","101","    const shouldBegin = this.get('shouldBegin');","102","    if (!shouldBegin(e)) return;","119","    const shouldBegin = this.get('shouldBegin');","120","    if (!shouldBegin(e)) return;","152","    const tooltip = this.get('tooltip');"]}],"stories\/Plugins\/component\/tooltip.tsx":[{"add":["50","        shouldBegin: d => {","51","          if (d.target.get('name') === 'text-shape') return true;","52","          return false;","53","        }","63","        defaultNode: {","64","          size: 50","65","        }"],"delete":[]}]}},"63f43ce478d758b9ed515b213cdf63d4770f690c":{"changes":{"packages\/plugin\/tests\/unit\/grid-spec.ts":"MODIFY","packages\/element\/package.json":"MODIFY","packages\/plugin\/package.json":"MODIFY","packages\/plugin\/src\/bundling\/index.ts":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/pc\/src\/index.ts":"MODIFY","packages\/core\/package.json":"MODIFY","packages\/pc\/src\/graph\/controller\/layout.ts":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/nodes\/jsx-node.zh.md":"MODIFY","CHANGELOG.md":"MODIFY","packages\/pc\/src\/global.ts":"MODIFY","packages\/plugin\/tests\/unit\/annotation-spec.ts":"ADD","packages\/plugin\/src\/index.ts":"MODIFY","packages\/core\/src\/graph\/controller\/layout.ts":"MODIFY","packages\/core\/src\/global.ts":"MODIFY","packages\/g6\/src\/index.ts":"MODIFY","packages\/pc\/package.json":"MODIFY","packages\/pc\/tests\/unit\/combo-collapse-layout-spec.ts":"MODIFY","packages\/core\/src\/graph\/graph.ts":"MODIFY","packages\/plugin\/src\/annotation\/index.ts":"ADD"},"diff":{"packages\/plugin\/tests\/unit\/grid-spec.ts":[{"add":["44","    expect(gridContainer.style.width).toBe('320000px'); \/\/ width","45","    expect(gridContainer.style.height).toBe('240000px'); \/\/ height","46","    expect(gridContainer.style.left).toEqual('-160000px'); \/\/ -width . 2","47","    expect(gridContainer.style.top).toEqual('-120000px'); \/\/ -height \/ 2","53","    expect(gridContainer.style.left).toEqual('-160000px'); \/\/ -width . 2","54","    expect(gridContainer.style.top).toEqual('-120000px'); \/\/ -height \/ 2","58","    expect(gridContainer.style.left).toEqual('-160000px'); \/\/ -width . 2","59","    expect(gridContainer.style.top).toEqual('-120000px'); \/\/ -height \/ 2","65","    expect(gridContainer.style.left).toEqual('-160000px'); \/\/ -width . 2","66","    expect(gridContainer.style.top).toEqual('-120000px'); \/\/ -height \/ 2","72","    expect(gridContainer.style.left).toEqual('-160000px'); \/\/ -width . 2","73","    expect(gridContainer.style.top).toEqual('-120000px'); \/\/ -height \/ 2"],"delete":["44","    expect(gridContainer.style.width).toBe('3.2e+06px'); \/\/ width","45","    expect(gridContainer.style.height).toBe('2.4e+06px'); \/\/ height","46","    expect(gridContainer.style.left).toEqual('-1.6e+06px'); \/\/ -width . 2","47","    expect(gridContainer.style.top).toEqual('-1.2e+06px'); \/\/ -height \/ 2","53","    expect(gridContainer.style.left).toEqual('-1.6e+06px'); \/\/ -width . 2","54","    expect(gridContainer.style.top).toEqual('-1.2e+06px'); \/\/ -height \/ 2","58","    expect(gridContainer.style.left).toEqual('-1.6e+06px'); \/\/ -width . 2","59","    expect(gridContainer.style.top).toEqual('-1.2e+06px'); \/\/ -height \/ 2","65","    expect(gridContainer.style.left).toEqual('-1.6e+06px'); \/\/ -width . 2","66","    expect(gridContainer.style.top).toEqual('-1.2e+06px'); \/\/ -height \/ 2","72","    expect(gridContainer.style.left).toEqual('-1.6e+06px'); \/\/ -width . 2","73","    expect(gridContainer.style.top).toEqual('-1.2e+06px'); \/\/ -height \/ 2"]}],"packages\/element\/package.json":[{"add":["2","  \"version\": \"0.7.1\",","63","    \"@antv\/g6-core\": \"0.7.1\","],"delete":["2","  \"version\": \"0.7.0\",","63","    \"@antv\/g6-core\": \"0.7.0\","]}],"packages\/plugin\/package.json":[{"add":["2","  \"version\": \"0.7.1\",","24","    \"@antv\/g6-core\": \"0.7.1\",","25","    \"@antv\/g6-element\": \"0.7.1\","],"delete":["2","  \"version\": \"0.7.0\",","24","    \"@antv\/g6-core\": \"0.7.0\",","25","    \"@antv\/g6-element\": \"0.7.0\","]}],"packages\/plugin\/src\/bundling\/index.ts":[{"add":["78","      onLayoutEnd() { }, \/\/ 布局完成回调","79","      onTick() { }, \/\/ 每一迭代布局回调","224","        if (!edgePoints[i]?.length) {"],"delete":["78","      onLayoutEnd() {}, \/\/ 布局完成回调","79","      onTick() {}, \/\/ 每一迭代布局回调","224","        if (!edgePoints[i] || edgePoints[i] === []) {"]}],"packages\/g6\/package.json":[{"add":["2","  \"version\": \"4.7.1\",","68","    \"@antv\/g6-pc\": \"0.7.1\""],"delete":["2","  \"version\": \"4.7.0\",","68","    \"@antv\/g6-pc\": \"0.7.0\""]}],"packages\/pc\/src\/index.ts":[{"add":["22","const Algorithm: IAlgorithm = { ...AlgorithmSync, ...AlgorithmAsync };","36","const Annotation = Plugin.Annotation;","63","  Annotation,","98","  Annotation,"],"delete":["22","const Algorithm: IAlgorithm = { ...AlgorithmSync, ... AlgorithmAsync };"]}],"packages\/core\/package.json":[{"add":["2","  \"version\": \"0.7.1\","],"delete":["2","  \"version\": \"0.7.0\","]}],"packages\/pc\/src\/graph\/controller\/layout.ts":[{"add":["134","        const d3ForceAnimate = animate === undefined && layoutType === 'force'","139","          if (animate || d3ForceAnimate) graph.refreshPositions();"],"delete":["138","          if (animate) graph.refreshPositions();"]}],"packages\/site\/docs\/manual\/middle\/elements\/nodes\/jsx-node.zh.md":[{"add":["128","    <text style={{marginLeft: 10 ,fill: 'red'}}>FULL<\/text>"],"delete":["128","    <text style={{marginLeft: 10 ,fill: 'red'}}>'FULL'<\/text>"]}],"CHANGELOG.md":[{"add":["2","#### 4.7.1","3","","4","- feat: Annotation plugin;","5","- fix: combo and drag-node with heap maximum problem, closes: #3886;","6","- fix: combo and graph re-read problem, closes: 3902;","7","- fix: d3 force layout with default animate;","8","- perf: bundling plugin ts problem, closes: #3904;","9",""],"delete":[]}],"packages\/pc\/src\/global.ts":[{"add":["9","  version: '0.7.1',"],"delete":["9","  version: '0.7.0',"]}],"packages\/plugin\/tests\/unit\/annotation-spec.ts":[{"add":[],"delete":[]}],"packages\/plugin\/src\/index.ts":[{"add":["13","import Annotation from '.\/annotation';","28","  Legend,","29","  Annotation","45","  Legend,","46","  Annotation"],"delete":["27","  Legend","43","  Legend"]}],"packages\/core\/src\/graph\/controller\/layout.ts":[{"add":["205","        const relayoutPromise = this.execLayoutMethod(currentCfg, index);"],"delete":["205","        const relayoutPromise = this.execLayoutMethod(layoutMethod, currentCfg);"]}],"packages\/core\/src\/global.ts":[{"add":["66","  version: '0.7.1',"],"delete":["66","  version: '0.7.0',"]}],"packages\/g6\/src\/index.ts":[{"add":["2","G6.version = '4.7.1';","6","export const version = '4.7.1';"],"delete":["2","G6.version = '4.7.0';","6","export const version = '4.7.0';"]}],"packages\/pc\/package.json":[{"add":["2","  \"version\": \"0.7.1\",","77","    \"@antv\/g6-core\": \"0.7.1\",","78","    \"@antv\/g6-element\": \"0.7.1\",","79","    \"@antv\/g6-plugin\": \"0.7.1\","],"delete":["2","  \"version\": \"0.7.0\",","77","    \"@antv\/g6-core\": \"0.7.0\",","78","    \"@antv\/g6-element\": \"0.7.0\",","79","    \"@antv\/g6-plugin\": \"0.7.0\","]}],"packages\/pc\/tests\/unit\/combo-collapse-layout-spec.ts":[{"add":["11","      \"collapsed\": true,","12","      parentId: 'd'","13","    },","14","    {","15","      \"id\": \"d\",","16","      \"label\": \"d\","],"delete":["11","      \"collapsed\": true","30",""]}],"packages\/core\/src\/graph\/graph.ts":[{"add":["2440","    this.set({ itemMap: {}, nodes: [], edges: [], vedges: [], groups: [], combos: [], comboTrees: [] });"],"delete":["2440","    this.set({ itemMap: {}, nodes: [], edges: [], groups: [], combos: [], comboTrees: [] });"]}],"packages\/plugin\/src\/annotation\/index.ts":[{"add":[],"delete":[]}]}},"915297d6317e5efb4c4e7c352399ab8651444589":{"changes":{"packages\/plugin\/tests\/unit\/grid-spec.ts":"MODIFY","packages\/element\/package.json":"MODIFY","packages\/plugin\/package.json":"MODIFY","packages\/plugin\/src\/toolBar\/index.ts":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/pc\/src\/graph\/graph.ts":"MODIFY","packages\/core\/package.json":"MODIFY","packages\/pc\/src\/graph\/controller\/layout.ts":"MODIFY","packages\/site\/package.json":"MODIFY","CHANGELOG.md":"MODIFY","packages\/plugin\/tests\/unit\/legend-spec.ts":"MODIFY","packages\/pc\/src\/global.ts":"MODIFY","packages\/pc\/tests\/unit\/graph\/svg-spec.ts":"MODIFY","packages\/plugin\/src\/legend\/index.ts":"MODIFY","packages\/core\/src\/global.ts":"MODIFY","packages\/g6\/src\/index.ts":"MODIFY","packages\/pc\/package.json":"MODIFY","packages\/core\/src\/graph\/graph.ts":"MODIFY"},"diff":{"packages\/plugin\/tests\/unit\/grid-spec.ts":[{"add":["42","    const width = (800 * 80) \/ minZoom; \/\/ 3200000","43","    const height = (600 * 80) \/ minZoom; \/\/ 2400000","44","    expect(gridContainer.style.width).toBe('3.2e+06px'); \/\/ width","45","    expect(gridContainer.style.height).toBe('2.4e+06px'); \/\/ height","46","    expect(gridContainer.style.left).toEqual('-1.6e+06px'); \/\/ -width . 2","47","    expect(gridContainer.style.top).toEqual('-1.2e+06px'); \/\/ -height \/ 2","53","    expect(gridContainer.style.left).toEqual('-1.6e+06px'); \/\/ -width . 2","54","    expect(gridContainer.style.top).toEqual('-1.2e+06px'); \/\/ -height \/ 2","58","    expect(gridContainer.style.left).toEqual('-1.6e+06px'); \/\/ -width . 2","59","    expect(gridContainer.style.top).toEqual('-1.2e+06px'); \/\/ -height \/ 2","65","    expect(gridContainer.style.left).toEqual('-1.6e+06px'); \/\/ -width . 2","66","    expect(gridContainer.style.top).toEqual('-1.2e+06px'); \/\/ -height \/ 2","72","    expect(gridContainer.style.left).toEqual('-1.6e+06px'); \/\/ -width . 2","73","    expect(gridContainer.style.top).toEqual('-1.2e+06px'); \/\/ -height \/ 2"],"delete":["42","    const width = (800 * 80) \/ minZoom;","43","    const height = (600 * 80) \/ minZoom;","44","    expect(gridContainer.style.width).toBe(`${width}px`);","45","    expect(gridContainer.style.height).toBe(`${height}px`);","46","    expect(gridContainer.style.left).toEqual(`-${width \/ 2}px`);","47","    expect(gridContainer.style.top).toEqual(`-${height \/ 2}px`);","53","    expect(gridContainer.style.left).toEqual(`-${width \/ 2}px`);","54","    expect(gridContainer.style.top).toEqual(`-${height \/ 2}px`);","58","    expect(gridContainer.style.left).toEqual(`-${width \/ 2}px`);","59","    expect(gridContainer.style.top).toEqual(`-${height \/ 2}px`);","65","    expect(gridContainer.style.left).toEqual(`-${width \/ 2}px`);","66","    expect(gridContainer.style.top).toEqual(`-${height \/ 2}px`);","72","    expect(gridContainer.style.left).toEqual(`-${width \/ 2}px`);","73","    expect(gridContainer.style.top).toEqual(`-${height \/ 2}px`);"]}],"packages\/element\/package.json":[{"add":["2","  \"version\": \"0.6.17\",","63","    \"@antv\/g6-core\": \"0.6.17\","],"delete":["2","  \"version\": \"0.6.16\",","63","    \"@antv\/g6-core\": \"0.6.16\","]}],"packages\/plugin\/package.json":[{"add":["2","  \"version\": \"0.6.17\",","24","    \"@antv\/g6-core\": \"0.6.17\",","25","    \"@antv\/g6-element\": \"0.6.17\","],"delete":["2","  \"version\": \"0.6.16\",","24","    \"@antv\/g6-core\": \"0.6.16\",","25","    \"@antv\/g6-element\": \"0.6.16\","]}],"packages\/plugin\/src\/toolBar\/index.ts":[{"add":["259","              delete model.id;","351","              delete model.id;"],"delete":[]}],"packages\/g6\/package.json":[{"add":["2","  \"version\": \"4.6.17\",","68","    \"@antv\/g6-pc\": \"0.6.17\""],"delete":["2","  \"version\": \"4.6.16\",","68","    \"@antv\/g6-pc\": \"0.6.16\""]}],"packages\/pc\/src\/graph\/graph.ts":[{"add":["417","    self.stopAnimate();"],"delete":["417","","418","    if (self.isAnimating()) {","419","      self.stopAnimate();","420","    }"]}],"packages\/core\/package.json":[{"add":["2","  \"version\": \"0.6.17\","],"delete":["2","  \"version\": \"0.6.16\","]}],"packages\/pc\/src\/graph\/controller\/layout.ts":[{"add":["307","      graph.refreshPositions();"],"delete":["307","      this.refreshLayout();"]}],"packages\/site\/package.json":[{"add":["3","  \"version\": \"4.6.17\",","38","    \"@antv\/g6\": \"4.6.17\","],"delete":["3","  \"version\": \"4.6.16\",","38","    \"@antv\/g6\": \"4.6.16\","]}],"CHANGELOG.md":[{"add":["2","#### 4.6.17","3","","4","- fix: legend changeData problem, closes: #3561;","5","- fix: redo and undo with an image node, closes: #3782;","6","- fix: call refreshPositions instead of positionsAnimate while there is no layout configuration;","7",""],"delete":[]}],"packages\/plugin\/tests\/unit\/legend-spec.ts":[{"add":["183","","217","","266","","288","","333","","339","","344","  it('legend changeData', () => {","345","    const typeConfigs = {","346","      'type1': {","347","        type: 'circle',","348","        size: 5,","349","        style: {","350","          fill: '#5B8FF9'","351","        }","352","      },","353","      'type2': {","354","        type: 'circle',","355","        size: 20,","356","        style: {","357","          fill: '#5AD8A6'","358","        }","359","      },","360","      'type3': {","361","        type: 'rect',","362","        size: [10, 10],","363","        style: {","364","          fill: '#5D7092'","365","        }","366","      },","367","      'eType1': {","368","        type: 'line',","369","        style: {","370","          width: 20,","371","          stroke: '#F6BD16',","372","        }","373","      },","374","      'eType2': {","375","        type: 'cubic',","376","      },","377","      'eType3': {","378","        type: 'quadratic',","379","        style: {","380","          width: 25,","381","          stroke: '#6F5EF9'","382","        }","383","      }","384","    }","385","    const legendData = {","386","      nodes: [{","387","        id: 'type1',","388","        label: 'node-type1',","389","        order: 4,","390","        ...typeConfigs['type1']","391","      }, {","392","        id: 'type2',","393","        label: 'node-type2',","394","        order: 0,","395","        ...typeConfigs['type2']","396","      }, {","397","        id: 'type3',","398","        label: 'node-type3',","399","        order: 2,","400","        ...typeConfigs['type3']","401","      }],","402","      edges: [{","403","        id: 'eType1',","404","        label: 'edge-type1',","405","        order: 2,","406","        ...typeConfigs['eType1']","407","      }, {","408","        id: 'eType2',","409","        label: 'edge-type2',","410","        ...typeConfigs['eType2']","411","      }, {","412","        id: 'eType3',","413","        label: 'edge-type3',","414","        ...typeConfigs['eType3']","415","      }]","416","    }","417","    const legend = new Legend({","418","      data: legendData,","419","      align: 'center',","420","      layout: 'horizontal', \/\/ vertical","421","      position: 'bottom-right',","422","      vertiSep: 12,","423","      horiSep: 24,","424","      offsetY: -24,","425","      padding: [4, 16, 8, 16],","426","      containerStyle: {","427","        fill: '#ccc',","428","        lineWidth: 1","429","      },","430","      title: 'Legend',","431","      titleConfig: {","432","        position: 'center',","433","        offsetX: 0,","434","        offsetY: 12,","435","      },","436","      filter: {","437","        enable: true,","438","        multiple: true,","439","        trigger: 'click',","440","        graphActiveState: 'activeByLegend',","441","        graphInactiveState: 'inactiveByLegend',","442","        filterFunctions: {","443","          'type1': (d) => {","444","            if (d.legendType === 'type1') return true;","445","            return false","446","          },","447","          'type2': (d) => {","448","            if (d.legendType === 'type2') return true;","449","            return false","450","          },","451","          'type3': (d) => {","452","            if (d.legendType === 'type3') return true;","453","            return false","454","          },","455","          'eType1': (d) => {","456","            if (d.legendType === 'eType1') return true;","457","            return false","458","          },","459","          'eType2': (d) => {","460","            if (d.legendType === 'eType2') return true;","461","            return false","462","          },","463","          'eType3': (d) => {","464","            if (d.legendType === 'eType3') return true;","465","            return false","466","          },","467","        }","468","      }","469","    });","470","","471","    const graph = new G6.Graph({","472","      container: div,","473","      width: 400,","474","      height: 400,","475","      plugins: [legend],","476","      modes: {","477","        default: ['drag-canvas', 'zoom-canvas', 'drag-node']","478","      },","479","      edgeStateStyles: {","480","        active: {","481","          lineWidth: 3","482","        },","483","        inactive: {","484","          opacity: 0.5","485","        }","486","      }","487","    });","488","    graph.read(data);","489","    const legendCanvas = legend.get('legendCanvas');","490","    let legendRoot = legendCanvas.find(e => e.get('name') === 'root');","491","    let nodesGroup = legendRoot.find(e => e.get('name') === 'node-group')","492","    let edgesGroup = legendRoot.find(e => e.get('name') === 'edge-group')","493","    expect(nodesGroup.get('children').length).toBe(3);","494","    expect(edgesGroup.get('children').length).toBe(3);","495","","496","    legend.changeData({","497","      nodes: [{","498","        id: 'type1',","499","        label: 'node-type1',","500","        order: 4,","501","        ...typeConfigs['type1']","502","      }],","503","      edges: [{","504","        id: 'eType1',","505","        label: 'edge-type1',","506","        order: 2,","507","        ...typeConfigs['eType1']","508","      }]","509","    });","510","    legendRoot = legendCanvas.find(e => e.get('name') === 'root');","511","    nodesGroup = legendRoot.find(e => e.get('name') === 'node-group')","512","    edgesGroup = legendRoot.find(e => e.get('name') === 'edge-group')","513","    expect(nodesGroup.get('children').length).toBe(1);","514","    expect(edgesGroup.get('children').length).toBe(1);","515","    graph.destroy();","516","  });"],"delete":["183","      ","217","      ","266","  ","288","      ","333","      ","339","      "]}],"packages\/pc\/src\/global.ts":[{"add":["9","  version: '0.6.17',"],"delete":["9","  version: '0.6.16',"]}],"packages\/pc\/tests\/unit\/graph\/svg-spec.ts":[{"add":["2535","    const width = (500 * 80) \/ minZoom; \/\/ 2000000","2536","    const height = (500 * 80) \/ minZoom; \/\/ 2000000","2537","    expect(gridDom.style.width).toBe(\"2e+06px\");","2538","    expect(gridDom.style.height).toBe(\"2e+06px\");"],"delete":["2535","    const width = (500 * 80) \/ minZoom;","2536","    const height = (500 * 80) \/ minZoom;","2537","    expect(gridDom.style.width).toBe(`${width}px`);","2538","    expect(gridDom.style.height).toBe(`${height}px`);"]}],"packages\/plugin\/src\/legend\/index.ts":[{"add":["351","    } else {","352","      lc.clear();","354","    const group = lc.addGroup({ name: 'root' });","355","    const nodeGroup = group.addGroup({ name: 'node-group' });","356","    const edgeGroup = group.addGroup({ name: 'edge-group' });","357","    this.set('legendCanvas', lc);","358",""],"delete":["351","      const rootGroup = lc.addGroup({ name: 'root' });","352","      rootGroup.addGroup({ name: 'node-group' });","353","      rootGroup.addGroup({ name: 'edge-group' });","354","      \/\/ nodeStateStyles: {","355","      \/\/   legendActive,","356","      \/\/   legendInactive","357","      \/\/ }","358","      this.set('legendCanvas', lc);","360","    const group = lc.find(e => e.get('name') === 'root');","361","    const nodeGroup = group.find(e => e.get('name') === 'node-group');","362","    const edgeGroup = group.find(e => e.get('name') === 'edge-group')"]}],"packages\/core\/src\/global.ts":[{"add":["66","  version: '0.6.17',"],"delete":["66","  version: '0.6.16',"]}],"packages\/g6\/src\/index.ts":[{"add":["2","G6.version = '4.6.17';","6","export const version = '4.6.17';"],"delete":["2","G6.version = '4.6.16';","6","export const version = '4.6.16';"]}],"packages\/pc\/package.json":[{"add":["2","  \"version\": \"0.6.17\",","77","    \"@antv\/g6-core\": \"0.6.17\",","78","    \"@antv\/g6-element\": \"0.6.17\",","79","    \"@antv\/g6-plugin\": \"0.6.17\","],"delete":["2","  \"version\": \"0.6.16\",","77","    \"@antv\/g6-core\": \"0.6.16\",","78","    \"@antv\/g6-element\": \"0.6.16\",","79","    \"@antv\/g6-plugin\": \"0.6.16\","]}],"packages\/core\/src\/graph\/graph.ts":[{"add":["2249","    self.stopAnimate();","2253","    self.animating = true;","2380","    if (this.isAnimating()) {","2381","      this.get('canvas').stopAnimate();","2382","    }"],"delete":["2249","    if (self.isAnimating()) {","2250","      self.stopAnimate();","2251","    }","2381","    this.get('canvas').stopAnimate();"]}]}},"a6ac63f849bb4a986d2da633fe19b020a40fd139":{"changes":{"stories\/Shape\/component\/polyline.tsx":"MODIFY","src\/layout\/dagre.ts":"MODIFY","src\/shape\/edges\/polyline.ts":"MODIFY"},"diff":{"stories\/Shape\/component\/polyline.tsx":[{"add":["5","","8","    {","9","      id: \"1\",","10","      dataType: \"alps\",","11","      name: \"alps_file1\",","12","      conf: [","13","        {","14","          label: \"conf\",","15","          value: \"pai_graph.conf\"","16","        },","17","        {","18","          label: \"dot\",","19","          value: \"pai_graph.dot\"","20","        },","21","        {","22","          label: \"init\",","23","          value: \"init.rc\"","24","        }","25","      ]","26","    },","27","    {","28","      id: \"2\",","29","      dataType: \"alps\",","30","      name: \"alps_file2\",","31","      conf: [","32","        {","33","          label: \"conf\",","34","          value: \"pai_graph.conf\"","35","        },","36","        {","37","          label: \"dot\",","38","          value: \"pai_graph.dot\"","39","        },","40","        {","41","          label: \"init\",","42","          value: \"init.rc\"","43","        }","44","      ]","45","    },","46","    {","47","      id: \"3\",","48","      dataType: \"alps\",","49","      name: \"alps_file3\",","50","      conf: [","51","        {","52","          label: \"conf\",","53","          value: \"pai_graph.conf\"","54","        },","55","        {","56","          label: \"dot\",","57","          value: \"pai_graph.dot\"","58","        },","59","        {","60","          label: \"init\",","61","          value: \"init.rc\"","62","        }","63","      ]","64","    },","65","    {","66","      id: \"4\",","67","      dataType: \"sql\",","68","      name: \"sql_file1\",","69","      conf: [","70","        {","71","          label: \"conf\",","72","          value: \"pai_graph.conf\"","73","        },","74","        {","75","          label: \"dot\",","76","          value: \"pai_graph.dot\"","77","        },","78","        {","79","          label: \"init\",","80","          value: \"init.rc\"","81","        }","82","      ]","83","    },","84","    {","85","      id: \"5\",","86","      dataType: \"sql\",","87","      name: \"sql_file2\",","88","      conf: [","89","        {","90","          label: \"conf\",","91","          value: \"pai_graph.conf\"","92","        },","93","        {","94","          label: \"dot\",","95","          value: \"pai_graph.dot\"","96","        },","97","        {","98","          label: \"init\",","99","          value: \"init.rc\"","100","        }","101","      ]","102","    },","103","    {","104","      id: \"6\",","105","      dataType: \"feature_etl\",","106","      name: \"feature_etl_1\",","107","      conf: [","108","        {","109","          label: \"conf\",","110","          value: \"pai_graph.conf\"","111","        },","112","        {","113","          label: \"dot\",","114","          value: \"pai_graph.dot\"","115","        },","116","        {","117","          label: \"init\",","118","          value: \"init.rc\"","119","        }","120","      ]","121","    },","122","    {","123","      id: \"7\",","124","      dataType: \"feature_etl\",","125","      name: \"feature_etl_1\",","126","      conf: [","127","        {","128","          label: \"conf\",","129","          value: \"pai_graph.conf\"","130","        },","131","        {","132","          label: \"dot\",","133","          value: \"pai_graph.dot\"","134","        },","135","        {","136","          label: \"init\",","137","          value: \"init.rc\"","138","        }","139","      ]","140","    },","141","    {","142","      id: \"8\",","143","      dataType: \"feature_extractor\",","144","      name: \"feature_extractor\",","145","      conf: [","146","        {","147","          label: \"conf\",","148","          value: \"pai_graph.conf\"","149","        },","150","        {","151","          label: \"dot\",","152","          value: \"pai_graph.dot\"","153","        },","154","        {","155","          label: \"init\",","156","          value: \"init.rc\"","157","        }","158","      ]","159","    }","162","    {","163","      source: \"1\",","164","      target: \"1\",","165","      type: \"loop\",","166","      \/\/ controlPoints: [{x: 50, y: 100}]","167","    },","168","    {","169","      source: \"1\",","170","      target: \"2\"","171","    },","172","    {","173","      source: \"1\",","174","      target: \"3\"","175","    },","176","    {","177","      source: \"2\",","178","      target: \"4\"","179","    },","180","    {","181","      source: \"3\",","182","      target: \"4\"","183","    },","184","    {","185","      source: \"4\",","186","      target: \"5\"","187","    },","188","    {","189","      source: \"5\",","190","      target: \"6\"","191","    },","192","    {","193","      source: \"6\",","194","      target: \"7\"","195","    },","196","    {","197","      source: \"6\",","198","      target: \"8\"","199","    }","210","        width: 1000,","211","        height: 800,","213","          type: \"dagre\",","214","          rankdir: \"LR\",","215","          align: \"UL\",","216","          nodesep: 25,","217","          ranksep: 50,","218","          controlPoints: true","221","          type: \"polyline\",","223","            radius: 20,","225","            lineWidth: 2,","226","            stroke: \"#C2C8D5\"","227","          },","228","          loopCfg: {","229","            position: \"left\",","230","            dist: 75,","231","            clockwise: true"],"delete":["7","  {","8","  id: \"2\",","9","  label: \"2\",","10","  },","11","  {","12","  id: \"3\",","13","  label: \"3\",","14","  },","15","  {","16","  id: \"4\",","17","  label: \"4\",","18","  }","21","  \/\/ 配置内置折线的弯折弧度、端点最小距离","22","  {","23","  source: \"2\",","24","  target: \"3\"","25","  },","26","  {","27","  source: \"2\",","28","  target: \"4\"","29","  }","40","        width: 500,","41","        height: 500,","42","        linkCenter: true,","44","          type: \"fruchterman\"","47","          shape: \"polyline\",","49","            radius: 10,","50","            offset: 15,","52","            stroke: \"#F6BD16\""]}],"src\/layout\/dagre.ts":[{"add":["105","      if (self.controlPoints && edges[i].type !== 'loop' && edges[i].shape !== 'loop') {"],"delete":["105","      if (self.controlPoints) {"]}],"src\/shape\/edges\/polyline.ts":[{"add":["74","        path = 'M0 0, L0 0';","77","        path = 'M0 0, L0 0';"],"delete":["74","        path = 'M0 0, L100 100';","77","        path = 'M0 0, L100 100';"]}]}},"fafb3e32982d128dde597d4c22a68fa73bdff8be":{"changes":{"packages\/core\/tests\/unit\/combo-animate-spec.ts":"MODIFY","CHANGELOG.md":"MODIFY","packages\/core\/src\/graph\/graph.ts":"MODIFY"},"diff":{"packages\/core\/tests\/unit\/combo-animate-spec.ts":[{"add":["256","  it('uncombo with id', () => {","257","    const graph = new Graph({","258","      container: div,","259","      width: 500,","260","      height: 600,","261","      fitCenter: true,","262","      groupByTypes: false,","263","    });","264","","265","    graph.read({","266","      nodes: [","267","        { id: 'node1', x: 250, y: 150, comboId: 'combo' },","268","        { id: 'node2', x: 350, y: 150, comboId: 'combo2' },","269","      ],","270","      combos: [","271","        { id: 'combo', label: 'Combo' },","272","        { id: 'combo2', label: 'Combo2' },","273","      ]","274","    });","275","","276","    graph.uncombo('combo');","277","    const newData = graph.save();","278","    expect(newData.combos.length).toBe(1);","279","  })"],"delete":[]}],"CHANGELOG.md":[{"add":["2","#### 4.3.3","3","","4","- fix: uncombo with id, closes: #2924;","5",""],"delete":[]}],"packages\/core\/src\/graph\/graph.ts":[{"add":["1622","          const index = comboItems.indexOf(comboItem);"],"delete":["1622","          const index = comboItems.indexOf(combo);"]}]}},"35bbc3f987db4ae7c2cd9b7b133e581a8f428ca2":{"changes":{"packages\/element\/package.json":"MODIFY","packages\/plugin\/package.json":"MODIFY","packages\/core\/src\/item\/item.ts":"MODIFY","packages\/pc\/tests\/unit\/element\/edge-label-back-spec.ts":"MODIFY","packages\/site\/examples\/case\/treeDemos\/demo\/decisionTree.js":"MODIFY","packages\/pc\/src\/behavior\/create-edge.ts":"MODIFY","packages\/core\/src\/element\/edge.ts":"MODIFY","packages\/plugin\/src\/legend\/index.ts":"MODIFY","packages\/site\/examples\/case\/treeDemos\/index.en.md":"MODIFY","packages\/core\/src\/global.ts":"MODIFY","packages\/core\/src\/element\/shapeBase.ts":"MODIFY","packages\/pc\/package.json":"MODIFY","packages\/core\/src\/element\/node.ts":"MODIFY","packages\/site\/examples\/case\/treeDemos\/demo\/meta.json":"MODIFY","packages\/site\/examples\/case\/treeDemos\/index.zh.md":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/core\/package.json":"MODIFY","packages\/element\/src\/nodes\/modelRect.ts":"MODIFY","packages\/site\/package.json":"MODIFY","CHANGELOG.md":"MODIFY","packages\/pc\/tests\/unit\/behavior\/drag-node-spec.ts":"MODIFY","packages\/pc\/src\/global.ts":"MODIFY","packages\/core\/src\/item\/node.ts":"MODIFY","packages\/pc\/tests\/unit\/element\/nodes\/icon-iconfont-spec.ts":"MODIFY","packages\/g6\/src\/index.ts":"MODIFY","packages\/site\/examples\/case\/treeDemos\/demo\/indentedTree.js":"ADD","packages\/site\/examples\/tool\/fisheye\/demo\/fisheyeStyle.js":"MODIFY"},"diff":{"packages\/element\/package.json":[{"add":["2","  \"version\": \"0.5.2\",","63","    \"@antv\/g6-core\": \"*\","],"delete":["2","  \"version\": \"0.5.1\",","63","    \"@antv\/g6-core\": \"0.5.1\","]}],"packages\/plugin\/package.json":[{"add":["2","  \"version\": \"0.5.2\",","24","    \"@antv\/g6-core\": \"*\","],"delete":["2","  \"version\": \"0.5.1\",","24","    \"@antv\/g6-core\": \"0.5.1\","]}],"packages\/core\/src\/item\/item.ts":[{"add":["212","      for (let i = 0; i < children.length; i++) {","259","      for (let i = 0; i < children.length; i++) {","368","  protected beforeDraw() { }","373","  protected afterDraw() { }","378","  protected afterUpdate() { }","645",""],"delete":["212","      for (let i = 0; i < children.length; i ++) {","259","      for (let i = 0; i < children.length; i ++) {","368","  protected beforeDraw() {}","373","  protected afterDraw() {}","378","  protected afterUpdate() {}","645","      "]}],"packages\/pc\/tests\/unit\/element\/edge-label-back-spec.ts":[{"add":["15","  const data = {","16","    nodes: [","17","      {","18","        id: 'node1',","19","        x: 150,","20","        y: 50,","21","        label: 'node1',","23","      {","24","        id: 'node2',","25","        x: 250,","26","        y: 200,","27","        label: 'node2',","28","      },","29","      {","30","        id: 'node3',","31","        x: 100,","32","        y: 350,","33","        label: 'node3',","34","      },","35","    ],","36","    edges: [","37","      {","38","        source: 'node1',","39","        target: 'node2',","40","        label: 'edge 1',","41","      },","42","      {","43","        source: 'node2',","44","        target: 'node3',","45","        label: 'edge 2asdfasdfasdfasdf',","47","          position: 'end',","48","          refX: 10,","49","          refY: -20,","51","            textBaseline: 'bottom'","52","          }","53","        }","54","      },","55","      {","56","        source: 'node3',","57","        target: 'node1',","58","        label: 'edge 3',","59","      },","60","    ],","61","  };","62","","63","  const graph = new Graph({","64","    container: 'edge-shape',","65","    width: 500,","66","    height: 500,","67","    \/\/ translate the graph to align the canvas's center, support by v3.5.1","68","    \/\/ fitCenter: true,","69","    defaultNode: {","70","      type: 'circle',","71","      labelCfg: {","72","        position: 'bottom',","73","      },","74","    },","75","    defaultEdge: {","76","      labelCfg: {","77","        autoRotate: true,","78","        style: {","79","          fill: '#1890ff',","80","          fontSize: 14,","81","          background: {","82","            fill: '#ffffff',","83","            stroke: '#9EC9FF',","84","            padding: [2, 2, 2, 2],","85","            radius: 2,","89","    },","90","    modes: {","91","      default: ['drag-canvas', 'drag-node', 'activate-relations'],","92","    },","93","    nodeStateStyles: {","94","      \/\/ style configurations for hover state","95","      hover: {","96","        fillOpacity: 0.8,","98","      \/\/ style configurations for selected state","99","      selected: {","100","        lineWidth: 5,","102","    },","103","  });","104","  graph.data(data);","105","  graph.render();","106","  it('text background label', done => {","137","  it('text background with autoRotate false and clearItemStates', () => {","138","    let edge = graph.getEdges()[0];","139","    let labelBgShape = edge.getContainer().get('children')[1];","140","    let { x, y } = labelBgShape.attr();","141","    console.log('xy', x, y);","142","    expect(labelBgShape.attr().x).toBe(176.85302734375);","143","    expect(labelBgShape.attr().y).toBe(116);","144","","145","    graph.updateItem(graph.getNodes()[0], {","146","      x: graph.getNodes()[0].getModel().x + 100,","147","      y: graph.getNodes()[0].getModel().y + 100,","148","    });","149","    graph.clearItemStates(edge, ['active']);","150","","151","    labelBgShape = edge.getContainer().get('children')[1];","152","    { x, y } = labelBgShape.attr();","153","    expect(labelBgShape.attr().x).toBe(226.85302734375);","154","    expect(labelBgShape.attr().y).toBe(166);","155","  });"],"delete":["15","  it('text background label', done => {","16","    const data = {","17","      nodes: [","18","        {","19","          id: 'node1',","20","          x: 150,","21","          y: 50,","22","          label: 'node1',","23","        },","24","        {","25","          id: 'node2',","26","          x: 250,","27","          y: 200,","28","          label: 'node2',","29","        },","30","        {","31","          id: 'node3',","32","          x: 100,","33","          y: 350,","34","          label: 'node3',","35","        },","36","      ],","37","      edges: [","38","        {","39","          source: 'node1',","40","          target: 'node2',","41","          label: 'edge 1',","42","        },","43","        {","44","          source: 'node2',","45","          target: 'node3',","46","          label: 'edge 2asdfasdfasdfasdf',","47","          labelCfg: {","48","            position: 'end',","49","            refX: 10,","50","            refY: -20,","51","            style: {","52","              textBaseline: 'bottom'","53","            }","54","          }","55","        },","56","        {","57","          source: 'node3',","58","          target: 'node1',","59","          label: 'edge 3',","60","        },","61","      ],","62","    };","63","","64","    const graph = new Graph({","65","      container: 'edge-shape',","66","      width: 500,","67","      height: 500,","68","      \/\/ translate the graph to align the canvas's center, support by v3.5.1","69","      \/\/ fitCenter: true,","70","      defaultNode: {","71","        type: 'circle',","72","        labelCfg: {","73","          position: 'bottom',","74","        },","76","      defaultEdge: {","78","          autoRotate: true,","80","            fill: '#1890ff',","81","            fontSize: 14,","82","            background: {","83","              fill: '#ffffff',","84","              stroke: '#9EC9FF',","85","              padding: [2, 2, 2, 2],","86","              radius: 2,","87","            },","91","      modes: {","92","        default: ['drag-canvas', 'drag-node'],","94","      nodeStateStyles: {","95","        \/\/ style configurations for hover state","96","        hover: {","97","          fillOpacity: 0.8,","98","        },","99","        \/\/ style configurations for selected state","100","        selected: {","101","          lineWidth: 5,","102","        },","104","    });","105","    graph.data(data);","106","    graph.render();"]}],"packages\/site\/examples\/case\/treeDemos\/demo\/decisionTree.js":[{"add":["3","\/\/ 我们用 insert-css 演示引入自定义样式","4","\/\/ 推荐将样式添加到自己的样式文件中","5","\/\/ 若拷贝官方代码，别忘了 npm install insert-css","282","          rate","284","","459","        const { level, status, name } = cfg;","461","        let mask = group.find(ele => ele.get('name') === 'mask-shape');","462","        let maskLabel = group.find(ele => ele.get('name') === 'mask-label-shape');","463","        if (level === 0) {","464","          group.get('children').forEach(child => {","465","            if (child.get('name')?.includes('collapse')) return;","466","            child.hide();","467","          })","468","          if (!mask) {","469","            mask = group.addShape('rect', {","470","              attrs: {","471","                x: -101,","472","                y: -30,","473","                width: 202,","474","                height: 60,","475","                opacity: 0,","476","                fill: colors[status]","477","              },","478","              name: 'mask-shape',","479","            });","480","            maskLabel = group.addShape('text', {","481","              attrs: {","482","                fill: '#fff',","483","                fontSize: 20,","484","                x: 0,","485","                y: 10,","486","                text: name.length > 28 ? name.substr(0, 16) + '...' : name,","487","                textAlign: 'center',","488","                opacity: 0,","489","              },","490","              name: 'mask-label-shape',","491","            });","492","            const collapseRect = group.find(ele => ele.get('name') === 'collapse-back');","493","            const collapseText = group.find(ele => ele.get('name') === 'collapse-text');","494","            collapseRect?.toFront();","495","            collapseText?.toFront();","496","          } else {","497","            mask.show();","498","            maskLabel.show();","499","          }","500","          mask.animate({ opacity: 1 }, 200);","501","          maskLabel.animate({ opacity: 1 }, 200);","502","          return mask;","503","        } else {","504","          group.get('children').forEach(child => {","505","            if (child.get('name')?.includes('collapse')) return;","506","            child.show();","507","          })","508","          mask?.animate({ opacity: 0 }, {","509","            duration: 200,","510","            callback: () => mask.hide()","511","          });","512","          maskLabel?.animate({ opacity: 0 }, {","513","            duration: 200,","514","            callback: () => maskLabel.hide()","515","          });","516","        }","619","      if (e.target.get('name') === 'name-shape' || e.target.get('name') === 'mask-label-shape') return true;","650","","651","  \/\/ 监听画布缩放，缩小到一定程度，节点显示缩略样式","652","  let currentLevel = 1;","653","  const briefZoomThreshold = Math.max(graph.getZoom(), 0.5);","654","  graph.on('viewportchange', e => {","655","    if (e.action !== 'zoom') return;","656","    const currentZoom = graph.getZoom();","657","    let toLevel = currentLevel;","658","    if (currentZoom < briefZoomThreshold) {","659","      toLevel = 0;","660","    } else {","661","      toLevel = 1;","662","    }","663","    if (toLevel !== currentLevel) {","664","      currentLevel = toLevel;","665","      graph.getNodes().forEach(node => {","666","        graph.updateItem(node, {","667","          level: toLevel","668","        })","669","      })","670","    }","671","  });"],"delete":["279","          rate,","282","        \/\/ 逻辑不应该在这里判断","559","      if (e.target.get('name') === 'name-shape') return true;","574","  graph.zoom(config.defaultZoom || 1);"]}],"packages\/pc\/src\/behavior\/create-edge.ts":[{"add":["158","    if (self.edge && self.edge.destroyed) self.cancelCreating({ item: self.edge });","183","    if (self.addingEdge && (self.edge === currentEdge || ev.target?.isCanvas?.())) {","184","      if (self.edge && !self.edge.destroyed) graph.removeItem(self.edge, false);"],"delete":["182","    if (self.addingEdge && ev.target && ev.target.isCanvas && ev.target.isCanvas()) {","183","      graph.removeItem(self.edge, false);","188","    if (self.addingEdge && self.edge === currentEdge) {","189","      graph.removeItem(self.edge, false);","190","      self.edge = null;","191","      self.addingEdge = false;","192","    }"]}],"packages\/core\/src\/element\/edge.ts":[{"add":["322","      labelRelated: true","343","    const rect = group.addShape('rect', { name: 'text-bg-shape', attrs: style, labelRelated: true });"],"delete":["342","    const rect = group.addShape('rect', { name: 'text-bg-shape', attrs: style });"]}],"packages\/plugin\/src\/legend\/index.ts":[{"add":["119","      switch (pos) {","364","    const itemTypes = ['nodes', 'edges'];","373","        switch (data.type) {","524","      else edgeGroupMatrix[7] += (nodeGroupMatrix[7] + nodeGroupBBox.maxY + this.get('vertiSep'));","597","      cNodeGroup.setMatrix([1, 0, 0, 0, 1, 0, x, y, 1]);","618","        subGroup.setMatrix([1, 0, 0, 0, 1, 0, 0, y + keyShapeHeight \/ 2, 1]);","623","        subGroup.setMatrix([1, 0, 0, 0, 1, 0, x + keyShapeWidth \/ 2, 0, 1]);","711","      switch (value.length) {"],"delete":["119","      switch(pos) {","364","    const itemTypes = [ 'nodes', 'edges' ];","373","        switch(data.type) {","524","      else edgeGroupMatrix[7] += (nodeGroupMatrix[7] +nodeGroupBBox.maxY + this.get('vertiSep'));","597","      cNodeGroup.setMatrix([ 1, 0, 0, 0, 1, 0, x, y, 1 ]);","618","        subGroup.setMatrix([ 1, 0, 0, 0, 1, 0, 0, y + keyShapeHeight \/ 2, 1 ]);","623","        subGroup.setMatrix([ 1, 0, 0, 0, 1, 0, x + keyShapeWidth \/ 2, 0, 1 ]);","711","      switch(value.length) {"]}],"packages\/site\/examples\/case\/treeDemos\/index.en.md":[{"add":["15","This demo shows a decision tree that organize event items. It is useful for project risk assessment, feasibility decision analysis, and other decision cases. It supports collapse, expand, hover the title to show tooltip, etc. And with the zoom ratio changing, the node will automatically switch between detail mode and brief mode.","22","### Indented File Graph","23","","24","#### Definition","25","","26","This demo combines file system view and node-link graph visualization. It demonstrates the hierarchy and and affiliation well. It supports branch draging, child node adding, branch collapsing or expanding, etc.","27",""],"delete":["15","This demo shows a decision tree that organize event items. It is useful for project risk assessment, feasibility decision analysis, and other decision cases. It supports collapse, expand, hover the title to show tooltip, etc."]}],"packages\/core\/src\/global.ts":[{"add":["66","  version: '0.5.2',"],"delete":["66","  version: '0.5.1',"]}],"packages\/core\/src\/element\/shapeBase.ts":[{"add":["133","      labelRelated: true","192","    const rect = group.addShape('rect', { name: 'text-bg-shape', attrs: style, labelRelated: true });","359","    const keptAttrs: any = { x: 1, y: 1, cx: 1, cy: 1, matrix: 1 };","476","            if (subShape.get('type') === 'text' || subShape.get('labelRelated')) {"],"delete":["191","    const rect = group.addShape('rect', { name: 'text-bg-shape', attrs: style });","358","    const keptAttrs: any = { x: 1, y: 1, cx: 1, cy: 1 };","475","            if (subShape.get('type') === 'text') {"]}],"packages\/pc\/package.json":[{"add":["2","  \"version\": \"0.5.2\",","76","    \"@antv\/g6-core\": \"*\",","77","    \"@antv\/g6-plugin\": \"*\",","78","    \"@antv\/g6-element\": \"*\","],"delete":["2","  \"version\": \"0.5.1\",","76","    \"@antv\/g6-core\": \"0.5.1\",","77","    \"@antv\/g6-plugin\": \"0.5.1\",","78","    \"@antv\/g6-element\": \"0.5.1\","]}],"packages\/core\/src\/element\/node.ts":[{"add":["294","    const { show, text } = cfg.icon ? cfg.icon : { show: undefined, text: undefined };","318","      if (text) {","319","        group['shapeMap'][name] = group.addShape('text', {","320","          attrs: {","321","            x: 0,","322","            y: 0,","323","            fontSize: 12,","324","            fill: '#000',","325","            stroke: '#000',","326","            textBaseline: 'middle',","327","            textAlign: 'center',","328","            ...icon,","329","          },","330","          className: name,","331","          name,","332","        });","333","      } else {","334","        let { width: w, height: h } = icon;","335","        group['shapeMap'][name] = group.addShape('image', {","336","          attrs: {","337","            ...icon,","338","            x: -w! \/ 2,","339","            y: -h! \/ 2,","340","          },","341","          className: name,","342","          name,","343","        });","344","      }"],"delete":["294","    const { show } = cfg.icon ? cfg.icon : { show: undefined };","317","      let { width: w, height: h } = icon;","318","      if (icon.fontFamily === 'iconfont') {","319","        w = 0;","320","        h = 0;","321","      }","323","      group['shapeMap'][name] = group.addShape('image', {","324","        attrs: {","325","          ...icon,","326","          x: -w! \/ 2,","327","          y: -h! \/ 2,","328","        },","329","        className: name,","330","        name,","331","      });"]}],"packages\/site\/examples\/case\/treeDemos\/demo\/meta.json":[{"add":["31","      \"filename\": \"indentedTree.js\",","32","      \"title\": {","33","        \"zh\": \"缩进文件树\",","34","        \"en\": \"Indented File Tree\"","35","      },","36","      \"screenshot\": \"https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*9EHDSZVmLVgAAAAAAAAAAAAAARQnAQ\"","37","    },","38","    {","55","}"],"delete":["47","}"]}],"packages\/site\/examples\/case\/treeDemos\/index.zh.md":[{"add":["13","决策树是在已知各种情况的基础上，通过事项构建树状图，根据自己的上下级进行关联，挂接到对应的分支，常用于项目风险评估，可行性的决策分析等场景，是直观运用概率分析的一种图解法。支持展开、收起、悬停、点击等交互。支持根据当前缩放等级，节点切换详情模式与缩略模式。","20","### 缩进文件树","21","","22","#### 定义","23","","24","结合文件树与点线图，能够很好地展示不同类型节点之间的嵌套、从属关系。支持拖拽子树改变结构、收起\/展开子树、增加自节点等编辑功能。","25",""],"delete":["13","决策树是在已知各种情况的基础上，通过事项构建树状图，根据自己的上下级进行关联，挂接到对应的分支，常用于项目风险评估，可行性的决策分析等场景，是直观运用概率分析的一种图解法。支持展开、收起、悬停、点击等交互。"]}],"packages\/g6\/package.json":[{"add":["2","  \"version\": \"4.5.2\",","68","    \"@antv\/g6-pc\": \"*\""],"delete":["2","  \"version\": \"4.5.1\",","68","    \"@antv\/g6-pc\": \"0.5.1\""]}],"packages\/core\/package.json":[{"add":["2","  \"version\": \"0.5.2\","],"delete":["2","  \"version\": \"0.5.1\","]}],"packages\/element\/src\/nodes\/modelRect.ts":[{"add":["322","          labelRelated: true","336","          labelRelated: true","349","          labelRelated: true","427","            labelRelated: true","458","            labelRelated: true"],"delete":[]}],"packages\/site\/package.json":[{"add":["3","  \"version\": \"4.5.2\","],"delete":["3","  \"version\": \"4.5.1\","]}],"CHANGELOG.md":[{"add":["2","#### 4.5.2","3","","4","- fix: node update from no icon to iconfont icon failed;","5","- fix: getUpdateType with type error;","6","- fix: edge label background with clearItemStates problem;","7","- fix: edge label with autoRotate false and padding problem;","8","- fix: changeData in the process of create-edge behavior, an error occurs, closes: #3384;","9",""],"delete":[]}],"packages\/pc\/tests\/unit\/behavior\/drag-node-spec.ts":[{"add":["371","    expect(mathEqual(289, path[1][1])).toEqual(true);","372","    expect(mathEqual(300, path[1][2])).toEqual(true);","373","    graph.emit('node:dragstart', { x: 100, y: 100, item: source });","374","    graph.emit('node:drag', { x: 120, y: 120, item: source });","375","    path = edge","376","      .get('group')","377","      .get('children')[0]","378","      .attr('path');","380","      \/\/ 因为有 delegate，没有 dragend 之前，边不更新","383","      expect(mathEqual(289, path[1][1])).toEqual(true);","384","      expect(mathEqual(300, path[1][2])).toEqual(true);","385","      graph.emit('canvas:drop', { x: 140, y: 140, item: source });","386","      graph.emit('node:dragend', { x: 140, y: 140, item: source });","388","        path = edge","389","          .get('group')","390","          .get('children')[0]","391","          .attr('path');","392","        expect(path[0][1]).toEqual(97.77817459305203);","393","        expect(path[0][2]).toEqual(97.77817459305203);","396","        graph.destroy();","397","        done()","398","      }, 200)","399","    }, 200)"],"delete":["51","    console.log('matrix',matrix)","366","","374","      expect(mathEqual(289, path[1][1])).toEqual(true);","375","      expect(mathEqual(300, path[1][2])).toEqual(true);","376","      graph.emit('node:dragstart', { x: 100, y: 100, item: source });","377","      graph.emit('node:drag', { x: 120, y: 120, item: source });","378","      path = edge","379","        .get('group')","380","        .get('children')[0]","381","        .attr('path');","387","        graph.emit('canvas:drop', { x: 140, y: 140, item: source });","388","        graph.emit('node:dragend', { x: 140, y: 140, item: source });","389","        setTimeout(() => {","390","          path = edge","391","            .get('group')","392","            .get('children')[0]","393","            .attr('path');","394","          expect(path[0][1]).toEqual(97.77817459305203);","395","          expect(path[0][2]).toEqual(97.77817459305203);","396","          setTimeout(() => {","397","            expect(mathEqual(289, path[1][1])).toEqual(true);","398","            expect(mathEqual(300, path[1][2])).toEqual(true);","399","            graph.destroy();","400","            done()","401","          }, 50)","402","        }, 50)","403","      }, 50)","404","    }, 50)"]}],"packages\/pc\/src\/global.ts":[{"add":["9","  version: '0.5.2',"],"delete":["9","  version: '0.5.1',"]}],"packages\/core\/src\/item\/node.ts":[{"add":["237","  public getUpdateType(cfg?: ModelConfig): UpdateType {","270",""],"delete":["237","  public getUpdateType(cfg: ModelConfig): UpdateType {","270","    "]}],"packages\/pc\/tests\/unit\/element\/nodes\/icon-iconfont-spec.ts":[{"add":["29","    graph.on('canvas:click', e => {","30","      graph.updateItem('node', {","31","        icon: {","32","          show: true,","33","          img: undefined,","34","          text: 'xxx'","35","        }","36","      })","37","    })","38","","39","    graph.emit('canvas:click', {});"],"delete":["23","          icon: {","24","            show: true,","25","            img: undefined,","26","            text: 'xxx'","27","          }"]}],"packages\/g6\/src\/index.ts":[{"add":["2","G6.version = '4.5.2';","6","export const version = '4.5.2';"],"delete":["2","G6.version = '4.5.1';","6","export const version = '4.5.1';"]}],"packages\/site\/examples\/case\/treeDemos\/demo\/indentedTree.js":[{"add":[],"delete":[]}],"packages\/site\/examples\/tool\/fisheye\/demo\/fisheyeStyle.js":[{"add":["2","let fisheye = new G6.Fisheye({","39","const switchButton = document.createElement('input');","40","switchButton.type = 'button';","41","switchButton.value = 'Disable';","42","switchButton.style.height = '25px';","43","switchButton.style.width = '100px';","44","switchButton.style.marginLeft = '10px';","45","buttonContainer.appendChild(switchButton);","62","switchButton.addEventListener('click', (e) => {","63","  if (switchButton.value === 'Disable') {","64","    switchButton.value = 'Enable';","67","    switchButton.value = 'Disable';"],"delete":["2","const fisheye = new G6.Fisheye({","39","const swithButton = document.createElement('input');","40","swithButton.type = 'button';","41","swithButton.value = 'Disable';","42","swithButton.style.height = '25px';","43","swithButton.style.width = '100px';","44","swithButton.style.marginLeft = '10px';","45","buttonContainer.appendChild(swithButton);","62","swithButton.addEventListener('click', (e) => {","63","  if (swithButton.value === 'Disable') {","64","    swithButton.value = 'Enable';","67","    swithButton.value = 'Disable';"]}]}},"5407845e420a2bb91ab8bccf72cfea7b9fb33104":{"changes":{"packages\/element\/package.json":"MODIFY","packages\/pc\/tests\/unit\/drag-combo-spec.ts":"ADD","packages\/plugin\/package.json":"MODIFY","packages\/core\/src\/item\/item.ts":"MODIFY","packages\/plugin\/src\/toolBar\/index.ts":"MODIFY","packages\/react-node\/src\/API\/rect.en-US.md":"MODIFY","packages\/pc\/src\/behavior\/drag-combo.ts":"MODIFY","packages\/react-node\/src\/ReactNode\/Group.tsx":"MODIFY","packages\/react-node\/src\/ReactNode\/Shape\/Text.tsx":"MODIFY","packages\/pc\/src\/behavior\/zoom-canvas.ts":"MODIFY","packages\/site\/docs\/api\/Graph.en.md":"MODIFY","packages\/site\/docs\/api\/Graph.zh.md":"MODIFY","packages\/core\/src\/graph\/controller\/view.ts":"MODIFY","packages\/pc\/tests\/unit\/graph\/svg-spec.ts":"MODIFY","packages\/core\/src\/global.ts":"MODIFY","packages\/pc\/tests\/unit\/behavior\/shortcuts-call-spec.ts":"MODIFY","packages\/pc\/package.json":"MODIFY","packages\/pc\/tests\/unit\/graph\/graph-spec.ts":"MODIFY","packages\/core\/src\/interface\/graph.ts":"MODIFY","packages\/core\/src\/util\/graphic.ts":"MODIFY","packages\/react-node\/README.md":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/core\/tests\/unit\/graph\/svg-spec.ts":"MODIFY","packages\/react-node\/docs\/index.en-US.md":"MODIFY","packages\/core\/package.json":"MODIFY","packages\/site\/package.json":"MODIFY","CHANGELOG.md":"MODIFY","packages\/core\/tests\/unit\/graph\/graph-spec.ts":"MODIFY","packages\/react-node\/src\/ReactNode\/Shape\/Rect.tsx":"MODIFY","packages\/pc\/src\/behavior\/drag-canvas.ts":"MODIFY","packages\/pc\/src\/global.ts":"MODIFY","packages\/g6\/src\/index.ts":"MODIFY","packages\/plugin\/src\/tooltip\/index.ts":"MODIFY","packages\/core\/src\/util\/math.ts":"MODIFY","packages\/react-node\/src\/API\/rect.md":"MODIFY","packages\/pc\/src\/behavior\/drag-node.ts":"MODIFY","packages\/core\/src\/graph\/graph.ts":"MODIFY","packages\/react-node\/docs\/index.md":"MODIFY"},"diff":{"packages\/element\/package.json":[{"add":["2","  \"version\": \"0.6.16\",","63","    \"@antv\/g6-core\": \"0.6.16\","],"delete":["2","  \"version\": \"0.6.15\",","63","    \"@antv\/g6-core\": \"0.6.15\","]}],"packages\/pc\/tests\/unit\/drag-combo-spec.ts":[{"add":[],"delete":[]}],"packages\/plugin\/package.json":[{"add":["2","  \"version\": \"0.6.16\",","24","    \"@antv\/g6-core\": \"0.6.16\",","25","    \"@antv\/g6-element\": \"0.6.16\","],"delete":["2","  \"version\": \"0.6.15\",","24","    \"@antv\/g6-core\": \"0.6.15\",","25","    \"@antv\/g6-element\": \"0.6.15\","]}],"packages\/core\/src\/item\/item.ts":[{"add":["98","    if (typeof id === 'undefined') {","100","    } else if (typeof id !== 'string') {","101","      id = String(id);","104","    this.get('model').id = id;"],"delete":["98","    if (!id) {","100","      this.get('model').id = id;"]}],"packages\/plugin\/src\/toolBar\/index.ts":[{"add":["3","import { IAbstractGraph as IGraph, ICombo } from '@antv\/g6-core';","76","  constructor(config?: ToolBarConfig) {","258","              const item = graph.findById(model.id);","259","              graph.updateItem(item, model, false);","260","              if (item.getType() === 'combo') graph.updateCombo(item as ICombo)","297","        case 'layout':","298","          graph.updateLayout(data, undefined, undefined, false);","299","          break;","349","              const item = graph.findById(model.id);","350","              graph.updateItem(item, model, false);","351","              if (item.getType() === 'combo') graph.updateCombo(item as ICombo)","396","        case 'layout':","397","          graph.updateLayout(data, undefined, undefined, false);","398","          break;"],"delete":["3","import { IAbstractGraph as IGraph } from '@antv\/g6-core';","76","  constructor (config?: ToolBarConfig) {","258","              graph.updateItem(model.id, model, false);","344","              graph.updateItem(model.id, model, false);"]}],"packages\/react-node\/src\/API\/rect.en-US.md":[{"add":["22","          draggable"],"delete":["22","          draggable=\"true\""]}],"packages\/pc\/src\/behavior\/drag-combo.ts":[{"add":["7","import { G6Event, IG6GraphEvent, Item, ComboConfig, ICombo, INode, IEdge } from '@antv\/g6-core';","102","    const beforeDragItems = [];","103","    this.targets.forEach(t => {","104","      const { x, y, id } = t.getModel();","105","      beforeDragItems.push({ x, y, id });","106","    });","107","    this.set('beforeDragItems', beforeDragItems);","108","","200","      console.log('updatePositions', this.targets);","344","","345","      const stackData = {","346","        before: { nodes: [], edges: [], combos: [].concat(this.get('beforeDragItems')) },","347","        after: { nodes: [], edges: [], combos: [] },","348","      };","349","","356","          const { x, y, id } = combo.getModel();","357","          stackData.after.combos.push({ x, y, id });","358","          graph.pushStack('update', stackData);","374","  traverse<T extends Item>(data: T, fn: (param: T, cacheMap) => boolean, edgesToBeUpdate = {}) {","375","    if (fn(data, edgesToBeUpdate) === false) {","382","        this.traverse(child, fn, edgesToBeUpdate);","387","        this.traverse(child, fn, edgesToBeUpdate);","393","    this.updateSingleItem(item, evt, restore);","394","    const edgesToBeUpdate: { [id: string]: IEdge } = {};","395","    this.traverse(item, (paramItem, paramEdgesMap) => {","396","      if (paramItem.destroyed) {","399","      paramItem.getEdges().forEach(edge => paramEdgesMap[edge.getID()] = edge);","401","    }, edgesToBeUpdate);","402","    Object.values(edgesToBeUpdate).forEach(edge => edge.refresh());","426","    console.log('restore', restore);","433","    \/\/ item.getEdges()?.forEach(edge => edge.refresh());"],"delete":["7","import { G6Event, IG6GraphEvent, Item, ComboConfig, ICombo, INode } from '@antv\/g6-core';","357","  traverse<T extends Item>(data: T, fn: (param: T) => boolean) {","358","    if (fn(data) === false) {","365","        this.traverse(child, fn);","370","        this.traverse(child, fn);","376","    this.traverse(item, (param) => {","377","      if (param.destroyed) {","380","      this.updateSingleItem(param, evt, restore);","382","    });","412","    item.getEdges()?.forEach(edge => edge.refresh());"]}],"packages\/react-node\/src\/ReactNode\/Group.tsx":[{"add":["40","  \/**","41","   * @description.en-US Nodes wrapped within the component","42","   * @description.zh-CN 组件内包装的节点","43","   *\/","44","  children?: React.ReactNode;"],"delete":[]}],"packages\/react-node\/src\/ReactNode\/Shape\/Text.tsx":[{"add":["50","  style?: TextStyle;"],"delete":["50","  style: TextStyle;"]}],"packages\/pc\/src\/behavior\/zoom-canvas.ts":[{"add":["234","              keyShape.set('ori-visibility', undefined);","240","                shape.set('ori-visibility', undefined);","255","              keyShape.set('ori-visibility', undefined);","262","                  shape.set('ori-visibility', undefined);"],"delete":["171","    \/\/ const zoom = ratio * graphZoom;"]}],"packages\/site\/docs\/api\/Graph.en.md":[{"add":["171","<description> _Number_ **optional** _default:_ `0.02`<\/description>","173","The minimum zoom ratio. If the ratio to be scaled in `fitView`, `zoom`, or `zoomTo` is smaller than the minZoom, the minZoom will takes effect and the current funcion will return false.","179","The maximum zoom ratio. If the ratio to be scaled in `fitView`, `zoom`, or `zoomTo` is bigger than the maxZoom, the maxZoom will takes effect and the current funcion will return false."],"delete":["171","<description> _Number_ **optional** _default:_ `0.2`<\/description>","173","The minimum zoom ratio.","179","The maximum zoom ratio."]}],"packages\/site\/docs\/api\/Graph.zh.md":[{"add":["171","<description> _Number_ **optional** _default:_ `0.02`<\/description>","173","最小缩放比例。若 fitView、zoom、zoomTo 等操作导致图的缩放比例小于该值，则将使用该值进行缩放，并返回 false。","179","最大缩放比例。若 fitView、zoom、zoomTo 等操作导致图的缩放比例大于该值，则将使用该值进行缩放，并返回 false。"],"delete":["171","<description> _Number_ **optional** _default:_ `0.2`<\/description>","173","最小缩放比例。","179","最大缩放比例。"]}],"packages\/core\/src\/graph\/controller\/view.ts":[{"add":["0","import { AbstractCanvas, BBox } from '@antv\/g-base';","5","import { applyMatrix, invertMatrix, lerpArray } from '..\/..\/util\/math';","7","import { transform } from '@antv\/matrix-util\/lib\/ext';","8","import { getAnimateCfgWithCallback } from '..\/..\/util\/graphic';","47","  private animatedFitView(group: IGroup, startMatrix: number[], animateCfg: GraphAnimateConfig, bbox: BBox, viewCenter: Point, groupCenter: Point, ratio: number): void {","48","    const { graph } = this;","49","    animateCfg = animateCfg ? animateCfg : { duration: 500, easing: 'easeCubic' };","50","","51","    \/\/ start from the default matrix","52","    const matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];","53","","54","    \/\/ Translate","55","    const vx = bbox.x + viewCenter.x - groupCenter.x - bbox.minX;","56","    const vy = bbox.y + viewCenter.y - groupCenter.y - bbox.minY;","57","    const translatedMatrix = transform(matrix, [['t', vx, vy]]);","58","","59","    \/\/ Zoom","60","    const minZoom: number = graph.get('minZoom');","61","    const maxZoom: number = graph.get('maxZoom');","62","","63","    let realRatio = ratio;","64","    if (minZoom && ratio < minZoom) {","65","      realRatio = minZoom;","66","      console.warn('fitview failed, ratio out of range, ratio: %f', ratio, 'graph minzoom has been used instead');","67","    } else if (maxZoom && ratio > maxZoom) {","68","      realRatio = minZoom;","69","      console.warn('fitview failed, ratio out of range, ratio: %f', ratio, 'graph maxzoom has been used instead');","70","    }","71","    let zoomedMatrix = transform(translatedMatrix, [","72","      ['t', -viewCenter.x, -viewCenter.y],","73","      ['s', realRatio, realRatio],","74","      ['t', viewCenter.x, viewCenter.y],","75","    ]);","76","","77","    \/\/ Animation","78","    const animationConfig = getAnimateCfgWithCallback({","79","      animateCfg,","80","      callback: () => {","81","        graph.emit('viewportchange', { action: 'translate', matrix: translatedMatrix });","82","        graph.emit('viewportchange', { action: 'zoom', matrix: zoomedMatrix });","83","      }","84","    });","85","    group.animate((ratio: number) => {","86","      return { matrix: lerpArray(startMatrix, zoomedMatrix, ratio) };","87","    }, animationConfig);","88","  }","89","","97","    const startMatrix = group.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];","109","    \/\/ Compute ratio","116","","117","    if (animate) {","118","      this.animatedFitView(group, startMatrix, animateCfg, bbox, viewCenter, groupCenter, ratio);","119","    } else {","120","      graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y);","121","","122","      if (!graph.zoom(ratio, viewCenter)) {","123","        console.warn('zoom failed, ratio out of range, ratio: %f', ratio);","124","      }","140","    const startMatrix = group.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];","152","    \/\/ Compute ratio","169","    if (animate) {","170","      this.animatedFitView(group, startMatrix, animateCfg, bbox, viewCenter, groupCenter, ratio);","171","    } else {","172","      const initZoomRatio = graph.getZoom();","173","      let endZoom = initZoomRatio * ratio;","174","      const minZoom = graph.get('minZoom');","175","      \/\/ 如果zoom小于最小zoom, 则以最小zoom为准","176","      if (endZoom < minZoom) {","177","        endZoom = minZoom;","178","        console.warn('fitview failed, ratio out of range, ratio: %f', ratio, 'graph minzoom has been used instead');","179","      }","180","      graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y);","181","","182","      graph.zoomTo(endZoom, viewCenter);"],"delete":["0","import { AbstractCanvas } from '@antv\/g-base';","3","import { modifyCSS } from '@antv\/dom-util';","6","import { applyMatrix, invertMatrix } from '..\/..\/util\/math';","64","    let animateConfig = animateCfg;","65","    if (animate) {","66","      animateConfig = {","67","        ...(animateCfg || {","68","          duration: 500,","69","          easing: 'easeCubic'","70","        }),","71","        callback: () => {","72","          graph.zoom(ratio, viewCenter, true, animateCfg);","73","          animateCfg?.callback?.();","74","        }","75","      }","76","    }","77","","84","    graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y, animate, animateConfig);","85","    if (!animate && !graph.zoom(ratio, viewCenter)) {","86","      console.warn('zoom failed, ratio out of range, ratio: %f', ratio);","113","    graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y, animate, animateCfg);","130","    const initZoomRatio = graph.getZoom();","131","    let endZoom = initZoomRatio * ratio;","132","    const minZoom = graph.get('minZoom');","133","    \/\/ 如果zoom小于最小zoom, 则以最小zoom为准","134","    if (endZoom < minZoom) {","135","      endZoom = minZoom;","136","      console.warn('fitview failed, ratio out of range, ratio: %f', ratio, 'graph minzoom has been used instead');","138","    graph.zoomTo(endZoom, viewCenter, animate, animateCfg);"]}],"packages\/pc\/tests\/unit\/graph\/svg-spec.ts":[{"add":["331","    expect(JSON.stringify(matrix)).toBe(JSON.stringify([2, 0, 0, 0, 2, 0, -100, -100, 1])); \/\/ 使用最大值","335","    expect(JSON.stringify(matrix)).toBe(JSON.stringify([5, 0, 0, 0, 5, 0, -250, -250, 1])); \/\/ 使用最大值"],"delete":["331","    expect(matrix).toBe(null);","335","    expect(matrix).toBe(null);"]}],"packages\/core\/src\/global.ts":[{"add":["66","  version: '0.6.16',"],"delete":["66","  version: '0.6.15',"]}],"packages\/pc\/tests\/unit\/behavior\/shortcuts-call-spec.ts":[{"add":["29","    expect(matrix[6]).toBe(-250);","30","    expect(matrix[7]).toBe(-250);"],"delete":["29","    expect(matrix[6]).toBe(200);","30","    expect(matrix[7]).toBe(200);"]}],"packages\/pc\/package.json":[{"add":["2","  \"version\": \"0.6.16\",","77","    \"@antv\/g6-core\": \"0.6.16\",","78","    \"@antv\/g6-element\": \"0.6.16\",","79","    \"@antv\/g6-plugin\": \"0.6.16\","],"delete":["2","  \"version\": \"0.6.15\",","77","    \"@antv\/g6-core\": \"0.6.15\",","78","    \"@antv\/g6-element\": \"0.6.15\",","79","    \"@antv\/g6-plugin\": \"0.6.15\","]}],"packages\/pc\/tests\/unit\/graph\/graph-spec.ts":[{"add":["247","    expect(JSON.stringify(matrix)).toBe(JSON.stringify([2, 0, 0, 0, 2, 0, -100, -100, 1])); \/\/ 使用最小值","251","    expect(JSON.stringify(matrix)).toBe(JSON.stringify([5, 0, 0, 0, 5, 0, -250, -250, 1])); \/\/ 使用最大值"],"delete":["247","    expect(matrix).toBe(null);","251","    expect(matrix).toBe(null);"]}],"packages\/core\/src\/interface\/graph.ts":[{"add":["502","  findAllByState: <T extends Item>(type: ITEM_TYPE, state: string, additionalFilter?: (item: Item) => boolean) => T[];","510","  updateLayout: (cfg: LayoutConfig, align?: 'center' | 'begin', canvasPoint?: IPoint, stack?: boolean) => void;"],"delete":["502","  findAllByState: <T extends Item>(type: ITEM_TYPE, state: string) => T[];","510","  updateLayout: (cfg: LayoutConfig, align?: 'center' | 'begin', canvasPoint?: IPoint) => void;"]}],"packages\/core\/src\/util\/graphic.ts":[{"add":["12","  ICombo,","13","  GraphAnimateConfig","689","","690","export const getAnimateCfgWithCallback = ({","691","  animateCfg,","692","  callback","693","}: {","694","  animateCfg: GraphAnimateConfig;","695","  callback: () => void;","696","}): GraphAnimateConfig => {","697","  let animateConfig: GraphAnimateConfig;","698","  if (!animateCfg) {","699","    animateConfig = {","700","      duration: 500,","701","      callback","702","    };","703","  } else {","704","    animateConfig = clone(animateCfg);","705","    if (animateCfg.callback) {","706","      const animateCfgCallback = animateCfg.callback;","707","      animateConfig.callback = () => {","708","        callback();","709","        animateCfgCallback();","710","      }","711","    } else {","712","      animateConfig.callback = callback;","713","    }","714","  }","715","  return animateConfig;","716","}"],"delete":["12","  ICombo"]}],"packages\/react-node\/README.md":[{"add":["33","          draggable"],"delete":["33","          draggable=\"true\""]}],"packages\/g6\/package.json":[{"add":["2","  \"version\": \"4.6.16\",","68","    \"@antv\/g6-pc\": \"0.6.16\""],"delete":["2","  \"version\": \"4.6.15\",","68","    \"@antv\/g6-pc\": \"0.6.15\""]}],"packages\/core\/tests\/unit\/graph\/svg-spec.ts":[{"add":["18","  initEventController() { }","20","  initLayoutController() { }","50","  initPlugins() { }","365","    expect(JSON.stringify(matrix)).toBe(JSON.stringify([2, 0, 0, 0, 2, 0, -100, -100, 1])); \/\/ 使用最小值","369","    expect(JSON.stringify(matrix)).toBe(JSON.stringify([5, 0, 0, 0, 5, 0, -250, -250, 1])); \/\/ 使用最大值"],"delete":["18","  initEventController() {}","20","  initLayoutController() {}","50","  initPlugins() {}","365","    expect(matrix).toBe(null);","369","    expect(matrix).toBe(null);"]}],"packages\/react-node\/docs\/index.en-US.md":[{"add":["31","          draggable","116","          draggable"],"delete":["31","          draggable=\"true\"","116","          draggable=\"true\""]}],"packages\/core\/package.json":[{"add":["2","  \"version\": \"0.6.16\","],"delete":["2","  \"version\": \"0.6.15\","]}],"packages\/site\/package.json":[{"add":["3","  \"version\": \"4.6.16\",","38","    \"@antv\/g6\": \"4.6.16\","],"delete":["3","  \"version\": \"4.6.15\",","38","    \"@antv\/g6\": \"4.6.15\","]}],"CHANGELOG.md":[{"add":["2","#### 4.6.16","3","","4","- feat: ID check;","5","- feat: fitView with animation;","6","- feat: findAllByState with additional filter;","7","- fix: wrong dropped position for drag-combo with enableDelegate, closes: #3810;","8","- fix: stack for drag-combo with onlyChangeComboSize, closes: #3801;","9","- fix: stack updateLayout, closes: #3765;","10","- fix: drag-canvas and zoom-canvas with enableOptimize show a hidden shape which is controlled by state, closes: #3635;","11","- fix: typing problem for react node;","12",""],"delete":[]}],"packages\/core\/tests\/unit\/graph\/graph-spec.ts":[{"add":["223","    expect(JSON.stringify(matrix)).toBe(JSON.stringify([2, 0, 0, 0, 2, 0, -100, -100, 1])); \/\/ 使用最小值","227","    expect(JSON.stringify(matrix)).toBe(JSON.stringify([5, 0, 0, 0, 5, 0, -250, -250, 1])); \/\/ 使用最大值","531","  it('findAllByState should not select nodes that are not visible', () => {","532","    globalGraph.clear();","533","","534","    const node1 = globalGraph.addItem('node', {","535","      id: 'node1',","536","      visible: false","537","    });","538","","539","    const node2 = globalGraph.addItem('node', {","540","      id: 'node2'","541","    });","542","","543","    node1.setState('selected', true);","544","    node2.setState('selected', true);","545","","546","    function additionalFilter(item) {","547","      return item.isVisible();","548","    }","549","","550","    const selectedNodes = globalGraph.findAllByState('node', 'selected', additionalFilter);","551","","552","    expect(selectedNodes.length).toEqual(1);","553","  });","554",""],"delete":["223","    expect(matrix).toBe(null);","227","    expect(matrix).toBe(null);"]}],"packages\/react-node\/src\/ReactNode\/Shape\/Rect.tsx":[{"add":["26","  style?: RectStyle;"],"delete":["26","  style: RectStyle;"]}],"packages\/pc\/src\/behavior\/drag-canvas.ts":[{"add":["219","          shape.set('ori-visibility', undefined);","232","              child.set('ori-visibility', undefined);"],"delete":[]}],"packages\/pc\/src\/global.ts":[{"add":["9","  version: '0.6.16',"],"delete":["9","  version: '0.6.15',"]}],"packages\/g6\/src\/index.ts":[{"add":["2","G6.version = '4.6.16';","6","export const version = '4.6.16';"],"delete":["2","G6.version = '4.6.15';","6","export const version = '4.6.15';"]}],"packages\/plugin\/src\/tooltip\/index.ts":[{"add":[],"delete":["219","    \/\/ const mousePos = graph.getPointByClient(e.clientX, e.clientY);"]}],"packages\/core\/src\/util\/math.ts":[{"add":["825"," * @param {number} start","826"," * @param {number} end","827"," * @param {number} alpha interpolation factor, typically in the closed interval [0, 1]","828"," * @returns {number}","833","","834","\/**","835"," * Linearly interpolate between start and end arrays, where alpha is the percent distance along the line.","836"," * alpha = 0 will be start, and alpha = 1 will be end.","837"," * @param {number[]} start","838"," * @param {number[]} end","839"," * @param {number} alpha interpolation factor, typically in the closed interval [0, 1]","840"," * @returns {number[]}","841"," *\/","842","export const lerpArray = (start: number[], end: number[], alpha: number): number[] => {","843","  var len = Math.min(start.length, end.length);","844","  const out = new Array(len);","845","  for (var i = 0; i < len; i++) {","846","    out[i] = lerp(start[i], end[i], alpha);","847","  }","848","  return out;","849","}","850",""],"delete":["825"," * @param {Number} start","826"," * @param {Number} end","827"," * @param {Number} alpha interpolation factor, typically in the closed interval [0, 1]","828"," * @returns"]}],"packages\/react-node\/src\/API\/rect.md":[{"add":["22","          draggable"],"delete":["22","          draggable=\"true\""]}],"packages\/pc\/src\/behavior\/drag-node.ts":[{"add":["156","      const { x, y, id } = t.getModel();","157","      beforeDragNodes.push({ x, y, id });","255","        stackData.before.nodes.push(model);","259","        const { x, y, id } = target.getModel();","260","        stackData.after.nodes.push({ x, y, id });"],"delete":["156","      beforeDragNodes.push(clone(t.getModel()));","254","        stackData.before.nodes.push({","255","          id: model.id,","256","          x: model.x,","257","          y: model.y,","258","        });","262","        const targetModel = target.getModel();","263","        stackData.after.nodes.push({","264","          id: targetModel.id,","265","          x: targetModel.x,","266","          y: targetModel.y,","267","        });"]}],"packages\/core\/src\/graph\/graph.ts":[{"add":["39","import { plainCombosToTrees, traverseTree, reconstructTree, traverseTreeUp, getAnimateCfgWithCallback } from '..\/util\/graphic';","226","      minZoom: 0.02,","555","  public findAllByState<T extends Item>(type: ITEM_TYPE, state: string, additionalFilter?: (item: Item) => boolean): T[] {","556","    if (additionalFilter) {","557","      return this.findAll(type, item => item.hasState(state) && additionalFilter(item));","559","      return this.findAll(type, item => item.hasState(state));","578","      const animateConfig = getAnimateCfgWithCallback({","706","    let matrix = clone(group.getMatrix()) || [1, 0, 0, 0, 1, 0, 0, 0, 1];","709","    const currentZoom = this.getZoom() || 1;","710","    const targetZoom = currentZoom * ratio;","711","    let finalRatio = ratio;","713","    let failed = false;","714","    if (minZoom && targetZoom < minZoom) {","715","      finalRatio = minZoom \/ currentZoom;","716","      failed = true;","717","    } else if (maxZoom && targetZoom > maxZoom) {","718","      finalRatio = maxZoom \/ currentZoom;","719","      failed = true;","725","        ['s', finalRatio, finalRatio],","729","      matrix = transform(matrix, [['s', finalRatio, finalRatio]]);","739","      const targetRatio = initialRatio * finalRatio;","741","      const animateConfig = getAnimateCfgWithCallback({","766","    return !failed;","2440","  public updateLayout(cfg: any, align?: 'center' | 'begin', alignPoint?: IPoint, stack: boolean = true): void {","2482","    const oriLayoutCfg = { ...this.get('layout') };","2499","","2500","    if (stack && this.get('enabledStack')) {","2501","      this.pushStack('layout', { before: oriLayoutCfg, after: layoutCfg });","2502","    }"],"delete":["39","import { plainCombosToTrees, traverseTree, reconstructTree, traverseTreeUp } from '..\/util\/graphic';","226","      minZoom: 0.2,","555","  public findAllByState<T extends Item>(type: ITEM_TYPE, state: string): T[] {","556","    return this.findAll(type, item => item.hasState(state));","557","  }","558","","559","  private getAnimateCfgWithCallback({","560","    animateCfg,","561","    callback","562","  }: {","563","    animateCfg: GraphAnimateConfig;","564","    callback: () => void;","565","  }): GraphAnimateConfig {","566","    let animateConfig: GraphAnimateConfig;","567","    if (!animateCfg) {","568","      animateConfig = {","569","        duration: 500,","570","        callback","571","      };","573","      animateConfig = clone(animateCfg);","574","      if (animateCfg.callback) {","575","        const animateCfgCallback = animateCfg.callback;","576","        animateConfig.callback = () => {","577","          callback();","578","          animateCfgCallback();","579","        }","580","      } else {","581","        animateConfig.callback = callback;","582","      }","584","    return animateConfig;","602","      const animateConfig = this.getAnimateCfgWithCallback({","730","    let matrix = clone(group.getMatrix());","734","    if (!matrix) {","735","      matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];","741","        ['s', ratio, ratio],","745","      matrix = transform(matrix, [['s', ratio, ratio]]);","748","    if ((minZoom && matrix[0] < minZoom) || (maxZoom && matrix[0] > maxZoom)) {","749","      return false;","750","    }","751","    \/\/ matrix = [2, 0, 0, 0, 2, 0, -125, -125, 1];","752","","760","      const targetRatio = initialRatio * ratio;","762","      const animateConfig = this.getAnimateCfgWithCallback({","787","    return true;","2461","  public updateLayout(cfg: any, align?: 'center' | 'begin', alignPoint?: IPoint): void {","2503","    const oriLayoutCfg = this.get('layout');"]}],"packages\/react-node\/docs\/index.md":[{"add":["30","            justifyContent: 'center',","32","          draggable","113","            justifyContent: 'center',","115","          draggable"],"delete":["30","            justyfyContent: 'center',","32","          draggable=\"true\"","113","            justyfyContent: 'center',","115","          draggable=\"true\""]}]}},"52e170755995d251a1d89c6bedff61af5ca6458e":{"changes":{"packages\/plugin\/src\/minimap\/index.ts":"MODIFY","CHANGELOG.md":"MODIFY"},"diff":{"packages\/plugin\/src\/minimap\/index.ts":[{"add":["321","        this.updateCanvas();","429","        this.updateCanvas();"],"delete":[]}],"CHANGELOG.md":[{"add":["6","- fix: minimap with delegate type cannot reach the top of the canvas, closes: #2885;"],"delete":[]}]}},"594106e4228d61a2ea8159a44807dbbefe95c9a8":{"changes":{"packages\/core\/tests\/unit\/graph\/controller\/view-spec.ts":"MODIFY","packages\/site\/docs\/api\/graphFunc\/transform.en.md":"MODIFY","packages\/core\/src\/interface\/graph.ts":"MODIFY","packages\/element\/package.json":"MODIFY","packages\/plugin\/package.json":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/nodes\/jsx-node.en.md":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/site\/examples\/item\/customNode\/demo\/card.js":"MODIFY","packages\/core\/package.json":"MODIFY","packages\/pc\/tsconfig.json":"MODIFY","packages\/pc\/src\/graph\/controller\/layout.ts":"MODIFY","packages\/site\/docs\/api\/graphFunc\/transform.zh.md":"MODIFY","CHANGELOG.md":"MODIFY","packages\/pc\/src\/global.ts":"MODIFY","packages\/core\/src\/graph\/controller\/view.ts":"MODIFY","packages\/core\/src\/graph\/controller\/layout.ts":"MODIFY","packages\/core\/src\/global.ts":"MODIFY","packages\/g6\/src\/index.ts":"MODIFY","packages\/pc\/package.json":"MODIFY","packages\/pc\/tests\/unit\/layout\/dagre-spec.ts":"MODIFY","packages\/core\/src\/graph\/graph.ts":"MODIFY"},"diff":{"packages\/core\/tests\/unit\/graph\/controller\/view-spec.ts":[{"add":["113","  it('focus items', () => {","114","    const data = {","115","      nodes: [","116","        {","117","          id: 'node-1',","118","          x: 100,","119","          y: 100,","120","          size: [150, 100],","121","          type: 'simple-rect',","122","          color: '#333',","123","          style: {","124","            fill: '#666',","125","          },","126","        },","127","        {","128","          id: 'node-2',","129","          x: 200,","130","          y: 200,","131","          size: [150, 100],","132","          type: 'simple-rect',","133","          color: '#333',","134","          style: {","135","            fill: '#666',","136","          },","137","        }","138","      ],","139","    };","140","    graph.data(data);","141","    graph.render();","142","","143","    const canvas: AbstractCanvas = graph.get('canvas');","144","","145","    let bbox = canvas.getCanvasBBox();","146","","147","    expect(numberEqual(bbox.x, 50, 1)).toBe(true);","148","    expect(numberEqual(bbox.y, 89, 1)).toBe(true);","149","    expect(numberEqual(bbox.maxX, 450, 1)).toBe(true);","150","    expect(numberEqual(bbox.maxY, 410, 1)).toBe(true);","151","    expect(numberEqual(bbox.width, 400, 1)).toBe(true);","152","    expect(numberEqual(bbox.height, 320, 1)).toBe(true);","153","","154","    const node1 = graph.findById('node-1');","155","    graph.focusItems([node1], true);","156","","157","    bbox = graph.get('canvas').getCanvasBBox();","158","","159","    expect(numberEqual(bbox.x, 50, 1)).toBe(true);","160","    expect(numberEqual(bbox.y, 116, 1)).toBe(true);","161","    expect(numberEqual(bbox.maxX, 714, 1)).toBe(true);","162","    expect(numberEqual(bbox.maxY, 648, 1)).toBe(true);","163","    expect(numberEqual(bbox.width, 664, 1)).toBe(true);","164","    expect(numberEqual(bbox.height, 532, 1)).toBe(true);","165","","166","    const node2 = graph.findById('node-2');","167","    graph.focusItems([node1, node2], true);","168","","169","    bbox = graph.get('canvas').getCanvasBBox();","170","","171","    expect(numberEqual(bbox.x, 50, 1)).toBe(true);","172","    expect(numberEqual(bbox.y, 89, 1)).toBe(true);","173","    expect(numberEqual(bbox.maxX, 450, 1)).toBe(true);","174","    expect(numberEqual(bbox.maxY, 410, 1)).toBe(true);","175","    expect(numberEqual(bbox.width, 400, 1)).toBe(true);","176","    expect(numberEqual(bbox.height, 320, 1)).toBe(true);","177","  });","180","      nodes: [{ id: '1', x: 10, y: 10 }, { id: '2', x: 25, y: 40 }, { id: '3', x: -50, y: 80 }],","181","      edges: [{ source: '1', target: '2' }, { source: '1', target: '3' }]","189","    g.get('canvas').get('el').style.backgroundColor = '#ccc';","204","    console.log('point', point);","205","    expect(numberEqual(point.x, 150, 0.1)).toBe(true);","206","    expect(numberEqual(point.y, 150, 0.1)).toBe(true);"],"delete":["115","      nodes: [{id: '1', x: 10, y: 10}, {id: '2', x: 25, y: 40}, {id: '3', x: -50, y: 80}],","116","      edges: [{source: '1', target: '2'}, {source: '1', target: '3'}]","124","    g.get('canvas').get('el').style.backgroundColor='#ccc';","139","    expect(numberEqual(point.x, 50, 0.1)).toBe(true);","140","    expect(numberEqual(point.y, 50, 0.1)).toBe(true);"]}],"packages\/site\/docs\/api\/graphFunc\/transform.en.md":[{"add":["40","\/\/ zoom to scale 0.5 at the origin (0, 0) of canvas drawing coordinate system, which is not the same as the lefttop of the viewport. To see the transformantion and relationships between three coordinate systems in G6, checkout out the doc: https:\/\/g6.antv.vision\/en\/docs\/manual\/advanced\/coordinate-system"],"delete":["40","\/\/ zoom to scale 0.5 at the center (0, 0)"]}],"packages\/core\/src\/interface\/graph.ts":[{"add":["174","   * Fits the passed items into the view. If no items are passed it will fit the whole graph","175","   * @param {Item[]} items Items you want to fit into the view","176","   * @param {boolean} zoomToFit Wether to zoom on the passed items","177","   * @param {boolean} animate Wheter to animate the transition","178","   * @param {GraphAnimateConfig} animateCfg Animation configuration","179","   *\/","180","  focusItems: (items: Item[], zoomToFit?: boolean, animate?: boolean, animateCfg?: GraphAnimateConfig) => void;","181","","182","  \/**"],"delete":[]}],"packages\/element\/package.json":[{"add":["2","  \"version\": \"0.7.0\",","63","    \"@antv\/g6-core\": \"0.7.0\","],"delete":["2","  \"version\": \"0.7.0-beta.2\",","63","    \"@antv\/g6-core\": \"0.7.0-beta.2\","]}],"packages\/plugin\/package.json":[{"add":["2","  \"version\": \"0.7.0\",","24","    \"@antv\/g6-core\": \"0.7.0\",","25","    \"@antv\/g6-element\": \"0.7.0\","],"delete":["2","  \"version\": \"0.7.0-beta.2\",","24","    \"@antv\/g6-core\": \"0.7.0-beta.2\",","25","    \"@antv\/g6-element\": \"0.7.0-beta.2\","]}],"packages\/site\/docs\/manual\/middle\/elements\/nodes\/jsx-node.en.md":[{"add":["128","    <text style={{marginLeft: 10 ,fill: 'red'}}>FULL<\/text>"],"delete":["128","    <text style={{marginLeft: 10 ,fill: 'red'}}>${FULL}<\/text>"]}],"packages\/g6\/package.json":[{"add":["2","  \"version\": \"4.7.0\",","68","    \"@antv\/g6-pc\": \"0.7.0\""],"delete":["2","  \"version\": \"4.7.0-beta.2\",","68","    \"@antv\/g6-pc\": \"0.7.0-beta.2\""]}],"packages\/site\/examples\/item\/customNode\/demo\/card.js":[{"add":["64","        height: h,","183","      ipCPBox.on('click', () => { });"],"delete":["64","        heigh: h,","183","      ipCPBox.on('click', () => {});"]}],"packages\/core\/package.json":[{"add":["2","  \"version\": \"0.7.0\","],"delete":["2","  \"version\": \"0.7.0-beta.2\","]}],"packages\/pc\/tsconfig.json":[{"add":["14","    \"lib\": [","15","      \"esnext\",","16","      \"dom\"","17","    ],","18","    \"types\": [","19","      \"jest\"","20","    ],","23","  \"include\": [","24","    \"src\",","25","    \"tests\"","26","  ],","36","}"],"delete":["14","    \"lib\": [\"esnext\", \"dom\"],","15","    \"types\": [\"jest\"],","18","  \"include\": [\"src\", \"tests\"],","28","}"]}],"packages\/pc\/src\/graph\/controller\/layout.ts":[{"add":["288","    if (layoutCfg.workerEnabled && this.layoutWithWorker(this.data, success)) {","380","  private layoutWithWorker(data, success): boolean {","413","        success?.()","556","    if (otherCfg.workerEnabled && this.layoutWithWorker(this.data, null)) {"],"delete":["288","    if (layoutCfg.workerEnabled && this.layoutWithWorker(this.data)) {","380","  private layoutWithWorker(data): boolean {","555","    if (otherCfg.workerEnabled && this.layoutWithWorker(this.data)) {"]}],"packages\/site\/docs\/api\/graphFunc\/transform.zh.md":[{"add":["42","\/\/ 以绘制坐标系的原点 (0, 0) 为缩放中心，缩小到 0.5。注意绘制坐标系的原点 != 视窗左上角，可用 graph.getCanvasByViewport 进行转换。各坐标系解析文档： https:\/\/g6.antv.vision\/zh\/docs\/manual\/advanced\/coordinate-system"],"delete":["42","\/\/ 以当前元素位置为中心，缩小到 0.5"]}],"CHANGELOG.md":[{"add":["2","#### 4.7.0","3","","4","- fix: combo collapsed edge problems, closes: #3839;","5",""],"delete":[]}],"packages\/pc\/src\/global.ts":[{"add":["9","  version: '0.7.0',"],"delete":["9","  version: '0.7.0-beta.2',"]}],"packages\/core\/src\/graph\/controller\/view.ts":[{"add":["47","  private animatedFitView(group: IGroup, startMatrix: number[], animateCfg: GraphAnimateConfig, bbox: BBox, viewCenter: Point, groupCenter: Point,","48","    ratio: number, zoomToFit: boolean): void {","61","    if (!zoomToFit) {","62","      \/\/ If zooming is not needed just animate the current translated matrix and return","63","      const animationConfig = getAnimateCfgWithCallback({","64","        animateCfg,","65","        callback: () => {","66","          graph.emit('viewportchange', { action: 'translate', matrix: translatedMatrix });","67","        }","68","      });","69","      group.animate((ratio: number) => {","70","        return { matrix: lerpArray(startMatrix, translatedMatrix, ratio) };","71","      }, animationConfig);","72","      return;","73","    }","74","","84","      realRatio = maxZoom;","137","      this.animatedFitView(group, startMatrix, animateCfg, bbox, viewCenter, groupCenter, ratio, true);","192","      this.animatedFitView(group, startMatrix, animateCfg, bbox, viewCenter, groupCenter, ratio, true);","333","  public focusItems(items: Item[], zoomToFit: boolean, animate?: boolean, animateCfg?: GraphAnimateConfig): void {","334","    if (!items.length) {","335","      return;","336","    }","337","","338","    const { graph } = this;","339","    const padding = this.getFormatPadding();","340","    const width: number = graph.get('width');","341","    const height: number = graph.get('height');","342","    const group: IGroup = graph.get('group');","343","    const startMatrix = group.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];","344","    group.resetMatrix();","345","","346","    let bbox: BBox = {","347","      x: 0, y: 0,","348","      minX: Number.MAX_SAFE_INTEGER, minY: Number.MAX_SAFE_INTEGER,","349","      maxX: Number.MIN_SAFE_INTEGER, maxY: Number.MIN_SAFE_INTEGER,","350","      width: 0, height: 0","351","    };","352","    for (const item of items) {","353","      const itemBBox = item.getBBox();","354","      if (itemBBox.minX < bbox.minX) {","355","        bbox.minX = itemBBox.minX;","356","      }","357","      if (itemBBox.minY < bbox.minY) {","358","        bbox.minY = itemBBox.minY;","359","      }","360","      if (itemBBox.maxX > bbox.maxX) {","361","        bbox.maxX = itemBBox.maxX;","362","      }","363","      if (itemBBox.maxY > bbox.maxY) {","364","        bbox.maxY = itemBBox.maxY;","365","      }","366","    }","367","    bbox.x = bbox.minX;","368","    bbox.y = bbox.minY;","369","    bbox.width = bbox.maxX - bbox.minX;","370","    bbox.height = bbox.maxY - bbox.minY;","371","","372","    if (bbox.width === 0 || bbox.height === 0) return;","373","    const viewCenter = this.getViewCenter();","374","","375","    const groupCenter: Point = {","376","      x: bbox.x + bbox.width \/ 2,","377","      y: bbox.y + bbox.height \/ 2,","378","    };","379","","380","    \/\/ Compute ratio","381","    const w = (width - padding[1] - padding[3]) \/ bbox.width;","382","    const h = (height - padding[0] - padding[2]) \/ bbox.height;","383","    let ratio = w;","384","    if (w > h) {","385","      ratio = h;","386","    }","387","","388","    if (animate) {","389","      this.animatedFitView(group, startMatrix, animateCfg, bbox, viewCenter, groupCenter, ratio, zoomToFit);","390","    } else {","391","      graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y);","392","","393","      if (zoomToFit && !graph.zoom(ratio, viewCenter)) {","394","        console.warn('zoom failed, ratio out of range, ratio: %f', ratio);","395","      }","396","    }","397","  }","398",""],"delete":["47","  private animatedFitView(group: IGroup, startMatrix: number[], animateCfg: GraphAnimateConfig, bbox: BBox, viewCenter: Point, groupCenter: Point, ratio: number): void {","69","      realRatio = minZoom;","122","      this.animatedFitView(group, startMatrix, animateCfg, bbox, viewCenter, groupCenter, ratio);","177","      this.animatedFitView(group, startMatrix, animateCfg, bbox, viewCenter, groupCenter, ratio);"]}],"packages\/core\/src\/graph\/controller\/layout.ts":[{"add":["299","  \/**","300","   * execute a preset layout before running layout","301","   *\/","313","    const hasPreset = this.initWithPreset?.();"],"delete":["310","    const hasPreset = this.initWithPreset();"]}],"packages\/core\/src\/global.ts":[{"add":["66","  version: '0.7.0',"],"delete":["66","  version: '0.7.0-beta.1',"]}],"packages\/g6\/src\/index.ts":[{"add":["2","G6.version = '4.7.0';","6","export const version = '4.7.0';"],"delete":["2","G6.version = '4.7.0-beta.2';","6","export const version = '4.7.0-beta.2';"]}],"packages\/pc\/package.json":[{"add":["2","  \"version\": \"0.7.0\",","77","    \"@antv\/g6-core\": \"0.7.0\",","78","    \"@antv\/g6-element\": \"0.7.0\",","79","    \"@antv\/g6-plugin\": \"0.7.0\",","81","    \"@antv\/layout\": \"^0.3.0\","],"delete":["2","  \"version\": \"0.7.0-beta.2\",","77","    \"@antv\/g6-core\": \"0.7.0-beta.2\",","78","    \"@antv\/g6-element\": \"0.7.0-beta.2\",","79","    \"@antv\/g6-plugin\": \"0.7.0-beta.2\",","81","    \"@antv\/layout\": \"^0.3.0-beta.1\","]}],"packages\/pc\/tests\/unit\/layout\/dagre-spec.ts":[{"add":["327","      expect(graph.findById('1').getModel().x).toBe(120);","331","      expect(graph.findById('1-1-1').getModel().x).toBe(482.5);","337","    graph.data(data2);","338","    graph.render();"],"delete":["321","    graph.data(data2);","322","    graph.render();","329","      expect(graph.findById('1').getModel().x).toBe(145);","333","      expect(graph.findById('1-1-1').getModel().x).toBe(470);"]}],"packages\/core\/src\/graph\/graph.ts":[{"add":["803","   * Focus on the passed items","804","   * @param {Item[]} items Items you want to focus on","805","   * @param {boolean} zoomToFit Wether to zoom on the passed items","806","   * @param {boolean} animate Wether to animate the transition","807","   * @param {GraphAnimateConfig} animateCfg Animation configuration","808","   *\/","809","  public focusItems(items: Item[], zoomToFit?: boolean, animate?: boolean, animateCfg?: GraphAnimateConfig): void {","810","    const viewController: ViewController = this.get('viewController');","811","    viewController.focusItems(items, zoomToFit, animate, animateCfg);","812","  }","813","","814","  \/**","2757","          const { parentId: selfEndPId, comboId: selfEndCId } = selfEndModel;","2758","          const selfEndParentId = (selfEndPId || selfEndCId) as string;"],"delete":["2745","          const { parentId: selfEndPId, comboId: selfEndCId } = otherEndModel;","2746","          const selfEndParentId = selfEndPId || selfEndCId;"]}]}},"0c8d4a39421ab9d19399590fee04df7d0fca3546":{"changes":{"packages\/pc\/src\/global.ts":"MODIFY","packages\/element\/package.json":"MODIFY","packages\/plugin\/package.json":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/core\/src\/global.ts":"MODIFY","packages\/g6\/src\/index.ts":"MODIFY","packages\/pc\/package.json":"MODIFY","packages\/core\/package.json":"MODIFY","packages\/site\/package.json":"MODIFY","packages\/plugin\/src\/minimap\/index.ts":"MODIFY","packages\/plugin\/tests\/unit\/minimap-spec.ts":"MODIFY"},"diff":{"packages\/pc\/src\/global.ts":[{"add":["9","  version: '0.3.2',"],"delete":["9","  version: '0.3.0',"]}],"packages\/element\/package.json":[{"add":["2","  \"version\": \"0.3.2\",","63","    \"@antv\/g6-core\": \"*\","],"delete":["2","  \"version\": \"0.3.0\",","63","    \"@antv\/g6-core\": \"0.3.1\","]}],"packages\/plugin\/package.json":[{"add":["2","  \"version\": \"0.3.2\",","24","    \"@antv\/g6-core\": \"*\","],"delete":["2","  \"version\": \"0.3.0\",","24","    \"@antv\/g6-core\": \"0.3.1\","]}],"packages\/g6\/package.json":[{"add":["2","  \"version\": \"4.3.2\",","68","    \"@antv\/g6-pc\": \"*\""],"delete":["2","  \"version\": \"4.3.0\",","68","    \"@antv\/g6-pc\": \"0.3.0\""]}],"packages\/core\/src\/global.ts":[{"add":["66","  version: '0.3.2',"],"delete":["66","  version: '0.3.0',"]}],"packages\/g6\/src\/index.ts":[{"add":["2","G6.version = '4.3.2';","6","export const version = '4.3.2';"],"delete":["2","G6.version = '4.3.0';","6","export const version = '4.3.0';"]}],"packages\/pc\/package.json":[{"add":["2","  \"version\": \"0.3.2\",","76","    \"@antv\/g6-core\": \"*\",","77","    \"@antv\/g6-plugin\": \"*\",","78","    \"@antv\/g6-element\": \"*\","],"delete":["2","  \"version\": \"0.3.0\",","76","    \"@antv\/g6-core\": \"0.3.1\",","77","    \"@antv\/g6-plugin\": \"0.3.0\",","78","    \"@antv\/g6-element\": \"0.3.0\","]}],"packages\/core\/package.json":[{"add":["2","  \"version\": \"0.3.2\","],"delete":["2","  \"version\": \"0.3.0\","]}],"packages\/site\/package.json":[{"add":["3","  \"version\": \"4.3.2\","],"delete":["3","  \"version\": \"4.3.0\","]}],"packages\/plugin\/src\/minimap\/index.ts":[{"add":["250","    \/\/ modifyCSS(viewport, {","251","    \/\/   left: correctLeft,","252","    \/\/   top: correctTop,","253","    \/\/   width: `${width}px`,","254","    \/\/   height: `${height}px`,","255","    \/\/ });","638","    const graphBBox = graph.get('canvas').getBBox();","653","    console.log('ratio', ratio, size, width, height)"],"delete":["250","    modifyCSS(viewport, {","251","      left: correctLeft,","252","      top: correctTop,","253","      width: `${width}px`,","254","      height: `${height}px`,","255","    });","638","    const graphBBox = graph.get('canvas').getCanvasBBox();"]}],"packages\/plugin\/tests\/unit\/minimap-spec.ts":[{"add":["400","describe.only('minimap', () => {","401","  it.only('minimap with default settings & destroy', () => { \/\/ done","435","    \/\/ const canvas = minimap.getCanvas();","436","    \/\/ expect(canvas).not.toBe(undefined);","437","    \/\/ expect(canvas.get('width')).toEqual(200);","438","    \/\/ expect(canvas.get('height')).toEqual(200);","440","    \/\/ const viewport = minimap.getViewport();","441","    \/\/ expect(viewport).not.toBe(undefined);","442","    \/\/ expect(viewport.className.indexOf('g6-minimap-viewport') >= 0).toBe(true);","444","    \/\/ \/\/ 缩小的时候，viewport已经最大了，不会更大","445","    \/\/ graph.zoom(0.5, { x: 250, y: 250 });","446","    \/\/ expect(viewport.style.left).toEqual('0px');","447","    \/\/ expect(viewport.style.top).toEqual('0px');","448","    \/\/ expect(viewport.style.width).toEqual('200px');","449","    \/\/ expect(viewport.style.height).toEqual('200px');","451","    \/\/ graph.zoom(2.5, { x: 250, y: 250 });","453","    \/\/ setTimeout(() => {","454","    \/\/   const left = parseFloat(viewport.style.left.substr(0, viewport.style.left.length - 2));","455","    \/\/   const top = parseFloat(viewport.style.top.substr(0, viewport.style.top.length - 2));","456","    \/\/   const width = parseFloat(viewport.style.width.substr(0, viewport.style.width.length - 2));","457","    \/\/   const height = parseFloat(viewport.style.height.substr(0, viewport.style.height.length - 2));","458","    \/\/   expect(mathEqual(left, 42)).toBe(true);","459","    \/\/   expect(mathEqual(top, 32)).toBe(true);","460","    \/\/   expect(mathEqual(width, 158)).toBe(true);","461","    \/\/   expect(mathEqual(height, 167)).toBe(true);","463","    \/\/   graph.zoom(2.5, { x: 250, y: 250 });","464","    \/\/   setTimeout(() => {","465","    \/\/     const left = parseFloat(viewport.style.left.substr(0, viewport.style.left.length - 2));","466","    \/\/     const top = parseFloat(viewport.style.top.substr(0, viewport.style.top.length - 2));","467","    \/\/     const width = parseFloat(viewport.style.width.substr(0, viewport.style.width.length - 2));","468","    \/\/     const height = parseFloat(","469","    \/\/       viewport.style.height.substr(0, viewport.style.height.length - 2),","470","    \/\/     );","472","    \/\/     expect(mathEqual(left, 105, 5)).toBe(true);","473","    \/\/     expect(mathEqual(top, 95, 5)).toBe(true);","474","    \/\/     expect(mathEqual(width, 85, 5)).toBe(true);","475","    \/\/     expect(mathEqual(height, 85, 5)).toBe(true);","477","    \/\/     minimap.destroyPlugin();","479","    \/\/     const container: HTMLElement = div.childNodes[1] as HTMLElement;","480","    \/\/     expect(container.innerHTML).toEqual('');","482","    \/\/     done();","483","    \/\/   }, 100);","484","    \/\/ }, 100);"],"delete":["400","describe('minimap', () => {","401","  it('minimap with default settings & destroy', (done) => {","435","    const canvas = minimap.getCanvas();","436","    expect(canvas).not.toBe(undefined);","437","    expect(canvas.get('width')).toEqual(200);","438","    expect(canvas.get('height')).toEqual(200);","440","    const viewport = minimap.getViewport();","441","    expect(viewport).not.toBe(undefined);","442","    expect(viewport.className.indexOf('g6-minimap-viewport') >= 0).toBe(true);","444","    \/\/ 缩小的时候，viewport已经最大了，不会更大","445","    graph.zoom(0.5, { x: 250, y: 250 });","446","    expect(viewport.style.left).toEqual('0px');","447","    expect(viewport.style.top).toEqual('0px');","448","    expect(viewport.style.width).toEqual('200px');","449","    expect(viewport.style.height).toEqual('200px');","451","    graph.zoom(2.5, { x: 250, y: 250 });","453","    setTimeout(() => {","454","      const left = parseFloat(viewport.style.left.substr(0, viewport.style.left.length - 2));","455","      const top = parseFloat(viewport.style.top.substr(0, viewport.style.top.length - 2));","456","      const width = parseFloat(viewport.style.width.substr(0, viewport.style.width.length - 2));","457","      const height = parseFloat(viewport.style.height.substr(0, viewport.style.height.length - 2));","458","      expect(mathEqual(left, 42)).toBe(true);","459","      expect(mathEqual(top, 32)).toBe(true);","460","      expect(mathEqual(width, 158)).toBe(true);","461","      expect(mathEqual(height, 167)).toBe(true);","463","      graph.zoom(2.5, { x: 250, y: 250 });","464","      setTimeout(() => {","465","        const left = parseFloat(viewport.style.left.substr(0, viewport.style.left.length - 2));","466","        const top = parseFloat(viewport.style.top.substr(0, viewport.style.top.length - 2));","467","        const width = parseFloat(viewport.style.width.substr(0, viewport.style.width.length - 2));","468","        const height = parseFloat(","469","          viewport.style.height.substr(0, viewport.style.height.length - 2),","470","        );","472","        expect(mathEqual(left, 105, 5)).toBe(true);","473","        expect(mathEqual(top, 95, 5)).toBe(true);","474","        expect(mathEqual(width, 85, 5)).toBe(true);","475","        expect(mathEqual(height, 85, 5)).toBe(true);","477","        minimap.destroyPlugin();","479","        const container: HTMLElement = div.childNodes[1] as HTMLElement;","480","        expect(container.innerHTML).toEqual('');","482","        done();","483","      }, 100);","484","    }, 100);"]}]}},"a1554f3e2010f8074d0580a8eafcd67c4d7c1f65":{"changes":{"src\/plugins\/fisheye\/index.ts":"MODIFY","examples\/item\/multiEdge\/demo\/multiEdges.js":"MODIFY","CHANGELOG.md":"MODIFY","gatsby-browser.js":"MODIFY","examples\/tool\/fisheye\/demo\/fisheyeStyle.js":"MODIFY","examples\/tool\/fisheye\/demo\/fisheye.js":"MODIFY","src\/shape\/node.ts":"MODIFY","package.json":"MODIFY","src\/util\/base.ts":"MODIFY","src\/plugins\/tooltip\/index.ts":"MODIFY","src\/global.ts":"MODIFY","src\/behavior\/zoom-canvas.ts":"MODIFY","tests\/unit\/behavior\/zoom-spec.ts":"MODIFY"},"diff":{"src\/plugins\/fisheye\/index.ts":[{"add":["205","      const textLength = ori.texts.length;","206","      for (let j = 0; j < textLength; j++) {","207","        const text = ori.texts[j];","209","      }"],"delete":["205","      ori.texts.forEach((text) => {","207","      });"]}],"examples\/item\/multiEdge\/demo\/multiEdges.js":[{"add":["52","  \/\/ the edges are linked to the center of source and target ndoes","53","  linkCenter: true,"],"delete":[]}],"CHANGELOG.md":[{"add":["2","#### 3.7.1","3","","4","- fix: hide the tooltip plugin when drag node and contextmenu, #1975;","5","- fix: processParellelEdges without edge id problem;","6","- fix: label background with left, right position problem, #1861;","7","- fix: create-edge and redo undo problem, #1976.","8",""],"delete":[]}],"gatsby-browser.js":[{"add":["0","window.g6 = require('.\/src\/index.ts'); \/\/ import the source for debugging","1","\/\/ window.g6 = require('.\/dist\/g6.min.js'); \/\/ import the package for webworker"],"delete":["0","\/\/ window.g6 = require('.\/src\/index.ts'); \/\/ import the source for debugging","1","window.g6 = require('.\/dist\/g6.min.js'); \/\/ import the package for webworker"]}],"examples\/tool\/fisheye\/demo\/fisheyeStyle.js":[{"add":["100","          if (shape.get('type') === 'text') shape.hide();"],"delete":["100","          if (shape.get('type') === 'text') shape.set('visible', false);"]}],"examples\/tool\/fisheye\/demo\/fisheye.js":[{"add":["95","          if (shape.get('type') === 'text') shape.hide();"],"delete":["95","          if (shape.get('type') === 'text') shape.set('visible', false);"]}],"src\/shape\/node.ts":[{"add":["129","    style = {","130","      x: bbox.minX - padding[3],","131","      y: bbox.minY - padding[0]"],"delete":["121","    const labelPosition = labelCfg.position || this.labelPosition;","129","    const size = this.getSize!(cfg as ModelConfig);","130","","131","    const width = size[0];","132","    const height = size[1];","133","","135","    switch (labelPosition) {","136","      case 'top':","137","        style = {","138","          x: 0 - bbox.width \/ 2 - padding[3],","139","          y: 0 - height \/ 2 - (offset as number) - bbox.height - padding[0],","140","        };","141","        break;","142","      case 'bottom':","143","        style = {","144","          x: 0 - bbox.width \/ 2 - padding[3],","145","          y: height \/ 2 + (offset as number) - padding[2],","146","        };","147","        break;","148","      case 'left':","149","        style = {","150","          x: 0 - width \/ 2 - (offset as number) - bbox.width - padding[3],","151","          y: padding[0] + padding[2] === 0 ? 0 : -bbox.height \/ 2 + (padding[0] + padding[2]) \/ 2,","152","        };","153","        break;","154","      default:","155","        style = {","156","          x: width \/ 2 + (offset as number) - padding[3],","157","          y: padding[0] + padding[2] === 0 ? 0 : -bbox.height \/ 2 + (padding[0] + padding[2]) \/ 2,","158","        };","159","        break;"]}],"package.json":[{"add":["2","  \"version\": \"3.7.1\","],"delete":["2","  \"version\": \"3.7.0\","]}],"src\/util\/base.ts":[{"add":["166","          reverses[`${src}|${dst}|${edgeMap[sourceTarget].length - 1}`] = true;","190","      const sign = (k % 2 === 0 ? 1 : -1) * (reverses[`${current.source}|${current.target}|${k}`] ? -1 : 1);"],"delete":["166","          reverses[sedge.id] = true;","190","      const sign = (k % 2 === 0 ? 1 : -1) * (reverses[current.id] ? -1 : 1);"]}],"src\/plugins\/tooltip\/index.ts":[{"add":["8","import edgeTooltip from '..\/..\/behavior\/edge-tooltip';","56","      itemTypes: ['node', 'edge', 'combo']","70","      'contextmenu': 'onMouseLeave',","71","      'node:drag': 'onMouseLeave'","184","  public hide() {","185","    this.onMouseLeave();","186","  }"],"delete":["55","      itemTypes: ['node', 'edge', 'combo'],"]}],"src\/global.ts":[{"add":["1","  version: '3.7.1',"],"delete":["1","  version: '3.7.0',"]}],"src\/behavior\/zoom-canvas.ts":[{"add":["61","    \/\/ hide the shapes when the zoom ratio is smaller than optimizeZoom","62","    \/\/ hide the shapes when zoomming","66","      const optimized = this.get('optimized');","71","","72","      \/\/ hiding","73","      if (!optimized) {","77","            const children = node.get('group').get('children');","90","          const children = edge.get('group').get('children');","94","            shape.hide();","97","        this.set('optimized', true);","99","","100","","101","      \/\/ showing after 100ms","102","      clearTimeout(this.get('timeout'));","103","      const timeout = setTimeout(() => {","104","        const currentZoom = graph.getZoom();","105","        const curOptimized = this.get('optimized');","106","        if (curOptimized) {","107","          this.set('optimized', false);","108","          for (let n = 0; n < nodesLength; n++) {","109","            const node = nodes[n];","110","            const children = node.get('group').get('children');","111","            const childrenLength = children.length;","112","            if (currentZoom < optimizeZoom) {","113","              node.getKeyShape().show();","114","            } else {","115","              for (let c = 0; c < childrenLength; c++) {","116","                const shape = children[c];","117","                if (!shape.get('visible')) {","118","                  shape.show();","119","                }","120","              }","121","            }","122","          }","123","","124","          for (let edgeIndex = 0; edgeIndex < edgesLength; edgeIndex++) {","125","            const edge = edges[edgeIndex];","126","            const children = edge.get('group').get('children');","127","            const childrenLength = children.length;","128","            if (currentZoom < optimizeZoom) {","129","              edge.getKeyShape().show();","130","            } else {","131","              for (let c = 0; c < childrenLength; c++) {","132","                const shape = children[c];","133","                if (!shape.get('visible')) {","134","                  shape.show();","135","                }","136","              }","137","            }","138","          }","139","        }","140","      }, 500);","141","      this.set('timeout', timeout);"],"delete":["64","","65","      const currentZoom = graph.getZoom();","70","      if (currentZoom < optimizeZoom) {","74","            const children = node.getContainer().get('children');","87","          const children = edge.getContainer().get('children');","91","            if (!shape.get('isKeyShape')) {","92","              shape.hide();","93","            }","96","      } else {","97","        for (let n = 0; n < nodesLength; n++) {","98","          const node = nodes[n];","99","          const children = node.getContainer().get('children');","100","          const childrenLength = children.length;","101","          for (let c = 0; c < childrenLength; c++) {","102","            const shape = children[c];","103","            if (!shape.get('visible')) {","104","              shape.show();","105","            }","106","          }","107","        }","108","","109","        for (let edgeIndex = 0; edgeIndex < edgesLength; edgeIndex++) {","110","          const edge = edges[edgeIndex];","111","          const children = edge.getContainer().get('children');","112","          const childrenLength = children.length;","113","          for (let c = 0; c < childrenLength; c++) {","114","            const shape = children[c];","115","            if (!shape.get('visible')) {","116","              shape.show();","117","            }","118","          }","119","        }"]}],"tests\/unit\/behavior\/zoom-spec.ts":[{"add":["149","  it('zoom with optimize', done => {","191","    let e = createWheelEvent(graph.get('canvas').get('el'), 100, 100, 100);","192","    graph.emit('wheel', e);","193","    let matrix = graph.get('group').getMatrix();","194","    expect(approximateEqual(matrix[0], 1.1)).toBe(true);","195","    expect(approximateEqual(matrix[4], 1.1)).toBe(true);","196","    expect(approximateEqual(matrix[6], -11.1)).toBe(true);","197","    expect(approximateEqual(matrix[7], -11.1)).toBe(true);","198","","200","    setTimeout(() => {","201","      let node1 = graph.findById('node1');","202","      let container = node1.getContainer();","203","      container.get('children').map((child) => {","204","        expect(child.get('visible')).toBe(true);","205","      });","207","      graph.zoom(0.5);","208","      e = createWheelEvent(graph.get('canvas').get('el'), 100, 100, 100);","209","      graph.emit('wheel', e);","211","      \/\/ 只显示 keyShape","212","      node1 = graph.findById('node1');","213","      container = node1.getContainer();","214","      expect(node1.getKeyShape().get('visible')).toBe(true);","215","      container.get('children').map((child) => {","216","        if (!child.get('isKeyShape')) {","217","          expect(child.get('visible')).toBe(false);","218","        }","219","      });","220","      graph.zoomTo(1);","221","      e = createWheelEvent(graph.get('canvas').get('el'), 100, 100, 100);","222","      graph.emit('wheel', e);","223","      setTimeout(() => {","224","        node1 = graph.findById('node1');","225","        container = node1.getContainer();","226","        container.get('children').map((child) => {","227","          expect(child.get('visible')).toBe(true);","228","        });","229","        graph.destroy();","230","        done()","231","      }, 550);","233","    }, 550);"],"delete":["149","  it('zoom with optimize', () => {","164","    let e = createWheelEvent(graph.get('canvas').get('el'), 100, 100, 100);","165","    graph.emit('wheel', e);","166","    let matrix = graph.get('group').getMatrix();","167","    expect(approximateEqual(matrix[0], 1.1)).toBe(true);","168","    expect(approximateEqual(matrix[4], 1.1)).toBe(true);","169","    expect(approximateEqual(matrix[6], -11.1)).toBe(true);","170","    expect(approximateEqual(matrix[7], -11.1)).toBe(true);","171","","200","    let node1 = graph.findById('node1');","201","    let container = node1.getContainer();","202","    container.get('children').map((child) => {","203","      expect(child.get('visible')).toBe(true);","204","    });","206","    graph.zoom(0.5);","207","    e = createWheelEvent(graph.get('canvas').get('el'), 100, 100, 100);","208","    graph.emit('wheel', e);","210","    \/\/ 只显示 keyShape","211","    node1 = graph.findById('node1');","212","    container = node1.getContainer();","213","    expect(node1.getKeyShape().get('visible')).toBe(true);","214","    container.get('children').map((child) => {","215","      if (!child.get('isKeyShape')) {","216","        expect(child.get('visible')).toBe(false);","217","      }","218","    });","220","    graph.zoomTo(1);","221","    e = createWheelEvent(graph.get('canvas').get('el'), 100, 100, 100);","222","    graph.emit('wheel', e);","223","    node1 = graph.findById('node1');","224","    container = node1.getContainer();","225","    container.get('children').map((child) => {","226","      expect(child.get('visible')).toBe(true);","227","    });","228","","229","    graph.destroy();"]}]}},"b81a801791ed012a8a9584de771a10d61c8d2e98":{"changes":{"packages\/element\/src\/nodes\/ellipse.ts":"MODIFY","packages\/pc\/src\/behavior\/scroll-canvas.ts":"ADD","packages\/site\/docs\/api\/graphLayout\/forceAtlas2.zh.md":"MODIFY","packages\/site\/docs\/manual\/FAQ\/build-error.en.md":"MODIFY","packages\/site\/docs\/api\/graphLayout\/fruchterman.en.md":"MODIFY","packages\/site\/docs\/manual\/FAQ\/angular-support.en.md":"MODIFY","packages\/site\/docs\/manual\/FAQ\/angular-support.zh.md":"MODIFY","packages\/site\/docs\/api\/graphLayout\/guide.zh.md":"MODIFY","packages\/site\/docs\/manual\/FAQ\/supportIE.en.md":"MODIFY","packages\/element\/src\/nodes\/circle.ts":"MODIFY","packages\/site\/docs\/manual\/FAQ\/build-error-rollup.zh.md":"MODIFY","packages\/site\/docs\/manual\/FAQ\/supportIE.zh.md":"MODIFY","packages\/site\/examples\/case\/customFlow\/demo\/customFlow.js":"MODIFY","packages\/site\/docs\/manual\/FAQ\/build-error-rollup.en.md":"MODIFY","packages\/element\/src\/nodes\/star.ts":"MODIFY","packages\/pc\/src\/behavior\/index.ts":"MODIFY","packages\/element\/src\/nodes\/modelRect.ts":"MODIFY","packages\/element\/src\/nodes\/triangle.ts":"MODIFY","packages\/site\/docs\/manual\/middle\/layout\/graph-layout.en.md":"MODIFY","CHANGELOG.md":"MODIFY","packages\/site\/docs\/api\/graphLayout\/guide.en.md":"MODIFY","packages\/site\/docs\/manual\/middle\/layout\/graph-layout.zh.md":"MODIFY","packages\/pc\/src\/behavior\/drag-canvas.ts":"MODIFY","packages\/element\/src\/nodes\/diamond.ts":"MODIFY","packages\/site\/docs\/api\/graphLayout\/fruchterman.zh.md":"MODIFY","packages\/site\/docs\/api\/graphLayout\/gforce.en.md":"MODIFY","packages\/site\/docs\/manual\/FAQ\/build-error.zh.md":"MODIFY","packages\/pc\/tests\/unit\/element\/nodes\/icon-iconfont-spec.ts":"ADD","packages\/element\/src\/nodes\/donut.ts":"MODIFY","packages\/core\/src\/types\/index.ts":"MODIFY","packages\/site\/docs\/api\/graphLayout\/gforce.zh.md":"MODIFY","packages\/site\/docs\/api\/registerItem.zh.md":"MODIFY","packages\/core\/src\/graph\/graph.ts":"MODIFY"},"diff":{"packages\/element\/src\/nodes\/ellipse.ts":[{"add":["66","      const { width, height, show, text } = icon;","68","        if (text) {","69","          group.addShape('text', {","70","            attrs: {","71","              x: 0,","72","              y: 0,","73","              fontSize: 12,","74","              fill: '#000',","75","              stroke: '#000',","76","              textBaseline: 'middle',","77","              textAlign: 'center',","78","              ...icon,","79","            },","80","            className: `${this.type}-icon`,","81","            name: `${this.type}-icon`,","82","            draggable: true,","83","          });","84","        } else {","85","          group.addShape('image', {","86","            attrs: {","87","              x: -width! \/ 2,","88","              y: -height! \/ 2,","89","              ...icon,","90","            },","91","            className: `${this.type}-icon`,","92","            name: `${this.type}-icon`,","93","            draggable: true,","94","          });","95","        }"],"delete":["66","      const { width, height, show } = icon;","68","        const image = group.addShape('image', {","69","          attrs: {","70","            x: -width! \/ 2,","71","            y: -height! \/ 2,","72","            ...icon,","73","          },","74","          className: `${this.type}-icon`,","75","          name: `${this.type}-icon`,","76","          draggable: true,","77","        });"]}],"packages\/pc\/src\/behavior\/scroll-canvas.ts":[{"add":[],"delete":[]}],"packages\/site\/docs\/api\/graphLayout\/forceAtlas2.zh.md":[{"add":["56","**类型**： 'normal' | 'linlog'<br \/>**默认值**：'normal'<br \/>**是否必须**：false<br \/>**说明**：'linlog' 模式下，聚类将更加紧凑"],"delete":["56","**类型**： 'normal' | 'linlog'<br \/>**默认值**：'normal'<br \/>**是否必须**：false<br \/>**说明**：'normal' 模式下，聚类将更加紧凑"]}],"packages\/site\/docs\/manual\/FAQ\/build-error.en.md":[{"add":["2","order: 10"],"delete":["2","order: 9"]}],"packages\/site\/docs\/api\/graphLayout\/fruchterman.en.md":[{"add":["58","**Type**: Boolean<br \/>**Default**: false<br \/>**Required**: false<br \/>**Description**: Whether to enable the GPU parallel computing, supported by G6 4.0. If the machine or browser does not support GPU computing, it will be degraded to CPU computing automatically. The performance improvement: <img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*3rScQqqfpAAAAAAAAAAAAAAAARQnAQ' width='80%'\/>"],"delete":["58","**Type**: Boolean<br \/>**Default**: false<br \/>**Required**: false<br \/>**Description**: Whether to enable the GPU parallel computing, supported by G6 4.0. The performance improvement: <img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*3rScQqqfpAAAAAAAAAAAAAAAARQnAQ' width='80%'\/>"]}],"packages\/site\/docs\/manual\/FAQ\/angular-support.en.md":[{"add":["0","---","1","title: Error in Angular with G6","2","order: 2","3","---","5","**This doc is only for Angular 9 and above and the solution is only tested on Angular 9 and above.**","6","","7","There's no special settings or differences to use G6 in Angular if you just start a new Angular project from latest Angular CLI. Do it like you normal do when adding new dependency"],"delete":["0","## This doc is only for Angular 9 and above and the solution is only tested on Angular 9 and above.","2","There's no special settings or changes \/ differences to use G6 in Angular if you just start a new Angular project from latest Angular CLI. Do it like you normal do when adding new dependency"]}],"packages\/site\/docs\/manual\/FAQ\/angular-support.zh.md":[{"add":["0","---","1","title: Angular + G6 报错","2","order: 2","3","---","4","","5","**本文档仅对于 Angular 9 以上版本适用**","6","","7","如果你的项目是通过最新的 Angular CLI 创建，那么 G6 可以即开即用，不需要特殊设置。","18","1. 项目根目录下（与 package.json 同目录）需要有 `.browserslistrc` 文件，请注意 `browserslist` 文件无效。","19","2. 不开启IE支持。"],"delete":["0","## 本文档仅对于Angular 9以上版本适用","1","如果你的项目是通过最新的Angular CLI创建,那么G6可以即开即用,不会遇到什么问题,也不需要特殊设置.","12","1. 项目根目录下（与package.json同目录）需要有`.browserslistrc`文件, 请注意`browserslist`文件无效.","13","2. 不开启IE支持"]}],"packages\/site\/docs\/api\/graphLayout\/guide.zh.md":[{"add":["39","    \/\/ gpuEnabled: true \/\/ 是否使用 gpu 版本的布局算法，G6 4.0 支持，目前仅支持 gForce 及 fruchterman。若用户的机器或浏览器不支持 GPU 计算，将会自动降级为 CPU 计算"],"delete":["39","    \/\/ gpuEnabled: true \/\/ 是否使用 gpu 版本的布局算法，G6 4.0 支持，目前仅支持 gForce 及 fruchterman"]}],"packages\/site\/docs\/manual\/FAQ\/supportIE.en.md":[{"add":["2","order: 11"],"delete":["2","order: 10"]}],"packages\/element\/src\/nodes\/circle.ts":[{"add":["69","      const { width, height, show, text } = icon;","71","        if (text) {","72","          group.addShape('text', {","73","            attrs: {","74","              x: 0,","75","              y: 0,","76","              fontSize: 12,","77","              fill: '#000',","78","              stroke: '#000',","79","              textBaseline: 'middle',","80","              textAlign: 'center',","81","              ...icon,","82","            },","83","            className: `${this.type}-icon`,","84","            name: `${this.type}-icon`,","85","            draggable: true,","86","          });","87","        } else {","88","          group.addShape('image', {","89","            attrs: {","90","              x: -width \/ 2,","91","              y: -height \/ 2,","92","              ...icon,","93","            },","94","            className: `${this.type}-icon`,","95","            name: `${this.type}-icon`,","96","            draggable: true,","97","          });","98","        }"],"delete":["69","      const { width, height, show } = icon;","71","        group.addShape('image', {","72","          attrs: {","73","            x: -width \/ 2,","74","            y: -height \/ 2,","75","            ...icon,","76","          },","77","          className: `${this.type}-icon`,","78","          name: `${this.type}-icon`,","79","          draggable: true,","80","        });"]}],"packages\/site\/docs\/manual\/FAQ\/build-error-rollup.zh.md":[{"add":["2","order: 3"],"delete":["2","order: 2"]}],"packages\/site\/docs\/manual\/FAQ\/supportIE.zh.md":[{"add":["2","order: 11"],"delete":["2","order: 10"]}],"packages\/site\/examples\/case\/customFlow\/demo\/customFlow.js":[{"add":["235","    if (window.AntVUtil.isObject(endArrow)) endArrow.fill = stroke;"],"delete":["235","    if (isObject(endArrow)) endArrow.fill = stroke;"]}],"packages\/site\/docs\/manual\/FAQ\/build-error-rollup.en.md":[{"add":["2","order: 3"],"delete":["2","order: 2"]}],"packages\/element\/src\/nodes\/star.ts":[{"add":["69","      const { width: w, height: h, show, text } = icon;","71","        if (text) {","72","          group.addShape('text', {","73","            attrs: {","74","              x: 0,","75","              y: 0,","76","              fontSize: 12,","77","              fill: '#000',","78","              stroke: '#000',","79","              textBaseline: 'middle',","80","              textAlign: 'center',","81","              ...icon,","82","            },","83","            className: `${this.type}-icon`,","84","            name: `${this.type}-icon`,","85","            draggable: true,","86","          });","87","        } else {","88","          group.addShape('image', {","89","            attrs: {","90","              x: -w! \/ 2,","91","              y: -h! \/ 2,","92","              ...icon,","93","            },","94","            className: `${this.type}-icon`,","95","            name: `${this.type}-icon`,","96","            draggable: true,","97","          });","98","        }"],"delete":["69","      const { width: w, height: h, show } = icon;","71","        const image = group.addShape('image', {","72","          attrs: {","73","            x: -w! \/ 2,","74","            y: -h! \/ 2,","75","            ...icon,","76","          },","77","          className: `${this.type}-icon`,","78","          name: `${this.type}-icon`,","79","          draggable: true,","80","        });"]}],"packages\/pc\/src\/behavior\/index.ts":[{"add":["17","import ScrollCanvas from '.\/scroll-canvas';","34","  'scroll-canvas': ScrollCanvas,"],"delete":[]}],"packages\/element\/src\/nodes\/modelRect.ts":[{"add":["140","        const { width: w, height: h, x, y, offset, text, ...logoIconStyle } = logoIcon;","141","        if (text) {","142","          group.addShape('text', {","143","            attrs: {","144","              x: 0,","145","              y: 0,","146","              fontSize: 12,","147","              fill: '#000',","148","              stroke: '#000',","149","              textBaseline: 'middle',","150","              textAlign: 'center',","151","              ...logoIconStyle,","152","            },","153","            className: 'rect-logo-icon',","154","            name: 'rect-logo-icon',","155","            draggable: true,","156","          });","157","        } else {","158","          group.addShape('image', {","159","            attrs: {","160","              ...logoIconStyle,","161","              x: x || -width \/ 2 + (w as number) + (offset as number),","162","              y: y || -(h as number) \/ 2,","163","              width: w,","164","              height: h,","165","            },","166","            className: 'rect-logo-icon',","167","            name: 'rect-logo-icon',","168","            draggable: true,","169","          });","170","        }","184","        const { width: w, height: h, x, y, offset, text, ...iconStyle } = stateIcon;","185","        if (text) {","186","          group.addShape('text', {","187","            attrs: {","188","              x: 0,","189","              y: 0,","190","              fontSize: 12,","191","              fill: '#000',","192","              stroke: '#000',","193","              textBaseline: 'middle',","194","              textAlign: 'center',","195","              ...iconStyle,","196","            },","197","            className: 'rect-state-icon',","198","            name: 'rect-state-icon',","199","            draggable: true,","200","          });","201","        } else {","202","          group.addShape('image', {","203","            attrs: {","204","              ...iconStyle,","205","              x: x || width \/ 2 - (w as number) + (offset as number),","206","              y: y || -(h as number) \/ 2,","207","              width: w,","208","              height: h,","209","            },","210","            className: 'rect-state-icon',","211","            name: 'rect-state-icon',","212","            draggable: true,","213","          });","214","        }"],"delete":["140","        const { width: w, height: h, x, y, offset, ...logoIconStyle } = logoIcon;","141","        group.addShape('image', {","142","          attrs: {","143","            ...logoIconStyle,","144","            x: x || -width \/ 2 + (w as number) + (offset as number),","145","            y: y || -(h as number) \/ 2,","146","            width: w,","147","            height: h,","148","          },","149","          className: 'rect-logo-icon',","150","          name: 'rect-logo-icon',","151","          draggable: true,","152","        });","166","        const { width: w, height: h, x, y, offset, ...iconStyle } = stateIcon;","167","        group.addShape('image', {","168","          attrs: {","169","            ...iconStyle,","170","            x: x || width \/ 2 - (w as number) + (offset as number),","171","            y: y || -(h as number) \/ 2,","172","            width: w,","173","            height: h,","174","          },","175","          className: 'rect-state-icon',","176","          name: 'rect-state-icon',","177","          draggable: true,","178","        });"]}],"packages\/element\/src\/nodes\/triangle.ts":[{"add":["74","      const { width: w, height: h, show, offset, text } = icon;","76","        if (text) {","77","          group.addShape('text', {","78","            attrs: {","79","              x: 0,","80","              y: 0,","81","              fontSize: 12,","82","              fill: '#000',","83","              stroke: '#000',","84","              textBaseline: 'middle',","85","              textAlign: 'center',","86","              ...icon,","87","            },","88","            className: `${this.type}-icon`,","89","            name: `${this.type}-icon`,","90","            draggable: true,","91","          });","92","        } else {","93","          let iconW = -w! \/ 2;","94","          let iconH = -h! \/ 2;","95","          if (direction === 'up' || direction === 'down') {","96","            iconH += offset;","97","          }","98","          if (direction === 'left' || direction === 'right') {","99","            iconW += offset;","100","          }","101","          group.addShape('image', {","102","            attrs: {","103","              x: iconW,","104","              y: iconH,","105","              ...icon,","106","            },","107","            className: `${this.type}-icon`,","108","            name: `${this.type}-icon`,","109","            draggable: true,","110","          });"],"delete":["74","      const { width: w, height: h, show, offset } = icon;","76","        let iconW = -w! \/ 2;","77","        let iconH = -h! \/ 2;","78","        if (direction === 'up' || direction === 'down') {","79","          iconH += offset;","81","        if (direction === 'left' || direction === 'right') {","82","          iconW += offset;","83","        }","84","        group.addShape('image', {","85","          attrs: {","86","            x: iconW,","87","            y: iconH,","88","            ...icon,","89","          },","90","          className: `${this.type}-icon`,","91","          name: `${this.type}-icon`,","92","          draggable: true,","93","        });"]}],"packages\/site\/docs\/manual\/middle\/layout\/graph-layout.en.md":[{"add":["98","| gpuEnabled | Boolean | true \/ false | false | Whether to enable the GPU parallel computing, supported by G6 4.0. If the machine or browser does not support GPU computing, it will be degraded to CPU computing automatically.  |"],"delete":["98","| gpuEnabled | Boolean | true \/ false | false | Whether to enable the GPU parallel computing, supported by G6 4.0 |"]}],"CHANGELOG.md":[{"add":["2","#### 4.2.6","3","","4","- feat: scroll-canvas;","5","- feat: iconfont for node icon;","6","- fix: missing brushStyle in type ModeOption;","7","- fix: the comboId remains in the node after uncombo(), closes #2801;","8","- fix: disapearing edges when combos are expanded\/collapsed, closes #2798;","9",""],"delete":[]}],"packages\/site\/docs\/api\/graphLayout\/guide.en.md":[{"add":["36","    \/\/ gpuEnabled: true \/\/ Whether enable GPU version. supported by G6 4.0, and only support gForce and fruchterman layout. If the machine or browser does not support GPU computing, it will be degraded to CPU computing automatically. "],"delete":["36","    \/\/ gpuEnabled: true \/\/ Whether enable GPU version. supported by G6 4.0, and only support gForce and fruchterman layout"]}],"packages\/site\/docs\/manual\/middle\/layout\/graph-layout.zh.md":[{"add":["98","| gpuEnabled | Boolean | true \/ false | false | 是否启用 GPU 并行计算，G6 4.0 支持。若用户的机器或浏览器不支持 GPU 计算，将会自动降级为 CPU 计算 |"],"delete":["98","| gpuEnabled | Boolean | true \/ false | false | 是否启用 GPU 并行计算，G6 4.0 支持 |"]}],"packages\/pc\/src\/behavior\/drag-canvas.ts":[{"add":["61","    let expandWidth = this.scalableRange;","62","    let expandHeight = this.scalableRange;","63","    \/\/ 若 scalableRange 是 0~1 的小数，则作为比例考虑","64","    if (expandWidth < 1 && expandWidth > -1) {","65","      expandWidth = width * expandWidth;","66","      expandHeight = height * expandHeight;","67","    }","69","      (graphCanvasBBox.minX <= width + expandWidth &&","70","        graphCanvasBBox.minX + dx > width + expandWidth) ||","71","      (graphCanvasBBox.maxX + expandWidth >= 0 &&","72","        graphCanvasBBox.maxX + expandWidth + dx < 0)","77","      (graphCanvasBBox.minY <= height + expandHeight &&","78","        graphCanvasBBox.minY + dy > height + expandHeight ||","79","      (graphCanvasBBox.maxY + expandHeight >= 0 &&","80","        graphCanvasBBox.maxY + expandHeight + dy < 0)"],"delete":["62","      (graphCanvasBBox.minX <= width + this.scalableRange &&","63","        graphCanvasBBox.minX + dx > width + this.scalableRange) ||","64","      (graphCanvasBBox.maxX + this.scalableRange >= 0 &&","65","        graphCanvasBBox.maxX + this.scalableRange + dx < 0)","70","      (graphCanvasBBox.minY <= height + this.scalableRange &&","71","        graphCanvasBBox.minY + dy > height + this.scalableRange) ||","72","      (graphCanvasBBox.maxY + this.scalableRange >= 0 &&","73","        graphCanvasBBox.maxY + this.scalableRange + dy < 0)"]}],"packages\/element\/src\/nodes\/diamond.ts":[{"add":["62","      const { width: w, height: h, show, text } = icon;","64","        if (text) {","65","          group.addShape('text', {","66","            attrs: {","67","              x: 0,","68","              y: 0,","69","              fontSize: 12,","70","              fill: '#000',","71","              stroke: '#000',","72","              textBaseline: 'middle',","73","              textAlign: 'center',","74","              ...icon,","75","            },","76","            className: `${this.type}-icon`,","77","            name: `${this.type}-icon`,","78","            draggable: true,","79","          });","80","        } else {","81","          group.addShape('image', {","82","            attrs: {","83","              x: -w! \/ 2,","84","              y: -h! \/ 2,","85","              ...icon,","86","            },","87","            className: `${this.type}-icon`,","88","            name: `${this.type}-icon`,","89","            draggable: true,","90","          });","91","        }"],"delete":["62","      const { width: w, height: h, show } = icon;","64","        const image = group.addShape('image', {","65","          attrs: {","66","            x: -w! \/ 2,","67","            y: -h! \/ 2,","68","            ...icon,","69","          },","70","          className: `${this.type}-icon`,","71","          name: `${this.type}-icon`,","72","          draggable: true,","73","        });"]}],"packages\/site\/docs\/api\/graphLayout\/fruchterman.zh.md":[{"add":["58","**类型**: Boolean<br \/>**默认值**: false<br \/>**是否必须**: false<br \/>**说明**: 是否启用 GPU 并行计算。若用户的机器或浏览器不支持 GPU 计算，将会自动降级为 CPU 计算。自 G6 4.0 起支持，性能提升概览： <img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*4ogTQKrWhIkAAAAAAAAAAAAAARQnAQ' width='80%'\/>"],"delete":["58","**类型**: Boolean<br \/>**默认值**: false<br \/>**是否必须**: false<br \/>**说明**: 是否启用 GPU 并行计算，G6 4.0 支持，性能提升概览： <img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*4ogTQKrWhIkAAAAAAAAAAAAAARQnAQ' width='80%'\/>"]}],"packages\/site\/docs\/api\/graphLayout\/gforce.en.md":[{"add":["129","**Type**: Boolean<br \/>**Default**: false<br \/>**Required**: false<br \/>**Description**: Whether to enable the GPU parallel computing, supported by G6 4.0. If the machine or browser does not support GPU computing, it will be degraded to CPU computing automatically. The performance improvement: <img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*3rScQqqfpAAAAAAAAAAAAAAAARQnAQ' width='80%'\/>"],"delete":["129","**Type**: Boolean<br \/>**Default**: false<br \/>**Required**: false<br \/>**Description**: Whether to enable the GPU parallel computing, supported by G6 4.0. The performance improvement: <img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*3rScQqqfpAAAAAAAAAAAAAAAARQnAQ' width='80%'\/>"]}],"packages\/site\/docs\/manual\/FAQ\/build-error.zh.md":[{"add":["2","order: 10"],"delete":["2","order: 9"]}],"packages\/pc\/tests\/unit\/element\/nodes\/icon-iconfont-spec.ts":[{"add":[],"delete":[]}],"packages\/element\/src\/nodes\/donut.ts":[{"add":["73","      const { width, height, show, text } = icon;","75","        if (text) {","76","          group.addShape('text', {","77","            attrs: {","78","              x: 0,","79","              y: 0,","80","              fontSize: 12,","81","              fill: '#000',","82","              stroke: '#000',","83","              textBaseline: 'middle',","84","              textAlign: 'center',","85","              ...icon,","86","            },","87","            className: `${this.type}-icon`,","88","            name: `${this.type}-icon`,","89","            draggable: true,","90","          });","91","        } else {","92","          group.addShape('image', {","93","            attrs: {","94","              x: -width \/ 2,","95","              y: -height \/ 2,","96","              ...icon,","97","            },","98","            className: `${this.type}-icon`,","99","            name: `${this.type}-icon`,","100","            draggable: true,","101","          });","102","        }"],"delete":["73","      const { width, height, show } = icon;","75","        group.addShape('image', {","76","          attrs: {","77","            x: -width \/ 2,","78","            y: -height \/ 2,","79","            ...icon,","80","          },","81","          className: `${this.type}-icon`,","82","          name: `${this.type}-icon`,","83","          draggable: true,","84","        });"]}],"packages\/core\/src\/types\/index.ts":[{"add":["164","  brushStyle?: object;","165","  zoomKey?: 'shift' | 'ctrl' | 'alt' | 'control';","468","    text?: string;"],"delete":[]}],"packages\/site\/docs\/api\/graphLayout\/gforce.zh.md":[{"add":["129","**类型**: Boolean<br \/>**默认值**: false<br \/>**是否必须**: false<br \/>**说明**: 是否启用 GPU 并行计算。若用户的机器或浏览器不支持 GPU 计算，将会自动降级为 CPU 计算。自 G6 4.0 起支持，性能提升概览： <img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*4ogTQKrWhIkAAAAAAAAAAAAAARQnAQ' width='80%'\/>"],"delete":["129","**类型**: Boolean<br \/>**默认值**: false<br \/>**是否必须**: false<br \/>**说明**: 是否启用 GPU 并行计算，G6 4.0 支持，性能提升概览： <img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*4ogTQKrWhIkAAAAAAAAAAAAAARQnAQ' width='80%'\/>"]}],"packages\/site\/docs\/api\/registerItem.zh.md":[{"add":["148","G6.registerCombo(","149","  'comboName',"],"delete":["148","G6.registerNode(","149","  'nodeName',"]}],"packages\/core\/src\/graph\/graph.ts":[{"add":["1662","        delete childModel.parentId; \/\/ update the parentId of the model","1663","        delete childModel.comboId; \/\/ update the comboId of the model","2293","        if (found) {"],"delete":["1662","        childModel.parentId = undefined; \/\/ update the parentId of the model","2292","        if (found && cnodes.length === 0) {"]}]}},"7d8031fba9b93d60dc6d73a33b7de6b42ad550e0":{"changes":{"\/dev\/null":"DELETE","src\/tree.js":"MODIFY","src\/util\/base.js":"MODIFY","package.json":"MODIFY","test\/bugs\/issue-357-spec.js":"ADD","src\/item\/edge.js":"MODIFY","src\/item\/node.js":"MODIFY","src\/mixin\/layout.js":"MODIFY","src\/mixin\/animate.js":"MODIFY"},"diff":{"\/dev\/null":[{"add":[],"delete":[]}],"src\/tree.js":[{"add":["202","","203","      \/\/ deal collapsed","204","      if ('collapsed' in model) {","205","        if (model.collapsed) {","206","          item.deepEach(child => {","207","            child.hide();","208","            child.getEdges().forEach(edge => {","209","              edge.hide();","210","            });","211","          });","212","        } else {","213","          item.deepEach(child => {","214","            child.show();","215","            child.getEdges(edge => {","216","              const model = edge.getModel();","217","              return model.target === child.id;","218","            }).forEach(edge => {","219","              edge.show();","220","            });","221","          }, parent => {","222","            if (!parent.model.collapsed) {","223","              return parent.getChildren();","224","            }","225","            return null;","226","          });","227","        }","228","      }","229",""],"delete":["233","      \/\/ deal collapsed","234","      if ('collapsed' in model) {","235","        if (model.collapsed) {","236","          item.deepEach(child => {","237","            child.hide();","238","            child.getEdges().forEach(edge => {","239","              edge.hide();","240","            });","241","          });","242","        } else {","243","          item.deepEach(child => {","244","            child.show();","245","            child.getEdges(edge => {","246","              const model = edge.getModel();","247","              return model.target === child.id;","248","            }).forEach(edge => {","249","              edge.show();","250","            });","251","          }, parent => {","252","            if (!parent.model.collapsed) {","253","              return parent.getChildren();","254","            }","255","            return null;","256","          });","257","        }","258","      }","259",""]}],"src\/util\/base.js":[{"add":["9","  ...G.CommonUtil,"],"delete":["9","  each: require('lodash\/each'),","10","  isObject: require('lodash\/isObject'),","11","  isNumber: require('lodash\/isNumber'),","12","  isString: require('lodash\/isString'),","13","  isFunction: require('lodash\/isFunction'),","14","  isBoolean: require('lodash\/isBoolean'),","15","  isEmpty: require('lodash\/isEmpty'),","17","  upperFirst: require('lodash\/upperFirst'),","18","  upperCase: require('lodash\/upperCase'),","19","  isNil: require('lodash\/isNil'),","20","  isArray: require('lodash\/isArray'),","22","  toArray: require('lodash\/toArray'),","24","  clone: require('lodash\/clone'),","26","  merge: require('lodash\/merge'),","31","  isEqualWith: require('lodash\/isEqualWith'),","32","  isEqual: require('lodash\/isEqual'),","33","  replace: require('lodash\/replace'),","34","  union: require('lodash\/union'),","36","  extend: G.CommonUtil.extend,","37","  augment: G.CommonUtil.augment,"]}],"package.json":[{"add":["2","  \"version\": \"2.0.4-beta.3\",","98","    \"test-live\": \"torch --compile --interactive --watch --recursive .\/test\/bugs\/issue-357-spec.js\","],"delete":["2","  \"version\": \"2.0.4-beta.2\",","98","    \"test-live\": \"torch --compile --interactive --watch --recursive .\/test\/unit\/\","]}],"test\/bugs\/issue-357-spec.js":[{"add":[],"delete":[]}],"src\/item\/edge.js":[{"add":["65","    this._beforeDraw();"],"delete":[]}],"src\/item\/node.js":[{"add":["38","    this._beforeDraw();"],"delete":[]}],"src\/mixin\/layout.js":[{"add":["45","    const nodes = this.getNodes();"],"delete":["45","    const nodes = this.getItems();"]}],"src\/mixin\/animate.js":[{"add":["30",""],"delete":[]}]}},"ab16b626973a13c8c50dbb270c9dc785e9845bf6":{"changes":{"packages\/core\/src\/shape\/shapeBase.ts":"MODIFY","\/dev\/null":"DELETE","packages\/core\/src\/item\/item.ts":"MODIFY","packages\/site\/docs\/api\/Event.zh.md":"MODIFY","packages\/core\/src\/item\/edge.ts":"MODIFY","packages\/site\/docs\/api\/Event.en.md":"MODIFY","packages\/core\/src\/types\/index.ts":"MODIFY","packages\/core\/tests\/unit\/state\/refactor-state-spec.ts":"MODIFY","packages\/core\/src\/graph\/graph.ts":"MODIFY","packages\/pc\/tests\/unit\/state\/state-update-spec.ts":"ADD"},"diff":{"packages\/core\/src\/shape\/shapeBase.ts":[{"add":["75","                'Arial, sans-serif'","84","                'Arial, sans-serif'","116","  afterDraw(cfg?: ModelConfig, group?: IGroup, keyShape?: IShape) { },","337","  afterUpdate(cfg?: ModelConfig, item?: Item) { },","357","    \/\/ const originStyle = item.getOriginStyle();","358",""],"delete":["75","                  'Arial, sans-serif'","84","                  'Arial, sans-serif'","116","  afterDraw(cfg?: ModelConfig, group?: IGroup, keyShape?: IShape) {},","337","  afterUpdate(cfg?: ModelConfig, item?: Item) {},"]}],"\/dev\/null":[{"add":[],"delete":[]}],"packages\/core\/src\/item\/item.ts":[{"add":["11","  clone,","208","","222","      \/\/ 第一次 set originStyle，直接拿首次渲染所有图形的 attrs","223","      const originStyles = {};","225","        const shapeType = child.get('type');","228","          originStyles[name] =","229","            shapeType !== 'image' ? clone(child.attr()) : self.getShapeStyleByName(name);","231","          const keyShapeStyle: ShapeStyle = self.getShapeStyleByName(); \/\/ 可优化，需要去除 child.attr 中其他 shape 名的对象","241","      self.set('originStyle', originStyles);","243","      \/\/ 第二次 set originStyles，需要找到不是 stateStyles 的样式，更新到 originStyles 中","245","      \/\/ 上一次设置的 originStyle，是初始的 shape attrs","246","      let styles: ShapeStyle = this.getOriginStyle();","247","      \/\/ let styles: ShapeStyle = {};","248","      if (keyShapeName && !styles[keyShapeName]) styles[keyShapeName] = {};","249","","250","      \/\/ 获取当前状态样式","251","      const currentStatesStyle = this.getCurrentStatesStyle();","252","","253","      \/\/ 遍历当前所有图形的 attrs，找到不是 stateStyles 的样式更新到 originStyles 中","254","      each(children, (child) => {","255","        const name = child.get('name');","256","        const shapeAttrs = child.attr();","257","        if (name && name !== keyShapeName) {","258","          \/\/ 有 name 的非 keyShape 图形","259","          const shapeStateStyle = currentStatesStyle[name];","260","          if (!styles[name]) styles[name] = {};","261","          shapeStateStyle &&","262","            Object.keys(shapeAttrs).forEach((key) => {","263","              const value = shapeAttrs[key];","264","              if (value !== shapeStateStyle[key]) styles[name][key] = value;","265","            });","266","        } else {","267","          const shapeAttrs = child.attr();","268","          const keyShapeStateStyles = Object.assign(","269","            {},","270","            currentStatesStyle,","271","            currentStatesStyle[keyShapeName],","272","          );","273","          Object.keys(shapeAttrs).forEach((key) => {","274","            const value = shapeAttrs[key];","275","            \/\/ 如果是对象且不是 arrow，则是其他 shape 的样式","276","            if (isPlainObject(value) && ARROWS.indexOf(name) === -1) return;","277","            if (keyShapeStateStyles[key] !== value) {","278","              if (keyShapeName) styles[keyShapeName][key] = value;","279","              else styles[key] = value;","280","            }","281","          });","282","        }","285","      if (styles.path) delete styles.path;","286","      if (styles.matrix) delete styles.matrix;","287","      self.set('originStyle', styles);","288","    }","348","  protected beforeDraw() { }","353","  protected afterDraw() { }","358","  protected afterUpdate() { }"],"delete":["213","    const originStyles = {};","224","          originStyles[name] = self.getShapeStyleByName(name);","226","          const keyShapeStyle: ShapeStyle = self.getShapeStyleByName();","236","    }","237","","238","    const itemType = this.get('type');","239","    const model = this.getModel();","240","    let shapeType = model.type;","241","    if (!shapeType) {","242","      switch (itemType) {","243","        case 'edge':","244","          shapeType = 'line';","245","          break;","246","        default:","247","          shapeType = 'circle';","248","          break;","249","      }","250","    }","251","","252","    let shapeFactory = Shape.getFactory(itemType)[shapeType];","253","    if (!shapeFactory) shapeFactory = Shape.getFactory(itemType).getShape();","254","    const shapeOptions = shapeFactory.getOptions ? shapeFactory.getOptions(model) : {};","255","    const defaultStyle = shapeOptions.style || {};","256","    const size = shapeOptions.size;","257","    if (itemType === 'edge') {","258","      if (!defaultStyle.lineWidth) defaultStyle.lineWidth = size || Global.defaultEdge.size;","260","      if (!defaultStyle.r) defaultStyle.r = size \/ 2 || Global.defaultNode.size \/ 2;","261","      if (!defaultStyle.width)","262","        defaultStyle.width = (isArray(size) ? size[0] : size) || Global.defaultNode.size \/ 2;","263","      if (!defaultStyle.height)","264","        defaultStyle.height = (isArray(size) ? size[1] : size) || Global.defaultNode.size \/ 2;","265","    }","266","    if (!keyShapeName) {","267","      Object.assign(originStyles, defaultStyle);","268","    } else {","269","      const styles: ShapeStyle = {};","270","      for (const key in defaultStyle) {","271","        const style = defaultStyle[key];","272","        if (!isPlainObject(style) || ARROWS.includes(key)) styles[key] = style;","273","      }","274","      if (!originStyles[keyShapeName]) originStyles[keyShapeName] = styles;","275","      else originStyles[keyShapeName] = Object.assign(styles, originStyles[keyShapeName]);","276","    }","278","    const drawOriginStyle = this.getOriginStyle();","279","    let styles: ShapeStyle = {};","280","    if (cfg) {","281","      styles = deepMix({}, drawOriginStyle, originStyles, cfg.style, {","282","        labelCfg: cfg.labelCfg,","284","    } else {","285","      styles = deepMix({}, drawOriginStyle, originStyles);","286","    }","288","    if (styles.path) delete styles.path;","289","    if (styles.matrix) delete styles.matrix;","290","    self.set('originStyle', styles);","350","  protected beforeDraw() {}","355","  protected afterDraw() {}","360","  protected afterUpdate() {}"]}],"packages\/site\/docs\/api\/Event.zh.md":[{"add":["178","| beforecollapseexpandcombo | 当一个 combo 被收起或展开之前被触发，参数 `action` 指明了是收起还是展开 |","179","| aftercollapseexpandcombo | 当一个 combo 被收起或展开之后被触发，参数 `action` 指明了是收起还是展开 |","291","#### beforecollapseexpandcombo \/ aftercollapseexpandcombo","292","","293","| 名称 | 类型 | 描述               |","294","| ---- | ---- | ---------------- |","295","| action | string | 具体的操作， `'collapse'` 或 `'expand'` |","296","| combo | Item | 被操作的 combo item |","297",""],"delete":[]}],"packages\/core\/src\/item\/edge.ts":[{"add":["0","import { isString, isPlainObject, isNil, mix } from '@antv\/util';","209","  public updatePosition() { }"],"delete":["0","import { isString, isPlainObject, isNil, mix, each, isArray, deepMix, indexOf } from '@antv\/util';","2","import { IGroup } from '@antv\/g-base';","4","  IShapeBase,","5","  ModelConfig,","6","  ShapeStyle,","13","import Shape from '..\/shape\/shape';","16","import Global from '..\/global';","22","const ARROWS = ['startArrow', 'endArrow'];","216","  public updatePosition() {}","242","  \/**","243","   * 设置图元素原始样式","244","   * @param keyShape 图元素 keyShape","245","   * @param group Group 容器","246","   *\/","247","  public setOriginStyle(cfg?: ModelConfig) {","248","    const group: IGroup = this.get('group');","249","    const children = group.get('children');","250","    const keyShape: IShapeBase = this.getKeyShape();","251","    const self = this;","252","    const keyShapeName = keyShape.get('name');","253","","254","    if (!this.get('originStyle')) {","255","      \/\/ 第一次 set originStyle，直接拿首次渲染所有图形的 attrs","256","      const originStyles = {};","257","      each(children, (child) => {","258","        const shapeType = child.get('type');","259","        const name = child.get('name');","260","        if (name && name !== keyShapeName) {","261","          originStyles[name] =","262","            shapeType !== 'image' ? child.attr() : self.getShapeStyleByName(name);","263","        } else {","264","          const keyShapeStyle: ShapeStyle = self.getShapeStyleByName(); \/\/ 可优化，需要去除 child.attr 中其他 shape 名的对象","265","          if (keyShapeStyle.path) delete keyShapeStyle.path;","266","          if (keyShapeStyle.matrix) delete keyShapeStyle.matrix;","267","          if (!keyShapeName) {","268","            Object.assign(originStyles, keyShapeStyle);","269","          } else {","270","            originStyles[keyShapeName] = keyShapeStyle;","271","          }","272","        }","273","      });","274","      self.set('originStyle', originStyles);","275","    } else {","276","      \/\/ 第二次 set originStyles，需要找到不是 stateStyles 的样式，更新到 originStyles 中","277","","278","      \/\/ 上一次设置的 originStyle，是初始的 shape attrs","279","      let styles: ShapeStyle = this.getOriginStyle();","280","      \/\/ let styles: ShapeStyle = {};","281","      if (keyShapeName && !styles[keyShapeName]) styles[keyShapeName] = {};","282","","283","      \/\/ 获取当前状态样式","284","      const currentStatesStyle = this.getCurrentStatesStyle();","285","","286","      \/\/ 遍历当前所有图形的 attrs，找到不是 stateStyles 的样式更新到 originStyles 中","287","      each(children, (child) => {","288","        const name = child.get('name');","289","        const shapeAttrs = child.attr();","290","        if (name && name !== keyShapeName) {","291","          \/\/ 有 name 的非 keyShape 图形","292","          const shapeStateStyle = currentStatesStyle[name];","293","          if (!styles[name]) styles[name] = {};","294","          shapeStateStyle &&","295","            Object.keys(shapeAttrs).forEach((key) => {","296","              const value = shapeAttrs[key];","297","              if (value !== shapeStateStyle[key]) styles[name][key] = value;","298","            });","299","        } else {","300","          const shapeAttrs = child.attr();","301","          const keyShapeStateStyles = Object.assign(","302","            {},","303","            currentStatesStyle,","304","            currentStatesStyle[keyShapeName],","305","          );","306","          Object.keys(shapeAttrs).forEach((key) => {","307","            const value = shapeAttrs[key];","308","            \/\/ 如果是对象且不是 arrow，则是其他 shape 的样式","309","            if (isPlainObject(value) && ARROWS.indexOf(name) === -1) return;","310","            if (keyShapeStateStyles[key] !== value) {","311","              if (keyShapeName) styles[keyShapeName][key] = value;","312","              else styles[key] = value;","313","            }","314","          });","315","        }","316","      });","317","","318","      if (styles.path) delete styles.path;","319","      if (styles.matrix) delete styles.matrix;","320","      self.set('originStyle', styles);","321","    }","322","  }","323",""]}],"packages\/site\/docs\/api\/Event.en.md":[{"add":["178","| beforecollapseexpandcombo | Activated before an combo is collapsed or expanded, the parameter `action` indicates collapse or expand |","179","| aftercollapseexpandcombo | Activated after an combo is collapsed or expanded, the parameter `action` indicates collapse or expand |","298","#### beforecollapseexpandcombo \/ aftercollapseexpandcombo","299","","300","| Name | Type | Description      |","301","| ---- | ---- | ---------------- |","302","| action | string | The action, `'collapse'` or `'expand'` |","303","| combo | Item | The manipulated combo |","304",""],"delete":[]}],"packages\/core\/src\/types\/index.ts":[{"add":["176","  | ShapeStyle","177","  | {","178","    [key: string]: ShapeStyle;","179","  };","254","  ModelStyle;","264","  ModelStyle;","274","  ModelStyle;","404","  | ShapeStyle","405","  | {","406","    [key: string]: ShapeStyle;","407","  };","691","  BEFORECOLLAPSEEXPANDCOMBO = 'beforecollapseexpandcombo',","692","  AFTERCOLLAPSEEXPANDCOMBO = 'aftercollapseexpandcombo',"],"delete":["176","    | ShapeStyle","177","    | {","178","        [key: string]: ShapeStyle;","179","      };","254","    ModelStyle;","264","    ModelStyle;","274","    ModelStyle;","404","    | ShapeStyle","405","    | {","406","        [key: string]: ShapeStyle;","407","      };"]}],"packages\/core\/tests\/unit\/state\/refactor-state-spec.ts":[{"add":["240","    \/\/ \/\/ default value"],"delete":["240","    \/\/ default value"]}],"packages\/core\/src\/graph\/graph.ts":[{"add":["2218","    this.emit('beforecollapseexpandcombo', { action: 'expand', item: combo })","2361","    this.emit('aftercollapseexpandcombo', { action: 'collapse', item: combo })","2376","    this.emit('beforecollapseexpandcombo', { action: 'expand', item: combo })","2377","","2580","    this.emit('aftercollapseexpandcombo', { action: 'expand', item: combo })","2751","        before: {},","2752","        after: clone(this.save()),","2753","      };"],"delete":["2746","          before: {},","2747","          after: clone(this.save()),","2748","        };"]}],"packages\/pc\/tests\/unit\/state\/state-update-spec.ts":[{"add":[],"delete":[]}]}},"384808ad732f757452c546f973b18bdbd7f03f6b":{"changes":{"packages\/core\/src\/shape\/shapeBase.ts":"MODIFY","packages\/core\/src\/util\/graphic.ts":"MODIFY","packages\/core\/src\/item\/item.ts":"MODIFY","packages\/core\/src\/item\/edge.ts":"MODIFY","packages\/pc\/src\/index.ts":"MODIFY","packages\/pc\/src\/behavior\/brush-select.ts":"MODIFY","packages\/pc\/tests\/unit\/layout\/combo-force-spec.ts":"MODIFY","packages\/pc\/src\/graph\/controller\/layout.ts":"MODIFY","packages\/pc\/tests\/unit\/element\/node-spec.ts":"MODIFY","packages\/core\/src\/graph\/controller\/item.ts":"MODIFY","packages\/pc\/tests\/unit\/graph\/graph-hull-spec.ts":"MODIFY","packages\/pc\/tests\/unit\/graph\/fitView-spec.ts":"ADD","packages\/core\/src\/graph\/controller\/layout.ts":"MODIFY","packages\/core\/src\/interface\/item.ts":"MODIFY","packages\/pc\/tests\/unit\/graph\/issue2393-spec.ts":"ADD","packages\/pc\/tests\/unit\/element\/nodes\/image-spec.ts":"ADD","packages\/pc\/src\/layout\/index.ts":"MODIFY","packages\/core\/src\/graph\/graph.ts":"MODIFY"},"diff":{"packages\/core\/src\/shape\/shapeBase.ts":[{"add":["75","                'Arial, sans-serif'","84","                'Arial, sans-serif'","116","  afterDraw(cfg?: ModelConfig, group?: IGroup, keyShape?: IShape) { },","337","  afterUpdate(cfg?: ModelConfig, item?: Item) { },","402","","403","      \/\/ cloning  shape.attr(), keys.forEach to avoid cloning the img attr, which leads to maximum clone heap #2383","404","      \/\/ const keyShapeStyles = clone(shape.attr())","405","      const shapeAttrs = shape.attr();","406","      const keyShapeStyles = {};","407","      Object.keys(shapeAttrs).forEach(key => {","408","        if (key === 'img') return;","409","        const attr = shapeAttrs[key];","410","        if (typeof attr === 'object') {","411","          keyShapeStyles[key] = clone(attr);","412","        } else {","413","          keyShapeStyles[key] = attr;","414","        }","415","      });","418","      const filtetDisableStatesStyle: any = {};"],"delete":["75","                  'Arial, sans-serif'","84","                  'Arial, sans-serif'","116","  afterDraw(cfg?: ModelConfig, group?: IGroup, keyShape?: IShape) {},","337","  afterUpdate(cfg?: ModelConfig, item?: Item) {},","402","      const keyShapeStyles = clone(shape.attr());","405","      const filtetDisableStatesStyle = {};"]}],"packages\/core\/src\/util\/graphic.ts":[{"add":["15","import { isString, clone, isNumber } from '@antv\/util';","637","","638","export const shouldRefreshEdge = (cfg) => {","639","  let refreshEdge = isNumber(cfg.x) || isNumber(cfg.y) || cfg.type || cfg.anchorPoints || cfg.size;","640","  if (cfg.style)","641","    refreshEdge = refreshEdge || isNumber(cfg.style.r) || isNumber(cfg.style.width)","642","      || isNumber(cfg.style.height) || isNumber(cfg.style.rx) || isNumber(cfg.style.ry);","643","  return refreshEdge;","644","}"],"delete":["15","import { isString, clone } from '@antv\/util';"]}],"packages\/core\/src\/item\/item.ts":[{"add":["212","  public setOriginStyle(cfg?: ModelConfig) {","350","  protected beforeDraw() { }","355","  protected afterDraw() { }","360","  protected afterUpdate() { }","373","    let currentShape: IShapeBase;","377","    } else {","378","      currentShape = this.getKeyShape();"],"delete":["212","  private setOriginStyle(cfg?: ModelConfig) {","274","      if (styles.path) delete styles.path;","275","      if (styles.matrix) delete styles.matrix;","352","  protected beforeDraw() {}","357","  protected afterDraw() {}","362","  protected afterUpdate() {}","375","    let currentShape: IShapeBase = this.getKeyShape();"]}],"packages\/core\/src\/item\/edge.ts":[{"add":["0","import { isString, isPlainObject, isNil, mix, each, isArray, deepMix, indexOf } from '@antv\/util';","2","import { IGroup } from '@antv\/g-base';","3","import {","4","  IShapeBase,","5","  ModelConfig,","6","  ShapeStyle,","7","  EdgeConfig, IPoint, NodeConfig, SourceTarget, Indexable","8","} from '..\/types';","9","import Shape from '..\/shape\/shape';","12","import Global from '..\/global';","18","const ARROWS = ['startArrow', 'endArrow'];","212","  public updatePosition() { }","238","  \/**","239","   * 设置图元素原始样式","240","   * @param keyShape 图元素 keyShape","241","   * @param group Group 容器","242","   *\/","243","  public setOriginStyle(cfg?: ModelConfig) {","244","    const group: IGroup = this.get('group');","245","    const children = group.get('children');","246","    const keyShape: IShapeBase = this.getKeyShape();","247","    const self = this;","248","    const keyShapeName = keyShape.get('name');","249","","250","    if (!this.get('originStyle')) { \/\/ 第一次 set originStyle，直接拿首次渲染所有图形的 attrs","251","      const originStyles = {};","252","      each(children, (child) => {","253","        const shapeType = child.get('type');","254","        const name = child.get('name');","255","        if (name && name !== keyShapeName) {","256","          originStyles[name] = shapeType !== 'image' ? child.attr() : self.getShapeStyleByName(name);","257","        } else {","258","          const keyShapeStyle: ShapeStyle = self.getShapeStyleByName(); \/\/ 可优化，需要去除 child.attr 中其他 shape 名的对象","259","          if (keyShapeStyle.path) delete keyShapeStyle.path;","260","          if (keyShapeStyle.matrix) delete keyShapeStyle.matrix;","261","          if (!keyShapeName) {","262","            Object.assign(originStyles, keyShapeStyle);","263","          } else {","264","            originStyles[keyShapeName] = keyShapeStyle;","265","          }","266","        }","267","      });","268","      self.set('originStyle', originStyles);","269","    } else { \/\/ 第二次 set originStyles，需要找到不是 stateStyles 的样式，更新到 originStyles 中","270","","271","      \/\/ 上一次设置的 originStyle，是初始的 shape attrs","272","      let styles: ShapeStyle = this.getOriginStyle();","273","      \/\/ let styles: ShapeStyle = {};","274","      if (keyShapeName && !styles[keyShapeName]) styles[keyShapeName] = {};","275","","276","      \/\/ 获取当前状态样式","277","      const currentStatesStyle = this.getCurrentStatesStyle();","278","","279","      \/\/ 遍历当前所有图形的 attrs，找到不是 stateStyles 的样式更新到 originStyles 中","280","      each(children, (child) => {","281","        const name = child.get('name');","282","        const shapeAttrs = child.attr();","283","        if (name && name !== keyShapeName) { \/\/ 有 name 的非 keyShape 图形","284","          const shapeStateStyle = currentStatesStyle[name];","285","          if (!styles[name]) styles[name] = {};","286","          shapeStateStyle && Object.keys(shapeAttrs).forEach(key => {","287","            const value = shapeAttrs[key];","288","            if (value !== shapeStateStyle[key]) styles[name][key] = value","289","          })","290","        } else {","291","          const shapeAttrs = child.attr();","292","          const keyShapeStateStyles = Object.assign({}, currentStatesStyle, currentStatesStyle[keyShapeName])","293","          Object.keys(shapeAttrs).forEach(key => {","294","            const value = shapeAttrs[key];","295","            \/\/ 如果是对象且不是 arrow，则是其他 shape 的样式","296","            if (isPlainObject(value) && ARROWS.indexOf(name) === -1) return;","297","            if (keyShapeStateStyles[key] !== value) {","298","              if (keyShapeName) styles[keyShapeName][key] = value","299","              else styles[key] = value;","300","            }","301","          })","302","        }","303","      });","304","","305","      if (styles.path) delete styles.path;","306","      if (styles.matrix) delete styles.matrix;","307","      self.set('originStyle', styles);","308","    }","309","  }","310","","311",""],"delete":["0","import { isString, isPlainObject, isNil, mix } from '@antv\/util';","2","import { EdgeConfig, IPoint, NodeConfig, SourceTarget, Indexable } from '..\/types';","203","  public updatePosition() {}"]}],"packages\/pc\/src\/index.ts":[{"add":["40","  registerLayout,"],"delete":[]}],"packages\/pc\/src\/behavior\/brush-select.ts":[{"add":["16","      onSelect() { },","17","      onDeselect() { },"],"delete":["16","      onSelect() {},","17","      onDeselect() {},"]}],"packages\/pc\/tests\/unit\/layout\/combo-force-spec.ts":[{"add":["26","  it.only('layout with one node', (done) => {","45","      console.log('after lkayout')"],"delete":["26","  it('layout with one node', (done) => {"]}],"packages\/pc\/src\/graph\/controller\/layout.ts":[{"add":["181","    \/\/ 所有布局挂载 onLayoutEnd, 在布局结束后依次执行：","182","    \/\/ 执行用户自定义 onLayoutEnd，触发 afterlayout、更新节点位置、fitView\/fitCenter、触发 afterrender","183","    const { onLayoutEnd } = layoutCfg;","184","    layoutCfg.onLayoutEnd = () => {","185","      \/\/ 执行用户自定义 onLayoutEnd","186","      if (onLayoutEnd) {","187","        onLayoutEnd();","188","      }","189","      \/\/ 触发 afterlayout","190","      graph.emit('afterlayout');","191","      \/\/ 更新节点位置","192","      this.refreshLayout();","193","      \/\/ 由 graph 传入的，控制 fitView、fitCenter，并触发 afterrender","194","      success && success();","195","    };","196","","222","        const { onTick } = layoutCfg;","237","        if (layoutMethod.isCustomLayout && layoutCfg.onLayoutEnd) layoutCfg.onLayoutEnd();","240","    } else if (layoutCfg.onLayoutEnd) {","241","      \/\/ 若没有配置 layout，也需要更新画布","242","      layoutCfg.onLayoutEnd();","412","","413","    if (layoutMethod.isCustomLayout && layoutCfg.onLayoutEnd) layoutCfg.onLayoutEnd();"],"delete":["190","      const { onLayoutEnd } = layoutCfg;","191","      layoutCfg.onLayoutEnd = () => {","192","        if (onLayoutEnd) {","193","          onLayoutEnd();","194","        }","195","        graph.emit('afterlayout');","196","      };","199","    } else if (isGPU) {","200","      const { onLayoutEnd } = layoutCfg;","201","      layoutCfg.onLayoutEnd = () => {","202","        this.refreshLayout();","203","        if (onLayoutEnd) {","204","          onLayoutEnd();","205","        }","206","        graph.emit('afterlayout');","207","      };","222","        const { onTick, onLayoutEnd } = layoutCfg;","230","        const onLayoutEndNew = () => {","231","          if (onLayoutEnd) {","232","            onLayoutEnd();","233","          }","234","          graph.emit('afterlayout');","235","        };","236","        layoutMethod.onLayoutEnd = onLayoutEndNew;","246","    }","247","    if (","248","      (hasLayoutType || !allHavePos) &&","249","      this.layoutType !== 'force' &&","250","      this.layoutType !== 'gForce' &&","251","      !enableTick &&","252","      !isGPU","253","    ) {","254","      graph.emit('afterlayout');","255","      this.refreshLayout();","425","    if (this.layoutType !== 'force' && !layoutMethod.enableTick) {","426","      graph.emit('afterlayout');","427","    }","428","    this.refreshLayout();"]}],"packages\/pc\/tests\/unit\/element\/node-spec.ts":[{"add":["31","      expect(shape.type).toBe('circle');"],"delete":["31","      expect(shape.type).toBe('simple-circle');"]}],"packages\/core\/src\/graph\/controller\/item.ts":[{"add":["17","import { traverseTreeUp, traverseTree, getComboBBox, shouldRefreshEdge } from '..\/..\/util\/graphic';","253","      let refreshEdge = shouldRefreshEdge(cfg)!","254","      refreshEdge && each(edges, (edge: IEdge) => {"],"delete":["17","import { traverseTreeUp, traverseTree, getComboBBox } from '..\/..\/util\/graphic';","253","      each(edges, (edge: IEdge) => {"]}],"packages\/pc\/tests\/unit\/graph\/graph-hull-spec.ts":[{"add":["199","    \/\/ debugger","200","    bubbleHull.contain('4')","201",""],"delete":[]}],"packages\/pc\/tests\/unit\/graph\/fitView-spec.ts":[{"add":[],"delete":[]}],"packages\/core\/src\/graph\/controller\/layout.ts":[{"add":["144","    if (layoutMethod.isCustomLayout && layoutCfg.onLayoutEnd) layoutCfg.onLayoutEnd();","149","  public layoutAnimate() { }"],"delete":["144","    if (this.layoutType !== 'force' && !layoutMethod.enableTick) {","145","      graph.emit('afterlayout');","146","    }","147","    this.refreshLayout();","152","  public layoutAnimate() {}"]}],"packages\/core\/src\/interface\/item.ts":[{"add":["87","  setOriginStyle(cfg?: ModelConfig);","88",""],"delete":[]}],"packages\/pc\/tests\/unit\/graph\/issue2393-spec.ts":[{"add":[],"delete":[]}],"packages\/pc\/tests\/unit\/element\/nodes\/image-spec.ts":[{"add":[],"delete":[]}],"packages\/pc\/src\/layout\/index.ts":[{"add":["0","import { Layouts as Layout, registerLayout as oRegisterLayout } from '@antv\/layout'; \/\/ , Layout as oLayout","1","","2","","3","const registerLayout = (name: string, layoutOverride: any) => {","4","  layoutOverride.isCustomLayout = true;","5","  oRegisterLayout(name, layoutOverride);","6","}"],"delete":["0","import { Layouts as Layout, registerLayout, Layout as oLayout } from '@antv\/layout';"]}],"packages\/core\/src\/graph\/graph.ts":[{"add":["1255","      layoutController.layout(success);","1267","    \/\/ 将在 onLayoutEnd 中被调用","1269","      \/\/ fitView 与 fitCenter 共存时，fitView 优先，fitCenter 不再执行","1271","        self.fitView();","1273","        self.fitCenter();"],"delete":["1255","      const layoutWithWorker = layoutController.layout(success);","1257","      if (!layoutWithWorker) {","1258","        success();","1259","      }","1272","        self.on('afterlayout', () => {","1273","          self.fitView();","1274","        });","1276","        self.on('afterlayout', () => {","1277","          self.fitCenter();","1278","        });"]}]}},"65a029de6a624535f9d3b33d8929f7d71c2b78ff":{"changes":{"packages\/plugin\/src\/timeBar\/handler.ts":"MODIFY","packages\/element\/package.json":"MODIFY","packages\/plugin\/package.json":"MODIFY","packages\/pc\/tests\/unit\/element\/edge-label-back-spec.ts":"ADD","packages\/site\/docs\/api\/graphLayout\/dagre.en.md":"MODIFY","packages\/core\/src\/graph\/controller\/item.ts":"MODIFY","packages\/plugin\/src\/timeBar\/trend.ts":"MODIFY","packages\/core\/src\/element\/edge.ts":"MODIFY","packages\/pc\/tests\/unit\/graph\/svg-spec.ts":"MODIFY","packages\/core\/src\/global.ts":"MODIFY","packages\/core\/src\/element\/shapeBase.ts":"MODIFY","packages\/pc\/package.json":"MODIFY","packages\/core\/src\/element\/node.ts":"MODIFY","packages\/plugin\/tests\/unit\/timebar-spec.ts":"MODIFY","packages\/site\/docs\/manual\/middle\/plugins\/Plugins.en.md":"MODIFY","packages\/site\/docs\/manual\/middle\/plugins\/Plugins.zh.md":"MODIFY","packages\/core\/src\/interface\/graph.ts":"MODIFY","packages\/core\/src\/util\/graphic.ts":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/site\/docs\/api\/Plugins.en.md":"MODIFY","packages\/core\/package.json":"MODIFY","packages\/plugin\/src\/timeBar\/index.ts":"MODIFY","packages\/site\/package.json":"MODIFY","packages\/site\/docs\/api\/graphLayout\/dagre.zh.md":"MODIFY","CHANGELOG.md":"MODIFY","packages\/site\/docs\/api\/treeMethods.zh.md":"MODIFY","packages\/pc\/src\/global.ts":"MODIFY","packages\/site\/docs\/api\/treeMethods.en.md":"MODIFY","packages\/plugin\/src\/timeBar\/trendTimeBar.ts":"MODIFY","packages\/plugin\/src\/timeBar\/timeButton.ts":"MODIFY","packages\/pc\/tests\/unit\/element\/nodes\/icon-iconfont-spec.ts":"MODIFY","packages\/site\/docs\/api\/Plugins.zh.md":"MODIFY","packages\/g6\/src\/index.ts":"MODIFY","packages\/plugin\/src\/timeBar\/controllerBtn.ts":"MODIFY","packages\/plugin\/src\/timeBar\/timeBarSlice.ts":"MODIFY","packages\/pc\/tests\/unit\/performance\/data1-spec.ts":"MODIFY","packages\/core\/src\/graph\/graph.ts":"MODIFY"},"diff":{"packages\/plugin\/src\/timeBar\/handler.ts":[{"add":["152","          lineAppendWidth: 12,"],"delete":[]}],"packages\/element\/package.json":[{"add":["2","  \"version\": \"0.5.1\",","63","    \"@antv\/g6-core\": \"0.5.1\",","89","    \"@antv\/g6\": \"4.5.1\""],"delete":["2","  \"version\": \"0.4.1\",","63","    \"@antv\/g6-core\": \"0.4.1\",","89","    \"@antv\/g6\": \"4.3.11\""]}],"packages\/plugin\/package.json":[{"add":["2","  \"version\": \"0.5.1\",","24","    \"@antv\/g6-core\": \"0.5.1\",","59","    \"@antv\/g6\": \"4.5.1\""],"delete":["2","  \"version\": \"0.4.1\",","24","    \"@antv\/g6-core\": \"0.4.1\",","59","    \"@antv\/g6\": \"4.3.11\""]}],"packages\/pc\/tests\/unit\/element\/edge-label-back-spec.ts":[{"add":[],"delete":[]}],"packages\/site\/docs\/api\/graphLayout\/dagre.en.md":[{"add":["25","## layoutCfg.begin","26","","27","_Supported by G6 v4.5.1_","28","","29","**Type**: Array<br \/>**Default**: undefined<br \/>**Required**: false<br \/>**Description**: The position for the left-top of the layout.","30","","99","","100","## layoutCfg.nodeOrder","101","","102","_Supported by G6 v4.5.0_","103","","104","**Type**: string[]<br \/>**Default** undefined<br \/>**Required**: false<br \/>**Description**: The refered order array for the nodes in the same layer. If it is not specified, the order of the nodes will be decided by the dagre algorithm.","105","","106","","107","## layoutCfg.preset","108","","109","_Supported by G6 v4.5.0_","110","","111","**Type**: ","112","","113","","114","```javascript","115","{","116","  nodes: {","117","    x: number, \/\/ position","118","    y: number, \/\/ position","119","    layer?: number, \/\/ specify the layer for the node, 0-indexed","120","    _order?: number \/\/ if the preset comes from last dagre layout, the _order will be generated to state the order of the nodes in one layer","121","  }[]","122","}","123","```","124","","125","","126","<br \/>**Default** undefined<br \/>**Required**: false<br \/>**Description**: The refered node positions and other infomations for layout computing. It is usually used to keep the consistancy for data changing, where you could specify it with the result data from last layout.","127","","128","","129","## Specify the Layer for Node","130","","131","_Supported by G6 v4.5.0_","132","","133","Configurate `layer` (0-indexed) in the node data to specify the layout layer for it. Notice that the `layer` SHOULD NOT violate DAG's properties (e.g. DO NOT assign a layer value for a target node greater or equal to cresponding source node.). The layout will be failed otherwise."],"delete":[]}],"packages\/core\/src\/graph\/controller\/item.ts":[{"add":["355","","356","    const comboBBox = getComboBBox(children, graph, combo);","357","    const { x: comboX, y: comboY } = comboBBox;","361","      x: comboX || model.x,","362","      y: comboY || model.y,"],"delete":["355","    const comboBBox = getComboBBox(model.collapsed ? [] : children, graph);","356","    const { x: comboX, y: comboY } = model.collapsed ? getComboBBox(children, graph) : comboBBox;","360","      x: comboX,","361","      y: comboY,"]}],"packages\/plugin\/src\/timeBar\/trend.ts":[{"add":["128","        name: 'trend-line'","138","          name: 'trend-area'","150","        name: 'trend-interval'"],"delete":[]}],"packages\/core\/src\/element\/edge.ts":[{"add":["172","      if (style.lineWidth === undefined) style.lineWdith = (isNumber(size) ? size : size?.[0]) || currentAttr.lineWidth","239","","244","      x: bbox.minX - padding[3],","246","      matrix: [1, 0, 0, 0, 1, 0, 0, 0, 1]","253","      style.matrix = label.attr('matrix') || [1, 0, 0, 0, 1, 0, 0, 0, 1];","341","    const style = this.getLabelBgStyleByPosition(label, labelCfg);"],"delete":["172","      if (style.lineWidth === undefined) style.lineWdith = (isNumber(size) ? size: size?.[0]) || currentAttr.lineWidth","226","    cfg: EdgeConfig,","228","    group?: IGroup,","241","    const labelPosition = labelCfg.position || this.labelPosition;","246","      x: bbox.minX - padding[2],","248","      rotate: 0,","254","    const pathShape = group?.['shapeMap'][CLS_SHAPE]; \/\/ group?.find((element) => element.get('className') === CLS_SHAPE);","255","","256","    \/\/ 不对 pathShape 进行判空，如果线不存在，说明有问题了","257","    let pointPercent;","258","    if (labelPosition === 'start') {","259","      pointPercent = 0;","260","    } else if (labelPosition === 'end') {","261","      pointPercent = 1;","262","    } else {","263","      pointPercent = 0.5;","264","    }","265","    \/\/ 偏移量","266","    const offsetX = labelCfg.refX || (this.refX as number);","267","    const offsetY = labelCfg.refY || (this.refY as number);","268","    \/\/ \/\/ 如果两个节点重叠，线就变成了一个点，这时候label的位置，就是这个点 + 绝对偏移","269","    if (cfg.startPoint!.x === cfg.endPoint!.x && cfg.startPoint!.y === cfg.endPoint!.y) {","270","      style.x = cfg.startPoint!.x + offsetX - backgroundWidth \/ 2;","271","      style.y = cfg.startPoint!.y + offsetY - backgroundHeight \/ 2;","272","      return style;","273","    }","274","","275","    let bgOffsetX = offsetX - backgroundWidth \/ 2;","276","    if (labelCfg.position === 'start') {","277","      bgOffsetX =  offsetX - padding[2];","278","    } else if (labelCfg.position === 'end') {","279","      bgOffsetX =  offsetX - backgroundWidth;","280","    }","281","","282","    let offsetStyle = getLabelPosition(","283","      pathShape,","284","      pointPercent,","285","      bgOffsetX,","286","      offsetY + backgroundHeight \/ 2,","287","      autoRotate,","288","    );","289","","291","      style.x = offsetStyle.x;","292","      style.y = offsetStyle.y;","294","    style.rotate = offsetStyle.rotate;","381","    const style = this.getLabelBgStyleByPosition(label, cfg, labelCfg, group);","382","    delete style.rotate;","385","    if (!isNaN(rotate)) rect.rotateAtStart(rotate);"]}],"packages\/pc\/tests\/unit\/graph\/svg-spec.ts":[{"add":["1578","  it('change layout', (done) => {","1598","    setTimeout(() => {","1601","      done();","1602","    }, 100);","2028","      expect(viewport.style.width).toBe('41.3907px');","2029","      expect(viewport.style.height).toBe('37.351px');","2030","      expect(viewport.style.left).toBe('58.6093px');","2031","      expect(viewport.style.top).toBe('42.649px');","2033","    }, 150);","2060","      expect(viewport.style.width).toBe('42.8115px');","2061","      expect(viewport.style.height).toBe('30.6977px');","2062","      expect(viewport.style.left).toBe('57.1885px');","2063","      expect(viewport.style.top).toBe('49.3023px');","2065","    }, 150);"],"delete":["1578","  it('change layout', () => {","1598","    Promise.resolve().then(() => {","1601","    });","2026","","2028","      expect(viewport.style.width).toBe('39.8406px');","2029","      expect(viewport.style.height).toBe('39.8406px');","2030","      expect(viewport.style.left).toBe('42.8287px');","2031","      expect(viewport.style.top).toBe('25.6574px');","2033","    }, 100);","2059","","2061","","2062","      expect(viewport.style.width).toBe('39.8406px');","2063","      expect(viewport.style.height).toBe('39.8406px');","2064","      expect(viewport.style.left).toBe('41.5787px');","2065","      expect(viewport.style.top).toBe('29.5618px');","2067","    }, 100);"]}],"packages\/core\/src\/global.ts":[{"add":["66","  version: '0.5.1',","253","    'Arial, sans-serif'"],"delete":["66","  version: '0.4.1',","253","      'Arial, sans-serif'"]}],"packages\/core\/src\/element\/shapeBase.ts":[{"add":["117","  afterDraw(cfg?: ModelConfig, group?: IGroup, keyShape?: IShape) { },","190","    const style = this.getLabelBgStyleByPosition(label, labelCfg);","257","      let { labelCfg = {} } = this.mergeStyle || this.getOptions({}, updateType) as ModelConfig || {};","317","          labelBg.attr(calculateBgStyle);","326","  afterUpdate(cfg?: ModelConfig, item?: Item) { },","544","    const anchorPoints = cfg?.anchorPoints || this.getCustomConfig(cfg)?.anchorPoints || this.options?.anchorPoints;"],"delete":["117","  afterDraw(cfg?: ModelConfig, group?: IGroup, keyShape?: IShape) {},","190","    const style = this.getLabelBgStyleByPosition(label, cfg, labelCfg, group);","200","    cfg: ModelConfig,","202","    group?: IGroup,","259","      let { labelCfg = {} } = this.mergeStyle || this.getOptions({}, updateType) as ModelConfig ||  {};","317","            cfg,","319","            group,","321","          const labelBgStyle = calculateBgStyle;","322","          if (!isNaN(rotate) && rotate !== '') {","323","            let bgRotateMatrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];","324","            bgRotateMatrix = transform(bgRotateMatrix, [","325","              ['t', -labelBgStyle.x, -labelBgStyle.y],","326","              ['r', rotate],","327","              ['t', labelBgStyle.x, labelBgStyle.y],","328","            ]);","329","            labelBgStyle.matrix = bgRotateMatrix;","330","          } else {","331","            labelBg.resetMatrix();","332","          }","333","          labelBg.attr(labelBgStyle);","342","  afterUpdate(cfg?: ModelConfig, item?: Item) {},","560","    const anchorPoints =  cfg?.anchorPoints || this.getCustomConfig(cfg)?.anchorPoints || this.options?.anchorPoints ;"]}],"packages\/pc\/package.json":[{"add":["2","  \"version\": \"0.5.1\",","76","    \"@antv\/g6-core\": \"0.5.1\",","77","    \"@antv\/g6-plugin\": \"0.5.1\",","78","    \"@antv\/g6-element\": \"0.5.1\",","81","    \"@antv\/layout\": \"^0.1.22\",","126","}"],"delete":["2","  \"version\": \"0.4.1\",","76","    \"@antv\/g6-core\": \"0.4.1\",","77","    \"@antv\/g6-plugin\": \"0.4.1\",","78","    \"@antv\/g6-element\": \"0.4.1\",","81","    \"@antv\/layout\": \"0.1.19-beta.5\",","126","}"]}],"packages\/core\/src\/element\/node.ts":[{"add":["35","    let size: number | number[] = this.mergeStyle?.size || cfg.size || this.getOptions({})!.size || Global.defaultNode.size; \/\/ Global.defaultNode.size; \/\/  ","301","        let { width: w = 20, height: h = 20 } = iconConfig;","302","        if (iconConfig.fontFamily === 'iconfont' || iconConfig.hasOwnProperty('text')) {","303","          w = 0;","304","          h = 0;","305","        }","317","      let { width: w, height: h } = icon;","318","      if (icon.fontFamily === 'iconfont') {","319","        w = 0;","320","        h = 0;","321","      }"],"delete":["35","    let size: number | number[] = this.mergeStyle?.size || cfg.size ||this.getOptions({})!.size || Global.defaultNode.size; \/\/ Global.defaultNode.size; \/\/  ","101","    cfg: ModelConfig,","103","    group?: IGroup,","303","        const { width: w = 20, height: h = 20 } = iconConfig;","315","      const { width: w, height: h } = icon;"]}],"packages\/plugin\/tests\/unit\/timebar-spec.ts":[{"add":["391","","393","      nodes: [],","394","      edges: [],","396","","397","    for (let i = 0; i < 100; i++) {","398","      const month = i < 30 ? '01' : '02';","399","      const day = i % 30 < 10 ? `0${i % 30}` : `${i % 30}`;","400","      const id = `node-${i}`;","401","      data.nodes.push({","402","        id,","403","        \/\/ date: parseInt(`2020${month}${day}`, 10),","404","        \/\/ value: Math.round(Math.random() * 300),","405","        properties: {","406","          date111: parseInt(`2020${month}${day}`, 10),","407","          value111: Math.round(Math.random() * 300),","408","        }","409","      });","410","","411","      data.edges.push({","412","        source: `node-${Math.round(Math.random() * 90)}`,","413","        target: `node-${Math.round(Math.random() * 90)}`,","414","        \/\/ date: parseInt(`2020${month}${day}`, 10),","415","        \/\/ value: Math.round(Math.random() * 300),","416","        properties: {","417","          date111: parseInt(`2020${month}${day}`, 10),","418","          value111: Math.round(Math.random() * 300),","419","        }","420","      });","421","    }","422","","448","      \/\/ filterEdge: true,","449","      filterItemTypes: ['edge'], \/\/ 'node', ","450","      getDate: d => { return d.properties.date111 },","451","      containerCSS: {","452","        position: 'absolute',","453","        bottom: '50px'","454","      },","457","        \/\/ isArea: true,","461","        \/\/ lineStyle: {","462","        \/\/   stroke: 'green',","463","        \/\/   lineWidth: 1,","464","        \/\/ },","465","        \/\/ interval: {","466","        \/\/   data: intervalData.map((d) => d.value),","467","        \/\/   style: {","468","        \/\/     \/\/ stroke: '#ccc',","469","        \/\/     fill: '#ccc',","470","        \/\/   },","471","        \/\/ },","474","        start: 0,","475","        end: 1,","496","      tick: {","497","        tickLabelStyle: {","498","          rotate: Math.PI \/ 4","499","        }","500","      }","507","      \/\/ renderer: 'SVG',"],"delete":["392","      nodes: [","393","        {","394","          id: 'node1',","395","          x: 100,","396","          y: 100,","397","        },","398","      ],","427","        isArea: true,","431","        lineStyle: {","432","          stroke: 'green',","433","          lineWidth: 1,","434","        },","435","        interval: {","436","          data: intervalData.map((d) => d.value),","437","          style: {","438","            \/\/ stroke: '#ccc',","439","            fill: '#ccc',","440","          },","441","        },","470","      \/\/ renderer: 'svg',"]}],"packages\/site\/docs\/manual\/middle\/plugins\/Plugins.en.md":[{"add":["513","## TimeBar","514","","515","There are three types of built-in TimeBar in G6:","516","","517","- Time bar with a line chart as background;","518","- Simple time bar;","519","- Time bar with descrete ticks.","520","","521","All the three types of timebar supports play, fast forward, and fast backward.","522","","523","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*DOo6QpfFfMUAAAAAAAAAAAAAARQnAQ' width='500' \/>","524","<br \/>Time bar with a line chart as background<br \/>","525","","526","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*bzGBQKkewZMAAAAAAAAAAAAAARQnAQ' width='500' \/>","527","<br \/>Simple time bar<br \/>","528","","529","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*kHRkQpnvBmwAAAAAAAAAAAAAARQnAQ' width='500' \/>","530","<br \/>Time bar with descrete ticks<br \/>","531","","532","<br \/>Refer to the demos [HERE](https:\/\/g6.antv.vision\/en\/examples\/tool\/timebar#timebar)<br \/>","533","","534","### Common Usage","535","","536","Same to other plugins of G6, the users can initiate the TimeBar and assign it to the graph as:","537","","538","```javascript","539","import G6 from '@antv\/g6';","540","","541","const timebar = new G6.TimeBar({","542","  width: 500,","543","  height: 150,","544","  padding: 10,","545","  type: 'trend',","546","  trend: {","547","    data: timeBarData,","548","  },","549","});","550","","551","const graph = new G6.Graph({","552","  container: 'container',","553","  width,","554","  height,","555","  plugins: [timebar],","556","});","557","```","558","","559","<br \/>If you want to use the TimeBar with line chart, assign the `type` to be `trend` when instantiating the TimeBar, which results in:","560","","561","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*lfvIQJYbs7oAAAAAAAAAAAAAARQnAQ' width='600' \/>","562","","563","<br \/>Assigning the `type` to be `simple` results in:","564","","565","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*g2zhQqP6ruYAAAAAAAAAAAAAARQnAQ' width='600' \/>","566","","567","<br \/>And assigning the `type` to be `tick` results in a TimeBar with descrete ticks. Note that it is different from the above two types of TimeBar, \\*\\*The TimeBar with decrete ticks is configured with the `tick` object but not the `trend` object.","568","","569","```javascript","570","const timebar = new G6.TimeBar({","571","  width,","572","  height: 150,","573","  type: 'tick',","574","  tick: {","575","    data: timeBarData,","576","    width,","577","    height: 42,","578","    tickLabelFormatter: d => {","579","      const dateStr = `${d.date}`;","580","      if ((count - 1) % 10 === 0) {","581","        return `${dateStr.substr(0, 4)}-${dateStr.substr(4, 2)}-${dateStr.substr(6, 2)}`;","582","      }","583","      return false;","584","    },","585","    tooltipFomatter: d => {","586","      const dateStr = `${d}`;","587","      return `${dateStr.substr(0, 4)}-${dateStr.substr(4, 2)}-${dateStr.substr(6, 2)}`;","588","    },","589","  },","590","});","591","```","592","","593","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*n6ECQ7Jn5pQAAAAAAAAAAAAAARQnAQ' width='600' \/>","594","","595","","596","### Event Listener","597","","598","TimeBar Plugin exposes several timing events. They could be listened by `graph.on('eventname', e => {})`.","599","","600","| Event Name | Description |","601","| --- | --- |","602","| valuechange | Emitted when the value range of the timebar is chaged. |","603","| timebarstartplay | Emitted when the timeline starts to play. |","604","| timebarendplay | Emitted when the timeline ends playing. |","605","","606","### Definition of the Configurations","607","","608","#### Definition of the Interfaces","609","","610","The complete interfaces for the TimeBar is shown below:","611","","612","```javascript","613","interface TimeBarConfig extends IPluginBaseConfig {","614","  \/\/ position size","615","  readonly x?: number;","616","  readonly y?: number;","617","  readonly width?: number;","618","  readonly height?: number;","619","  readonly padding?: number;","620","","621","  readonly type?: 'trend' | 'simple' | 'tick';","622","  \/\/ the configuration for the TimeBar with line chart and simple TimeBar, takes effect whtn the type is 'trend' or 'simple'","623","  readonly trend?: TrendConfig;","624","","625","  \/\/ the configurations for the two sliders","626","  readonly slider?: SliderOption;","627","","628","  \/\/ when the type is 'tick', it is the configuration for the TimeBar with descrete ticks","629","  \/\/ when the type is 'trend' or 'simpe', it is the configuration for the time tick labels under the timeBar","630","  readonly tick?: TimeBarSliceOption | TickCfg;","631","","632","  \/\/ the buttons for play, fast forward, and back forward","633","  readonly controllerCfg?: ControllerCfg;","634","","635","  \/\/ [Supported from v4.5.1] the CSS style for the DOM container of the timebar","636","  readonly containerCSS?: Object;","637","","638","  \/\/ [Supported from v4.5.1] the item types that will be filtered by the timebar. e.g. ['node', 'edge']. The default value is ['node']","639","  readonly filterItemTypes?: string[];","640","","641","  \/\/ [Deprecated from v4.5.1, replaced by filterItemTypes] whether to consider the edge filtering. If it is false, only filter the nodes and the edges whose end nodes are filtered out while the selected range of the timeBar is changed. If it is true, there should be `date` properties on the edges data, and the timeBar will filter the edges which is not in the selected range in the same time","642","  readonly filterEdge?: boolean;","643","","644","  \/\/ [Supported from v4.5.1] whether filter the nodes and edges on the graph by graph.changeData, which means the data of the graph will be changed by the timebar. If it is false, the graph.hideItem and graph.showItem will be called to hide\/show the nodes and edges instead of changeData","645","  readonly changeData?: boolean;","646","","647","  \/\/ the callback function after the time range is changed. When it is not assigned, the graph elements will be filtered after the time range is changed","648","  rangeChange?: (graph: IGraph, minValue: string, maxValue: string) => void;","649","","650","  \/\/ [Supported from v4.5.1] user returns the date value according to the data of a node or an edge","651","  getDate?: (d: any) => number;","652","","653","  \/\/ [Supported from v4.5.1] user returns the value according to the data of a node or an edge. The value is used to draw the trend line for timebar with type 'trend'","654","  getValue?: (d: any) => number;","655","","656","  \/\/ [Supported from v4.5.1] user returns true or false to decide whether to ignore the node or the edge while filtering. If it is true, the item with data model will be ignored. Or the item will be filtered according to the min and max date value","657","  shouldIgnore?: (itemType: 'node' | 'edge', model: any, dateRage: { min: number, max: number }) => boolean;","658","}","659","```","660","","661","#### The Parameters of the Interfaces","662","","663","| Name | Type | Default Value | Description |","664","| --- | --- | --- | --- |","665","| container | HTMLDivElement | null | The DOM container of the TimeBar. By default, the plugin will create a container DOM with 'g6-component-timebar' as className |","666","| x | number | 0 | The beginning x position of the TimeBar plugin |","667","| y | number | 0 | The beginning y position of the TimeBar plugin |","668","| width | number |  | **Requred**, the width of the TimeBar |","669","| height | number |  | **Requred**, the height of the TimeBar |","670","| padding | number\/number[] | 10 | The padding of the container of the TimeBar |","671","| type | 'trend' \/ 'simple' \/ 'tick' | trend | The type of the TimeBar, 'trend' by default |","672","| trend | TrendConfig | null | The configuration for the TimeBar with line chart and simple TimeBar, takes effect whtn the type is 'trend' or 'simple' |","673","| slider | SliderOption | null | The configurations for the two sliders |","674","| tick | TimeBarSliceOption \/ TickCfg | null | If the type is 'tick', it is the configuration for the TimeBar with descrete ticks. If it the type is 'trend' or 'simple', it is the configuration for the time tick labels under the timeBar |","675","| controllerCfg | ControllerCfg | null | The buttons for play, fast forward, and back forward |","676","| containerCSS | Object | null | [Supported from v4.5.1] The CSS style for the DOM container of the timebar |","677","| filterItemTypes | string[] | null | [Supported from v4.5.1] The item types that will be filtered by the timebar. e.g. ['node', 'edge']. The default value is ['node'] |","678","| filterEdge | boolean | false | [Deprecated from v4.5.1, replaced by filterItemTypes] Whether to consider the edge filtering. If it is false, only filter the nodes and the edges whose end nodes are filtered out while the selected range of the timeBar is changed. If it is true, there should be `date` properties on the edges data, and the timeBar will filter the edges which is not in the selected range in the same time |","679","| changeData | boolean | null | [Supported from v4.5.1] Whether filter the nodes and edges on the graph by graph.changeData, which means the data of the graph will be changed by the timebar. If it is false, the graph.hideItem and graph.showItem will be called to hide\/show the nodes and edges instead of changeData |","680","| rangeChange | Function | null | The callback function after the time range is changed. When it is not assigned, the graph elements will be filtered after the time range is changed |","681","| getDate | (d: any) => number | null | [Supported from v4.5.1] User returns the date value according to the data of a node or an edge |","682","| getValue | (d: any) => number | null | [Supported from v4.5.1] User returns the value according to the data of a node or an edge. The value is used to draw the trend line for timebar with type 'trend' |","683","| shouldIgnore | (itemType: 'node' | 'edge', model: any, dateRage: { min: number, max: number }) => boolean | null | [Supported from v4.5.1] User returns true or false to decide whether to ignore the node or the edge while filtering. If it is true, the item with data model will be ignored. Or the item will be filtered according to the min and max date value |","684","","685","#### Interface for TrendConfig","686","","687","> Does not support the configurations for the style of the tick labels.","688","","689","```javascript","690","interface TrendConfig {","691","  \/\/ The data","692","  readonly data: {","693","    date: string;","694","    value: string;","695","  }[];","696","  \/\/ The position and size","697","  readonly x?: number;","698","  readonly y?: number;","699","  readonly width?: number;","700","  readonly height?: number;","701","  \/\/ The styles","702","  readonly smooth?: boolean;","703","  readonly isArea?: boolean;","704","  readonly lineStyle?: ShapeStyle;","705","  readonly areaStyle?: ShapeStyle;","706","  readonly interval?: Interval;","707","}","708","```","709","","710","#### Parameters of the TrendConfig","711","","712","| Name | Type | Default Value | Description |","713","| --- | --- | --- | --- |","714","| x | number | 0 | The beginning x position of the trend line chart |","715","| y | number | 0 | The beginning y position of the trend line chart |","716","| width | number | The width of the TimeBar | The width of the trend line chart of the TimeBar, we suggest to use the default value. If you wanna custom it, please assign the `width` of the slider in the same time |","717","| height | number | 28 when type='trend'<br \/>8 when type='simple' | The height of the TimeBar | The width of the trend line chart of the TimeBar, we suggest to use the default value. If you wanna custom it, please assign the `height` of the slider in the same time |","718","| smooth | boolean | false | Whether to show a smooth line on the trend line chart |","719","| isArea | boolean | false | Whether to show a area chart instead |","720","| lineStyle | ShapeStyle | null | The configurations for the style of the line in the line chart |","721","| areaStyle | ShapeStyle | null | The configuration for the style of the area in the chart when `isArea` is `true` |","722","| interval | Interval | null | The configuration for the style of the bars in the chart. When it is assigned, a mixed trend chart will take place. `Interval = { data: number[], style: ShapeStyle }`. Except the configurations in `ShapeStyle` for the style of the shapes in the bar charts, `barWidth` for the width of one bar is also configurable for `style`  |","723","","724","#### Interfaces of SliderOption","725","","726","```javascript","727","export type SliderOption = Partial<{","728","  readonly width?: number;","729","  readonly height?: number;","730","  readonly backgroundStyle?: ShapeStyle;","731","  readonly foregroundStyle?: ShapeStyle;","732","  \/\/ The style of the sliders","733","  readonly handlerStyle?: {","734","    width?: number;","735","    height?: number;","736","    style?: ShapeStyle;","737","  };","738","  readonly textStyle?: ShapeStyle;","739","  \/\/ The start and end position for the sliders, which indicate the data range for the filtering. Ranges from 0 to 1","740","  readonly start: number;","741","  readonly end: number;","742","  \/\/ The labels for the sliders","743","  readonly minText: string;","744","  readonly maxText: string;","745","}>;","746","```","747","","748","#### Parameters for the SliderOption","749","","750","| Name | Type | Default Value | Description |","751","| --- | --- | --- | --- |","752","| width | number | The width of the container of the TimeBar - 2 \\* padding | The width of the background trend chart. We suggest to use the default value. If you wanna custom it, assign it the the `width` in the `trend` in the same time |","753","| height | number | 28 when type='trend'<br \/>8 when type='simple' | The height of the background trend chart. We suggest to use the default value. If you wanna custom it, assign it the the `height` in the `trend` in the same time |","754","| backgroundStyle | ShapeStyle | null | The configuration for the style of the background |","755","| foregroundStyle | ShapeStyle | null | The configuration for the style of the forground |","756","| handlerStyle | ShapeStyle | null | The configuration for the style of the two sliders |","757","| textStyle | ShapeStyle | null | The configuration for the style of the labels on the two sliders |","758","| start | number | 0.1 | The start position for the sliders, which indicate the start of the data range for the filtering. Ranges from 0 to `end` |","759","| end | number | 0.9 | The end position for the sliders, which indicate the end of the data range for the filtering. Ranges from `start` to 1 |","760","| minText | string | min | The label for the left slider |","761","| maxText | string | max | The label for the right slider |","762","","763","#### TimeBarSliceOption","764","","765","```javascript","766","export interface TimeBarSliceOption {","767","  \/\/ position size","768","  readonly x?: number;","769","  readonly y?: number;","770","  readonly width?: number;","771","  readonly height?: number;","772","  readonly padding?: number;","773","","774","  \/\/ styles","775","  readonly selectedTickStyle?: TickStyle;","776","  readonly unselectedTickStyle?: TickStyle","777","  readonly tooltipBackgroundColor?: string;","778","","779","  readonly start?: number;","780","  readonly end?: number;","781","","782","  \/\/ data","783","  readonly data: {","784","    date: string;","785","    value: string;","786","  }[];","787","","788","  \/\/ custom the formatter function for the tick labels","789","  readonly tickLabelFormatter?: (d: any) => string | boolean;","790","  \/\/ custom the formatter function for the tooltip","791","  readonly tooltipFomatter?: (d: any) => string;","792","}","793","```","794","","795","#### Parameters for the TimeBarSliceOption","796","","797","| Name | Type | Default Value | Description |","798","| --- | --- | --- | --- |","799","| x | number | 0 | The beginning x position for the TimeBar |","800","| y | number | 0 | The beginning y position for the TimeBar |","801","| width | number |  | **Requred**, the width of the TimeBar |","802","| height | number |  | **Requred**, the height of the TimeBar |","803","| padding | number \/ number[] | 0 | The padding of the container of the TimeBar |","804","| selectedTickStyle | ShapeStyle | null | The style of the tick(s) which is(are) selected |","805","| unselectedTickStyle | ShapeStyle | null | The style of the tick(s) which is(are) unselected |","806","| tooltipBackgroundColor | ShapeStyle | null | The background style for the tooltip |","807","| start | number | 0.1 | The start position for the sliders, which indicate the start of the data range for the filtering. Ranges from 0 to `end` |","808","| end | number | 0.9 | The end position for the sliders, which indicate the end of the data range for the filtering. Ranges from `start` to 1 |","809","| data | any[] | [] | **Requred**, the data for the ticks |","810","| tickLabelFormatter | Function | null | The formatter function for customing the labels of the ticks |","811","| tooltipFomatter | Function | null | The formatter function for customing the tooltip |","812","","813","#### TickCfg","814","","815","```javascript","816","export interface TickCfg {","817","  \/\/ the fomatter for the time tick labels","818","  readonly tickLabelFormatter?: (d: any) => string | undefined;","819","  \/\/ the shape style for the time tick labels. [Supported from v4.5.1] tickLabelStyle.rotate can be configured to controll the rotate of the tick label to avoid overlappings","820","  readonly tickLabelStyle?: ShapeStyle;","821","  \/\/ the shape style for the short vertical lines uppon the time tick labels","822","  readonly tickLineStyle?: ShapeStyle;","823","}","824","```","825","","826","#### Parameters for TickCfg","827","","828","| Name | Type | Default Value | Description |","829","| --- | --- | --- | --- |","830","| tickLabelFormatter | Function | null | The formatter function for customing the labels of the ticks |","831","| tickLabelStyle | ShapeStyle | {} | The shape style for the time tick labels. [Supported from v4.5.1] tickLabelStyle.rotate can be configured to controll the rotate of the tick label to avoid overlappings |","832","| tickLineStyle | ShapeStyle | {} | The shape style for the short vertical lines uppon the time tick labels |","833","","834","#### Interface of the ControllerCfg","835","","836","> Does not support for now","837","","838","> Does not support the style configuration for controller buttons","839","","840","> Does not support loop play","841","","842","```javascript","843","type ControllerCfg = Partial<{","844","  \/** the begining position and the size of the controller, the width and height will not scale the sub-controllers but only affects the positions of them. To change the size of the sub-controllers, try ControllerCfg.scale or the scale in the style of sub-controller *\/","845","  readonly x?: number;","846","  readonly y?: number;","847","  readonly width: number;","848","  readonly height: number;","849","  \/** the scale of the whole controller *\/","850","  readonly scale?: number;","851","  \/** the fill and stroke color of the background *\/","852","  readonly fill?: string;","853","  readonly stroke?: string;","854","  \/** the font family for the whole controller, whose priority is lower than the fontFamily in the text style of each sub-controller *\/","855","  readonly fontFamily?: string;","856","","857","  \/** the play spped, means the playing time for 1 tick *\/","858","  readonly speed?: number;","859","  \/** whether play in loop *\/","860","  readonly loop?: boolean;","861","  \/** whether hide the 'time type controller' on the right-bottom *\/","862","  readonly hideTimeTypeController: boolean;","863","","864","  \/** style of the backward button. scale, offsetX, offsetY are also can be assigned to it to controll the size and position of the backward button *\/","865","  readonly preBtnStyle?: ShapeStyle;","866","","867","  \/** style of the forward button. scale, offsetX, offsetY are also can be assigned to it to controll the size and position of the forward button *\/","868","  readonly nextBtnStyle?: ShapeStyle;","869","","870","  \/** style of the play button. scale, offsetX, offsetY are also can be assigned to it to controll the size and position of the paly button *\/","871","  readonly playBtnStyle?: ShapeStyle;","872","","873","  \/** style of the 'speed controller'. scale, offsetX, offsetY are also can be assigned to it and each sub-styles to controll the size and position of the speed controller and sub-shapes*\/","874","  readonly speedControllerStyle?: {","875","    offsetX?: number,","876","    offsetY?: number;","877","    scale?: number","878","    pointer?: ShapeStyle,","879","    scroller?: ShapeStyle,","880","    text?: ShapeStyle","881","  };","882","","883","  \/** style of the 'time type controller'. scale, offsetX, offsetY  are also can be assigned to it and each sub-styles to controll the size and position of the speed controller and sub-shapes *\/","884","  readonly timeTypeControllerStyle?: {","885","    offsetX?: number,","886","    offsetY?: number;","887","    scale?: number","888","    check?: ShapeStyle,","889","    box?: ShapeStyle,","890","    text?: ShapeStyle","891","  };","892","  \/** [Supported from v4.5.1] The style of the background rect of the controller *\/","893","  readonly containerStyle?: ExtendedShapeStyle;","894","  \/** the text for the right-botton switch controlling play with single time point or time range *\/","895","  readonly timePointControllerText?: string;","896","  readonly timeRangeControllerText?: string","897","}>","898","```","899","","900","#### Parameters for ControllerCfg","901","","902","| Name | Type | Default Value | Description |","903","| --- | --- | --- | --- |","904","| x | number | 0 | The beginning x position for the buttons group of the TimeBar |","905","| y | number | 0 | The beginning y position for the buttons group of the TimeBar |","906","| width | number | The width of the TimeBar | The width of the buttons group of the TimeBar, do not scale the sub-controllers but only affects the positions of them |","907","| height | number | 40 | The width of the buttons group of the TimeBar, do not scale the sub-controllers but only affects the positions of them |","908","| scale | number | 1 | The scale of the whole controller |","909","| speed | number | 1 | The play speed |","910","| loop | boolean | false | _Does not support for now_, whether play in loop |","911","| hideTimeTypeController | boolean | true | Whther hide the time type controller on the right bottom |","912","| fill | string |  | The fillling color for the background of the controller |","913","| stroke | string |  | The stroke color for the background of the buttons group |","914","| preBtnStyle | ShapeStyle | null | The style of the backward button. `scale`, `offsetX`, `offsetY` are also can be assigned to it to controll the size and position of the backward button |","915","| nextBtnStyle | ShapeStyle | null | The style of the forward button. `scale`, `offsetX`, `offsetY` are also can be assigned to it to controll the size and position of the forward button |","916","| playBtnStyle | ShapeStyle | null | The style of the play button. `scale`, `offsetX`, `offsetY` are also can be assigned to it to controll the size and position of the paly button |","917","| speedControllerStyle | { offsetX?: number, offsetY?: number, scale?: number, pointer?: ShapeStyle, text?: ShapeStyle, scroller?: ShapeStyle} | null | The style of the 'speed controller'. `scale`, `offsetX`, `offsetY` are also can be assigned to it and each sub-styles to controll the size and position of the speed controller and sub-shapes |","918","| timeTypeControllerStyle | { offsetX?: number, offsetY?: number, scale?: number, box?: ShapeStyle, check?: ShapeStyle, text?: ShapeStyle } | null | The style of the 'time type controller'. `scale`, `offsetX`, `offsetY` are also can be assigned to it and each sub-styles to controll the size and position of the speed controller and sub-shapes |","919","| containerStyle ｜ ShapeStyle | {} | [Supported from v4.5.1] The style of the background rect of the controller |","920","| timePointControllerText | string | \"单一时间\" | The text for the right-botton switch controlling play with single time point or time range |","921","| timeRangeControllerText | string | \"时间范围\" | The text for the right-botton switch controlling play with single time point or time range |"],"delete":["332","## TimeBar","333","","334","The built-in TimeBar plugin has the following abilities:","335","","336","- Filtering the data of the graph by changing the time range;","337","- Demonstrating the trending of the data by an attribute on the TimeBar.","338","","339","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*HJjmT7uQwjAAAAAAAAAAAABkARQnAQ' width=700 alt='img'\/>","340","","341","**Description:** It is a beta version of TimeBar, which will support complex time series graph and analysis in the future.","342","","343","### Configuration","344","","345","| Name | Type | Default | Description |","346","| --- | --- | --- | --- |","347","| container | HTMLDivElement | null | The container of the TimeBar. A DOM container with className 'g6-component-timebar' will be used by default |","348","| width | number | 400 | The width of the TimeBar's container |","349","| height | number | 400 | The height of the TimeBar's container |","350","| timebar | TimeBarOption | {} | The style configurations for TimeBar |","351","| rangeChange | (graph: IGraph, min: number, max: number) => void | null | The callback function after changing the time range |","352","","353","**TimeBarOption for timebar**","354","","355","```","356","interface HandleStyle {","357","  width: number;","358","  height: number;","359","  style: ShapeStyle;","360","}","361","```","362","","363","| Name | Type | Default | Description |","364","| --- | --- | --- | --- |","365","| x | number | 0 | The begining x of the TimeBar |","366","| y | number | 0 | The begining y of the TimeBar |","367","| width | number | 400 | The width of the TimeBar |","368","| height | number | 400 | The height of the TimeBar |","369","| backgroundStyle | ShapeStyle | {} | The background style of the TimeBar |","370","| foregroundStyle | ShapeStyle | {} | The foreground style of the TimeBar, which indicates the selected area |","371","| handlerStyle | HandleStyle | null | The style of the slider handler |","372","| textStyle | ShapeStyle | null | The style of the texts |","373","| minLimit | number | 0 | The minimum position for the slider on the left, range from 0 to 1 |","374","| maxLimit | number | 1 | The maximum position for the slider on the right, range from 0 to 1 |","375","| start | number | 0 | The initial start position of the slider |","376","| end | number | 1 | The initial end position of the slider |","377","| minText | string | null | The text for the minimum value |","378","| maxText | string | null | The text for the maximum value |","379","| trend | TrendConfig | null | The configuration of the trend chart on the TimeBar |","380","","381","**TrendConfig for trend**","382","","383","```","384","interface Data {","385","  date: string;","386","  value: number;","387","}","388","```","389","","390","| Name | Type | Default | Description |","391","| --- | --- | --- | --- |","392","| data | Data[] | [] | The data of the TimeBar |","393","| smooth | boolean | false | Whether use the smooth curve instead of polylines for the trend chart |","394","| isArea | boolean | false | Whether use the area chart instead of line chart |","395","| lineStyle | ShapeStyle | null | The style of the line for line chart, takes effect when `isArea` is `false` |","396","| areaStyle | ShapeStyle | null | The style of the area for area chart, takes effect when `isArea` is `true` |","397","","398","### Usage","399","","400","#### Default Usage","401","","402","```","403","const timebar = new G6.TimeBar();","404","","405","const graph = new G6.Graph({","406","  \/\/... Other configurations","407","  plugins: [timebar], \/\/ Use timebar plugin","408","});","409","```","410","","411","##### Style Configuration","412","","413","It is free to configure the style for the TimeBar, and listen to the value changing to do some response.","414","","415","```","416","const timebar = new G6.TimeBar({","417","  width: 600,","418","  timebar: {","419","    width: 600,","420","    backgroundStyle: {","421","      fill: '#08979c',","422","      opacity: 0.3","423","    },","424","    foregroundStyle: {","425","      fill: '#40a9ff',","426","      opacity: 0.4","427","    },","428","    trend: {","429","      data: timeBarData,","430","      isArea: false,","431","      smooth: true,","432","      lineStyle: {","433","        stroke: '#9254de'","434","      }","435","    }","436","  },","437","  rangeChange: (graph, min, max) => {","438","    \/\/ Get the instance of the graph and the range of the timebar, you can control the rendering of the graph by yourself here","439","    console.log(graph, min, max)","440","  }","441","});","442","","443","const graph = new G6.Graph({","444","  \/\/... Other configurations","445","  plugins: [timebar], \/\/ Use timebar plugin","446","});","447","```"]}],"packages\/site\/docs\/manual\/middle\/plugins\/Plugins.zh.md":[{"add":["664","### 事件监听","665","","666","TimeBar 插件暴露除了几个时机事件，方便用户监听内部状态的变化。以下事件可通过 `graph.on('eventname', e => {})` 进行监听。","667","","668","| 事件名称 | 描述 |","669","| --- | --- |","670","| valuechange | 时间轴的时间范围发生变化时触发 |","671","| timebarstartplay | 时间轴开始播放时触发 |","672","| timebarendplay | 时间轴播放结束时触发 |","673","","695","  \/\/ 当 type 是 tick 时，这是 tick 类型时间轴的配置项","696","  \/\/ 当 type 是 trend 或 simple 时，这是时间轴下方时间刻度文本的配置项","697","  readonly tick?: TimeBarSliceOption | TickCfg;","702","  \/\/ [v4.5.1 起支持] 容器的 CSS 样式","703","  readonly containerCSS?: Object;","704","","705","  \/\/ [v4.5.1 起支持] 过滤的类型, ['node', 'edge'], 默认为 ['node']","706","  readonly filterItemTypes?: string[];","707","","708","  \/\/ [v4.5.1 起废弃，由 filterItemTypes 代替] 是否过滤边，若为 true，则需要配合边数据上有 date 字段，过滤节点同时将不满足 date 在选中范围内的边也过滤出去；若为 false，则仅过滤节点以及两端节点都被过滤出去的边","709","  readonly filterEdge?: boolean;","710","","711","  \/\/ [v4.5.1 起支持] 是否通过 graph.changeData 改变图上数据从而达到筛选目的。若为 false 则将使用 graph.hideItem 和 graph.showItem 以隐藏\/展示图上元素从而达到筛选目的","712","  readonly changeData?: boolean;","713","","714","  \/\/ TimeBar 时间范围变化时的回调函数，当不定义该函数时，时间范围变化时默认过滤图上的数据","716","","717","  \/\/ [v4.5.1 起支持] 用户根据节点\/边数据返回对应时间值的方法","718","  getDate?: (d: any) => number;","719","","720","  \/\/ [v4.5.1 起支持] 用户根据节点\/边数据返回对应 value 的方法。value 用于在 type 为 trend 的时间轴上显示趋势线","721","  getValue?: (d: any) => number;","722","","723","  \/\/ [v4.5.1 起支持] 在过滤图元素时是否要忽略某些元素。返回 true，则忽略。否则按照正常过滤逻辑处理","724","  shouldIgnore?: (itemType: 'node' | 'edge', model: any, dateRage: { min: number, max: number }) => boolean;","735","| width | number |  | **必选**，TimeBar 容器宽度 |","736","| height | number |  | **必选**，TimeBar 高度 |","741","| tick | TimeBarSliceOption \/ TickCfg | null | 当 type 是 tick 时，这是 tick 类型时间轴的配置项，该字段必须按；当 type 是 trend 或 simple 时，这是时间轴下方时间刻度文本的配置项 |","743","| containerCSS | Object | null | [v4.5.1 起支持] 容器的 CSS 样式 |","744","| filterItemTypes | string[] | null | [v4.5.1 起支持] 过滤的类型, ['node', 'edge'], 默认为 ['node'] |","745","| filterEdge | boolean | false | [v4.5.1 起废弃，由 filterItemTypes 代替] 是否过滤边，若为 true，则需要配合边数据上有 date 字段，过滤节点同时将不满足 date 在选中范围内的边也过滤出去；若为 false，则仅过滤节点以及两端节点都被过滤出去的边 |","746","| changeData | boolean | null | [v4.5.1 起支持] 是否通过 graph.changeData 改变图上数据从而达到筛选目的。若为 false 则将使用 graph.hideItem 和 graph.showItem 以隐藏\/展示图上元素从而达到筛选目的 |","748","| getDate | (d: any) => number | null | [v4.5.1 起支持] 用户根据节点\/边数据返回对应时间值的方法 |","749","| getValue | (d: any) => number | null | [v4.5.1 起支持] 用户根据节点\/边数据返回对应 value 的方法。value 用于在 type 为 trend 的时间轴上显示趋势线 |","750","| shouldIgnore | (itemType: 'node' | 'edge', model: any, dateRage: { min: number, max: number }) => boolean | null | [v4.5.1 起支持] 在过滤图元素时是否要忽略某些元素。返回 true，则忽略。否则按照正常过滤逻辑处理 |","789","| interval | Interval | null | 柱状图配置项，当配置了该项后，趋势图上会展现为混合图样式。`Interval = { data: number[], style: ShapeStyle }`，`style` 除 `ShapeStyle` 类型中图形的样式外，还可配置 `barWidth` 配置柱状图柱子的宽度。 |","880","","881","#### TickCfg 接口定义","882","","883","```javascript","884","export interface TickCfg {","885","  \/\/ 时间轴下方文本的格式化函数","886","  readonly tickLabelFormatter?: (d: any) => string | undefined;","887","  \/\/ 时间轴下方文本的图形样式。[v4.5.1 起支持] 可配置 tickLabelStyle.rotate 以控制时间轴下方每个文本的旋转角度，可避免文本相互重叠","888","  readonly tickLabelStyle?: ShapeStyle;","889","  \/\/ 时间轴下方文本上的竖线图形样式","890","  readonly tickLineStyle?: ShapeStyle;","891","}","892","```","893","","894","#### TickCfg 参数说明","895","","896","| Name | Type | Default Value | Description |","897","| --- | --- | --- | --- |","898","| tickLabelFormatter | Function | null | 时间轴下方文本的格式化函数 |","899","| tickLabelStyle | ShapeStyle | {} | 时间轴下方文本的图形样式。[v4.5.1 起支持] 可配置 tickLabelStyle.rotate 以控制时间轴下方每个文本的旋转角度，可避免文本相互重叠 |","900","| tickLineStyle | ShapeStyle | {} | 时间轴下方文本上方的竖线的图形样式 |","901","","912","","913","  \/** 控制栏的起始位置以及宽高，width height 将不缩放内部子控制器，仅影响它们的位置分布。需要缩放请使用 scale *\/","918","  \/** 控制栏缩放比例 *\/","919","  readonly scale?: number;","920","  \/** 控制器背景的颜色和描边色 *\/","921","  readonly fill?: string;","922","  readonly stroke?: string;","923","  \/** 整个控制栏的字体样式，优先级低于各个子控制器的 text 内的 fontFamily *\/","924","  readonly fontFamily?: string;","925","","930","  \/** 是否隐藏右下角的 \u2019播放时间类型切换器\u2018 *\/","931","  readonly hideTimeTypeController: boolean;","932","","933","  \/** \u2018上一帧\u2019按钮的样式，同时可以为其配置 scale、offsetX、offsetY 单独控制该控制器的缩放以及平移 *\/","935","","936","  \/** \u2018下一帧\u2019按钮的样式，同时可以为其配置 scale、offsetX、offsetY 单独控制该控制器的缩放以及平移 *\/","938","","939","  \/** \u2018播放\u2019 与 \u2018暂停\u2019 按钮的样式，同时可以为其配置 scale、offsetX、offsetY 单独控制该控制器的缩放以及平移 *\/","941","","942","  \/** \u2018速度控制器\u2019 的样式，包括速度的指针、速度指示滚轮（横线）、文本的样式，同时可以为 speedControllerStyle 及其子图形样式配置 scale、offsetX、offsetY 单独控制该控制器及其子图形的缩放以及平移） *\/","943","  readonly speedControllerStyle?: {","944","    offsetX?: number,","945","    offsetY?: number;","946","    scale?: number","947","    pointer?: ShapeStyle,","948","    scroller?: ShapeStyle,","949","    text?: ShapeStyle","950","  };","951","","952","  \/** \u2018播放时间类型切换器\u2019 的样式，包括 checkbox 的框、checkbox 的选中勾、文本的样式，同时可以为 timeTypeControllerStyle 及其子图形样式配置 scale、offsetX、offsetY 单独控制该控制器及其子图形的缩放以及平移  *\/","953","  readonly timeTypeControllerStyle?: {","954","    offsetX?: number,","955","    offsetY?: number;","956","    scale?: number","957","    check?: ShapeStyle,","958","    box?: ShapeStyle,","959","    text?: ShapeStyle","960","  };","961","  \/** [v4.5.1 起支持] 控制栏背景方框的样式 *\/","962","  readonly containerStyle?: ExtendedShapeStyle;","963","  \/** \u2018播放时间类型切换器\u2019单一文本时的文本，默认为\u2018单一时间\u2019 *\/","964","  readonly timePointControllerText?: string;","965","  \/** \u2018播放时间类型切换器\u2019单一文本时的文本，默认为\u2018时间范围\u2019 *\/","966","  readonly timeRangeControllerText?: string;","972","| 名称 | 类型 | 默认值 | 描述 |","973","| --- | --- | --- | --- |","974","| x | number | 0 | 控制栏开始 x 坐标 |","975","| y | number | 0 | 控制栏开始 y 坐标 |","976","| width | number | TimeBar 宽度 | 控制栏宽度，将不缩放内部子控制器，仅影响它们的位置分布 |","977","| height | number | 40 | 控制栏高度，将不缩放内部子控制器，仅影响它们的位置分布 |","978","| scale | number | 1 | 控制栏缩放比例 |","979","| speed | number | 1 | 播放速度 |","980","| loop | boolean | false | 暂不支持，是否循环播放 |","981","| hideTimeTypeController | boolean | true | 是否隐藏时间类型切换 |","982","| fill | string |  | 控制栏背景框填充色 |","983","| stroke | string |  | 整个控制栏的字体样式，优先级低于各个子控制器的 text 内的 fontFamily |","984","| preBtnStyle | string | null | 控制栏背景框边框色 |","985","| preBtnStyle | ShapeStyle | null | \u2018上一帧\u2019按钮的样式，同时可以为其配置 `scale`、`offsetX`、`offsetY` 单独控制该控制器的缩放以及平移 |","986","| nextBtnStyle | ShapeStyle | null | \u2018下一帧\u2019按钮的样式，同时可以为其配置 `scale`、`offsetX`、`offsetY` 单独控制该控制器的缩放以及平移 |","987","| playBtnStyle | ShapeStyle | null | \u2018播放\u2019 与 \u2018暂停\u2019 按钮的样式，同时可以为其配置 `scale`、`offsetX`、`offsetY` 单独控制该控制器的缩放以及平移 |","988","| speedControllerStyle | { offsetX?: number, offsetY?: number, scale?: number, pointer?: ShapeStyle, text?: ShapeStyle, scroller?: ShapeStyle} | null | \u2018速度控制器\u2019 的样式，包括速度的指针、速度指示滚轮（横线）、文本的样式，同时可以为 `speedControllerStyle` 及其子图形样式配置 `scale`、`offsetX`、`offsetY` 单独控制该控制器及其子图形的缩放以及平移 |","989","| timeTypeControllerStyle | { offsetX?: number, offsetY?: number, scale?: number, box?: ShapeStyle, check?: ShapeStyle, text?: ShapeStyle } | null | \u2018播放时间类型切换器\u2019 的样式，包括 checkbox 的框、checkbox 的选中勾、文本的样式，同时可以为 `timeTypeControllerStyle` 及其子图形样式配置 `scale`、`offsetX`、`offsetY` 单独控制该控制器及其子图形的缩放以及平移 |","990","| containerStyle ｜ ShapeStyle | {} | 控制栏背景方框的样式 |","991","| timePointControllerText | string | \"单一时间\" | 右下角\u201C单一时间\u201D文本，默认为\u201D单一时间\u201C |","992","| timePointControllerText | string | \"时间范围\" | 右下角\u201C单一时间\u201D文本，默认为\u201D时间范围时间\u201C |"],"delete":["685","  \/\/ 刻度时间轴配置项","686","  readonly tick?: TimeBarSliceOption;","692","  valueChange?: (graph: IGraph, value: string) => void;","703","| width | number |  | 必选，TimeBar 容器宽度 |","704","| height | number |  | 必选，TimeBar 高度 |","709","| tick | TimeBarSliceOption | null | 刻度 TimeBar 配置项，当 type 为 tick 时，该字段必选 |","750","| interval | Interval | null | 柱状图配置项，当配置了该项后，趋势图上会展现为混合图样式 |","859","  readonly hiddleToggle: boolean;","860","  readonly fill?: string;","861","  readonly stroke?: string;","870","| 名称         | 类型       | 默认值       | 描述                   |","871","| ------------ | ---------- | ------------ | ---------------------- |","872","| x            | number     | 0            | 按钮控制组开始 x 坐标  |","873","| y            | number     | 0            | 按钮控制组开始 y 坐标  |","874","| width        | number     | TimeBar 宽度 | 控制按钮组宽度         |","875","| height       | number     | 40           | 控制按钮组高度         |","876","| speed        | number     | 1            | 播放速度               |","877","| loop         | boolean    | false        | 暂不支持，是否循环播放 |","878","| hiddleToggle | boolean    | true         | 是否隐藏时间类型切换   |","879","| fill         | string     |              | 按钮控制组外层框填充色 |","880","| stroke       | string     |              | 按钮控制组外层框边框色 |","881","| preBtnStyle  | ShapeStyle | null         | 后退按钮样式配置项     |","882","| nextBtnStyle | ShapeStyle | null         | 前进按钮样式配置项     |","883","| playBtnStyle | ShapeStyle | null         | 播放按钮样式配置项     |"]}],"packages\/core\/src\/interface\/graph.ts":[{"add":["33","  translate: (dx: number, dy: number, animate?: boolean, animateCfg?: GraphAnimateConfig) => void;","34","  zoom: (ratio: number, center?: Point, animate?: boolean, animateCfg?: GraphAnimateConfig) => boolean;"],"delete":["33","  translate: (dx: number, dy: number) => void;","34","  zoom: (ratio: number, center?: Point) => boolean;"]}],"packages\/core\/src\/util\/graphic.ts":[{"add":["12","  ICombo","594","export const getComboBBox = (children: ComboTree[], graph: IAbstractGraph, combo?: ICombo): BBox => {","609","    const comboModel = combo?.getModel();","610","    const { x, y } = comboModel || {};","611","    return {","612","      minX: x,","613","      minY: y,","614","      maxX: x,","615","      maxY: y,","616","      x: x,","617","      y: y,","618","      width: undefined,","619","      height: undefined","620","    };"],"delete":["593","export const getComboBBox = (children: ComboTree[], graph: IAbstractGraph): BBox => {","608","    return comboBBox;"]}],"packages\/g6\/package.json":[{"add":["2","  \"version\": \"4.5.1\",","68","    \"@antv\/g6-pc\": \"0.5.1\"","92","}"],"delete":["2","  \"version\": \"4.4.1\",","68","    \"@antv\/g6-pc\": \"0.4.1\"","92","}"]}],"packages\/site\/docs\/api\/Plugins.en.md":[{"add":["581","","582","## TimeBar","583","","584","There are three types of built-in TimeBar in G6:","585","","586","- Time bar with a line chart as background;","587","- Simple time bar;","588","- Time bar with descrete ticks.","589","","590","All the three types of timebar supports play, fast forward, and fast backward.","591","","592","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*DOo6QpfFfMUAAAAAAAAAAAAAARQnAQ' width='500' \/>","593","<br \/>Time bar with a line chart as background<br \/>","594","","595","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*bzGBQKkewZMAAAAAAAAAAAAAARQnAQ' width='500' \/>","596","<br \/>Simple time bar<br \/>","597","","598","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*kHRkQpnvBmwAAAAAAAAAAAAAARQnAQ' width='500' \/>","599","<br \/>Time bar with descrete ticks<br \/>","600","","601","<br \/>Refer to the demos [HERE](https:\/\/g6.antv.vision\/en\/examples\/tool\/timebar#timebar)<br \/>","602","","603","### Common Usage","604","","605","Same to other plugins of G6, the users can initiate the TimeBar and assign it to the graph as:","606","","607","```javascript","608","import G6 from '@antv\/g6';","609","","610","const timebar = new G6.TimeBar({","611","  width: 500,","612","  height: 150,","613","  padding: 10,","614","  type: 'trend',","615","  trend: {","616","    data: timeBarData,","617","  },","618","});","619","","620","const graph = new G6.Graph({","621","  container: 'container',","622","  width,","623","  height,","624","  plugins: [timebar],","625","});","626","```","627","","628","<br \/>If you want to use the TimeBar with line chart, assign the `type` to be `trend` when instantiating the TimeBar, which results in:","629","","630","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*lfvIQJYbs7oAAAAAAAAAAAAAARQnAQ' width='600' \/>","631","","632","<br \/>Assigning the `type` to be `simple` results in:","633","","634","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*g2zhQqP6ruYAAAAAAAAAAAAAARQnAQ' width='600' \/>","635","","636","<br \/>And assigning the `type` to be `tick` results in a TimeBar with descrete ticks. Note that it is different from the above two types of TimeBar, \\*\\*The TimeBar with decrete ticks is configured with the `tick` object but not the `trend` object.","637","","638","```javascript","639","const timebar = new G6.TimeBar({","640","  width,","641","  height: 150,","642","  type: 'tick',","643","  tick: {","644","    data: timeBarData,","645","    width,","646","    height: 42,","647","    tickLabelFormatter: d => {","648","      const dateStr = `${d.date}`;","649","      if ((count - 1) % 10 === 0) {","650","        return `${dateStr.substr(0, 4)}-${dateStr.substr(4, 2)}-${dateStr.substr(6, 2)}`;","651","      }","652","      return false;","653","    },","654","    tooltipFomatter: d => {","655","      const dateStr = `${d}`;","656","      return `${dateStr.substr(0, 4)}-${dateStr.substr(4, 2)}-${dateStr.substr(6, 2)}`;","657","    },","658","  },","659","});","660","```","661","","662","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*n6ECQ7Jn5pQAAAAAAAAAAAAAARQnAQ' width='600' \/>","663","","664","","665","### Event Listener","666","","667","TimeBar Plugin exposes several timing events. They could be listened by `graph.on('eventname', e => {})`.","668","","669","| Event Name | Description |","670","| --- | --- |","671","| valuechange | Emitted when the value range of the timebar is chaged. |","672","| timebarstartplay | Emitted when the timeline starts to play. |","673","| timebarendplay | Emitted when the timeline ends playing. |","674","","675","### Definition of the Configurations","676","","677","#### Definition of the Interfaces","678","","679","The complete interfaces for the TimeBar is shown below:","680","","681","```javascript","682","interface TimeBarConfig extends IPluginBaseConfig {","683","  \/\/ position size","684","  readonly x?: number;","685","  readonly y?: number;","686","  readonly width?: number;","687","  readonly height?: number;","688","  readonly padding?: number;","689","","690","  readonly type?: 'trend' | 'simple' | 'tick';","691","  \/\/ the configuration for the TimeBar with line chart and simple TimeBar, takes effect whtn the type is 'trend' or 'simple'","692","  readonly trend?: TrendConfig;","693","","694","  \/\/ the configurations for the two sliders","695","  readonly slider?: SliderOption;","696","","697","  \/\/ when the type is 'tick', it is the configuration for the TimeBar with descrete ticks","698","  \/\/ when the type is 'trend' or 'simpe', it is the configuration for the time tick labels under the timeBar","699","  readonly tick?: TimeBarSliceOption | TickCfg;","700","","701","  \/\/ the buttons for play, fast forward, and back forward","702","  readonly controllerCfg?: ControllerCfg;","703","","704","  \/\/ [Supported from v4.5.1] the CSS style for the DOM container of the timebar","705","  readonly containerCSS?: Object;","706","","707","  \/\/ [Supported from v4.5.1] the item types that will be filtered by the timebar. e.g. ['node', 'edge']. The default value is ['node']","708","  readonly filterItemTypes?: string[];","709","","710","  \/\/ [Deprecated from v4.5.1, replaced by filterItemTypes] whether to consider the edge filtering. If it is false, only filter the nodes and the edges whose end nodes are filtered out while the selected range of the timeBar is changed. If it is true, there should be `date` properties on the edges data, and the timeBar will filter the edges which is not in the selected range in the same time","711","  readonly filterEdge?: boolean;","712","","713","  \/\/ [Supported from v4.5.1] whether filter the nodes and edges on the graph by graph.changeData, which means the data of the graph will be changed by the timebar. If it is false, the graph.hideItem and graph.showItem will be called to hide\/show the nodes and edges instead of changeData","714","  readonly changeData?: boolean;","715","","716","  \/\/ the callback function after the time range is changed. When it is not assigned, the graph elements will be filtered after the time range is changed","717","  rangeChange?: (graph: IGraph, minValue: string, maxValue: string) => void;","718","","719","  \/\/ [Supported from v4.5.1] user returns the date value according to the data of a node or an edge","720","  getDate?: (d: any) => number;","721","","722","  \/\/ [Supported from v4.5.1] user returns the value according to the data of a node or an edge. The value is used to draw the trend line for timebar with type 'trend'","723","  getValue?: (d: any) => number;","724","","725","  \/\/ [Supported from v4.5.1] user returns true or false to decide whether to ignore the node or the edge while filtering. If it is true, the item with data model will be ignored. Or the item will be filtered according to the min and max date value","726","  shouldIgnore?: (itemType: 'node' | 'edge', model: any, dateRage: { min: number, max: number }) => boolean;","727","}","728","```","729","","730","#### The Parameters of the Interfaces","731","","732","| Name | Type | Default Value | Description |","733","| --- | --- | --- | --- |","734","| container | HTMLDivElement | null | The DOM container of the TimeBar. By default, the plugin will create a container DOM with 'g6-component-timebar' as className |","735","| x | number | 0 | The beginning x position of the TimeBar plugin |","736","| y | number | 0 | The beginning y position of the TimeBar plugin |","737","| width | number |  | **Requred**, the width of the TimeBar |","738","| height | number |  | **Requred**, the height of the TimeBar |","739","| padding | number\/number[] | 10 | The padding of the container of the TimeBar |","740","| type | 'trend' \/ 'simple' \/ 'tick' | trend | The type of the TimeBar, 'trend' by default |","741","| trend | TrendConfig | null | The configuration for the TimeBar with line chart and simple TimeBar, takes effect whtn the type is 'trend' or 'simple' |","742","| slider | SliderOption | null | The configurations for the two sliders |","743","| tick | TimeBarSliceOption \/ TickCfg | null | If the type is 'tick', it is the configuration for the TimeBar with descrete ticks. If it the type is 'trend' or 'simple', it is the configuration for the time tick labels under the timeBar |","744","| controllerCfg | ControllerCfg | null | The buttons for play, fast forward, and back forward |","745","| containerCSS | Object | null | [Supported from v4.5.1] The CSS style for the DOM container of the timebar |","746","| filterItemTypes | string[] | null | [Supported from v4.5.1] The item types that will be filtered by the timebar. e.g. ['node', 'edge']. The default value is ['node'] |","747","| filterEdge | boolean | false | [Deprecated from v4.5.1, replaced by filterItemTypes] Whether to consider the edge filtering. If it is false, only filter the nodes and the edges whose end nodes are filtered out while the selected range of the timeBar is changed. If it is true, there should be `date` properties on the edges data, and the timeBar will filter the edges which is not in the selected range in the same time |","748","| changeData | boolean | null | [Supported from v4.5.1] Whether filter the nodes and edges on the graph by graph.changeData, which means the data of the graph will be changed by the timebar. If it is false, the graph.hideItem and graph.showItem will be called to hide\/show the nodes and edges instead of changeData |","749","| rangeChange | Function | null | The callback function after the time range is changed. When it is not assigned, the graph elements will be filtered after the time range is changed |","750","| getDate | (d: any) => number | null | [Supported from v4.5.1] User returns the date value according to the data of a node or an edge |","751","| getValue | (d: any) => number | null | [Supported from v4.5.1] User returns the value according to the data of a node or an edge. The value is used to draw the trend line for timebar with type 'trend' |","752","| shouldIgnore | (itemType: 'node' | 'edge', model: any, dateRage: { min: number, max: number }) => boolean | null | [Supported from v4.5.1] User returns true or false to decide whether to ignore the node or the edge while filtering. If it is true, the item with data model will be ignored. Or the item will be filtered according to the min and max date value |","753","","754","#### Interface for TrendConfig","755","","756","> Does not support the configurations for the style of the tick labels.","757","","758","```javascript","759","interface TrendConfig {","760","  \/\/ The data","761","  readonly data: {","762","    date: string;","763","    value: string;","764","  }[];","765","  \/\/ The position and size","766","  readonly x?: number;","767","  readonly y?: number;","768","  readonly width?: number;","769","  readonly height?: number;","770","  \/\/ The styles","771","  readonly smooth?: boolean;","772","  readonly isArea?: boolean;","773","  readonly lineStyle?: ShapeStyle;","774","  readonly areaStyle?: ShapeStyle;","775","  readonly interval?: Interval;","776","}","777","```","778","","779","#### Parameters of the TrendConfig","780","","781","| Name | Type | Default Value | Description |","782","| --- | --- | --- | --- |","783","| x | number | 0 | The beginning x position of the trend line chart |","784","| y | number | 0 | The beginning y position of the trend line chart |","785","| width | number | The width of the TimeBar | The width of the trend line chart of the TimeBar, we suggest to use the default value. If you wanna custom it, please assign the `width` of the slider in the same time |","786","| height | number | 28 when type='trend'<br \/>8 when type='simple' | The height of the TimeBar | The width of the trend line chart of the TimeBar, we suggest to use the default value. If you wanna custom it, please assign the `height` of the slider in the same time |","787","| smooth | boolean | false | Whether to show a smooth line on the trend line chart |","788","| isArea | boolean | false | Whether to show a area chart instead |","789","| lineStyle | ShapeStyle | null | The configurations for the style of the line in the line chart |","790","| areaStyle | ShapeStyle | null | The configuration for the style of the area in the chart when `isArea` is `true` |","791","| interval | Interval | null | The configuration for the style of the bars in the chart. When it is assigned, a mixed trend chart will take place. `Interval = { data: number[], style: ShapeStyle }`. Except the configurations in `ShapeStyle` for the style of the shapes in the bar charts, `barWidth` for the width of one bar is also configurable for `style`  |","792","","793","#### Interfaces of SliderOption","794","","795","```javascript","796","export type SliderOption = Partial<{","797","  readonly width?: number;","798","  readonly height?: number;","799","  readonly backgroundStyle?: ShapeStyle;","800","  readonly foregroundStyle?: ShapeStyle;","801","  \/\/ The style of the sliders","802","  readonly handlerStyle?: {","803","    width?: number;","804","    height?: number;","805","    style?: ShapeStyle;","806","  };","807","  readonly textStyle?: ShapeStyle;","808","  \/\/ The start and end position for the sliders, which indicate the data range for the filtering. Ranges from 0 to 1","809","  readonly start: number;","810","  readonly end: number;","811","  \/\/ The labels for the sliders","812","  readonly minText: string;","813","  readonly maxText: string;","814","}>;","815","```","816","","817","#### Parameters for the SliderOption","818","","819","| Name | Type | Default Value | Description |","820","| --- | --- | --- | --- |","821","| width | number | The width of the container of the TimeBar - 2 \\* padding | The width of the background trend chart. We suggest to use the default value. If you wanna custom it, assign it the the `width` in the `trend` in the same time |","822","| height | number | 28 when type='trend'<br \/>8 when type='simple' | The height of the background trend chart. We suggest to use the default value. If you wanna custom it, assign it the the `height` in the `trend` in the same time |","823","| backgroundStyle | ShapeStyle | null | The configuration for the style of the background |","824","| foregroundStyle | ShapeStyle | null | The configuration for the style of the forground |","825","| handlerStyle | ShapeStyle | null | The configuration for the style of the two sliders |","826","| textStyle | ShapeStyle | null | The configuration for the style of the labels on the two sliders |","827","| start | number | 0.1 | The start position for the sliders, which indicate the start of the data range for the filtering. Ranges from 0 to `end` |","828","| end | number | 0.9 | The end position for the sliders, which indicate the end of the data range for the filtering. Ranges from `start` to 1 |","829","| minText | string | min | The label for the left slider |","830","| maxText | string | max | The label for the right slider |","831","","832","#### TimeBarSliceOption","833","","834","```javascript","835","export interface TimeBarSliceOption {","836","  \/\/ position size","837","  readonly x?: number;","838","  readonly y?: number;","839","  readonly width?: number;","840","  readonly height?: number;","841","  readonly padding?: number;","842","","843","  \/\/ styles","844","  readonly selectedTickStyle?: TickStyle;","845","  readonly unselectedTickStyle?: TickStyle","846","  readonly tooltipBackgroundColor?: string;","847","","848","  readonly start?: number;","849","  readonly end?: number;","850","","851","  \/\/ data","852","  readonly data: {","853","    date: string;","854","    value: string;","855","  }[];","856","","857","  \/\/ custom the formatter function for the tick labels","858","  readonly tickLabelFormatter?: (d: any) => string | boolean;","859","  \/\/ custom the formatter function for the tooltip","860","  readonly tooltipFomatter?: (d: any) => string;","861","}","862","```","863","","864","#### Parameters for the TimeBarSliceOption","865","","866","| Name | Type | Default Value | Description |","867","| --- | --- | --- | --- |","868","| x | number | 0 | The beginning x position for the TimeBar |","869","| y | number | 0 | The beginning y position for the TimeBar |","870","| width | number |  | **Requred**, the width of the TimeBar |","871","| height | number |  | **Requred**, the height of the TimeBar |","872","| padding | number \/ number[] | 0 | The padding of the container of the TimeBar |","873","| selectedTickStyle | ShapeStyle | null | The style of the tick(s) which is(are) selected |","874","| unselectedTickStyle | ShapeStyle | null | The style of the tick(s) which is(are) unselected |","875","| tooltipBackgroundColor | ShapeStyle | null | The background style for the tooltip |","876","| start | number | 0.1 | The start position for the sliders, which indicate the start of the data range for the filtering. Ranges from 0 to `end` |","877","| end | number | 0.9 | The end position for the sliders, which indicate the end of the data range for the filtering. Ranges from `start` to 1 |","878","| data | any[] | [] | **Requred**, the data for the ticks |","879","| tickLabelFormatter | Function | null | The formatter function for customing the labels of the ticks |","880","| tooltipFomatter | Function | null | The formatter function for customing the tooltip |","881","","882","#### TickCfg","883","","884","```javascript","885","export interface TickCfg {","886","  \/\/ the fomatter for the time tick labels","887","  readonly tickLabelFormatter?: (d: any) => string | undefined;","888","  \/\/ the shape style for the time tick labels. [Supported from v4.5.1] tickLabelStyle.rotate can be configured to controll the rotate of the tick label to avoid overlappings","889","  readonly tickLabelStyle?: ShapeStyle;","890","  \/\/ the shape style for the short vertical lines uppon the time tick labels","891","  readonly tickLineStyle?: ShapeStyle;","892","}","893","```","894","","895","#### Parameters for TickCfg","896","","897","| Name | Type | Default Value | Description |","898","| --- | --- | --- | --- |","899","| tickLabelFormatter | Function | null | The formatter function for customing the labels of the ticks |","900","| tickLabelStyle | ShapeStyle | {} | The shape style for the time tick labels. [Supported from v4.5.1] tickLabelStyle.rotate can be configured to controll the rotate of the tick label to avoid overlappings |","901","| tickLineStyle | ShapeStyle | {} | The shape style for the short vertical lines uppon the time tick labels |","902","","903","#### Interface of the ControllerCfg","904","","905","> Does not support for now","906","","907","> Does not support the style configuration for controller buttons","908","","909","> Does not support loop play","910","","911","```javascript","912","type ControllerCfg = Partial<{","913","  \/** the begining position and the size of the controller, the width and height will not scale the sub-controllers but only affects the positions of them. To change the size of the sub-controllers, try ControllerCfg.scale or the scale in the style of sub-controller *\/","914","  readonly x?: number;","915","  readonly y?: number;","916","  readonly width: number;","917","  readonly height: number;","918","  \/** the scale of the whole controller *\/","919","  readonly scale?: number;","920","  \/** the fill and stroke color of the background *\/","921","  readonly fill?: string;","922","  readonly stroke?: string;","923","  \/** the font family for the whole controller, whose priority is lower than the fontFamily in the text style of each sub-controller *\/","924","  readonly fontFamily?: string;","925","","926","  \/** the play spped, means the playing time for 1 tick *\/","927","  readonly speed?: number;","928","  \/** whether play in loop *\/","929","  readonly loop?: boolean;","930","  \/** whether hide the 'time type controller' on the right-bottom *\/","931","  readonly hideTimeTypeController: boolean;","932","","933","  \/** style of the backward button. scale, offsetX, offsetY are also can be assigned to it to controll the size and position of the backward button *\/","934","  readonly preBtnStyle?: ShapeStyle;","935","","936","  \/** style of the forward button. scale, offsetX, offsetY are also can be assigned to it to controll the size and position of the forward button *\/","937","  readonly nextBtnStyle?: ShapeStyle;","938","","939","  \/** style of the play button. scale, offsetX, offsetY are also can be assigned to it to controll the size and position of the paly button *\/","940","  readonly playBtnStyle?: ShapeStyle;","941","","942","  \/** style of the 'speed controller'. scale, offsetX, offsetY are also can be assigned to it and each sub-styles to controll the size and position of the speed controller and sub-shapes*\/","943","  readonly speedControllerStyle?: {","944","    offsetX?: number,","945","    offsetY?: number;","946","    scale?: number","947","    pointer?: ShapeStyle,","948","    scroller?: ShapeStyle,","949","    text?: ShapeStyle","950","  };","951","","952","  \/** style of the 'time type controller'. scale, offsetX, offsetY  are also can be assigned to it and each sub-styles to controll the size and position of the speed controller and sub-shapes *\/","953","  readonly timeTypeControllerStyle?: {","954","    offsetX?: number,","955","    offsetY?: number;","956","    scale?: number","957","    check?: ShapeStyle,","958","    box?: ShapeStyle,","959","    text?: ShapeStyle","960","  };","961","  \/** [Supported from v4.5.1] The style of the background rect of the controller *\/","962","  readonly containerStyle?: ExtendedShapeStyle;","963","  \/** the text for the right-botton switch controlling play with single time point or time range *\/","964","  readonly timePointControllerText?: string;","965","  readonly timeRangeControllerText?: string","966","}>","967","```","968","","969","#### Parameters for ControllerCfg","970","","971","| Name | Type | Default Value | Description |","972","| --- | --- | --- | --- |","973","| x | number | 0 | The beginning x position for the buttons group of the TimeBar |","974","| y | number | 0 | The beginning y position for the buttons group of the TimeBar |","975","| width | number | The width of the TimeBar | The width of the buttons group of the TimeBar, do not scale the sub-controllers but only affects the positions of them |","976","| height | number | 40 | The width of the buttons group of the TimeBar, do not scale the sub-controllers but only affects the positions of them |","977","| scale | number | 1 | The scale of the whole controller |","978","| speed | number | 1 | The play speed |","979","| loop | boolean | false | _Does not support for now_, whether play in loop |","980","| hideTimeTypeController | boolean | true | Whther hide the time type controller on the right bottom |","981","| fill | string |  | The fillling color for the background of the controller |","982","| stroke | string |  | The stroke color for the background of the buttons group |","983","| preBtnStyle | ShapeStyle | null | The style of the backward button. `scale`, `offsetX`, `offsetY` are also can be assigned to it to controll the size and position of the backward button |","984","| nextBtnStyle | ShapeStyle | null | The style of the forward button. `scale`, `offsetX`, `offsetY` are also can be assigned to it to controll the size and position of the forward button |","985","| playBtnStyle | ShapeStyle | null | The style of the play button. `scale`, `offsetX`, `offsetY` are also can be assigned to it to controll the size and position of the paly button |","986","| speedControllerStyle | { offsetX?: number, offsetY?: number, scale?: number, pointer?: ShapeStyle, text?: ShapeStyle, scroller?: ShapeStyle} | null | The style of the 'speed controller'. `scale`, `offsetX`, `offsetY` are also can be assigned to it and each sub-styles to controll the size and position of the speed controller and sub-shapes |","987","| timeTypeControllerStyle | { offsetX?: number, offsetY?: number, scale?: number, box?: ShapeStyle, check?: ShapeStyle, text?: ShapeStyle } | null | The style of the 'time type controller'. `scale`, `offsetX`, `offsetY` are also can be assigned to it and each sub-styles to controll the size and position of the speed controller and sub-shapes |","988","| containerStyle ｜ ShapeStyle | {} | [Supported from v4.5.1] The style of the background rect of the controller |","989","| timePointControllerText | string | \"单一时间\" | The text for the right-botton switch controlling play with single time point or time range |","990","| timeRangeControllerText | string | \"时间范围\" | The text for the right-botton switch controlling play with single time point or time range |"],"delete":["393","","394","## TimeBar","395","","396","There are three types of built-in TimeBar in G6:","397","","398","- Time bar with a line chart as background;","399","- Simple time bar;","400","- Time bar with descrete ticks.","401","","402","All the three types of timebar supports play, fast forward, and fast backward.","403","","404","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*DOo6QpfFfMUAAAAAAAAAAAAAARQnAQ' width='500' \/>","405","<br \/>Time bar with a line chart as background<br \/>","406","","407","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*bzGBQKkewZMAAAAAAAAAAAAAARQnAQ' width='500' \/>","408","<br \/>Simple time bar<br \/>","409","","410","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*kHRkQpnvBmwAAAAAAAAAAAAAARQnAQ' width='500' \/>","411","<br \/>Time bar with descrete ticks<br \/>","412","","413","<br \/>Refer to the demos [HERE](https:\/\/g6.antv.vision\/en\/examples\/tool\/timebar#timebar)<br \/>","414","","415","### Common Usage","416","","417","Same to other plugins of G6, the users can initiate the TimeBar and assign it to the graph as:","418","","419","```javascript","420","import G6 from '@antv\/g6';","421","","422","const timebar = new G6.TimeBar({","423","  width: 500,","424","  height: 150,","425","  padding: 10,","426","  type: 'trend',","427","  trend: {","428","    data: timeBarData,","429","  },","430","});","431","","432","const graph = new G6.Graph({","433","  container: 'container',","434","  width,","435","  height,","436","  plugins: [timebar],","437","});","438","```","439","","440","<br \/>If you want to use the TimeBar with line chart, assign the `type` to be `trend` when instantiating the TimeBar, which results in:","441","","442","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*lfvIQJYbs7oAAAAAAAAAAAAAARQnAQ' width='600' \/>","443","","444","<br \/>Assigning the `type` to be `simple` results in:","445","","446","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*g2zhQqP6ruYAAAAAAAAAAAAAARQnAQ' width='600' \/>","447","","448","<br \/>And assigning the `type` to be `tick` results in a TimeBar with descrete ticks. Note that it is different from the above two types of TimeBar, \\*\\*The TimeBar with decrete ticks is configured with the `tick` object but not the `trend` object.","449","","450","```javascript","451","const timebar = new G6.TimeBar({","452","  width,","453","  height: 150,","454","  type: 'tick',","455","  tick: {","456","    data: timeBarData,","457","    width,","458","    height: 42,","459","    tickLabelFormatter: d => {","460","      const dateStr = `${d.date}`;","461","      if ((count - 1) % 10 === 0) {","462","        return `${dateStr.substr(0, 4)}-${dateStr.substr(4, 2)}-${dateStr.substr(6, 2)}`;","463","      }","464","      return false;","465","    },","466","    tooltipFomatter: d => {","467","      const dateStr = `${d}`;","468","      return `${dateStr.substr(0, 4)}-${dateStr.substr(4, 2)}-${dateStr.substr(6, 2)}`;","469","    },","470","  },","471","});","472","```","473","","474","<img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*n6ECQ7Jn5pQAAAAAAAAAAAAAARQnAQ' width='600' \/>","475","","476","","477","### Event Listener","478","","479","TimeBar Plugin exposes several timing events. They could be listened by `graph.on('eventname', e => {})`.","480","","481","| Event Name | Description |","482","| --- | --- |","483","| valuechange | Emitted when the value range of the timebar is chaged. |","484","| timebarstartplay | Emitted when the timeline starts to play. |","485","| timebarendplay | Emitted when the timeline ends playing. |","486","","487","### Definition of the Configurations","488","","489","#### Definition of the Interfaces","490","","491","The complete interfaces for the TimeBar is shown below:","492","","493","```javascript","494","interface TimeBarConfig extends IPluginBaseConfig {","495","  \/\/ position size","496","  readonly x?: number;","497","  readonly y?: number;","498","  readonly width?: number;","499","  readonly height?: number;","500","  readonly padding?: number;","501","","502","  readonly type?: 'trend' | 'simple' | 'tick';","503","  \/\/ the configuration for the TimeBar with line chart and simple TimeBar, takes effect whtn the type is 'trend' or 'simple'","504","  readonly trend?: TrendConfig;","505","","506","  \/\/ the configurations for the two sliders","507","  readonly slider?: SliderOption;","508","","509","  \/\/ when the type is 'tick', it is the configuration for the TimeBar with descrete ticks","510","  \/\/ when the type is 'trend' or 'simpe', it is the configuration for the time tick labels under the timeBar","511","  readonly tick?: TimeBarSliceOption | TickCfg;","512","","513","  \/\/ the buttons for play, fast forward, and back forward","514","  readonly controllerCfg?: ControllerCfg;","515","","516","  \/\/ whether to consider the edge filtering. If it is false, only filter the nodes and the edges whose end nodes are filtered out while the selected range of the timeBar is changed. If it is true, there should be `date` properties on the edges data, and the timeBar will filter the edges which is not in the selected range in the same time","517","  readonly filterEdge?: boolean;","518","","519","  rangeChange?: (graph: IGraph, minValue: string, maxValue: string) => void;","520","  valueChange?: (graph: IGraph, value: string) => void;","521","}","522","```","523","","524","#### The Parameters of the Interfaces","525","","526","| Name | Type | Default Value | Description |","527","| --- | --- | --- | --- |","528","| container | HTMLDivElement | null | The DOM container of the TimeBar. By default, the plugin will create a container DOM with 'g6-component-timebar' as className |","529","| x | number | 0 | The beginning x position of the TimeBar plugin |","530","| y | number | 0 | The beginning y position of the TimeBar plugin |","531","| width | number |  | **Requred**, the width of the TimeBar |","532","| height | number |  | **Requred**, the height of the TimeBar |","533","| padding | number\/number[] | 10 | The padding of the container of the TimeBar |","534","| type | 'trend' \/ 'simple' \/ 'tick' | trend | The type of the TimeBar, 'trend' by default |","535","| trend | TrendConfig | null | The configuration for the TimeBar with line chart and simple TimeBar, takes effect whtn the type is 'trend' or 'simple' |","536","| slider | SliderOption | null | The configurations for the two sliders |","537","| tick | TimeBarSliceOption \/ TickCfg | null | If the type is 'tick', it is the configuration for the TimeBar with descrete ticks. If it the type is 'trend' or 'simple', it is the configuration for the time tick labels under the timeBar |","538","| controllerCfg | ControllerCfg | null | The buttons for play, fast forward, and back forward |","539","| filterEdge | boolean | false | Whether to consider the edge filtering. If it is false, only filter the nodes and the edges whose end nodes are filtered out while the selected range of the timeBar is changed. If it is true, there should be `date` properties on the edges data, and the timeBar will filter the edges which is not in the selected range in the same time |","540","| rangeChange | Function | null | The callback function after the time range is changed. When it is not assigned, the graph elements will be filtered after the time range is changed |","541","","542","#### Interface for TrendConfig","543","","544","> Does not support the configurations for the style of the tick labels.","545","","546","```javascript","547","interface TrendConfig {","548","  \/\/ The data","549","  readonly data: {","550","    date: string;","551","    value: string;","552","  }[];","553","  \/\/ The position and size","554","  readonly x?: number;","555","  readonly y?: number;","556","  readonly width?: number;","557","  readonly height?: number;","558","  \/\/ The styles","559","  readonly smooth?: boolean;","560","  readonly isArea?: boolean;","561","  readonly lineStyle?: ShapeStyle;","562","  readonly areaStyle?: ShapeStyle;","563","  readonly interval?: Interval;","564","}","565","```","566","","567","#### Parameters of the TrendConfig","568","","569","| Name | Type | Default Value | Description |","570","| --- | --- | --- | --- |","571","| x | number | 0 | The beginning x position of the trend line chart |","572","| y | number | 0 | The beginning y position of the trend line chart |","573","| width | number | The width of the TimeBar | The width of the trend line chart of the TimeBar, we suggest to use the default value. If you wanna custom it, please assign the `width` of the slider in the same time |","574","| height | number | 28 when type='trend'<br \/>8 when type='simple' | The height of the TimeBar | The width of the trend line chart of the TimeBar, we suggest to use the default value. If you wanna custom it, please assign the `height` of the slider in the same time |","575","| smooth | boolean | false | Whether to show a smooth line on the trend line chart |","576","| isArea | boolean | false | Whether to show a area chart instead |","577","| lineStyle | ShapeStyle | null | The configurations for the style of the line in the line chart |","578","| areaStyle | ShapeStyle | null | The configuration for the style of the area in the chart when `isArea` is `true` |","579","| interval | Interval | null | The configuration for the style of the bars in the chart. When it is assigned, a mixed trend chart will take place. `Interval = { data: number[], style: ShapeStyle }`. Except the configurations in `ShapeStyle` for the style of the shapes in the bar charts, `barWidth` for the width of one bar is also configurable for `style`  |","580","","581","#### Interfaces of SliderOption","582","","583","```javascript","584","export type SliderOption = Partial<{","585","  readonly width?: number;","586","  readonly height?: number;","587","  readonly backgroundStyle?: ShapeStyle;","588","  readonly foregroundStyle?: ShapeStyle;","589","  \/\/ The style of the sliders","590","  readonly handlerStyle?: {","591","    width?: number;","592","    height?: number;","593","    style?: ShapeStyle;","594","  };","595","  readonly textStyle?: ShapeStyle;","596","  \/\/ The start and end position for the sliders, which indicate the data range for the filtering. Ranges from 0 to 1","597","  readonly start: number;","598","  readonly end: number;","599","  \/\/ The labels for the sliders","600","  readonly minText: string;","601","  readonly maxText: string;","602","}>;","603","```","604","","605","#### Parameters for the SliderOption","606","","607","| Name | Type | Default Value | Description |","608","| --- | --- | --- | --- |","609","| width | number | The width of the container of the TimeBar - 2 \\* padding | The width of the background trend chart. We suggest to use the default value. If you wanna custom it, assign it the the `width` in the `trend` in the same time |","610","| height | number | 28 when type='trend'<br \/>8 when type='simple' | The height of the background trend chart. We suggest to use the default value. If you wanna custom it, assign it the the `height` in the `trend` in the same time |","611","| backgroundStyle | ShapeStyle | null | The configuration for the style of the background |","612","| foregroundStyle | ShapeStyle | null | The configuration for the style of the forground |","613","| handlerStyle | ShapeStyle | null | The configuration for the style of the two sliders |","614","| textStyle | ShapeStyle | null | The configuration for the style of the labels on the two sliders |","615","| start | number | 0.1 | The start position for the sliders, which indicate the start of the data range for the filtering. Ranges from 0 to `end` |","616","| end | number | 0.9 | The end position for the sliders, which indicate the end of the data range for the filtering. Ranges from `start` to 1 |","617","| minText | string | min | The label for the left slider |","618","| maxText | string | max | The label for the right slider |","619","","620","#### TimeBarSliceOption","621","","622","```javascript","623","export interface TimeBarSliceOption {","624","  \/\/ position size","625","  readonly x?: number;","626","  readonly y?: number;","627","  readonly width?: number;","628","  readonly height?: number;","629","  readonly padding?: number;","630","","631","  \/\/ styles","632","  readonly selectedTickStyle?: TickStyle;","633","  readonly unselectedTickStyle?: TickStyle","634","  readonly tooltipBackgroundColor?: string;","635","","636","  readonly start?: number;","637","  readonly end?: number;","638","","639","  \/\/ data","640","  readonly data: {","641","    date: string;","642","    value: string;","643","  }[];","644","","645","  \/\/ custom the formatter function for the tick labels","646","  readonly tickLabelFormatter?: (d: any) => string | boolean;","647","  \/\/ custom the formatter function for the tooltip","648","  readonly tooltipFomatter?: (d: any) => string;","649","}","650","```","651","","652","#### Parameters for the TimeBarSliceOption","653","","654","| Name | Type | Default Value | Description |","655","| --- | --- | --- | --- |","656","| x | number | 0 | The beginning x position for the TimeBar |","657","| y | number | 0 | The beginning y position for the TimeBar |","658","| width | number |  | **Requred**, the width of the TimeBar |","659","| height | number |  | **Requred**, the height of the TimeBar |","660","| padding | number \/ number[] | 0 | The padding of the container of the TimeBar |","661","| selectedTickStyle | ShapeStyle | null | The style of the tick(s) which is(are) selected |","662","| unselectedTickStyle | ShapeStyle | null | The style of the tick(s) which is(are) unselected |","663","| tooltipBackgroundColor | ShapeStyle | null | The background style for the tooltip |","664","| start | number | 0.1 | The start position for the sliders, which indicate the start of the data range for the filtering. Ranges from 0 to `end` |","665","| end | number | 0.9 | The end position for the sliders, which indicate the end of the data range for the filtering. Ranges from `start` to 1 |","666","| data | any[] | [] | **Requred**, the data for the ticks |","667","| tickLabelFormatter | Function | null | The formatter function for customing the labels of the ticks |","668","| tooltipFomatter | Function | null | The formatter function for customing the tooltip |","669","","670","#### TickCfg","671","","672","```javascript","673","export interface TickCfg {","674","  \/\/ the fomatter for the time tick labels","675","  readonly tickLabelFormatter?: (d: any) => string | undefined;","676","  \/\/ the shape style for the time tick labels","677","  readonly tickLabelStyle?: ShapeStyle;","678","  \/\/ the shape style for the short vertical lines uppon the time tick labels","679","  readonly tickLineStyle?: ShapeStyle;","680","}","681","```","682","","683","#### Parameters for TickCfg","684","","685","| Name | Type | Default Value | Description |","686","| --- | --- | --- | --- |","687","| tickLabelFormatter | Function | null | The formatter function for customing the labels of the ticks |","688","| tickLabelStyle | ShapeStyle | {} | The shape style for the time tick labels |","689","| tickLineStyle | ShapeStyle | {} | The shape style for the short vertical lines uppon the time tick labels |","690","","691","#### Interface of the ControllerCfg","692","","693","> Does not support for now","694","","695","> Does not support the style configuration for controller buttons","696","","697","> Does not support loop play","698","","699","```javascript","700","type ControllerCfg = Partial<{","701","  \/** the begining position and the size of the controller, the width and height will not scale the sub-controllers but only affects the positions of them. To change the size of the sub-controllers, try ControllerCfg.scale or the scale in the style of sub-controller *\/","702","  readonly x?: number;","703","  readonly y?: number;","704","  readonly width: number;","705","  readonly height: number;","706","  \/** the scale of the whole controller *\/","707","  readonly scale?: number;","708","  \/** the fill and stroke color of the background *\/","709","  readonly fill?: string;","710","  readonly stroke?: string;","711","  \/** the font family for the whole controller, whose priority is lower than the fontFamily in the text style of each sub-controller *\/","712","  readonly fontFamily?: string;","713","","714","  \/** the play spped, means the playing time for 1 tick *\/","715","  readonly speed?: number;","716","  \/** whether play in loop *\/","717","  readonly loop?: boolean;","718","  \/** whether hide the 'time type controller' on the right-bottom *\/","719","  readonly hideTimeTypeController: boolean;","720","","721","  \/** style of the backward button. scale, offsetX, offsetY are also can be assigned to it to controll the size and position of the backward button *\/","722","  readonly preBtnStyle?: ShapeStyle;","723","","724","  \/** style of the forward button. scale, offsetX, offsetY are also can be assigned to it to controll the size and position of the forward button *\/","725","  readonly nextBtnStyle?: ShapeStyle;","726","","727","  \/** style of the play button. scale, offsetX, offsetY are also can be assigned to it to controll the size and position of the paly button *\/","728","  readonly playBtnStyle?: ShapeStyle;","729","","730","  \/** style of the 'speed controller'. scale, offsetX, offsetY are also can be assigned to it and each sub-styles to controll the size and position of the speed controller and sub-shapes*\/","731","  readonly speedControllerStyle?: {","732","    offsetX?: number,","733","    offsetY?: number;","734","    scale?: number","735","    pointer?: ShapeStyle,","736","    scroller?: ShapeStyle,","737","    text?: ShapeStyle","738","  };","739","","740","  \/** style of the 'time type controller'. scale, offsetX, offsetY  are also can be assigned to it and each sub-styles to controll the size and position of the speed controller and sub-shapes *\/","741","  readonly timeTypeControllerStyle?: {","742","    offsetX?: number,","743","    offsetY?: number;","744","    scale?: number","745","    check?: ShapeStyle,","746","    box?: ShapeStyle,","747","    text?: ShapeStyle","748","  };","749","  \/** the text for the right-botton switch controlling play with single time point or time range *\/","750","  readonly timePointControllerText?: string;","751","  readonly timeRangeControllerText?: string","752","}>","753","```","754","","755","#### Parameters for ControllerCfg","756","","757","| Name | Type | Default Value | Description |","758","| --- | --- | --- | --- |","759","| x | number | 0 | The beginning x position for the buttons group of the TimeBar |","760","| y | number | 0 | The beginning y position for the buttons group of the TimeBar |","761","| width | number | The width of the TimeBar | The width of the buttons group of the TimeBar, do not scale the sub-controllers but only affects the positions of them |","762","| height | number | 40 | The width of the buttons group of the TimeBar, do not scale the sub-controllers but only affects the positions of them |","763","| scale | number | 1 | The scale of the whole controller |","764","| speed | number | 1 | The play speed |","765","| loop | boolean | false | _Does not support for now_, whether play in loop |","766","| hideTimeTypeController | boolean | true | Whther hide the time type controller on the right bottom |","767","| fill | string |  | The fillling color for the background of the controller |","768","| stroke | string |  | The stroke color for the background of the buttons group |","769","| preBtnStyle | ShapeStyle | null | The style of the backward button. `scale`, `offsetX`, `offsetY` are also can be assigned to it to controll the size and position of the backward button |","770","| nextBtnStyle | ShapeStyle | null | The style of the forward button. `scale`, `offsetX`, `offsetY` are also can be assigned to it to controll the size and position of the forward button |","771","| playBtnStyle | ShapeStyle | null | The style of the play button. `scale`, `offsetX`, `offsetY` are also can be assigned to it to controll the size and position of the paly button |","772","| speedControllerStyle | { offsetX?: number, offsetY?: number, scale?: number, pointer?: ShapeStyle, text?: ShapeStyle, scroller?: ShapeStyle} | null | The style of the 'speed controller'. `scale`, `offsetX`, `offsetY` are also can be assigned to it and each sub-styles to controll the size and position of the speed controller and sub-shapes |","773","| timeTypeControllerStyle | { offsetX?: number, offsetY?: number, scale?: number, box?: ShapeStyle, check?: ShapeStyle, text?: ShapeStyle } | null | The style of the 'time type controller'. `scale`, `offsetX`, `offsetY` are also can be assigned to it and each sub-styles to controll the size and position of the speed controller and sub-shapes |","774","| timePointControllerText | string | \"单一时间\" | The text for the right-botton switch controlling play with single time point or time range |","775","| timeRangeControllerText | string | \"时间范围\" | The text for the right-botton switch controlling play with single time point or time range |","776",""]}],"packages\/core\/package.json":[{"add":["2","  \"version\": \"0.5.1\",","98","}"],"delete":["2","  \"version\": \"0.4.1\",","98","}"]}],"packages\/plugin\/src\/timeBar\/index.ts":[{"add":["75","  \/\/【deprecate】，由 filterItemTypes 替代","78","  \/\/ 过滤的类型, ['node', 'edge'], 默认为 ['node']","79","  readonly filterItemTypes?: string[];","80","","81","  \/\/ 容器的 CSS 样式","82","  readonly containerCSS?: Object;","83","","84","  \/\/ 是否通过 changeData 来进行筛选，false 则使用 hideItem","85","  readonly changeData?: boolean;","86","","87","  \/\/ 当时间轴范围发生变化时的回调函数","89","","90","  \/\/ 用户根据节点\/边数据返回对应时间值的方法","91","  getDate?: (d: any) => number;","92","","93","  \/\/ 用户根据节点\/边数据返回对应 value 的方法。value 用于在 type 为 trend 的时间轴上显示趋势线","94","  getValue?: (d: any) => number;","95","","96","  \/\/ 在过滤图元素时是否要忽略某些元素，范围 true，则忽略。否则按照正常过滤逻辑处理","97","  shouldIgnore?: (itemType: 'node' | 'edge', model: any, dateRage: { min: number, max: number }) => boolean;","133","      filterEdge: false, \/\/ deprecate，由 filterItemTypes 替代","134","      filterItemTypes: ['node'],","135","      containerCSS: {}","181","    \/\/ 根据传入的参数修改容器 CSS 样式","182","    if (this.get('containerCSS')) modifyCSS(timeBarContainer, this.get('containerCSS'));","201","        'Arial, sans-serif'","232","      const getValue = this.get('getValue');","247","          data: data.map((d) => (getValue?.(d) || d.value)),","271","        width,","272","        height: 42,","273","        padding: 2,","277","    \/\/ 鼠标按下左\/右滑块或范围条后在任意地方释放，都触发暂停播放","278","    const handleMouseUp = () => {","279","      const timebarInstance = this.get('timebar');","280","      timebarInstance.draggingHandler = false;","281","      if (timebarInstance.isPlay) {","282","        timebarInstance.isPlay = false;","283","        timebarInstance.currentHandler = timebarInstance.maxHandlerShape;","284","        timebarInstance.changePlayStatus();","285","      }","286","      document.removeEventListener('mouseup', handleMouseUp)","287","    }","288","    canvas.on('mousedown', e => {","289","      if (e.target.get('name') === 'maxHandlerShape-handler' ||","290","        e.target.get('name') === 'minHandlerShape-handler' ||","291","        e.target === timebar.foregroundShape) {","292","        document.addEventListener('mouseup', handleMouseUp);","293","      }","294","    });","343","      const filterItemTypes = this.get('filterItemTypes');","344","","345","      const changeData = this.get('changeData');","346","","348","      const getDate = this.get('getDate');","349","      const shouldIgnore = this.get('shouldIgnore');","350","      const minDate = trendData[min].date, maxDate = trendData[max].date;","351","      if (changeData || changeData === undefined) {","352","        let filterNodes = this.cacheGraphData.nodes;","353","        let filterEdges = this.cacheGraphData.edges;","354","        if (filterItemTypes.includes('node')) {","355","          filterNodes = filterNodes.filter((node: any) => {","356","            const date = +(getDate?.(node) || node.date);","357","            return (date >= minDate && date <= maxDate) || shouldIgnore?.('node', node, { min: minDate, max: maxDate });","358","          }","360","          const nodeIds = filterNodes.map((node) => node.id);","361","          if (filterEdges) {","362","            \/\/ 过滤 source 或 target 不在 min 和 max 范围内的边","363","            filterEdges = filterEdges.filter((edge) => (","364","              (nodeIds.includes(edge.source) && nodeIds.includes(edge.target)) ||","365","              shouldIgnore?.('edge', edge, { min: minDate, max: maxDate })","366","            ));","367","          }","368","        }","369","","370","        if (this.get('filterEdge') || filterItemTypes.includes('edge')) {","371","          filterEdges = filterEdges.filter((edge) => {","372","            const date = +(getDate?.(edge) || edge.date);","373","            return (date >= minDate && date <= maxDate) || shouldIgnore?.('edge', edge, { min: minDate, max: maxDate });","374","          });","375","        }","376","","377","        graph.changeData({","378","          nodes: filterNodes,","379","          edges: filterEdges,","380","        });","381","      } else {","382","        if (filterItemTypes.includes('node')) {","383","          graph.getNodes().forEach(node => {","384","            const model = node.getModel();","385","            if (shouldIgnore?.('node', model, { min: minDate, max: maxDate })) return;","386","            const date = +(getDate?.(model) || model.date);","387","            if (date < minDate || date > maxDate) {","388","              graph.hideItem(node);","389","            } else {","390","              graph.showItem(node);","391","            }","392","          });","393","        }","394","        if (this.get('filterEdge') || filterItemTypes.includes('edge')) {","395","          graph.getEdges().forEach(edge => {","396","            const model = edge.getModel();","397","            if (shouldIgnore?.('edge', model, { min: trendData[min].date, max: trendData[max].date })) return;","398","            const date = +(getDate?.(model) || model.date);","399","            if (date < trendData[min].date || date > trendData[max].date) {","400","              graph.hideItem(edge);","401","            } else {","402","              graph.showItem(edge);","403","            }","404","          });"],"delete":["113","      filterEdge: false,","177","          'Arial, sans-serif'","222","          data: data.map((d) => d.value),","298","      const filterData = this.cacheGraphData.nodes.filter(","299","        (d: any) => d.date >= trendData[min].date && d.date <= trendData[max].date,","300","      );","301","","302","      const nodeIds = filterData.map((node) => node.id);","303","","304","      let fileterEdges = [];","305","      if (this.cacheGraphData.edges) {","306","        \/\/ 过滤 source 或 target 不在 min 和 max 范围内的边","307","        fileterEdges = this.cacheGraphData.edges.filter(","308","          (edge) => nodeIds.includes(edge.source) && nodeIds.includes(edge.target),","309","        );","310","","311","        if (this.get('filterEdge')) {","312","          fileterEdges = fileterEdges.filter(","313","            (edge) => edge.date >= trendData[min].date && edge.date <= trendData[max].date,","317","","318","      graph.changeData({","319","        nodes: filterData,","320","        edges: fileterEdges,","321","      });"]}],"packages\/site\/package.json":[{"add":["3","  \"version\": \"4.5.1\",","39","    \"@antv\/gatsby-theme-antv\": \"1.1.15\",","54","}"],"delete":["3","  \"version\": \"4.4.1\",","39","    \"@antv\/gatsby-theme-antv\": \"1.1.7\",","54","}"]}],"packages\/site\/docs\/api\/graphLayout\/dagre.zh.md":[{"add":["25","## layoutCfg.begin","26","","27","_自 G6 v4.5.1 起支持。_","28","","29","**类型**： Array<br \/>**示例**：[ 0, 0 ]<br \/>**默认值**：undefined<br \/>**是否必须**：false<br \/>**说明**：布局的左上角对齐位置。","30","","97","","98","## layoutCfg.nodeOrder","99","","100","_自 G6 v4.5.0 起支持。_","101","","102","**类型**: string[]<br \/>**默认值**: undefined<br \/>**是否必须**: false<br \/>**说明**: 同层节点顺序的参考数组。若未指定，则将按照 dagre 本身机制排列同层节点顺序。","103","","104","","105","## layoutCfg.preset","106","","107","_自 G6 v4.5.0 起支持。_","108","","109","**类型**: ","110","","111","```javascript","112","{","113","  nodes: {","114","    x: number, \/\/ 位置","115","    y: number, \/\/ 位置","116","    layer?: number, \/\/ 指定层级","117","    _order?: number \/\/ 若为上一次 dagre 布局的输出，则有该字段，代表同层节点的顺序","118","  }[]","119","}","120","```","121","","122","<br \/>**默认值**: undefined<br \/>**是否必须**: false<br \/>**说明**: 布局计算时参考的节点位置，一般用于切换数据时保证重新布局的连续性，可使用上一次布局的结果数据作为输入。","123","","124","","125","## 指定节点层级","126","","127","_自 G6 v4.5.0 起支持。_","128","","129","在节点数据中配置 `layer` 字段（从 0 开始计数），可以为节点指定层级。注意，`layer` 的指定不能违背图结构与层次布局原则，即每一条边的起点的 `layer` 一定小于终点的 `layer` 值。若违背该规则，则可能导致布局失败。"],"delete":[]}],"CHANGELOG.md":[{"add":["2","#### 4.5.1","3","","4","- feat: translate graph with animation;","5","- feat: zoom graph with animation;","6","- feat: timebar supports filterItemTypes to configure the types of the graph items to be filtered; only nodes can be filtered before; ","7","- feat: timebar supports to configure the rotate of the tick labels by tickLabelStyle[dot]rotate;","8","- feat: timebar supports container CSS configuration by containerCSS;","9","- feat: timebar supports a function getDate to returns the date value according to each node or edge by user;","10","- feat: timebar supports afunction getValue  to returns the value (for trend line of trend timebar) according to each node or edge by user;","11","- feat: timebar supports to configure a boolean changeData to control the filter way, true means filters by graph[dot]changeData, false means filters by graph[dot]showItem and graph[dot]hideItem;","12","- feat: timebar supports to configure a function shouldIgnore to return true or false by user to decide whether the node or the edge should be ignored while filtering;","13","- fix: simple timebar silder text position strategy and expand the lineAppendWidth for the slider;","14","- fix: edge label padding bug, closes: #3346;","15","- fix: update node with iconfont icon, the icon is updated to a wrong position, closes: #3348;","16","","17",""],"delete":[]}],"packages\/site\/docs\/api\/treeMethods.zh.md":[{"add":["134","  direction: 'H',"],"delete":["134","  dirction: 'H',"]}],"packages\/pc\/src\/global.ts":[{"add":["9","  version: '0.5.1',"],"delete":["9","  version: '0.4.1',"]}],"packages\/site\/docs\/api\/treeMethods.en.md":[{"add":["137","  direction: 'H',"],"delete":["137","  dirction: 'H',"]}],"packages\/plugin\/src\/timeBar\/trendTimeBar.ts":[{"add":["1","import { get, size, assign, each, isNumber } from '@antv\/util';","2","import { ext } from '@antv\/matrix-util';","18","const transform = ext.transform;","19","","281","        'Arial, sans-serif'","351","      name: 'background'","366","          stroke: '#fff',","367","          lineWidth: 5,","371","        name: 'min-text-shape'","381","          stroke: '#fff',","382","          lineWidth: 5,","386","        name: 'max-text-shape'","397","          stroke: '#fff',","398","          lineWidth: 5,","402","        name: 'min-text-shape'","411","          stroke: '#fff',","412","          lineWidth: 5,","416","        name: 'max-text-shape'","428","      name: 'foreground-shape'","480","    const rotate = this.tickLabelStyle.rotate;","481","    delete this.tickLabelStyle.rotate;","497","      const textX = this.x + index * interval, textY = this.y + height + 5;","500","          x: textX,","501","          y: textY,","506","        name: 'tick-label'","508","      if (isNumber(rotate) && index !== tickData.length - 1) {","509","        const matrix = transform(","510","          [1, 0, 0, 0, 1, 0, 0, 0, 1],","511","          [","512","            ['t', -textX!, -textY!],","513","            ['r', rotate],","514","            ['t', textX - 5, textY + 2],","515","          ],","516","        );","517","        text.attr({","518","          textAlign: 'left',","519","          matrix,","520","        });","521","      }","522","      if (index === 0) {","523","        text.attr({","524","          textAlign: 'left',","525","        });","526","      } else if (index !== tickData.length - 1) {","527","        text.attr({","528","          textAlign: 'right',","529","        });","530","      }","541","        name: 'tick-line'","776","      this.minText = this.tickLabelFormatter ? this.tickLabelFormatter(minData) : minData?.date;","777","      this.maxText = this.tickLabelFormatter ? this.tickLabelFormatter(maxData) : maxData?.date;","885","        minTextShape.attr('x') > minBBox.width \/\/ 左边滑块文本位置小于其宽度代表文字超过左边届","886","          ? { x: min, textAlign: 'center' }","887","          : { x: min, textAlign: 'left' };","890","        maxTextShape.attr('x') > this.width - maxBBox.width \/\/ 有边滑块文本位置大于宽度代表文字超过右边界","891","          ? { x: max, textAlign: 'right' }","892","          : { x: max, textAlign: 'center' };","901","        const { ticks, width } = this;","902","        const speed = this.currentSpeed;","904","        const tickInterval = width \/ ticks.length;","905","        const offsetX = tickInterval \/ (((10 - speed) * 1000) \/ 60);","907","        const offsetXRange = this.adjustOffsetRange(offsetX \/ this.width);","909","        this.updateStartEnd(offsetXRange);","910","        this.updateUI();","912","        if (this.isPlay) {","913","          this.playHandler = this.startPlay();","914","        }","915","      })"],"delete":["1","import { get, size, assign, each } from '@antv\/util';","6","","279","          'Arial, sans-serif'","481","          x: this.x + index * interval,","482","          y: this.y + height + 5,","732","      this.minText = this.tickLabelFormatter ? this.tickLabelFormatter(minData) : minData.date;","733","      this.maxText = this.tickLabelFormatter ? this.tickLabelFormatter(maxData) : maxData.date;","841","        minBBox.width > min - TEXTPADDING","842","          ? { x: min + handlerWidth \/ 2 + TEXTPADDING, textAlign: 'center' }","843","          : { x: min - handlerWidth \/ 2 - TEXTPADDING, textAlign: 'center' };","846","        maxBBox.width > this.width - max - TEXTPADDING","847","          ? { x: max - handlerWidth \/ 2 - TEXTPADDING, textAlign: 'center' }","848","          : { x: max + handlerWidth \/ 2 + TEXTPADDING, textAlign: 'center' };","857","          const { ticks, width } = this;","858","          const speed = this.currentSpeed;","860","          const tickInterval = width \/ ticks.length;","861","          const offsetX = tickInterval \/ (((10 - speed) * 1000) \/ 60);","863","          const offsetXRange = this.adjustOffsetRange(offsetX \/ this.width);","865","          this.updateStartEnd(offsetXRange);","866","          this.updateUI();","868","          if (this.isPlay) {","869","            this.playHandler = this.startPlay();","870","          }","871","        })"]}],"packages\/plugin\/src\/timeBar\/timeButton.ts":[{"add":["80","      name: 'start-marker'"],"delete":[]}],"packages\/pc\/tests\/unit\/element\/nodes\/icon-iconfont-spec.ts":[{"add":["36","  it('update iconfont node', () => {","37","    graph.updateItem('node', {});","38","    expect(graph.getNodes()[0].get('group').find(e => e.get('name') === 'circle-icon').attr('x')).toBe(0);","39","    expect(graph.getNodes()[0].get('group').find(e => e.get('name') === 'circle-icon').attr('y')).toBe(0);","40","  });"],"delete":[]}],"packages\/site\/docs\/api\/Plugins.zh.md":[{"add":["713","  \/\/ [v4.5.1 起支持] 容器的 CSS 样式","714","  readonly containerCSS?: Object;","715","","716","  \/\/ [v4.5.1 起支持] 过滤的类型, ['node', 'edge'], 默认为 ['node']","717","  readonly filterItemTypes?: string[];","718","","719","  \/\/ [v4.5.1 起废弃，由 filterItemTypes 代替] 是否过滤边，若为 true，则需要配合边数据上有 date 字段，过滤节点同时将不满足 date 在选中范围内的边也过滤出去；若为 false，则仅过滤节点以及两端节点都被过滤出去的边","722","  \/\/ [v4.5.1 起支持] 是否通过 graph.changeData 改变图上数据从而达到筛选目的。若为 false 则将使用 graph.hideItem 和 graph.showItem 以隐藏\/展示图上元素从而达到筛选目的","723","  readonly changeData?: boolean;","724","","725","  \/\/ TimeBar 时间范围变化时的回调函数，当不定义该函数时，时间范围变化时默认过滤图上的数据","727","","728","  \/\/ [v4.5.1 起支持] 用户根据节点\/边数据返回对应时间值的方法","729","  getDate?: (d: any) => number;","730","","731","  \/\/ [v4.5.1 起支持] 用户根据节点\/边数据返回对应 value 的方法。value 用于在 type 为 trend 的时间轴上显示趋势线","732","  getValue?: (d: any) => number;","733","","734","  \/\/ [v4.5.1 起支持] 在过滤图元素时是否要忽略某些元素。返回 true，则忽略。否则按照正常过滤逻辑处理","735","  shouldIgnore?: (itemType: 'node' | 'edge', model: any, dateRage: { min: number, max: number }) => boolean;","754","| containerCSS | Object | null | [v4.5.1 起支持] 容器的 CSS 样式 |","755","| filterItemTypes | string[] | null | [v4.5.1 起支持] 过滤的类型, ['node', 'edge'], 默认为 ['node'] |","756","| filterEdge | boolean | false | [v4.5.1 起废弃，由 filterItemTypes 代替] 是否过滤边，若为 true，则需要配合边数据上有 date 字段，过滤节点同时将不满足 date 在选中范围内的边也过滤出去；若为 false，则仅过滤节点以及两端节点都被过滤出去的边 |","757","| changeData | boolean | null | [v4.5.1 起支持] 是否通过 graph.changeData 改变图上数据从而达到筛选目的。若为 false 则将使用 graph.hideItem 和 graph.showItem 以隐藏\/展示图上元素从而达到筛选目的 |","759","| getDate | (d: any) => number | null | [v4.5.1 起支持] 用户根据节点\/边数据返回对应时间值的方法 |","760","| getValue | (d: any) => number | null | [v4.5.1 起支持] 用户根据节点\/边数据返回对应 value 的方法。value 用于在 type 为 trend 的时间轴上显示趋势线 |","761","| shouldIgnore | (itemType: 'node' | 'edge', model: any, dateRage: { min: number, max: number }) => boolean | null | [v4.5.1 起支持] 在过滤图元素时是否要忽略某些元素。返回 true，则忽略。否则按照正常过滤逻辑处理 |","898","  \/\/ 时间轴下方文本的图形样式。[v4.5.1 起支持] 可配置 tickLabelStyle.rotate 以控制时间轴下方每个文本的旋转角度，可避免文本相互重叠","909","| tickLabelFormatter | Function | null | 时间轴下方文本的格式化函数 |","910","| tickLabelStyle | ShapeStyle | {} | 时间轴下方文本的图形样式。[v4.5.1 起支持] 可配置 tickLabelStyle.rotate 以控制时间轴下方每个文本的旋转角度，可避免文本相互重叠 |","911","| tickLineStyle | ShapeStyle | {} | 时间轴下方文本上方的竖线的图形样式 |","972","  \/** [v4.5.1 起支持] 控制栏背景方框的样式 *\/","973","  readonly containerStyle?: ExtendedShapeStyle;","1001","| containerStyle ｜ ShapeStyle | {} | 控制栏背景方框的样式 |"],"delete":["713","  \/\/ 是否过滤边，若为 true，则需要配合边数据上有 date 字段，过滤节点同时将不满足 date 在选中范围内的边也过滤出去；若为 false，则仅过滤节点以及两端节点都被过滤出去的边","717","  valueChange?: (graph: IGraph, value: string) => void;","736","| filterEdge | boolean | false | 是否过滤边，若为 true，则需要配合边数据上有 date 字段，过滤节点同时将不满足 date 在选中范围内的边也过滤出去；若为 false，则仅过滤节点以及两端节点都被过滤出去的边 |","874","  \/\/ 时间轴下方文本的图形样式","885","| tickLabelFormatter | Function | null | The formatter function for customing the labels of the ticks |","886","| tickLabelStyle | ShapeStyle | {} | The shape style for the time tick labels |","887","| tickLineStyle | ShapeStyle | {} | The shape style for the short vertical lines uppon the time tick labels |"]}],"packages\/g6\/src\/index.ts":[{"add":["2","G6.version = '4.5.1';","6","export const version = '4.5.1';"],"delete":["2","G6.version = '4.4.1';","6","export const version = '4.4.1';"]}],"packages\/plugin\/src\/timeBar\/controllerBtn.ts":[{"add":["117","  \/** 控制栏背景方框的样式 *\/","118","  readonly containerStyle?: ExtendedShapeStyle;","237","      containerStyle = {}","265","        ...containerStyle","398","      name: 'speed-text'","410","      name: 'speed-pointer'","471","      name: 'check-icon'","488","      name: 'checked-text'"],"delete":[]}],"packages\/plugin\/src\/timeBar\/timeBarSlice.ts":[{"add":["3","import { ext } from '@antv\/matrix-util';","5","import { isNumber, isString } from '@antv\/util';","6","import { ShapeStyle, IAbstractGraph as IGraph } from '@antv\/g6-core';","19","const transform = ext.transform;","64","  readonly tickLabelStyle?: Object;","102","  private tickLabelStyle?: ShapeStyle;","103","","152","      tickLabelStyle","168","    this.tickLabelStyle = tickLabelStyle || {};","200","      tickLabelStyle","226","    const rotate = tickLabelStyle.rotate;","227","    delete tickLabelStyle.rotate;","291","          name: 'tick-line'","307","            ...tickLabelStyle","310","          name: 'tick-label'","318","        if (isNumber(rotate) && labels.length !== 10) {","319","          const matrix = transform(","320","            [1, 0, 0, 0, 1, 0, 0, 0, 1],","321","            [","322","              ['t', -centerX!, -labelStartY!],","323","              ['r', rotate],","324","              ['t', centerX - 5, labelStartY + 2],","325","            ],","326","          );","327","          text.attr({","328","            textAlign: 'left',","329","            matrix,","330","          });","331","        }","332","        if (labels.length === 1) {","333","          text.attr({","334","            textAlign: 'left',","335","          });","336","        } else if (labels.length === 10) {","337","          text.attr({","338","            textAlign: 'right',","339","          });","340","        }"],"delete":["4","import { isString } from '@antv\/util';","17","import { ShapeStyle, IAbstractGraph as IGraph } from '@antv\/g6-core';"]}],"packages\/pc\/tests\/unit\/performance\/data1-spec.ts":[{"add":["55","","58","      .then((res) => res.json())","59","      .then((data) => {","60","        data.nodes.forEach(node => {","61","          node.label = node.olabel","62","        })","63","        const begin = performance.now();","64","        graph.once('afterrender', e => {","65","          console.log('first render time:', performance.now() - begin);","66","        })","67","        graph.data(data);","68","        graph.render();","69","        done();","70","      });","71","    setTimeout(() => done(), 1000);","75","    for (let i = 0; i < TIMES; i++) {","92","      else currentPos -= 5;","95","      count++;","96","      requestAnimationFrame(animate);","98","    requestAnimationFrame(animate);","105","    for (let i = 0; i < TIMES; i++) {","147","    for (let i = 0; i < TIMES; i++) {","151","      const config = i < TIMES \/ 2 ? { ...nodeTargetConfig } : { ...edgeTargetConfig };","185","    for (let i = 0; i < TIMES; i++) {","204","","234","        funcs.push(() => { });","243","      requestAnimationFrame(animate);"],"delete":["55","  ","58","    .then((res) => res.json())","59","    .then((data) => {","60","      data.nodes.forEach(node => {","61","        node.label = node.olabel","62","      })","63","      const begin = performance.now();","64","      graph.once('afterrender', e => {","65","        console.log('first render time:', performance.now() - begin);","66","      })","67","      graph.data(data);","68","      graph.render();","69","      done();","70","    });","74","    for (let i = 0; i < TIMES; i ++) {","91","      else  currentPos -= 5;","94","      count ++;","95","      requestAnimationFrame( animate );","97","    requestAnimationFrame( animate );","104","    for (let i = 0; i < TIMES; i ++) {","146","    for (let i = 0; i < TIMES; i ++) {","150","      const config = i < TIMES \/ 2 ? {...nodeTargetConfig} : {...edgeTargetConfig};","184","    for (let i = 0; i < TIMES; i ++) {","203","    ","233","        funcs.push(() => {});","242","      requestAnimationFrame( animate );"]}],"packages\/core\/src\/graph\/graph.ts":[{"add":["554","  private getAnimateCfgWithCallback({","555","    animateCfg,","556","    callback","557","  }: {","558","    animateCfg: GraphAnimateConfig;","559","    callback: () => void;","560","  }): GraphAnimateConfig {","561","    let animateConfig: GraphAnimateConfig;","562","    if (!animateCfg) {","563","      animateConfig = {","564","        duration: 500,","565","        callback","566","      };","567","    } else {","568","      animateConfig = clone(animateCfg);","569","      if (animateCfg.callback) {","570","        const animateCfgCallback = animateCfg.callback;","571","        animateConfig.callback = () => {","572","          callback();","573","          animateCfgCallback();","574","        }","575","      } else {","576","        animateConfig.callback = callback;","577","      }","578","    }","579","    return animateConfig;","580","  }","581","","586","   * @param {boolean} animate 是否带有动画地移动","587","   * @param {GraphAnimateConfig} animateCfg 若带有动画，动画的配置项","589","  public translate(dx: number, dy: number, animate?: boolean, animateCfg?: GraphAnimateConfig): void {","596","    if (animate) {","597","      const animateConfig = this.getAnimateCfgWithCallback({","598","        animateCfg,","599","        callback: () => this.emit('viewportchange', { action: 'translate', matrix: group.getMatrix() })","600","      });","602","      move(group, {","603","        x: group.getCanvasBBox().x + dx,","604","        y: group.getCanvasBBox().y + dy","605","      }, animate, animateConfig || {","606","        duration: 500,","607","        easing: 'easeCubic'","608","      });","609","    } else {","610","      matrix = transform(matrix, [['t', dx, dy]]);","612","      group.setMatrix(matrix);","613","","614","      this.emit('viewportchange', { action: 'translate', matrix });","615","      this.autoPaint();","616","    }","623","   * @param {boolean} animate 是否带有动画地移动","624","   * @param {GraphAnimateConfig} animateCfg 若带有动画，动画的配置项","754","      const animateConfig = this.getAnimateCfgWithCallback({","755","        animateCfg,","756","        callback: () => this.emit('viewportchange', { action: 'zoom', matrix: group.getMatrix() })","757","      });","2997","    this.get('itemController')?.destroy();","2998","    this.get('modeController')?.destroy();","2999","    this.get('viewController')?.destroy();","3000","    this.get('stateController')?.destroy();","3001","    this.get('canvas')?.destroy();"],"delete":["559","  public translate(dx: number, dy: number): void {","566","    matrix = transform(matrix, [['t', dx, dy]]);","568","    group.setMatrix(matrix);","570","    this.emit('viewportchange', { action: 'translate', matrix: group.getMatrix() });","571","    this.autoPaint();","707","      let animateConfig: GraphAnimateConfig;","708","      if (!animateCfg) {","709","        animateConfig = {","710","          duration: 500,","711","          callback: () => {","712","            this.emit('viewportchange', { action: 'zoom', matrix: aniMatrix });","713","          }","714","        };","715","      } else if (animateCfg.callback) {","716","        \/\/ This is to prevent modifying the original animateCfg.callback","717","        const { callback } = animateCfg;","718","        animateConfig = clone(animateCfg);","719","        animateConfig.callback = () => {","720","          this.emit('viewportchange', { action: 'zoom', matrix: aniMatrix });","721","          callback();","722","        }","723","      } else {","724","        animateConfig = animateCfg;","725","      }","2965","    this.get('itemController').destroy();","2966","    this.get('modeController').destroy();","2967","    this.get('viewController').destroy();","2968","    this.get('stateController').destroy();","2969","    this.get('canvas').destroy();"]}]}},"98f3536cbc32ebbd54ba0a3dbfe9a18447860fb1":{"changes":{"README-zh_CN.md":"MODIFY","packages\/element\/package.json":"MODIFY","packages\/plugin\/package.json":"MODIFY","packages\/core\/src\/item\/item.ts":"MODIFY","packages\/pc\/src\/behavior\/drag-combo.ts":"MODIFY","packages\/pc\/src\/behavior\/lasso-select.ts":"MODIFY","packages\/site\/docs\/manual\/introduction.en.md":"MODIFY","packages\/g6\/README.md":"MODIFY","packages\/site\/docs\/api\/Graph.zh.md":"MODIFY","packages\/pc\/src\/element\/index.ts":"MODIFY","packages\/pc\/tests\/unit\/graph\/graph-setmode-spec.ts":"ADD","packages\/core\/src\/global.ts":"MODIFY","packages\/core\/src\/element\/shapeBase.ts":"MODIFY","packages\/core\/README.md":"MODIFY","packages\/pc\/package.json":"MODIFY","packages\/pc\/README.md":"MODIFY","packages\/plugin\/tests\/unit\/timebar-spec.ts":"MODIFY","packages\/pc\/tests\/unit\/graph\/graph-spec.ts":"MODIFY","packages\/core\/src\/util\/graphic.ts":"MODIFY","packages\/element\/README.md":"MODIFY","packages\/g6\/README-zh_CN.md":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/pc\/src\/index.ts":"MODIFY","packages\/site\/docs\/api\/Plugins.en.md":"MODIFY","packages\/element\/README-zh_CN.md":"MODIFY","packages\/core\/package.json":"MODIFY","packages\/pc\/src\/behavior\/brush-select.ts":"MODIFY","packages\/element\/src\/nodes\/modelRect.ts":"MODIFY","packages\/site\/package.json":"MODIFY","packages\/pc\/README-zh_CN.md":"MODIFY","CHANGELOG.md":"MODIFY","packages\/site\/docs\/api\/treeMethods.zh.md":"MODIFY","README.md":"MODIFY","packages\/pc\/src\/global.ts":"MODIFY","packages\/site\/docs\/api\/treeMethods.en.md":"MODIFY","packages\/site\/docs\/manual\/introduction.zh.md":"MODIFY","packages\/plugin\/src\/timeBar\/trendTimeBar.ts":"MODIFY","packages\/site\/docs\/api\/Plugins.zh.md":"MODIFY","packages\/g6\/src\/index.ts":"MODIFY","packages\/plugin\/src\/timeBar\/controllerBtn.ts":"MODIFY","packages\/site\/gatsby-config.js":"MODIFY","package.json":"MODIFY","packages\/core\/README-zh_CN.md":"MODIFY","packages\/core\/src\/graph\/controller\/mode.ts":"MODIFY","packages\/pc\/src\/behavior\/drag-node.ts":"MODIFY"},"diff":{"README-zh_CN.md":[{"add":["161","成为一个贡献者前请阅读 [代码贡献规范](https:\/\/github.com\/antvis\/G6\/blob\/master\/packages\/g6\/CONTRIBUTING.zh-CN.md)."],"delete":["161","成为一个贡献者前请阅读 [代码贡献规范](https:\/\/github.com\/antvis\/g6\/blob\/master\/CONTRIBUTING.zh-CN.md)."]}],"packages\/element\/package.json":[{"add":["2","  \"version\": \"0.0.7\",","63","    \"@antv\/g6-core\": \"*\","],"delete":["2","  \"version\": \"0.0.6\",","63","    \"@antv\/g6-core\": \"^0.0.7\","]}],"packages\/plugin\/package.json":[{"add":["2","  \"version\": \"0.0.7\",","24","    \"@antv\/g6-core\": \"*\",","59","    \"@antv\/g6\": \"*\""],"delete":["2","  \"version\": \"0.0.6\",","24","    \"@antv\/g6-core\": \"^0.0.7\",","59","    \"@antv\/g6\": \"^4.1.3\""]}],"packages\/core\/src\/item\/item.ts":[{"add":["224","          } else { \/\/ 若 keyShape 有 name 且 !name，这个图形不是 keyShape，给这个图形一个 name","225","            const shapeName = uniqueId('shape');","226","            child.set('name', shapeName);","227","            originStyles[shapeName] = shapeType !== 'image' ? clone(child.attr()) : self.getShapeStyleByName(name);"],"delete":["224","          } else {","225","            originStyles[keyShapeName] = keyShapeStyle;"]}],"packages\/pc\/src\/behavior\/drag-combo.ts":[{"add":["446","      this.delegate = this.delegateShape;"],"delete":[]}],"packages\/pc\/src\/behavior\/lasso-select.ts":[{"add":["218","    this.delegate = lasso;"],"delete":[]}],"packages\/site\/docs\/manual\/introduction.en.md":[{"add":["129","To become a contributor, please follow our <a href='https:\/\/github.com\/antvis\/G6\/blob\/master\/packages\/g6\/CONTRIBUTING.md' target='_blank'>Contributing Guide<\/a>."],"delete":["129","To become a contributor, please follow our <a href='https:\/\/github.com\/antvis\/g6\/blob\/master\/CONTRIBUTING.md' target='_blank'>Contributing Guide<\/a>."]}],"packages\/g6\/README.md":[{"add":["117","# run bootstrap to link the packages","118","$ npm run bootstrap","119","","120","# build all the packages","121","$ npm run build:all","122","","124","$ npm run test","125","","126","# run lint","127","$ npm run lint","156","To become a contributor, please follow our [contributing guide](https:\/\/github.com\/antvis\/G6\/blob\/master\/packages\/g6\/CONTRIBUTING.md)."],"delete":["118","$ npm test","147","To become a contributor, please follow our [contributing guide](https:\/\/github.com\/antvis\/g6\/blob\/master\/CONTRIBUTING.md)."]}],"packages\/site\/docs\/api\/Graph.zh.md":[{"add":["3","redirect_from:","4","  - \/en\/docs\/api"],"delete":[]}],"packages\/pc\/src\/element\/index.ts":[{"add":["0","import '@antv\/g6-element';"],"delete":["0","import '@antv\/g6-element';"]}],"packages\/pc\/tests\/unit\/graph\/graph-setmode-spec.ts":[{"add":[],"delete":[]}],"packages\/core\/src\/global.ts":[{"add":["66","  version: '0.0.8',"],"delete":["66","  version: '0.0.7',"]}],"packages\/core\/src\/element\/shapeBase.ts":[{"add":["10","import { cloneBesidesImg } from '..\/util\/graphic';","404","      const enableStatesStyle = cloneBesidesImg(item.getCurrentStatesStyle());","408","      const originStyle = mix({}, model.style, cloneBesidesImg(item.getOriginStyle()));","419","        if (attr && typeof attr === 'object') {"],"delete":["403","      const enableStatesStyle = clone(item.getCurrentStatesStyle());","407","      const originStyle = mix({}, model.style, clone(item.getOriginStyle()));","418","        if (typeof attr === 'object') {","468",""]}],"packages\/core\/README.md":[{"add":["117","# run bootstrap to link the packages","118","$ npm run bootstrap","119","","120","# build all the packages","121","$ npm run build:all","122","","124","$ npm run test","125","","126","# run lint","127","$ npm run lint","156","To become a contributor, please follow our [contributing guide](https:\/\/github.com\/antvis\/G6\/blob\/master\/packages\/g6\/CONTRIBUTING.md)."],"delete":["118","$ npm test","147","To become a contributor, please follow our [contributing guide](https:\/\/github.com\/antvis\/g6\/blob\/master\/CONTRIBUTING.md)."]}],"packages\/pc\/package.json":[{"add":["2","  \"version\": \"0.0.9\",","77","    \"@antv\/g6-core\": \"*\",","78","    \"@antv\/g6-plugin\": \"*\",","79","    \"@antv\/g6-element\": \"*\","],"delete":["2","  \"version\": \"0.0.8\",","77","    \"@antv\/g6-core\": \"^0.0.7\",","78","    \"@antv\/g6-plugin\": \"^0.0.6\",","79","    \"@antv\/g6-element\": \"^0.0.6\","]}],"packages\/pc\/README.md":[{"add":["117","# run bootstrap to link the packages","118","$ npm run bootstrap","119","","120","# build all the packages","121","$ npm run build:all","122","","124","$ npm run test","125","","126","# run lint","127","$ npm run lint","156","To become a contributor, please follow our [contributing guide](https:\/\/github.com\/antvis\/G6\/blob\/master\/packages\/g6\/CONTRIBUTING.md)."],"delete":["118","$ npm test","147","To become a contributor, please follow our [contributing guide](https:\/\/github.com\/antvis\/g6\/blob\/master\/CONTRIBUTING.md)."]}],"packages\/plugin\/tests\/unit\/timebar-spec.ts":[{"add":["111","      }"],"delete":["111","      },"]}],"packages\/pc\/tests\/unit\/graph\/graph-spec.ts":[{"add":["0","import G6, { Graph } from '..\/..\/..\/src';","72","        default: ['drag-node', 'drag-canvas', 'zoom-canvas'],"],"delete":["0","import { Graph } from '..\/..\/..\/src';","4","\/\/ import Plugin from '..\/..\/..\/src\/plugins';","73","        default: ['drag-node'],"]}],"packages\/core\/src\/util\/graphic.ts":[{"add":["15","import { isString, clone, isNumber, isObject } from '@antv\/util';","650","","651","export const cloneBesidesImg = (obj) => {","652","  const clonedObj = {};","653","  Object.keys(obj).forEach(key1 => {","654","    const obj2 = obj[key1];","655","    if (isObject(obj2)) {","656","      const clonedObj2 = {};","657","      Object.keys(obj2).forEach(key2 => {","658","        const v = obj2[key2];","659","        if(key2 === 'img' && !isString(v)) return;","660","        clonedObj2[key2] = clone(v);","661","      })","662","      clonedObj[key1] = clonedObj2;","663","    } else {","664","      clonedObj[key1] = clone(obj2);","665","    }","666","  });","667","  return clonedObj;","668","}"],"delete":["15","import { isString, clone, isNumber } from '@antv\/util';"]}],"packages\/element\/README.md":[{"add":["117","# run bootstrap to link the packages","118","$ npm run bootstrap","119","","120","# build all the packages","121","$ npm run build:all","122","","124","$ npm run test","125","","126","# run lint","127","$ npm run lint","156","To become a contributor, please follow our [contributing guide](https:\/\/github.com\/antvis\/G6\/blob\/master\/packages\/g6\/CONTRIBUTING.md)."],"delete":["118","$ npm test","147","To become a contributor, please follow our [contributing guide](https:\/\/github.com\/antvis\/g6\/blob\/master\/CONTRIBUTING.md)."]}],"packages\/g6\/README-zh_CN.md":[{"add":["117","# run bootstrap to link the packages","118","$ npm run bootstrap","119","","120","# build all the packages","121","$ npm run build:all","122","","124","$ npm run test","125","","126","# run lint","127","$ npm run lint","160","成为一个贡献者前请阅读 [代码贡献规范](https:\/\/github.com\/antvis\/G6\/blob\/master\/packages\/g6\/CONTRIBUTING.zh-CN.md)."],"delete":["118","$ npm test","151","成为一个贡献者前请阅读 [代码贡献规范](https:\/\/github.com\/antvis\/g6\/blob\/master\/CONTRIBUTING.zh-CN.md)."]}],"packages\/g6\/package.json":[{"add":["2","  \"version\": \"4.1.5\",","68","    \"@antv\/g6-pc\": \"*\""],"delete":["2","  \"version\": \"4.1.4\",","68","    \"@antv\/g6-pc\": \"^0.0.8\""]}],"packages\/pc\/src\/index.ts":[{"add":["87","  Shape"],"delete":["87","  Shape,"]}],"packages\/site\/docs\/api\/Plugins.en.md":[{"add":["620","  \/** style of the back forward button *\/","622","  \/** style of the fast forward button *\/","624","  \/** style of the play button *\/","626","  \/** the text for the right-botton switch controlling play with single time point or time range *\/","627","  readonly timePointControllerText?: string;","647","| timePointControllerText | string | \"单一时间\"         | The text for the right-botton switch controlling play with single time point or time range     |"],"delete":["642",""]}],"packages\/element\/README-zh_CN.md":[{"add":["117","# run bootstrap to link the packages","118","$ npm run bootstrap","119","","120","# build all the packages","121","$ npm run build:all","122","","124","$ npm run test","125","","126","# run lint","127","$ npm run lint","160","成为一个贡献者前请阅读 [代码贡献规范](https:\/\/github.com\/antvis\/G6\/blob\/master\/packages\/g6\/CONTRIBUTING.zh-CN.md)."],"delete":["118","$ npm test","151","成为一个贡献者前请阅读 [代码贡献规范](https:\/\/github.com\/antvis\/g6\/blob\/master\/CONTRIBUTING.zh-CN.md)."]}],"packages\/core\/package.json":[{"add":["2","  \"version\": \"0.0.8\","],"delete":["2","  \"version\": \"0.0.7\","]}],"packages\/pc\/src\/behavior\/brush-select.ts":[{"add":["192","    this.delegate = brush;"],"delete":[]}],"packages\/element\/src\/nodes\/modelRect.ts":[{"add":["304","          className: 'text-shape',","305","          name: 'text-shape',"],"delete":[]}],"packages\/site\/package.json":[{"add":["3","  \"version\": \"4.1.5\",","36","    \"@antv\/g6\": \"*\","],"delete":["3","  \"version\": \"4.1.3\",","36","    \"@antv\/g6\": \"^4.1.3\","]}],"packages\/pc\/README-zh_CN.md":[{"add":["117","# run bootstrap to link the packages","118","$ npm run bootstrap","119","","120","# build all the packages","121","$ npm run build:all","122","","124","$ npm run test","125","","126","# run lint","127","$ npm run lint","160","成为一个贡献者前请阅读 [代码贡献规范](https:\/\/github.com\/antvis\/G6\/blob\/master\/packages\/g6\/CONTRIBUTING.zh-CN.md)."],"delete":["118","$ npm test","151","成为一个贡献者前请阅读 [代码贡献规范](https:\/\/github.com\/antvis\/g6\/blob\/master\/CONTRIBUTING.zh-CN.md)."]}],"CHANGELOG.md":[{"add":["2","#### 4.1.5","3","","4","- fix: wrong style for modelRect after updating and state changing, closes: #2613;","5","- fix: drag-canvas with shouldBegin false, closes: #2571;","6","- fix: pack plugin with es module, closes: #2577;","7","- feat: dijkstra with multiple shortest paths, closes: #2297;","8","- fix: setMode while the delegates of brush-select and drag-node is on the canvas, closes: #2607;","9","- docs: update the english TimeBar docs, closes: #2597;","10","- fix: TimeBar time point switch text configurable, closes: #2597;","11",""],"delete":[]}],"packages\/site\/docs\/api\/treeMethods.zh.md":[{"add":["2","order: 4"],"delete":["2","order: 5"]}],"README.md":[{"add":["157","To become a contributor, please follow our [contributing guide](https:\/\/github.com\/antvis\/G6\/blob\/master\/packages\/g6\/CONTRIBUTING.md)."],"delete":["157","To become a contributor, please follow our [contributing guide](https:\/\/github.com\/antvis\/g6\/blob\/master\/CONTRIBUTING.md)."]}],"packages\/pc\/src\/global.ts":[{"add":["9","  version: '0.0.9',"],"delete":["9","  version: '0.0.8',"]}],"packages\/site\/docs\/api\/treeMethods.en.md":[{"add":["2","order: 4"],"delete":["2","order: 5"]}],"packages\/site\/docs\/manual\/introduction.zh.md":[{"add":["130","成为一个贡献者前请阅读 <a href='https:\/\/github.com\/antvis\/G6\/blob\/master\/packages\/g6\/CONTRIBUTING.zh-CN.md' target='_blank'>代码贡献规范<\/a>。"],"delete":["130","成为一个贡献者前请阅读 <a href='https:\/\/github.com\/antvis\/g6\/blob\/master\/CONTRIBUTING.zh-CN.md' target='_blank'>代码贡献规范<\/a>。"]}],"packages\/plugin\/src\/timeBar\/trendTimeBar.ts":[{"add":["215","    this.currentSpeed = controllerCfg.speed || 1;","469","      ...this.controllerCfg"],"delete":["215","    this.currentSpeed = controllerCfg.speed;"]}],"packages\/site\/docs\/api\/Plugins.zh.md":[{"add":["810","  \/** 快退按钮样式 *\/","812","  \/** 快进按钮样式 *\/","814","  \/** 播放按钮样式 *\/","816","  \/** 右下角\u201C单一时间\u201D文本 *\/","817","  readonly timePointControllerText?: string;","837","| timePointControllerText | string | \"单一时间\"         | 右下角\u201C单一时间\u201D文本，默认为\u201D单一时间\u201C     |"],"delete":[]}],"packages\/g6\/src\/index.ts":[{"add":["2","G6.version = '4.1.5';","6","export const version = '4.1.5';"],"delete":["2","G6.version = '4.1.4';","6","export const version = '4.1.4';"]}],"packages\/plugin\/src\/timeBar\/controllerBtn.ts":[{"add":["61","  readonly timePointControllerText?: string;","332","        text: this.controllerCfg?.timePointControllerText || '单一时间',"],"delete":["331","        text: '单一时间',"]}],"packages\/site\/gatsby-config.js":[{"add":["235","        order: 2,","243","        order: 1,","251","        order: 5,","254","        slug: 'api\/Items',"],"delete":["235","        order: 1,","243","        order: 2,","251","        order: 4,","254","        slug: 'api\/items',"]}],"package.json":[{"add":["68","    \"@umijs\/fabric\": \"^2.3.1\",","69","    \"eslint-plugin-eslint-comments\": \"^3.2.0\",","70","    \"eslint-plugin-import\": \"^2.22.1\",","71","    \"eslint-plugin-react\": \"^7.22.0\",","72","    \"eslint-plugin-react-hooks\": \"^4.2.0\",","73","    \"eslint-plugin-unicorn\": \"^27.0.0\",","74","    \"pre-commit\": \"^1.2.2\","],"delete":["66","    \"@umijs\/fabric\": \"^2.3.1\",","67","    \"pre-commit\": \"^1.2.2\","]}],"packages\/core\/README-zh_CN.md":[{"add":["117","# run bootstrap to link the packages","118","$ npm run bootstrap","119","","120","# build all the packages","121","$ npm run build:all","122","","124","$ npm run test","125","","126","# run lint","127","$ npm run lint","160","成为一个贡献者前请阅读 [代码贡献规范](https:\/\/github.com\/antvis\/G6\/blob\/master\/packages\/g6\/CONTRIBUTING.zh-CN.md)."],"delete":["118","$ npm test","151","成为一个贡献者前请阅读 [代码贡献规范](https:\/\/github.com\/antvis\/g6\/blob\/master\/CONTRIBUTING.zh-CN.md)."]}],"packages\/core\/src\/graph\/controller\/mode.ts":[{"add":["122","      if (behave.delegate) behave.delegate.remove();"],"delete":[]}],"packages\/pc\/src\/behavior\/drag-node.ts":[{"add":["380","      this.delegate = this.delegateRect;"],"delete":[]}]}},"c0f6161355788d5993240a2a58907f73d4179565":{"changes":{"packages\/element\/package.json":"MODIFY","packages\/plugin\/package.json":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/site\/docs\/api\/Plugins.en.md":"MODIFY","packages\/core\/package.json":"MODIFY","CHANGELOG.md":"MODIFY","packages\/pc\/src\/global.ts":"MODIFY","packages\/plugin\/src\/legend\/index.ts":"MODIFY","packages\/core\/src\/global.ts":"MODIFY","packages\/g6\/src\/index.ts":"MODIFY","packages\/pc\/package.json":"MODIFY","packages\/plugin\/src\/base.ts":"MODIFY","packages\/core\/src\/graph\/graph.ts":"MODIFY","packages\/plugin\/src\/annotation\/index.ts":"MODIFY"},"diff":{"packages\/element\/package.json":[{"add":["2","  \"version\": \"0.7.3\",","63","    \"@antv\/g6-core\": \"0.7.3\","],"delete":["2","  \"version\": \"0.7.2\",","63","    \"@antv\/g6-core\": \"0.7.2\","]}],"packages\/plugin\/package.json":[{"add":["2","  \"version\": \"0.7.3\",","24","    \"@antv\/g6-core\": \"0.7.3\",","25","    \"@antv\/g6-element\": \"0.7.3\","],"delete":["2","  \"version\": \"0.7.2\",","24","    \"@antv\/g6-core\": \"0.7.2\",","25","    \"@antv\/g6-element\": \"0.7.2\","]}],"packages\/g6\/package.json":[{"add":["2","  \"version\": \"4.7.3\",","68","    \"@antv\/g6-pc\": \"0.7.3\""],"delete":["2","  \"version\": \"4.7.2\",","68","    \"@antv\/g6-pc\": \"0.7.2\""]}],"packages\/site\/docs\/api\/Plugins.en.md":[{"add":[],"delete":["994","<<<<<<< Updated upstream","995","| timePointControllerText | string | \"单一时间\" | The text for the right-botton switch controlling play with single time point or time range |","996","| timeRangeControllerText | string | \"时间范围\" | The text for the right-botton switch controlling play with single time point or time range |","997","=======","1000",">>>>>>> Stashed changes"]}],"packages\/core\/package.json":[{"add":["2","  \"version\": \"0.7.3\","],"delete":["2","  \"version\": \"0.7.2\","]}],"CHANGELOG.md":[{"add":["2","### 4.7.3","3","","4","- feat: beforechangedata and afterchagnedata for graph changeData;","5","- feat: Annotation supports icon events callbacks;","6","- feat: Annotation supports defaultBegin position configuration for new annotation cards;","7","- perf: Annotation updated automatically when graph data changed and graph item visiblity changed;","8","- fix: Destroy legend canvas when the plugin is destroyed, closes: #3931;","9",""],"delete":[]}],"packages\/pc\/src\/global.ts":[{"add":["9","  version: '0.7.3',"],"delete":["9","  version: '0.7.2',"]}],"packages\/plugin\/src\/legend\/index.ts":[{"add":["768","    const lc = this.get('legendCanvas');","769","    lc?.destroy();"],"delete":[]}],"packages\/core\/src\/global.ts":[{"add":["66","  version: '0.7.3',"],"delete":["66","  version: '0.7.2',"]}],"packages\/g6\/src\/index.ts":[{"add":["2","G6.version = '4.7.3';","6","export const version = '4.7.3';"],"delete":["2","G6.version = '4.7.2';","6","export const version = '4.7.2';"]}],"packages\/pc\/package.json":[{"add":["2","  \"version\": \"0.7.3\",","77","    \"@antv\/g6-core\": \"0.7.3\",","78","    \"@antv\/g6-element\": \"0.7.3\",","79","    \"@antv\/g6-plugin\": \"0.7.3\","],"delete":["2","  \"version\": \"0.7.2\",","77","    \"@antv\/g6-core\": \"0.7.2\",","78","    \"@antv\/g6-element\": \"0.7.2\",","79","    \"@antv\/g6-plugin\": \"0.7.2\","]}],"packages\/plugin\/src\/base.ts":[{"add":[],"delete":["27","    console.log('_cfgs', this._cfgs)"]}],"packages\/core\/src\/graph\/graph.ts":[{"add":["1613","    this.emit('beforechangedata');","1732","    this.emit('afterchangedata');"],"delete":[]}],"packages\/plugin\/src\/annotation\/index.ts":[{"add":["77","  getContent?: (item) => string | HTMLDivElement,","78","  onAnnotationChange?: (info: any, action: string) => void;","99","  defaultBegin?: { left?: number, top?: number, right?: number, bottom?: number }, \/\/ 一个个卡片出生的起始位置，后续卡片会往后排列","102","  onClickIcon?: (evt: any, id: string, type: 'expand' | 'collapse' | 'close') => void;","109","    isCanvas?: boolean,","152","      'afterupdateitem': 'updateLink',","153","      'afterchangedata': 'onGraphDataChange',","154","      'afteritemvisibilitychange': 'onGraphItemVisibilityChange'","400","      defaultBegin,","427","    let exist = !!card;","428","    if (exist) {","444","      } else if (!exist && !isCanvas) {","447","        const { left: beginLeft, right: propsBeginRight = 16, top: propsBeginTop = 8, bottom: beginBottom } = defaultBegin || {};","448","        let beginRight = propsBeginRight;","449","        let beginTop = propsBeginTop;","450","        if (!isNaN(beginLeft)) {","451","          beginRight = container.scrollWidth - beginLeft;","452","        }","453","        if (!isNaN(beginBottom)) {","454","          beginTop = container.scrollHeight - beginBottom;","455","        }","457","        x = container.scrollWidth - newCard.scrollWidth - (rows.length - 1) * cardWidth - beginRight;","459","        const { bbox: lastCardBBox } = currentRow[currentRow.length - 1] || {};","460","        y = (lastCardBBox?.bottom - containerTop) || beginTop","495","      content: content || propsContent,","496","      title: title || propsTitle,","497","      isCanvas","499","","504","    } else {","505","      const hasPropsPosition = !isNaN(propsX) && !isNaN(propsY);","506","      if (!exist && !isCanvas && !hasPropsPosition) {","507","        \/\/ 没有 container、新增 card 时，记录当前列中最下方位置，方便换行","508","        const { bottom: containerBottom = 0, top: containerTop } = containerBBox;","509","        rows[rows.length - 1].push({","510","          id: itemId,","511","          bbox: cardBBox","512","        });","513","        if (cardBBox.top > containerBottom - containerTop - cardBBox.height - 16) rows.push([]);","514","        this.set('rows', rows)","518","","519","    const onAnnotationChange = this.get('onAnnotationChange');","520","    onAnnotationChange?.(cardInfoMap[itemId], exist ? 'update' : 'create');","587","    const onAnnotationChange = this.get('onAnnotationChange');","588","    onAnnotationChange(cardInfoMap[id], 'hide');","600","    const cardInfo = cardInfoMap[id]","601","    const { card, link } = cardInfo;","606","    const onAnnotationChange = this.get('onAnnotationChange');","607","    onAnnotationChange(cardInfo, 'remove');","680","      const { onClickIcon } = this.get('cardCfg') || {};","689","        onClickIcon?.(e, itemId, e.target.className === 'g6-annotation-collapse' ? 'collapse' : 'expand')","698","        onClickIcon?.(e, itemId, 'close')","735","","736","          const onAnnotationChange = this.get('onAnnotationChange');","737","          onAnnotationChange?.(cardInfo, 'update');","807","","808","        \/\/ 移动过的卡片从 rows 中移除，避免影响后续卡片出生位置","809","        const rows = this.get(\"rows\");","810","        rows?.forEach(rowItems => {","811","          for (let i = rowItems.length - 1; i >= 0; i--) {","812","            if (rowItems[i].id === itemId) rowItems.splice(i, 1);","813","          }","814","        })","815","","816","        const onAnnotationChange = this.get('onAnnotationChange');","817","        onAnnotationChange?.(cardInfoMap[itemId], 'update');","839","  public updateLink({ item }) {","840","    if (!item) return;","841","    const cardInfoMap: CardInfoMap = this.get('cardInfoMap');","842","    if (!cardInfoMap) return;","843","    const canvas = this.get('canvas');","844","    const graph = this.get('graph');","845","    const id = item.getID();","846","    const { link, card } = cardInfoMap[id] || {};","847","    if (link) {","848","      const path = getPathItem2Card(item, card.getBoundingClientRect(), graph, canvas);","849","      link.attr('path', path)","850","    }","851","  }","852","","859","      const { id } = cardInfo;","861","      this.updateLink({ item });","862","    })","863","  }","864","","865","  public onGraphDataChange() {","866","    const cardInfoMap: CardInfoMap = this.get('cardInfoMap');","867","    if (!cardInfoMap) return;","868","    const graph = this.get('graph');","869","    Object.values(cardInfoMap).forEach(info => {","870","      const { id, card, isCanvas } = info;","871","      if (isCanvas || card.style.display === 'none') return;","872","      const item = graph.findById(id);","873","      if (item && item.isVisible()) {","874","        this.toggleAnnotation(item);","875","      } else {","876","        this.hideCard(id);","881","  public onGraphItemVisibilityChange({ item, visible }) {","882","    if (!item || item.destroyed) return;","883","    const cardInfoMap: CardInfoMap = this.get('cardInfoMap');","884","    if (!cardInfoMap) return;","885","    const id = item.getID();","886","    if (!cardInfoMap[id]) return;","887","    if (!visible) this.hideCard(id);","888","  }","889","","892","    if (!cardInfoMap) return;","900","      const item = graph.findById(id) || graph.get('canvas');","918","      const item = graph.findById(id) || graph.get('canvas');"],"delete":["77","  getContent?: (item) => string | HTMLDivElement","163","      itemId,","420","    if (card) {","436","      } else if (!card) {","440","        x = container.scrollWidth - newCard.scrollWidth - 16 - (rows.length - 1) * cardWidth;","442","        const lastCardBBox = currentRow[currentRow.length - 1];","443","        y = ((lastCardBBox?.bottom - containerTop) || 0) + 8;","483","    } else if (!card) {","484","      \/\/ 没有 container、新增 card 时，记录当前列中最下方位置，方便换行","485","      const { bottom: containerBottom = 0 } = containerBBox;","486","      rows[rows.length - 1].push(cardBBox);","487","      if (cardBBox.bottom > containerBottom - 16) {","488","        rows.push([]);","490","      this.set('rows', rows)","570","    const { card, link } = cardInfoMap[id];","794","    const canvas = this.get('canvas');","796","      const { link, id, card } = cardInfo;","798","      if (link && item) {","799","        const path = getPathItem2Card(item, card.getBoundingClientRect(), graph, canvas);","800","        link.attr('path', path)","807","    if (!cardInfoMap) [];","815","      const item = graph.findById(id);","833","      const item = graph.findById(id);"]}]}},"90f1264b25b4b37864cca4511a39645595f4b799":{"changes":{"packages\/pc\/tests\/unit\/element\/combo-spec.ts":"MODIFY","packages\/site\/docs\/api\/graphFunc\/on_off.en.md":"MODIFY","packages\/element\/package.json":"MODIFY","packages\/plugin\/package.json":"MODIFY","packages\/pc\/src\/behavior\/drag-combo.ts":"MODIFY","packages\/pc\/tests\/unit\/element\/edge-label-back-spec.ts":"MODIFY","packages\/pc\/src\/graph\/controller\/layout.ts":"MODIFY","packages\/site\/docs\/api\/graphFunc\/render.en.md":"MODIFY","packages\/element\/src\/nodes\/circle.ts":"MODIFY","packages\/pc\/src\/behavior\/zoom-canvas.ts":"MODIFY","packages\/core\/src\/graph\/controller\/item.ts":"MODIFY","packages\/core\/src\/graph\/controller\/view.ts":"MODIFY","packages\/pc\/src\/behavior\/click-select.ts":"MODIFY","packages\/plugin\/src\/legend\/index.ts":"MODIFY","packages\/core\/src\/graph\/controller\/layout.ts":"MODIFY","packages\/core\/src\/global.ts":"MODIFY","packages\/pc\/tests\/unit\/behavior\/select-spec.ts":"MODIFY","packages\/pc\/package.json":"MODIFY","packages\/plugin\/src\/minimap\/index.ts":"MODIFY","packages\/plugin\/src\/grid\/index.ts":"MODIFY","packages\/core\/src\/interface\/graph.ts":"MODIFY","packages\/plugin\/src\/imageMinimap\/index.ts":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/core\/package.json":"MODIFY","packages\/pc\/tests\/unit\/layout\/layout-mechanism-spec.ts":"MODIFY","packages\/site\/package.json":"MODIFY","packages\/site\/docs\/api\/graphFunc\/render.zh.md":"MODIFY","CHANGELOG.md":"MODIFY","packages\/core\/tests\/unit\/graph\/graph-spec.ts":"MODIFY","packages\/pc\/tests\/unit\/behavior\/zoom-spec.ts":"MODIFY","packages\/pc\/src\/global.ts":"MODIFY","packages\/pc\/tests\/unit\/element\/nodes\/icon-iconfont-spec.ts":"MODIFY","packages\/g6\/src\/index.ts":"MODIFY","package.json":"MODIFY","packages\/element\/src\/nodes\/donut.ts":"MODIFY","packages\/core\/src\/types\/index.ts":"MODIFY","packages\/site\/docs\/api\/graphFunc\/on_off.zh.md":"MODIFY","packages\/core\/src\/graph\/graph.ts":"MODIFY"},"diff":{"packages\/pc\/tests\/unit\/element\/combo-spec.ts":[{"add":["73","});","74","","75","describe('stack', () => {","76","  const graph = new Graph({","77","    container: div,","78","    width: 500,","79","    height: 500,","80","    groupByTypes: false,","81","    enabledStack: true,","82","    modes: {","83","      default: ['drag-node', 'drag-combo']","84","    }","85","  });","86","  data.combos[0].collapsed = true;","87","  graph.data(data);","88","  graph.render();","89","  it('initial collapsed and stack', () => {","90","    expect(graph.getUndoStack().linkedList.head.value.action).toBe('render')","91","  })","92","  it('drag combo stack', () => {","93","    graph.on('canvas:click', e => {","94","      console.log('undoStack', graph.undoStack, graph.getUndoStack());","95","    })","96","  });"],"delete":[]}],"packages\/site\/docs\/api\/graphFunc\/on_off.en.md":[{"add":["20","| item | Item | true | The manipulated item |","21","| target | IShape | true | The manipulated [Graphics Shape](\/en\/docs\/manual\/middle\/elements\/shape-keyshape) |"],"delete":["20","| item | string | true | The manipulated item |","21","| target | Function | true | The manipulated [Graphics Shape](\/en\/docs\/manual\/middle\/elements\/shape-keyshape) |"]}],"packages\/element\/package.json":[{"add":["2","  \"version\": \"0.6.6\",","63","    \"@antv\/g6-core\": \"^0.6.6\",","88","    \"typescript\": \"^4.6.3\",","91","}"],"delete":["2","  \"version\": \"0.6.4\",","63","    \"@antv\/g6-core\": \"0.6.4\",","88","    \"typescript\": \"^3.9.5\",","91","}"]}],"packages\/plugin\/package.json":[{"add":["2","  \"version\": \"0.6.6\",","24","    \"@antv\/g6-core\": \"^0.6.6\",","25","    \"@antv\/g6-element\": \"^0.6.6\",","62","}"],"delete":["2","  \"version\": \"0.6.4\",","24","    \"@antv\/g6-core\": \"0.6.4\",","61","}"]}],"packages\/pc\/src\/behavior\/drag-combo.ts":[{"add":["45","      enableStack: true,","218","          graph.updateComboTree(combo, targetModel.id, false);","255","            if (comboId !== combo.getModel().parentId) graph.updateComboTree(combo, comboId, false);","267","            graph.updateComboTree(combo, undefined, false);","335","      const stack = graph.get('enabledStack') && this.enableStack;","339","          graph.updateComboTree(combo, undefined, stack);","411","    graph.updateItem(item, { x, y }, false);"],"delete":["217","          graph.updateComboTree(combo, targetModel.id);","254","            if (comboId !== combo.getModel().parentId) graph.updateComboTree(combo, comboId);","266","            graph.updateComboTree(combo);","337","          graph.updateComboTree(combo);","409","    graph.updateItem(item, { x, y });"]}],"packages\/pc\/tests\/unit\/element\/edge-label-back-spec.ts":[{"add":["3","import { numberEqual } from '..\/layout\/util';","152","    const { x: newX, y: newY } = labelBgShape.attr();","153","    expect(numberEqual(newX, 226, 2)).toBe(true);","154","    expect(numberEqual(newY, 166, 2)).toBe(true);"],"delete":["141","    console.log('xy', x, y);","152","    { x, y } = labelBgShape.attr();","153","    expect(labelBgShape.attr().x).toBe(226.85302734375);","154","    expect(labelBgShape.attr().y).toBe(166);"]}],"packages\/pc\/src\/graph\/controller\/layout.ts":[{"add":["305","    } else {","306","      this.refreshLayout();","494","    if (layoutMethods?.length === 1) {"],"delete":["492","    if (layoutMethods.length === 1) {"]}],"packages\/site\/docs\/api\/graphFunc\/render.en.md":[{"add":["17","Attention: If there are some new nodes\/edges\/combos to be added or some nodes\/edges\/combos to be removed, use [graph.addItem](\/en\/docs\/api\/graphFunc\/item\/#graphadditemtype-model-stack) \/ [graph.removeItem](\/en\/docs\/api\/graphFunc\/item\/#graphremoveitemitem-stack) or [graph.changeData](\/en\/docs\/api\/graphFunc\/data\/#graphchangedatadata-stack) instead."],"delete":["17","Attention: If there are some new nodes\/edges\/combos to be added or some nodes\/edges\/combos to be removed, use [graph.addItem](.\/Graph#additemtype-model) \/ [graph.removeItem](.\/Graph#removeitemitem) or [graph.changeData](.\/Graph#changedatadata) instead."]}],"packages\/element\/src\/nodes\/circle.ts":[{"add":["223","      const style = { ...cfg.style };"],"delete":["223","      const style = {...cfg.style};"]}],"packages\/pc\/src\/behavior\/zoom-canvas.ts":[{"add":["174","    if (zoom > maxZoom) {","175","      zoom = maxZoom;","176","    } else if (zoom < minZoom) {","177","      zoom = minZoom;"],"delete":["174","    if (zoom > maxZoom || zoom < minZoom) {","175","      return;"]}],"packages\/core\/src\/graph\/controller\/item.ts":[{"add":["189","            graph.collapseCombo(item as ICombo, false);","431","  public collapseCombo(combo: ICombo | string, stack: boolean = true) {","438","      graph.hideItem(node, stack);","441","      graph.hideItem(c, stack);","480","  public expandCombo(combo: ICombo | string, stack: boolean = true) {","487","      graph.showItem(node, stack);","493","        graph.showItem(c, stack);"],"delete":["189","            graph.collapseCombo(item as ICombo);","431","  public collapseCombo(combo: ICombo | string) {","438","      graph.hideItem(node);","441","      graph.hideItem(c);","480","  public expandCombo(combo: ICombo | string) {","487","      graph.showItem(node);","493","        graph.showItem(c);"]}],"packages\/core\/src\/graph\/controller\/view.ts":[{"add":["4","import { Item, Matrix, Padding, GraphAnimateConfig, IEdge, FitViewRules } from '..\/..\/types';","31","  public fitCenter(animate?: boolean, animateCfg?: GraphAnimateConfig) {","43","    graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y, animate, animateCfg);","47","  public fitView(animate?: boolean, animateCfg?: GraphAnimateConfig) {","64","    graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y, animate, animateCfg);","71","    if (!graph.zoom(ratio, viewCenter)) {","77","  public fitViewByRules(rules: FitViewRules, animate?: boolean, animateCfg?: GraphAnimateConfig) {","99","    graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y, animate, animateCfg);","115","","124","    graph.zoomTo(endZoom, viewCenter, animate, animateCfg);"],"delete":["4","import { Item, Matrix, Padding, GraphAnimateConfig, IEdge , FitViewRules} from '..\/..\/types';","31","  public fitCenter() {","43","    graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y);","47","  public fitView() {","64","    graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y);","71","    if(!graph.zoom(ratio, viewCenter)) {","77","  public fitViewByRules(rules: FitViewRules) {","99","    graph.translate(viewCenter.x - groupCenter.x, viewCenter.y - groupCenter.y);","115","    ","124","    graph.zoomTo(endZoom, viewCenter);"]}],"packages\/pc\/src\/behavior\/click-select.ts":[{"add":["12","      selectNode: true,","13","      selectEdge: false,","14","      selectCombo: true,","24","        \"Behavior click-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'\",","31","        'edge:click': 'onClick',","38","      'edge:click': 'onClick',","59","      const selected = graph.findAllByState('node', self.selectedState)","60","        .concat(graph.findAllByState('edge', self.selectedState))","61","        .concat(graph.findAllByState('combo', self.selectedState));","62","      each(selected, (selectedItem) => {","63","        if (selectedItem !== item) {","64","          graph.setItemState(selectedItem, self.selectedState, false);","69","    \/\/ check if the item could be selected, given the current cfg","70","    const itemSelectable = (() => {","71","      switch (type) {","72","        case 'node':","73","          return self.selectNode;","74","        case 'edge':","75","          return self.selectEdge;","76","        case 'combo':","77","          return self.selectCombo;","78","        default:","79","          return false;","80","      }","81","    })();","82","    if (!itemSelectable) {","83","      const selectedNodes = graph.findAllByState('node', self.selectedState);","84","      const selectedEdges = graph.findAllByState('edge', self.selectedState);","85","      const selectedCombos = graph.findAllByState('combo', self.selectedState);","86","      graph.emit('nodeselectchange', {","87","        selectedItems: {","88","          nodes: selectedNodes,","89","          edges: selectedEdges,","90","          combos: selectedCombos,","91","        },","92","        select: false,","93","      });","94","      return;","95","    }","96","","102","      const selectedEdges = graph.findAllByState('edge', self.selectedState);","108","          edges: selectedEdges,","118","      const selectedEdges = graph.findAllByState('edge', self.selectedState);","124","          edges: selectedEdges,","142","    const selectedEdges = graph.findAllByState('edge', this.selectedState);","143","    each(selectedEdges, (edge) => {","144","      graph.setItemState(edge, this.selectedState, false);","145","    });","146",""],"delete":["21","        \"Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'\",","54","      const selected = graph.findAllByState('node', self.selectedState).concat(graph.findAllByState('combo', self.selectedState));","55","      each(selected, (combo) => {","56","        if (combo !== item) {","57","          graph.setItemState(combo, self.selectedState, false);"]}],"packages\/plugin\/src\/legend\/index.ts":[{"add":["210","    const stateStyles = filter?.legendStateStyles || {};"],"delete":["210","    const stateStyles = filter?.lengedStateStyles || {};"]}],"packages\/core\/src\/graph\/controller\/layout.ts":[{"add":["68","    const { graph, layoutType } = this;","83","    this.layoutType = cfg.type || this.layoutType;"],"delete":["68","    const { graph, layoutType, data } = this;"]}],"packages\/core\/src\/global.ts":[{"add":["66","  version: '0.6.6',"],"delete":["66","  version: '0.6.4',"]}],"packages\/pc\/tests\/unit\/behavior\/select-spec.ts":[{"add":["90","  it('select & deselect single edge', () => {","91","    const graph = new Graph({","92","      container: div,","93","      width: 500,","94","      height: 500,","95","      modes: {","96","        default: [","97","          {","98","            type: 'click-select',","99","            selectEdge: true,","100","          }","101","        ],","102","      },","103","      nodeStateStyles: {","104","        selected: {},","105","      },","106","    });","107","    graph.addItem('node', {","108","      id: 'node1',","109","      color: '#666',","110","      x: 50,","111","      y: 50,","112","      size: 20,","113","      style: { lineWidth: 2, fill: '#666' },","114","    });","115","    graph.addItem('node', {","116","      id: 'node2',","117","      color: '#666',","118","      x: 150,","119","      y: 150,","120","      size: 20,","121","      style: { lineWidth: 2, fill: '#666' },","122","    });","123","    const edge = graph.addItem('edge', {","124","      id: 'edge',","125","      source: 'node1',","126","      target: 'node2',","127","      type: 'line',","128","    })","129","","130","    graph.once('nodeselectchange', (e) => {","131","      expect(e.selectedItems.edges.length).toEqual(1);","132","    });","133","","134","    graph.emit('edge:click', { item: edge });","135","    expect(edge.getStates().length).toEqual(1);","136","    expect(edge.hasState('selected')).toBe(true);","137","    graph.emit('edge:click', { item: edge });","138","    expect(edge.getStates().length).toEqual(0);","139","    graph.destroy();","140","  });","141","  it('select & deselect multiple nodes and edges', () => {","142","    const graph = new Graph({","143","      container: div,","144","      width: 500,","145","      height: 500,","146","      modes: {","147","        default: [","148","          {","149","            type: 'click-select',","150","            selectEdge: true,","151","          }","152","        ],","153","      },","154","      nodeStateStyles: {","155","        selected: {},","156","      },","157","    });","158","    const node1 = graph.addItem('node', {","159","      id: 'node1',","160","      color: '#666',","161","      x: 50,","162","      y: 50,","163","      size: 20,","164","      style: { lineWidth: 2, fill: '#666' },","165","    });","166","    const node2 = graph.addItem('node', {","167","      id: 'node2',","168","      color: '#666',","169","      x: 150,","170","      y: 150,","171","      size: 20,","172","      style: { lineWidth: 2, fill: '#666' },","173","    });","174","    const edge = graph.addItem('edge', {","175","      id: 'edge',","176","      source: 'node1',","177","      target: 'node2',","178","      type: 'line',","179","    })","180","    graph.emit('node:click', { item: node1 });","181","    expect(node1.getStates().length).toEqual(1);","182","    expect(node1.getStates()[0]).toEqual('selected');","183","    graph.emit('keydown', { key: 'shift' });","184","    graph.emit('node:click', { item: node1 });","185","    graph.emit('edge:click', { item: edge });","186","    expect(node1.getStates().length).toEqual(0);","187","    expect(edge.getStates().length).toEqual(1);","188","    graph.emit('node:click', { item: node1 });","189","    graph.emit('edge:click', { item: edge });","190","    expect(node1.hasState('selected')).toBe(true);","191","    expect(edge.hasState('selected')).toBe(false);","192","    graph.emit('node:click', { item: node2 });","193","    expect(node2.getStates().length).toEqual(1);","194","    expect(node2.getStates()[0]).toEqual('selected');","195","    expect(node1.hasState('selected')).toBe(true);","196","    graph.emit('edge:click', { item: edge });","197","    graph.emit('keyup', { key: 'shift' });","198","    graph.emit('node:click', { item: node1 });","199","    expect(node1.getStates().length).toEqual(0);","200","    expect(node2.getStates().length).toEqual(0);","201","    expect(edge.getStates().length).toEqual(0);","202","    graph.destroy();","203","  });"],"delete":[]}],"packages\/pc\/package.json":[{"add":["2","  \"version\": \"0.6.6\",","77","    \"@antv\/g6-core\": \"^0.6.6\",","78","    \"@antv\/g6-element\": \"^0.6.6\",","79","    \"@antv\/g6-plugin\": \"^0.6.6\",","120","    \"typescript\": \"^4.6.3\",","126","}"],"delete":["2","  \"version\": \"0.6.4\",","77","    \"@antv\/g6-core\": \"0.6.4\",","78","    \"@antv\/g6-element\": \"0.6.4\",","79","    \"@antv\/g6-plugin\": \"0.6.4\",","120","    \"typescript\": \"^3.9.5\",","126","}"]}],"packages\/plugin\/src\/minimap\/index.ts":[{"add":["85","          outline: 2px solid #1980ff;","86","          cursor:move'","87","        draggable=true"],"delete":["85","          outline: 2px solid #1980ff'","86","        draggable=true>"]}],"packages\/plugin\/src\/grid\/index.ts":[{"add":["30","    let img = this.get('img') || GRID_PNG;","31","    if (!img.includes('url(')) {","32","      img = `url(\"${img}\")`","33","    }","96","    const transform = `matrix(${matrix[0]}, ${matrix[1]}, ${matrix[3]}, ${matrix[4]}, ${isFollow ? matrix[6] : '0'","97","      }, ${isFollow ? matrix[7] : '0'})`;"],"delete":["30","    const img = this.get('img') || GRID_PNG;","31","","94","    const transform = `matrix(${matrix[0]}, ${matrix[1]}, ${matrix[3]}, ${matrix[4]}, ${","95","      isFollow ? matrix[6] : '0'","96","    }, ${isFollow ? matrix[7] : '0'})`;"]}],"packages\/core\/src\/interface\/graph.ts":[{"add":["176","   * @param {boolean} animate 是否带有动画地移动","177","   * @param {GraphAnimateConfig} animateCfg 若带有动画，动画的配置项","179","  fitView: (padding?: Padding, rules?: FitViewRules, animate?: boolean, animateCfg?: GraphAnimateConfig) => void;","183","   * @param {boolean} animate 是否带有动画地移动","184","   * @param {GraphAnimateConfig} animateCfg 若带有动画，动画的配置项","186","  fitCenter: (animate?: boolean, animateCfg?: GraphAnimateConfig) => void;","217","   * @param {boolean} sortCombo 本次操作是否需要更新 combo 层级顺序，内部参数，用户在外部使用 addItem 时始终时需要更新","218","   * @return {Item | boolean} 元素实例","220","  addItem: (type: ITEM_TYPE, model: ModelConfig, stack?: boolean, sortCombo?: boolean) => Item | boolean;","222","  add: (type: ITEM_TYPE, model: ModelConfig, stack?: boolean, sortCombo?: boolean) => Item | boolean;","223","","224","  \/**","225","   * Adds multiple items with a single operation","226","   * @param {{type: ITEM_TYPE, model: ModelConfig}[]} items Items to be added to the graph","227","   * @param {boolean} stack Add this operation to the stack, default to true","228","   * @param {boolean} sortCombo Update the internal combo representation. Internal parameter, default to true","229","   * @return {(Item | boolean)[]} Instance of the added items or a boolean set to false to signal that the input node was not added","230","   *\/","231","  addItems: (items: { type: ITEM_TYPE, model: ModelConfig }[], stack: boolean, sortCombo: boolean) => (Item | boolean)[];","520","  collapseCombo: (combo: string | ICombo, stack?: boolean) => void;","526","  expandCombo: (combo: string | ICombo, stack?: boolean) => void;","532","  collapseExpandCombo: (combo: string | ICombo, stack?: boolean) => void;"],"delete":["177","  fitView: (padding?: Padding, rules?: FitViewRules) => void;","182","  fitCenter: () => void;","213","   * @return {Item} 元素实例","215","  addItem: (type: ITEM_TYPE, model: ModelConfig, stack?: boolean) => Item;","217","  add: (type: ITEM_TYPE, model: ModelConfig, stack?: boolean) => Item;","506","  collapseCombo: (combo: string | ICombo) => void;","512","  expandCombo: (combo: string | ICombo) => void;","518","  collapseExpandCombo: (combo: string | ICombo) => void;"]}],"packages\/plugin\/src\/imageMinimap\/index.ts":[{"add":["93","        border: 2px solid #1980ff;","94","        cursor:move'"],"delete":["93","        border: 2px solid #1980ff'>"]}],"packages\/g6\/package.json":[{"add":["2","  \"version\": \"4.6.6\",","68","    \"@antv\/g6-pc\": \"^0.6.6\"","88","    \"typescript\": \"^4.6.3\",","92","}"],"delete":["2","  \"version\": \"4.6.4\",","68","    \"@antv\/g6-pc\": \"0.6.4\"","88","    \"typescript\": \"^3.9.5\",","92","}"]}],"packages\/core\/package.json":[{"add":["2","  \"version\": \"0.6.6\",","95","    \"typescript\": \"^4.6.3\","],"delete":["2","  \"version\": \"0.6.4\",","95","    \"typescript\": \"^3.9.5\","]}],"packages\/pc\/tests\/unit\/layout\/layout-mechanism-spec.ts":[{"add":["87","  it('update layout', () => {","88","    const graph = new G6.Graph({","89","      container: div,","90","      width: 500,","91","      height: 500,","92","      layout: {","93","        type: 'grid'","94","      }","95","    });","96","    graph.data(data);","97","    graph.render();","98","    graph.updateLayout({","99","      type: 'concentric'","100","    })","101","    expect(graph.get('layoutController').layoutType).toBe('concentric');","102","    graph.updateLayout({","103","      type: 'grid'","104","    })","105","    expect(graph.get('layoutController').layoutType).toBe('grid');","106","  });","107","  it('destroy layout', () => {","108","    const graph = new G6.Graph({","109","      container: div,","110","      width: 500,","111","      height: 500,","112","      layout: {","113","        type: 'force'","114","      }","115","    });","116","    graph.data(data);","117","    graph.render();","118","    graph.destroyLayout();","119","  });"],"delete":[]}],"packages\/site\/package.json":[{"add":["3","  \"version\": \"4.6.6\",","52","    \"typescript\": \"^4.6.3\""],"delete":["3","  \"version\": \"4.6.4\",","52","    \"typescript\": \"^3.6.5\""]}],"packages\/site\/docs\/api\/graphFunc\/render.zh.md":[{"add":["19","注意：节点\/边\/ Combo 数据的增删需要使用 [graph.addItem](\/zh\/docs\/api\/graphFunc\/item\/#graphadditemtype-model-stack) \/ [graph.removeItem](\/zh\/docs\/api\/graphFunc\/item\/#graphremoveitemitem-stack) 或 [graph.changeData](\/zh\/docs\/api\/graphFunc\/data\/#graphchangedatadata-stack)。"],"delete":["19","注意：节点\/边\/ Combo 数据的增删需要使用 [graph.addItem](.\/Graph#additemtype-model) \/ [graph.removeItem](.\/Graph#removeitemitem) 或 [graph.changeData](.\/Graph#changedatadata)。"]}],"CHANGELOG.md":[{"add":["2","#### 4.6.6","3","","4","- fix: destroyLayout error, closes: #3727;","5","- fix: drag combo with stack problem, closes: #3699;","6","- fix: updateLayout does not take effect if update layout with same type as graph instance configuration,  closes: #3706;","7","- fix: legendStateStyles typo, closes: #3705;","8","- perf: zoom-canvas take the maximum and minimum values instead of return directly;","9","- perf: minimap cursor move;","10","- feat: fitView and fitCenter with animation;","11","- feat: addItems to add multiple items into graph in the same time;","12","- feat: enable edge selection in click-select;","13",""],"delete":[]}],"packages\/core\/tests\/unit\/graph\/graph-spec.ts":[{"add":["691","  const loopNode: any = {","692","    type: 'node',","693","    model: {","699","    }","700","  };","702","  const loopEdges: any = [","703","    {","704","      type: 'edge',","705","      model: {","706","        id: 'edge',","707","        source: 'circleNode',","708","        target: 'circleNode',","709","        type: 'loop',","710","        loopCfg: {","711","          position: 'top',","712","          dist: 60,","713","          clockwise: true,","714","        },","715","        style: { endArrow: true },","716","      }","717","    },","718","    {","719","      type: 'edge',","720","      model: {","721","        id: 'edge1',","722","        source: 'circleNode',","723","        target: 'circleNode',","724","        type: 'loop',","725","        loopCfg: {","726","          position: 'top-left',","727","          dist: 60,","728","          clockwise: false,","729","        },","730","        style: { endArrow: true },","731","      }","732","    },","733","    {","734","      type: 'edge',","735","      model: {","736","        id: 'edge2',","737","        source: 'circleNode',","738","        target: 'circleNode',","739","        type: 'loop',","740","        loopCfg: {","741","          position: 'top-right',","742","          dist: 60,","743","        },","744","        style: { endArrow: true },","745","      }","746","    },","747","    {","748","      type: 'edge',","749","      model: {","750","        id: 'edge4',","751","        source: 'circleNode',","752","        target: 'circleNode',","753","        type: 'loop',","754","        loopCfg: {","755","          position: 'right',","756","          dist: 60,","757","          clockwise: true,","758","        },","759","        style: { endArrow: true },","760","      }","761","    },","762","    {","763","      type: 'edge',","764","      model: {","765","        id: 'edge5',","766","        source: 'circleNode',","767","        target: 'circleNode',","768","        type: 'loop',","769","        sourceAnchor: 0,","770","        targetAnchor: 1,","771","        loopCfg: {","772","          position: 'bottom-right',","773","          dist: 60,","774","          clockwise: true,","775","        },","776","        style: { endArrow: true },","777","      }","778","    },","779","    {","780","      type: 'edge',","781","      model: {","782","        id: 'edge6',","783","        source: 'circleNode',","784","        target: 'circleNode',","785","        type: 'loop',","786","        loopCfg: {","787","          position: 'bottom',","788","          dist: 60,","789","          clockwise: true,","790","        },","791","        style: { endArrow: true },","792","      }","793","    },","794","    {","795","      type: 'edge',","796","      model: {","797","        id: 'edge7',","798","        source: 'circleNode',","799","        target: 'circleNode',","800","        type: 'loop',","801","        loopCfg: {","802","          position: 'bottom-left',","803","          dist: 60,","804","          clockwise: true,","805","        },","806","        style: { endArrow: true },","807","      }","808","    },","809","    {","810","      type: 'edge',","811","      model: {","812","        id: 'edge8',","813","        source: 'circleNode',","814","        target: 'circleNode',","815","        type: 'loop',","816","        loopCfg: {","817","          position: 'left',","818","          dist: 60,","819","          clockwise: true,","820","        },","821","        style: { endArrow: true },","822","      }","823","    }","824","  ];","826","  it('loop - addItem', () => {","827","    graph.clear();","828","    graph.set('linkCenter', false);","830","    const node = graph.addItem(loopNode.type, loopNode.model);","832","    const edge1 = graph.addItem(loopEdges[0].type, loopEdges[0].model);","833","    const edge2 = graph.addItem(loopEdges[1].type, loopEdges[1].model);","834","    const edge3 = graph.addItem(loopEdges[2].type, loopEdges[2].model);","835","    const edge4 = graph.addItem(loopEdges[3].type, loopEdges[3].model);","837","    const edgeWithAnchor = graph.addItem(loopEdges[4].type, loopEdges[4].model);","839","    graph.addItem(loopEdges[5].type, loopEdges[5].model);","840","    graph.addItem(loopEdges[6].type, loopEdges[6].model);","841","    graph.addItem(loopEdges[7].type, loopEdges[7].model);","843","    const edgeShape = edge1.getKeyShape().attr('path');","844","    const edge2Shape = edge2.getKeyShape().attr('path');","846","    expect(edge2Shape[0][1]).toEqual(edgeShape[0][1]);","847","    expect(edge2Shape[0][2]).toEqual(edgeShape[0][2]);","848","    expect(edge3.getKeyShape().attr('path')[1][0]).toEqual('C');","849","    expect(edge3.getKeyShape().attr('path')[0][1]).toEqual(edgeShape[1][5]);","850","    expect(edge4.getKeyShape().attr('path')[0][1]).toEqual(edge3.getKeyShape().attr('path')[1][5]);","851","    expect(edge4.getKeyShape().attr('path')[0][2]).toEqual(edge3.getKeyShape().attr('path')[1][6]);","852","","853","    const pathWithAnchor = edgeWithAnchor.getKeyShape().attr('path');","854","    expect(pathWithAnchor[0][1]).toEqual(139.5);","855","    expect(pathWithAnchor[0][2]).toEqual(139.5);","856","    expect(pathWithAnchor[1][0]).toEqual('C');","857","    expect(pathWithAnchor[1][5]).toEqual(139.5);","858","    expect(pathWithAnchor[1][6]).toEqual(160.5);","859","  });","860","","861","  it('loop - addItems', () => {","862","    graph.clear();","863","    graph.set('linkCenter', false);","864","","865","    const allItems = loopEdges.concat(loopNode);","866","","867","    const items = graph.addItems(allItems);","868","","869","    const edge1 = items[0];","870","    const edge2 = items[1];","871","    const edge3 = items[2];","872","    const edge4 = items[3];","873","","874","    const edgeWithAnchor = items[4];","1616","","1617","    graph.addItems([","1618","      { type: 'node', model: {} }, { type: 'node', model: {} }","1619","    ]);","1620","","1621","    stackData = graph.getStackData();","1622","    undoStack = stackData.undoStack;","1623","    expect(undoStack.length).toBe(7);","1624","","1625","    firstStackData = undoStack[0];","1626","    expect(firstStackData.action).toEqual('addItems');","1627","    expect(firstStackData.data.after.nodes).toHaveLength(2);"],"delete":["691","  it('loop', () => {","692","    graph.set('linkCenter', false);","693","","694","    const node = graph.addItem('node', {","700","    });","702","    const edge1 = graph.addItem('edge', {","703","      id: 'edge',","704","      source: 'circleNode',","705","      target: 'circleNode',","706","      type: 'loop',","707","      loopCfg: {","708","        position: 'top',","709","        dist: 60,","710","        clockwise: true,","711","      },","712","      style: { endArrow: true },","713","    });","715","    const edge2 = graph.addItem('edge', {","716","      id: 'edge1',","717","      source: 'circleNode',","718","      target: 'circleNode',","719","      type: 'loop',","720","      loopCfg: {","721","        position: 'top-left',","722","        dist: 60,","723","        clockwise: false,","724","      },","725","      style: { endArrow: true },","726","    });","728","    const edge3 = graph.addItem('edge', {","729","      id: 'edge2',","730","      source: 'circleNode',","731","      target: 'circleNode',","732","      type: 'loop',","733","      loopCfg: {","734","        position: 'top-right',","735","        dist: 60,","736","      },","737","      style: { endArrow: true },","738","    });","740","    const edge4 = graph.addItem('edge', {","741","      id: 'edge4',","742","      source: 'circleNode',","743","      target: 'circleNode',","744","      type: 'loop',","745","      loopCfg: {","746","        position: 'right',","747","        dist: 60,","748","        clockwise: true,","749","      },","750","      style: { endArrow: true },","751","    });","753","    const edgeWithAnchor = graph.addItem('edge', {","754","      id: 'edge5',","755","      source: 'circleNode',","756","      target: 'circleNode',","757","      type: 'loop',","758","      sourceAnchor: 0,","759","      targetAnchor: 1,","760","      loopCfg: {","761","        position: 'bottom-right',","762","        dist: 60,","763","        clockwise: true,","764","      },","765","      style: { endArrow: true },","766","    });","768","    graph.addItem('edge', {","769","      id: 'edge6',","770","      source: 'circleNode',","771","      target: 'circleNode',","772","      type: 'loop',","773","      loopCfg: {","774","        position: 'bottom',","775","        dist: 60,","776","        clockwise: true,","777","      },","778","      style: { endArrow: true },","779","    });","781","    graph.addItem('edge', {","782","      id: 'edge7',","783","      source: 'circleNode',","784","      target: 'circleNode',","785","      type: 'loop',","786","      loopCfg: {","787","        position: 'bottom-left',","788","        dist: 60,","789","        clockwise: true,","790","      },","791","      style: { endArrow: true },","792","    });","794","    graph.addItem('edge', {","795","      id: 'edge8',","796","      source: 'circleNode',","797","      target: 'circleNode',","798","      type: 'loop',","799","      loopCfg: {","800","        position: 'left',","801","        dist: 60,","802","        clockwise: true,","803","      },","804","      style: { endArrow: true },","805","    });"]}],"packages\/pc\/tests\/unit\/behavior\/zoom-spec.ts":[{"add":["0","import { Event } from '@antv\/g-canvas';","3","\/\/ import { numberEqual } from '..\/layout\/util';","4","function numberEqual(a: number, b: number, gap = 0.001) {","5","  return Math.abs(a - b) <= gap;","6","}","131","            minZoom: 4.2,","136","    graph.zoom(4.8);","137","    let e = createWheelEvent(graph.get('canvas').get('el'), 100, 100, 100);","140","    \/\/ maxZoom: 5","141","    expect(matrix[0]).toEqual(5);","142","    expect(matrix[4]).toEqual(5);","143","    e = createWheelEvent(graph.get('canvas').get('el'), -100, 100, 100);","146","    expect(matrix[0]).toEqual(4.5);","147","    expect(matrix[4]).toEqual(4.5);","148","    graph.emit('wheel', e);","149","    matrix = graph.get('group').getMatrix();","150","    \/\/ minZoom: 4.2","151","    expect(matrix[0]).toEqual(4.2);","152","    expect(matrix[4]).toEqual(4.2);"],"delete":["2","import { Event } from '@antv\/g-canvas';","3","import { numberEqual } from '..\/layout\/util';","128","            minZoom: 0.5,","133","    graph.zoom(5);","134","    let e = createWheelEvent(graph.get('canvas').get('el'), -100, 100, 100);","137","    expect(matrix[0]).toEqual(4.5);","138","    expect(matrix[4]).toEqual(4.5);","139","    graph.zoom(0.1);","140","    e = createWheelEvent(graph.get('canvas').get('el'), 100, 100, 100);","143","    expect(matrix[0]).toEqual(0.5);","144","    expect(matrix[4]).toEqual(0.5);"]}],"packages\/pc\/src\/global.ts":[{"add":["9","  version: '0.6.6',"],"delete":["9","  version: '0.6.4',"]}],"packages\/pc\/tests\/unit\/element\/nodes\/icon-iconfont-spec.ts":[{"add":["16","  it('default circle config', () => {","29","    graph.updateItem('node', {","30","      icon: {","31","        show: true,","32","        img: undefined,","33","        text: 'xxx'","34","      }"],"delete":["16","  it.only('default circle config', () => {","29","    graph.on('canvas:click', e => {","30","      graph.updateItem('node', {","31","        icon: {","32","          show: true,","33","          img: undefined,","34","          text: 'xxx'","35","        }","36","      })","38",""]}],"packages\/g6\/src\/index.ts":[{"add":["2","G6.version = '4.6.6';","6","export const version = '4.6.6';"],"delete":["2","G6.version = '4.6.4';","6","export const version = '4.6.4';"]}],"package.json":[{"add":["71","    \"typescript\": \"^4.6.3\"","90","    \"normalize-url\": \"^4.1.0\",","91","    \"sharp\": \"^0.30.4\"","93","}"],"delete":["71","    \"typescript\": \"^3.9.5\"","90","    \"normalize-url\": \"^4.1.0\"","92","}"]}],"packages\/element\/src\/nodes\/donut.ts":[{"add":["138","              draggable: true,","158","                draggable: true,","185","              draggable: true,"],"delete":[]}],"packages\/core\/src\/types\/index.ts":[{"add":["320","  combinedKey?: string;","353","  selectNode?: boolean;","354","  selectEdge?: boolean;","355","  selectCombo?: boolean;"],"delete":[]}],"packages\/site\/docs\/api\/graphFunc\/on_off.zh.md":[{"add":["20","| item | Item | true | 被操作的 item |","21","| target | Ishape | true | 被操作的具体[图形](\/zh\/docs\/manual\/middle\/elements\/shape-keyshape) |"],"delete":["20","| item | string | true | 被操作的 item |","21","| target | Function | true | 被操作的具体[图形](\/zh\/docs\/manual\/middle\/elements\/shape-keyshape) |"]}],"packages\/core\/src\/graph\/graph.ts":[{"add":["648","   * @param {boolean} animate 是否带有动画地移动","649","   * @param {GraphAnimateConfig} animateCfg 若带有动画，动画的配置项","651","  public fitView(padding?: Padding, rules?: FitViewRules, animate?: boolean, animateCfg?: GraphAnimateConfig): void {","659","      viewController.fitViewByRules(rules, animate, animateCfg);","661","      viewController.fitView(animate, animateCfg);","669","   * @param {boolean} animate 是否带有动画地移动","670","   * @param {GraphAnimateConfig} animateCfg 若带有动画，动画的配置项","672","  public fitCenter(animate?: boolean, animateCfg?: GraphAnimateConfig): void {","674","    viewController.fitCenter(animate, animateCfg);","1068","  private innerAddItem(","1071","    itemController: ItemController","1072","  ): Item | boolean {","1177","    return item;","1178","  }","1179","","1180","  \/**","1181","   * 新增元素","1182","   * @param {ITEM_TYPE} type 元素类型(node | edge)","1183","   * @param {ModelConfig} model 元素数据模型","1184","   * @param {boolean} stack 本次操作是否入栈，默认为 true","1185","   * @param {boolean} sortCombo 本次操作是否需要更新 combo 层级顺序，内部参数，用户在外部使用 addItem 时始终时需要更新","1186","   * @return {Item} 元素实例","1187","   *\/","1188","  public addItem(","1189","    type: ITEM_TYPE,","1190","    model: ModelConfig,","1191","    stack: boolean = true,","1192","    sortCombo: boolean = true,","1193","  ): Item | boolean {","1194","    const currentComboSorted = this.get('comboSorted');","1195","    this.set('comboSorted', currentComboSorted && !sortCombo);","1196","    const itemController: ItemController = this.get('itemController');","1197","","1198","    const item = this.innerAddItem(type, model, itemController);","1199","","1200","    if (item === false || item === true) {","1201","      return item;","1202","    }","1203","","1208","","1213","        ...item.getModel() as any,","1239","  public addItems(","1240","    items: { type: ITEM_TYPE, model: ModelConfig }[] = [],","1241","    stack: boolean = true,","1242","    sortCombo: boolean = true","1243","  ) {","1244","    const currentComboSorted = this.get('comboSorted');","1245","    this.set('comboSorted', currentComboSorted && !sortCombo);","1246","    const itemController: ItemController = this.get('itemController');","1247","","1248","    const returnItems: (Item | boolean)[] = [];","1249","","1250","    \/\/ 1. add anything that is not an edge.","1251","    \/\/ Add undefined as a placeholder for the next cycle. This way we return items matching the input order","1252","    for (let i = 0; i < items.length; i++) {","1253","      const item = items[i];","1254","      if (item.type !== 'edge') {","1255","        returnItems.push(this.innerAddItem(item.type, item.model, itemController));","1256","      } else {","1257","        returnItems.push(undefined);","1258","      }","1259","    }","1260","","1261","    \/\/ 2. add all the edges","1262","    for (let i = 0; i < items.length; i++) {","1263","      const item = items[i];","1264","      if (item.type === 'edge') {","1265","        returnItems[i] = this.innerAddItem(item.type, item.model, itemController);","1266","      }","1267","    }","1268","","1269","    const combos = this.get('combos');","1270","    if (combos && combos.length > 0) {","1271","      this.sortCombos();","1272","    }","1273","","1274","    this.autoPaint();","1275","","1276","    if (stack && this.get('enabledStack')) {","1277","      const after: GraphData = { nodes: [], edges: [], combos: [] };","1278","","1279","      for (let i = 0; i < items.length; i++) {","1280","        const type = items[i].type;","1281","        const returnItem = returnItems[i];","1282","        if (!!returnItem && returnItem !== true) {","1283","          const addedModel: any = {","1284","            ...returnItem.getModel(),","1285","            itemType: type,","1286","          };","1287","          switch (type) {","1288","            case 'node':","1289","              after.nodes.push(addedModel);","1290","              break;","1291","            case 'edge':","1292","              after.edges.push(addedModel);","1293","              break;","1294","            case 'combo':","1295","              after.combos.push(addedModel);","1296","              break;","1297","            default:","1298","              break;","1299","          }","1300","        }","1301","      }","1302","","1303","      this.pushStack('addItems', {","1304","        before: {},","1305","        after,","1306","      });","1307","    }","1308","","1309","    return returnItems;","1310","  }","1311","","1317","   * @param {boolean} sortCombo 本次操作是否需要更新 combo 层级顺序，内部参数，用户在外部使用 addItem 时始终时需要更新","1325","  ): Item | boolean {","1583","        item = self.addItem(type, model, false) as any;","2246","          const containerMatrix = node.getContainer().getMatrix();","2513","  public collapseCombo(combo: string | ICombo, stack: boolean = true): void {","2527","    itemController.collapseCombo(combo, stack);","2660","  public expandCombo(combo: string | ICombo, stack: boolean = true): void {","2673","    itemController.expandCombo(combo, stack);","2863","  public collapseExpandCombo(combo: string | ICombo, stack: boolean = true) {","2885","      this.expandCombo(combo, stack);","2887","      this.collapseCombo(combo, stack);"],"delete":["649","  public fitView(padding?: Padding, rules?: FitViewRules): void {","657","      viewController.fitViewByRules(rules);","659","      viewController.fitView();","668","  public fitCenter(): void {","670","    viewController.fitCenter();","1064","  \/**","1065","   * 新增元素","1066","   * @param {ITEM_TYPE} type 元素类型(node | edge)","1067","   * @param {ModelConfig} model 元素数据模型","1068","   * @param {boolean} stack 本次操作是否入栈，默认为 true","1069","   * @param {boolean} sortCombo 本次操作是否需要更新 combo 层级顺序，内部参数，用户在外部使用 addItem 时始终时需要更新","1070","   * @return {Item} 元素实例","1071","   *\/","1072","  public addItem(","1075","    stack: boolean = true,","1076","    sortCombo: boolean = true,","1077","  ) {","1078","    const currentComboSorted = this.get('comboSorted');","1079","    this.set('comboSorted', currentComboSorted && !sortCombo);","1080","    const itemController: ItemController = this.get('itemController');","1081","","1194","        ...item.getModel(),","1232","  ): Item {","1490","        item = self.addItem(type, model, false);","2153","          let containerMatrix = node.getContainer().getMatrix();","2420","  public collapseCombo(combo: string | ICombo): void {","2434","    itemController.collapseCombo(combo);","2567","  public expandCombo(combo: string | ICombo): void {","2580","    itemController.expandCombo(combo);","2770","  public collapseExpandCombo(combo: string | ICombo) {","2792","      this.expandCombo(combo);","2794","      this.collapseCombo(combo);"]}]}},"bf2285fcdd6371d4b33d54a6af63a02c1b75c242":{"changes":{"package.json":"MODIFY","src\/global.ts":"MODIFY","src\/graph\/graph.ts":"MODIFY","CHANGELOG.md":"MODIFY"},"diff":{"package.json":[{"add":["2","  \"version\": \"3.5.10\","],"delete":["2","  \"version\": \"3.5.9\","]}],"src\/global.ts":[{"add":["1","  version: '3.5.10',"],"delete":["1","  version: '3.5.9',"]}],"src\/graph\/graph.ts":[{"add":["1201","    let animate = self.get('animate');","1202","    if (self.get('fitView') || self.get('fitCenter')) {","1203","      self.set('animate', false);","1204","    }","1205","","1219","","1220","      if (self.get('fitView') || self.get('fitCenter')) {","1221","        self.set('animate', animate);","1222","      }","1225",""],"delete":[]}],"CHANGELOG.md":[{"add":["2","#### 3.5.10","3","- fix: fitView and fitCenter with animate in the initial state.","4",""],"delete":[]}]}},"4670a751ed25ac986cd03e27d953274a3962fbda":{"changes":{"src\/behavior\/drag-node.ts":"MODIFY","examples\/item\/multiEdge\/demo\/multiEdges.js":"MODIFY","CHANGELOG.md":"MODIFY"},"diff":{"src\/behavior\/drag-node.ts":[{"add":["36","      'node:drop': 'onDropNode'","220","","221","  \/**","222","   * 拖动放置到某个 combo 中的子 node 上","223","   * @param evt","224","   *\/","225","  onDropNode(evt: IG6GraphEvent) {","226","    const self = this;","227","    const item = evt.item as INode;","228","    const id = item.getID();","229","    const graph: IGraph = self.graph;","230","","231","    \/\/ TODO: 把 getComboId 和 setComboId 作为 Node Item 的 API，可以直接获取一个节点的直系 combo，不用再使用如下方式遍历查找","232","    const combos = graph.getCombos();","233","    const comboLength = combos.length;","234","    for (let i = 0; i < comboLength; i++) {","235","      const combo = combos[i];","236","      const subNodes = combo.getNodes();","237","      const snodeLength = subNodes.length;","238","      for (let j = 0; j < snodeLength; j++) {","239","        const snode = subNodes[j];","240","        if (snode.getID() === id) {","241","          if (self.comboActiveState) {","242","            graph.setItemState(combo, self.comboActiveState, false);","243","          }","244","          self.targetCombo = combo;","245","          return;","246","        }","247","      }","248","    }","249","  },"],"delete":[]}],"examples\/item\/multiEdge\/demo\/multiEdges.js":[{"add":["42","G6.Util.processParallelEdges(data.edges);"],"delete":["2","const setEdgesCurOffset = (edges, offsetDiff = 30) => {","3","  const len = edges.length;","4","  const edgeMap = {};","5","  edges.forEach((edge) => {","6","    const { source, target } = edge;","7","    let sourceTarget = `${source}-${target}`;","8","    if (source > target) sourceTarget = `${source}-${target}`;","9","","10","    if (!edgeMap[sourceTarget]) {","11","      edgeMap[sourceTarget] = [];","12","    }","13","    edgeMap[sourceTarget].push(edge);","14","  });","15","","16","  for (const key in edgeMap) {","17","    const arcEdges = edgeMap[key];","18","    const { length } = arcEdges;","19","    for (let k = 0; k < length; k++) {","20","      const current = arcEdges[k];","21","      const sign = k % 2 === 0 ? 1 : -1;","22","      if (length % 2 === 1) {","23","        current.curveOffset = sign * Math.ceil(k \/ 2) * offsetDiff;","24","      } else {","25","        current.curveOffset = sign * (Math.floor(k \/ 2) * offsetDiff + offsetDiff \/ 2);","26","      }","27","      delete current.groupById;","28","    }","29","  }","30","  return edges;","31","};","72","setEdgesCurOffset(data.edges);"]}],"CHANGELOG.md":[{"add":["12","- fix: drop a node onto a sub node of a combo;"],"delete":[]}]}},"532b6499b5d9f43ff43c36d743dc1dd59e2c5c4b":{"changes":{"plugins\/template.maxSpanningForest\/index.js":"MODIFY","src\/controller\/mapper.js":"MODIFY","src\/item\/item.js":"MODIFY","demos\/text.html":"MODIFY","package.json":"MODIFY"},"diff":{"plugins\/template.maxSpanningForest\/index.js":[{"add":["174","      style: model => {","175","        if (model.actived) {","176","          return this.activedEdgeStyle;","177","        }","178","        return this.edgeStyle;","179","      },","195","        actived: true","207","        actived: false"],"delete":["174","      style: this.edgeStyle,","190","        style: this.activedEdgeStyle","202","        style: this.edgeStyle"]}],"src\/controller\/mapper.js":[{"add":["39","      if (Util.isFunction(channel.input)) {","40","        model[name] = channel.input(model);","41","      } else if (channel.input) {","42","        model[name] = channel.input;"],"delete":["39","      if (Util.isNil(model[name])) {","40","        if (Util.isFunction(channel.input)) {","41","          model[name] = channel.input(model);","42","        } else if (channel.input) {","43","          model[name] = channel.input;","44","        }"]}],"src\/item\/item.js":[{"add":["189","    this._mapping();"],"delete":["72","    this._mapping();"]}],"demos\/text.html":[{"add":[],"delete":["68","      console.log(22)"]}],"package.json":[{"add":["102","    \"test-live\": \"torch --compile --interactive --watch --recursive .\/test\/unit\/\","],"delete":["102","    \"test-live\": \"torch --compile --interactive --watch --recursive .\/test\/unit\/util\/\","]}]}},"73ec73fd7b2e114db236655bf35c30363465e692":{"changes":{"src\/graph\/controller\/view.ts":"MODIFY","package.json":"MODIFY","tests\/unit\/issues-spec.ts":"ADD"},"diff":{"src\/graph\/controller\/view.ts":[{"add":["42","    if (bbox.width === 0 || bbox.height === 0) return;"],"delete":[]}],"package.json":[{"add":["52","    \"test-live\": \"DEBUG_MODE=1 jest --watch  .\/tests\/unit\/issues-spec.ts\","],"delete":["52","    \"test-live\": \"DEBUG_MODE=1 jest --watch  .\/tests\/unit\/graph\/svg-spec.ts\","]}],"tests\/unit\/issues-spec.ts":[{"add":[],"delete":[]}]}},"a0fec0e646fb2fd2e6bfc04a0ca06d1aae78016a":{"changes":{"src\/layout\/dagre.ts":"MODIFY","stories\/Issues\/component\/drag-canvas.tsx":"ADD","package.json":"MODIFY","docs\/manual\/introduction.zh.md":"MODIFY","src\/behavior\/drag-canvas.ts":"MODIFY","src\/item\/item.ts":"MODIFY","src\/behavior\/behaviorOption.ts":"MODIFY","stories\/Issues\/issues.stories.tsx":"ADD","tests\/unit\/issues-spec.ts":"MODIFY"},"diff":{"src\/layout\/dagre.ts":[{"add":["41","      controlPoints: false, \/\/ 是否保留布局连线的控制点"],"delete":["41","      controlPoints: true, \/\/ 是否保留布局连线的控制点"]}],"stories\/Issues\/component\/drag-canvas.tsx":[{"add":[],"delete":[]}],"package.json":[{"add":["73","    \"@antv\/g-base\": \"^0.4.0\",","74","    \"@antv\/g-canvas\": \"^0.4.0\","],"delete":["73","    \"@antv\/g-base\": \"^0.3.29\",","74","    \"@antv\/g-canvas\": \"^0.3.29\","]}],"docs\/manual\/introduction.zh.md":[{"add":["100","更详细的内容请参考 [快速上手](\/zh\/docs\/manual\/getting-started) 文档。"],"delete":["100","更详细的内容请参考 [快速上手](\/zh\/docs\/manual\/getting-startedd) 文档。"]}],"src\/behavior\/drag-canvas.ts":[{"add":["111","    console.log('keydown ', e);"],"delete":[]}],"src\/item\/item.ts":[{"add":["540","    let x = isNil(cfg.x) ? model.x : cfg.x;","541","    let y = isNil(cfg.y) ? model.y : cfg.y;"],"delete":["540","    const x = isNil(cfg.x) ? model.x : cfg.x;","541","    const y = isNil(cfg.y) ? model.y : cfg.y;"]}],"src\/behavior\/behaviorOption.ts":[{"add":["46","    \/\/ To avoid the tabs switching makes the keydown related behaviors disable","47","    document.addEventListener('visibilitychange', () => {","48","      this.keydown = false;","49","    })"],"delete":[]}],"stories\/Issues\/issues.stories.tsx":[{"add":[],"delete":[]}],"tests\/unit\/issues-spec.ts":[{"add":["97","});","98","","99","","100","describe('cubic with layout', () => {","101","  const data = {","102","    nodes: [","103","      {","104","        id: '1',","105","        label: '冲压',","106","        degree: 1,","107","        \/\/ x: 0,","108","        \/\/ y: 0","109","        \/\/ x: 100,","110","        \/\/ y: 300","111","      },","112","      {","113","        id: '2',","114","        label: '电镀',","115","        degree: 2,","116","        \/\/ x: 0,","117","        \/\/ y: 0","118","        \/\/ x: 600,","119","        \/\/ y: 300","120","      }","121","    ],","122","    edges: [","123","      {","124","        source: '1',","125","        target: '2',","126","      }","127","    ]","128","  };","129","  const dashArray = [","130","    [0, 1],","131","    [0, 2],","132","    [1, 2],","133","    [0, 1, 1, 2],","134","    [0, 2, 1, 2],","135","    [1, 2, 1, 2],","136","    [2, 2, 1, 2],","137","    [3, 2, 1, 2],","138","    [4, 2, 1, 2]","139","  ];","140","  ","141","  const lineDash = [4, 2, 1, 2];","142","  const interval = 9; \/\/ lineDash 的和","143","  G6.registerEdge('line-dash', {","144","    afterDraw(cfg, group) {","145","      \/\/ 获得该边的第一个图形，这里是边的 path","146","      const shape = group.get('children')[0];","147","      \/\/ 获得边的 path 的总长度","148","      const length = shape.getTotalLength();","149","      ","150","      let totalArray = [];","151","      \/\/ 计算出整条线的 lineDash","152","      for (let i = 0; i < length; i += interval) {","153","        totalArray = totalArray.concat(lineDash);","154","      }","155","  ","156","      let index = 0;","157","      \/\/ 边 path 图形的动画","158","      shape.animate((ratio) => {","159","        const cfg = {","160","            lineDash: dashArray[index].concat(totalArray)","161","          };","162","        \/\/ 每次移动 1","163","        index = (index + 1) % interval;","164","        \/\/ 返回需要修改的参数集，这里只修改了 lineDash","165","        return cfg;","166","      }, {","167","        repeat: true,","168","        duration: 3000","169","      });  \/\/ 一次动画的时长为 3000","170","    }","171","  }, 'cubic');   \/\/ 该自定义边继承了内置三阶贝塞尔曲线边 cubic","172","  const graph = new Graph({","173","    container: 'container',","174","    width: 500,","175","    height: 500,","176","    \/\/animate: true,","177","    defaultEdge: {","178","      size: 2,","179","      type: 'line-dash',\/\/'line',\/\/'line-dash',\/\/","180","      color: '#e2e2e2'","181","    },","182","    layout: {","183","      type: 'dagre',","184","      rankdir: 'LR',","185","      nodesep: 30,","186","      \/\/controlPoints: false","187","      \/\/ ranksep: 100","188","    }","189","  });","190","  it('change data', () => {","191","    graph.data(data);","192","    graph.render();","193","  });","194","});","195","","196",""],"delete":["97","});"]}]}},"2ac9916d10182eb80caeaf0017959ea6a7c5c9c7":{"changes":{"demos\/pluginMaxSpanningForest.html":"MODIFY","\/dev\/null":"DELETE","src\/controller\/event.js":"MODIFY","test\/unit\/controller\/event-spec.js":"ADD","package.json":"MODIFY","src\/version.js":"MODIFY","demos\/pluginMinimap.html":"MODIFY"},"diff":{"demos\/pluginMaxSpanningForest.html":[{"add":["15","    const plugin = new G6.Plugins['template.maxSpanningForest']();"],"delete":["15","    const Plugin = window.TemplateMaxSpanningForest;","16","    const plugin = new Plugin();"]}],"\/dev\/null":[{"add":[],"delete":[]}],"src\/controller\/event.js":[{"add":["294","    const pixelRatio = canvas.get('pixelRatio');","300","      domX: canvasPoint.x \/ pixelRatio,","301","      domY: canvasPoint.y \/ pixelRatio,"],"delete":["299","      domX: ev.offsetX,","300","      domY: ev.offsetY,"]}],"test\/unit\/controller\/event-spec.js":[{"add":[],"delete":[]}],"package.json":[{"add":["2","  \"version\": \"2.0.1\","],"delete":["2","  \"version\": \"2.0.1-beta.1\","]}],"src\/version.js":[{"add":["0","module.exports = '2.0.1';"],"delete":["0","module.exports = '2.0.1-beta.1';"]}],"demos\/pluginMinimap.html":[{"add":["18","    const plugin = new G6.Plugins['tool.minimap']({"],"delete":["18","    const Plugin = window.ToolMinimap;","19","    const plugin = new Plugin({"]}]}},"98b92a9a9fd9c9a305c0facaea9e9d7303977e85":{"changes":{"packages\/site\/examples\/scatter\/node\/demo\/node.js":"MODIFY","packages\/plugin\/package.json":"MODIFY","packages\/site\/examples\/interaction\/pagination\/demo\/dagrePagination.js":"MODIFY","packages\/site\/docs\/manual\/FAQ\/upgradeGuide.en.md":"MODIFY","packages\/site\/examples\/item\/customNode\/demo\/lineChart.js":"MODIFY","packages\/site\/docs\/manual\/FAQ\/performance-opt.zh.md":"MODIFY","packages\/core\/src\/element\/combos\/circle.ts":"MODIFY","packages\/site\/docs\/manual\/middle\/animation.zh.md":"MODIFY","packages\/site\/examples\/item\/customNode\/demo\/scrollNode.js":"MODIFY","packages\/site\/docs\/manual\/FAQ\/faq.zh.md":"MODIFY","packages\/site\/examples\/case\/treeDemos\/demo\/decisionTree.js":"MODIFY","packages\/site\/examples\/case\/graphDemos\/demo\/decisionBubbles.js":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/combos\/custom-combo.en.md":"MODIFY","packages\/site\/examples\/interaction\/createEdge\/demo\/drag-link-point.js":"MODIFY","packages\/site\/examples\/item\/customNode\/demo\/cardNode.js":"MODIFY","packages\/site\/docs\/manual\/middle\/states\/bindEvent.en.md":"MODIFY","packages\/site\/examples\/tool\/tooltip\/demo\/tooltipLocalCustom.js":"MODIFY","packages\/site\/examples\/item\/customNode\/demo\/pointChart.js":"MODIFY","packages\/site\/examples\/case\/graphDemos\/demo\/largeGraph.js":"MODIFY","packages\/site\/examples\/tree\/indented\/demo\/intendAlignTop.js":"MODIFY","packages\/site\/examples\/item\/customNode\/demo\/list.js":"MODIFY","packages\/site\/examples\/item\/label\/demo\/labelLen.js":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/edges\/custom-edge.zh.md":"MODIFY","packages\/site\/examples\/item\/customNode\/demo\/areaChart.js":"MODIFY","packages\/core\/src\/interface\/graph.ts":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/shape\/graphics-group.zh.md":"MODIFY","packages\/site\/examples\/item\/customCombo\/demo\/cCircle.js":"MODIFY","packages\/site\/examples\/tree\/customItemTree\/demo\/customEdgeTree.js":"MODIFY","packages\/site\/examples\/interaction\/combo\/demo\/cCircle.js":"MODIFY","packages\/core\/src\/element\/combo.ts":"MODIFY","packages\/core\/src\/item\/combo.ts":"MODIFY","packages\/site\/examples\/scatter\/stateChange\/demo\/hover.js":"MODIFY","packages\/site\/package.json":"MODIFY","packages\/site\/examples\/interaction\/createEdge\/demo\/click-link-point.js":"MODIFY","packages\/site\/examples\/item\/customCombo\/demo\/cRect.js":"MODIFY","CHANGELOG.md":"MODIFY","packages\/site\/docs\/manual\/cases\/edgeBundling.en.md":"MODIFY","packages\/core\/src\/element\/combos\/rect.ts":"MODIFY","packages\/site\/docs\/manual\/middle\/animation.en.md":"MODIFY","packages\/pc\/src\/global.ts":"MODIFY","packages\/g6\/src\/index.ts":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/shape\/graphics-group.en.md":"MODIFY","packages\/site\/examples\/case\/treeDemos\/demo\/indentedTree.js":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/combos\/built-in\/rect.en.md":"MODIFY","packages\/site\/examples\/case\/graphDemos\/demo\/edgeBundling.js":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/combos\/built-in\/rect.zh.md":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/edges\/custom-edge.en.md":"MODIFY","packages\/site\/examples\/interaction\/partialResponse\/demo\/partialNode.js":"MODIFY","packages\/core\/src\/graph\/graph.ts":"MODIFY","packages\/element\/package.json":"MODIFY","packages\/site\/examples\/case\/others\/demo\/metroLines.js":"MODIFY","packages\/plugin\/src\/toolBar\/index.ts":"MODIFY","packages\/site\/docs\/api\/shapeProperties.en.md":"MODIFY","packages\/site\/examples\/item\/customNode\/demo\/stackChart.js":"MODIFY","packages\/site\/examples\/item\/customNode\/demo\/barChart.js":"MODIFY","packages\/site\/examples\/case\/graphDemos\/demo\/christmasBubbles.js":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/combos\/custom-combo.zh.md":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/nodes\/custom-node.en.md":"MODIFY","packages\/site\/docs\/manual\/middle\/states\/bindEvent.zh.md":"MODIFY","packages\/site\/docs\/manual\/cases\/edgeBundling.zh.md":"MODIFY","packages\/core\/src\/graph\/controller\/item.ts":"MODIFY","packages\/site\/examples\/item\/customEdge\/demo\/customPolyline2.js":"MODIFY","packages\/site\/docs\/manual\/FAQ\/faq.en.md":"MODIFY","packages\/core\/src\/global.ts":"MODIFY","packages\/site\/examples\/interaction\/combo\/demo\/cRect.js":"MODIFY","packages\/pc\/package.json":"MODIFY","packages\/site\/examples\/item\/label\/demo\/copyLabel.js":"MODIFY","packages\/site\/examples\/case\/graphDemos\/demo\/customFlow.js":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/shape\/transform.en.md":"MODIFY","packages\/site\/docs\/manual\/advanced\/iconfont.en.md":"MODIFY","packages\/site\/examples\/tree\/compactBox\/demo\/compactBoxLeftAlign.js":"MODIFY","packages\/site\/examples\/item\/customNode\/demo\/pieChart.js":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/core\/src\/item\/edge.ts":"MODIFY","packages\/site\/examples\/item\/customNode\/demo\/card.js":"MODIFY","packages\/site\/docs\/api\/Group.en.md":"MODIFY","packages\/core\/package.json":"MODIFY","packages\/site\/examples\/scatter\/edge\/demo\/pointInLine.js":"MODIFY","packages\/site\/examples\/case\/treeDemos\/demo\/customFlow.js":"MODIFY","packages\/site\/examples\/item\/customEdge\/demo\/edgeMulLabel.js":"MODIFY","packages\/site\/docs\/manual\/FAQ\/performance-opt.en.md":"MODIFY","packages\/site\/examples\/interaction\/pagination\/demo\/treePagination.js":"MODIFY","packages\/site\/docs\/manual\/advanced\/iconfont.zh.md":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/shape\/shape-and-properties.en.md":"MODIFY","packages\/site\/examples\/tree\/indented\/demo\/filesystem.js":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/shape\/shape-and-properties.zh.md":"MODIFY","packages\/site\/examples\/tree\/customItemTree\/demo\/customTree.js":"MODIFY","packages\/site\/docs\/api\/graphFunc\/combo.zh.md":"MODIFY","packages\/site\/docs\/api\/Group.zh.md":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/nodes\/custom-node.zh.md":"MODIFY","packages\/site\/examples\/case\/treeDemos\/demo\/knowledgeTreeGraph.js":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/shape\/transform.zh.md":"MODIFY","packages\/pc\/src\/graph\/controller\/event.ts":"MODIFY","packages\/site\/docs\/api\/shapeProperties.zh.md":"MODIFY","packages\/site\/docs\/manual\/FAQ\/upgradeGuide.zh.md":"MODIFY","packages\/site\/docs\/api\/graphFunc\/combo.en.md":"MODIFY"},"diff":{"packages\/site\/examples\/scatter\/node\/demo\/node.js":[{"add":["108","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","120","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","132","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","196","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/plugin\/package.json":[{"add":["2","  \"version\": \"0.7.17\",","24","    \"@antv\/g6-core\": \"0.7.17\",","25","    \"@antv\/g6-element\": \"0.7.17\","],"delete":["2","  \"version\": \"0.7.16\",","24","    \"@antv\/g6-core\": \"0.7.16\",","25","    \"@antv\/g6-element\": \"0.7.16\","]}],"packages\/site\/examples\/interaction\/pagination\/demo\/dagrePagination.js":[{"add":["337","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","351","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/FAQ\/upgradeGuide.en.md":[{"add":["240","In G6 3.3, we highly recommend you to assign `draggable`, and must assign `name`  when adding a shape. **And the value of `name` should be unique in a custom node\/edge\/combo type.** If not, the shapes will not response some interactive events. Adding these two property as below:","250","      name: 'key-shape', \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","257","      name: 'circle-shape', \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","282","      name: 'marker-shape', \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","297","      name: 'marker-shape',\/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","321","  name: 'fan-shape' \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["240","In G6 3.3, we highly recommend you to assign `name` and `draggable` when adding a shape. If not, the shapes will not response some interactive events. Adding these two property as below:","250","      name: 'key-shape', \/\/ Not unique, you can assign any string value to it","257","      name: 'circle-shape', \/\/ Not unique, you can assign any string value to it","282","      name: 'marker-shape',","297","      name: 'marker-shape',"]}],"packages\/site\/examples\/item\/customNode\/demo\/lineChart.js":[{"add":["26","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","59","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","75","            \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","116","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","130","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/FAQ\/performance-opt.zh.md":[{"add":["62","  name: 'custom-circle', \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","116","      name: 'xxx' \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性"],"delete":["62","  name: 'custom-circle',","116","      name: 'xxx'"]}],"packages\/core\/src\/element\/combos\/circle.ts":[{"add":["14","      padding: Math.max(...Global.defaultCombo.padding),","61","      if (isArray(padding)) padding = Math.max(...padding);","93","      if (isArray(padding)) padding = Math.max(...padding)"],"delete":["14","      padding: Global.defaultCombo.padding[0],","61","      if (isArray(padding)) padding = padding[0];","93","      if (isArray(padding)) padding = padding[0];"]}],"packages\/site\/docs\/manual\/middle\/animation.zh.md":[{"add":["120","        \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","133","        \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","146","        \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","221","        \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","288","        \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性"],"delete":["120","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","133","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","146","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","221","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","288","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/examples\/item\/customNode\/demo\/scrollNode.js":[{"add":["279","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","304","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","408","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","422","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","524","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","568","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/FAQ\/faq.zh.md":[{"add":["64","  },","65","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","66","  name: 'text-shape'"],"delete":["64","  }"]}],"packages\/site\/examples\/case\/treeDemos\/demo\/decisionTree.js":[{"add":["329","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","435","            \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","452","            \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","481","              \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","494","              \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/case\/graphDemos\/demo\/decisionBubbles.js":[{"add":["165","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","181","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","399","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/middle\/elements\/combos\/custom-combo.en.md":[{"add":["123","        name: 'combo-keyShape', \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","137","        name: 'combo-circle-shape', \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","158","Attention: you need to assign `name` and `draggable` for the shapes added in the custom node, where **the value of `name` must be unique in a custom node\/edge\/combo type**. `draggable: true` means that the shape is allowed to response the drag events. Only when `draggable: true`, the interaction behavior `'drag-node'` can be responsed on this shape. In the codes above, if you only assign `draggable: true` to the `keyShape` but not the right circle shape, the drag events will only be responsed on the `keyShape`.","256","        name: 'combo-keyShape', \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","270","        name: 'combo-marker-shape', \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["123","        name: 'combo-keyShape',","137","        name: 'combo-circle-shape',","158","Attention: you need to assign `name` and `draggable` for the shapes added in the custom node, where the `name` can be not unique with any value you want. `draggable: true` means that the shape is allowed to response the drag events. Only when `draggable: true`, the interaction behavior `'drag-node'` can be responsed on this shape. In the codes above, if you only assign `draggable: true` to the `keyShape` but not the right circle shape, the drag events will only be responsed on the `keyShape`.","256","        name: 'combo-keyShape',","270","        name: 'combo-marker-shape',"]}],"packages\/site\/examples\/interaction\/createEdge\/demo\/drag-link-point.js":[{"add":["118","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/item\/customNode\/demo\/cardNode.js":[{"add":["22","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","36","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","51","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","65","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","80","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","97","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","111","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/middle\/states\/bindEvent.en.md":[{"add":["65"," - For custom Node\/Edge\/Combo type, assign `name` which is in the same level of `attrs` for `addShape` when custom items. **The value of `name` must be unique in a Node\/Edge\/Combo type.**"],"delete":["65"," - For custom Node\/Edge\/Combo type, assign `name` which is in the same level of `attrs` for `addShape` when custom items. And we suggest to use unique `name` value in a Node\/Edge\/Combo type."]}],"packages\/site\/examples\/tool\/tooltip\/demo\/tooltipLocalCustom.js":[{"add":["27","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","40","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","51","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/item\/customNode\/demo\/pointChart.js":[{"add":["20","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","76","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","90","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","105","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/case\/graphDemos\/demo\/largeGraph.js":[{"add":["161","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","197","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","218","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","235","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","302","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","318","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","334","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","369","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","386","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","473","              \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","576","              \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/tree\/indented\/demo\/intendAlignTop.js":[{"add":["18","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","32","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","47","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","62","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","74","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/item\/customNode\/demo\/list.js":[{"add":["22","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","35","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","50","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","64","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","79","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","96","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","110","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","126","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/item\/label\/demo\/labelLen.js":[{"add":["10"," *     \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/middle\/elements\/edges\/custom-edge.zh.md":[{"add":["47","      \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","169","        name: 'mid-point-edge-rect', \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","355","      \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性"],"delete":["47","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","354","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/examples\/item\/customNode\/demo\/areaChart.js":[{"add":["27","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","83","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","103","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","119","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","135","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/core\/src\/interface\/graph.ts":[{"add":["268","  uncombo: (item: string | ICombo, stack?: boolean) => void;","273","   * @param childrenIds 添加到 Combo 中的元素，包括节点和 combo","275","  createCombo: (combo: string | ComboConfig, childrenIds: string[], stack?: boolean) => void;"],"delete":["268","  uncombo: (item: string | ICombo) => void;","273","   * @param elements 添加到 Combo 中的元素，包括节点和 combo","275","  createCombo: (combo: string | ComboConfig, elements: string[]) => void;"]}],"packages\/site\/docs\/manual\/middle\/elements\/shape\/graphics-group.zh.md":[{"add":["66","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性"],"delete":["66","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/examples\/item\/customCombo\/demo\/cCircle.js":[{"add":["46","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","61","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/tree\/customItemTree\/demo\/customEdgeTree.js":[{"add":["155","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","170","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","183","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/interaction\/combo\/demo\/cCircle.js":[{"add":["46","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","61","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/core\/src\/element\/combo.ts":[{"add":["75","    if (isArray(padding)) padding = Math.max(...padding);"],"delete":["75","    if (isArray(padding)) padding = padding[0];"]}],"packages\/core\/src\/item\/combo.ts":[{"add":["41","        size.r = size.r + Math.max(...(padding as Array<number>));"],"delete":["41","        size.r += padding[0];"]}],"packages\/site\/examples\/scatter\/stateChange\/demo\/hover.js":[{"add":["48","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","76","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","88","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/package.json":[{"add":["3","  \"version\": \"4.7.17\","],"delete":["3","  \"version\": \"4.7.16\","]}],"packages\/site\/examples\/interaction\/createEdge\/demo\/click-link-point.js":[{"add":["118","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/item\/customCombo\/demo\/cRect.js":[{"add":["49","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","65","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"CHANGELOG.md":[{"add":["2","### 4.7.17","3","","4","- fix: expandCombo and the edges of the children are not refreshed, closes: #3250;","5","- fix: the item param of the afterremoveitem for combo should be data;","6","- fix: add type to the parameter list of beforeremoveitem event;","7","- fix: edge update with destroyed end items, closes: #3925;","8","- perf: take the max value of padding array for circle combo, closes: #4113;","9","- feat: support top-center for rect combo label position, closes: #3750;","10","- feat: createCombo and uncombo support stack, closes: #3695, #3323;","11","","24","- fix: error occurs while calling changeData to remove a node in a combo, closes: #3293;"],"delete":["14","- fix: error occurs while calling changeData to remove a node in a combo, cloases: #3293;"]}],"packages\/site\/docs\/manual\/cases\/edgeBundling.en.md":[{"add":["181","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","196","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["181","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","196","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/core\/src\/element\/combos\/rect.ts":[{"add":["70","      const left = -cfgStyle.width \/ 2 - padding[3];","71","      const right = cfgStyle.width \/ 2 + padding[1];","72","      const top = -cfgStyle.height \/ 2 - padding[0];","73","      const bottom = cfgStyle.height \/ 2 + padding[2];","79","            x: left + refX,","80","            y: top + refY,","88","            y: bottom + refY,","89","            textBaseline: 'top',","95","            x: left + refY,","108","        case 'top-center':","109","          style = {","110","            x: 0,","111","            y: top + refY,","112","            textBaseline: 'top',","113","            textAlign: 'center'","114","          };","115","          break;","118","            x: right + refX,"],"delete":["70","      const leftDis = cfgStyle.width \/ 2 + padding[3];","71","      const topDis = cfgStyle.height \/ 2 + padding[0];","77","            x: 0 - leftDis + refX,","78","            y: 0 - topDis + refY,","86","            y: topDis + refY,","87","            textBaseline: 'bottom',","93","            x: 0 - leftDis + refY,","108","            x: leftDis + refX,"]}],"packages\/site\/docs\/manual\/middle\/animation.en.md":[{"add":["117","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","130","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","143","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","207","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","274","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["117","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","130","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","143","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","207","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","274","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/pc\/src\/global.ts":[{"add":["9","  version: '0.7.17',"],"delete":["9","  version: '0.7.16',"]}],"packages\/g6\/src\/index.ts":[{"add":["2","G6.version = '4.7.17';","6","export const version = '4.7.17';"],"delete":["2","G6.version = '4.7.16';","6","export const version = '4.7.16';"]}],"packages\/site\/docs\/manual\/middle\/elements\/shape\/graphics-group.en.md":[{"add":["70","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["70","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/examples\/case\/treeDemos\/demo\/indentedTree.js":[{"add":["227","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","243","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","282","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","296","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","325","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","341","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","370","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","384","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","436","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","511","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","527","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","548","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","565","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","579","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","589","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","609","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","639","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","651","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","711","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","728","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","742","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","752","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","765","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","796","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","808","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","827","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","846","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","887","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","1263","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/middle\/elements\/combos\/built-in\/rect.en.md":[{"add":["107","`labelCfg` is an object to configure the label of the combo. The [Combo Common Label Configurations](\/en\/docs\/manual\/middle\/elements\/combos\/defaultCombo\/#label-and-labelcfg) are available. *Supported by v4.7.17 and later versions* And rect type combo has a special value `'top-center'` for `labelCfg.position`, to place the label text on the top center of the rect. Base on the code in [style](#style) section, we add `labelCfg` to `defaultCombo`.<br \/><img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*qAqbSLqTWSoAAAAAAAAAAABkARQnAQ' width=150 alt='img'\/>"],"delete":["107","`labelCfg` is an object to configure the label of the combo. The [Combo Common Label Configurations](\/en\/docs\/manual\/middle\/elements\/combos\/defaultCombo\/#label-and-labelcfg) are available. Base on the code in [style](#style) section, we add `labelCfg` to `defaultCombo`.<br \/><img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*qAqbSLqTWSoAAAAAAAAAAABkARQnAQ' width=150 alt='img'\/>"]}],"packages\/site\/examples\/case\/graphDemos\/demo\/edgeBundling.js":[{"add":["93","            \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","109","            \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/middle\/elements\/combos\/built-in\/rect.zh.md":[{"add":["107","Object 类型。通过 `labelCfg` 配置标签文本。支持 [Combo 通用标签配置](\/zh\/docs\/manual\/middle\/elements\/combos\/defaultCombo\/#标签文本-label-及其配置-labelcfg)。**v4.7.17 及后续版本支持** 其中，rect 类型的 Combo 的 `labelCfg.position` 额外支持 `'top-center'`，表示将标签文本绘制在矩形 Combo 的上方中央。基于上面 [样式属性 style](#样式属性-style) 中的代码，下面代码在 `defaultCombo` 中增加了  `labelCfg`  配置项进行文本的配置，使之达到如下图效果。<br \/><img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*qAqbSLqTWSoAAAAAAAAAAABkARQnAQ' width=150 alt='img'\/>"],"delete":["107","Object 类型。通过 `labelCfg` 配置标签文本。支持 [Combo 通用标签配置](\/zh\/docs\/manual\/middle\/elements\/combos\/defaultCombo\/#标签文本-label-及其配置-labelcfg)。基于上面 [样式属性 style](#样式属性-style) 中的代码，下面代码在 `defaultCombo` 中增加了  `labelCfg`  配置项进行文本的配置，使之达到如下图效果。<br \/><img src='https:\/\/gw.alipayobjects.com\/mdn\/rms_f8c6a0\/afts\/img\/A*qAqbSLqTWSoAAAAAAAAAAABkARQnAQ' width=150 alt='img'\/>"]}],"packages\/site\/docs\/manual\/middle\/elements\/edges\/custom-edge.en.md":[{"add":["47","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","170","        name: 'mid-point-edge-rect', \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","345","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["47","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","344","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/examples\/interaction\/partialResponse\/demo\/partialNode.js":[{"add":["22","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","34","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/core\/src\/graph\/graph.ts":[{"add":["1750","   * @param childrenIds 添加到 Combo 中的元素，包括节点和 combo","1752","  public createCombo(combo: string | ComboConfig, childrenIds: string[], stack: boolean = true): void {","1774","    const shouldStack = stack && this.get('enabledStack');","1775","","1776","    \/\/ cache the children's old parent for stack","1777","    const childrenParentCache = { nodes: [], combos: [] };","1778","    if (shouldStack) {","1779","      childrenIds.forEach(childId => {","1780","        const childItem = this.findById(childId);","1781","        const childType = childItem.getType();","1782","        if (childType !== 'node' && childType !== 'combo') return;","1783","        const childModel = childItem.getModel();","1784","        childrenParentCache[`${childType}s`].push({","1785","          id: childId,","1786","          parentId: childType === 'node' ? childModel.comboId : childModel.parentId,","1787","        })","1788","      });","1789","    }","1790","","1793","    const childrenIdsSet = new Set<string>(childrenIds);","1828","    const newChildrenParent = { nodes: [], combos: [] };","1829","    const trees: ComboTree[] = childrenIds.map(elementId => {","1849","      if (shouldStack) {","1850","        newChildrenParent[`${type}s`].push({","1851","          id: model.id,","1852","          parentId: comboId","1853","        });","1854","      }","1882","","1883","    if (shouldStack) {","1884","      newChildrenParent.combos.push(comboConfig);","1885","      this.pushStack('createCombo', {","1886","        before: childrenParentCache,","1887","        after: newChildrenParent","1888","      });","1889","    }","1896","  public uncombo(combo: string | ICombo, stack: boolean = true) {","1908","    const comboModel = comboItem.getModel();","1919","","1920","    const shouldStack = stack && this.get('enabledStack');","1921","    let comboConfig: any = {};","1922","    if (shouldStack) {","1923","      comboConfig = clone(comboModel);","1924","      comboConfig.children = [];","1925","    }","1926","","1941","          const itemModel = clone(comboItem.getModel());","1943","          this.emit('afterremoveitem', { item: itemModel, type: 'combo' });","1971","          this.updateCombo(parentItem);","1991","","1992","    if (shouldStack) {","1993","      \/\/ cache the children's old parent and combo model for stack","1994","      const childrenParentCache = { nodes: [], combos: [] };","1995","      const childNewParent = { nodes: [], combos: [] };","1996","      treeToBeUncombo.children?.forEach(child => {","1997","        const childItem = this.findById(child.id);","1998","        const childType = childItem.getType();","1999","        if (childType !== 'node' && childType !== 'combo') return;","2000","        childrenParentCache[`${childType}s`].push({","2001","          id: child.id,","2002","          parentId: comboId","2003","        });","2004","        childNewParent[`${childType}s`].push({","2005","          id: child.id,","2006","          parentId","2007","        });","2008","      });","2009","","2010","      childrenParentCache.combos.push(comboConfig);","2011","      this.pushStack('uncombo', {","2012","        before: childrenParentCache,","2013","        after: childNewParent","2014","      });","2015","    }"],"delete":["1750","   * @param children 添加到 Combo 中的元素，包括节点和 combo","1752","  public createCombo(combo: string | ComboConfig, children: string[]): void {","1776","    const childrenIdsSet = new Set<string>(children);","1811","    const trees: ComboTree[] = children.map(elementId => {","1864","  public uncombo(combo: string | ICombo) {","1901","          this.emit('afterremoveitem', { item: comboItem, type: 'combo' });"]}],"packages\/element\/package.json":[{"add":["2","  \"version\": \"0.7.17\",","63","    \"@antv\/g6-core\": \"0.7.17\","],"delete":["2","  \"version\": \"0.7.16\",","63","    \"@antv\/g6-core\": \"0.7.16\","]}],"packages\/site\/examples\/case\/others\/demo\/metroLines.js":[{"add":["32","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","45","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","57","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","128","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/plugin\/src\/toolBar\/index.ts":[{"add":["298","        case 'createCombo':","299","          const afterCombos = currentData.data.after.combos;","300","          const createdCombo =  afterCombos[afterCombos.length - 1];","301","          Object.keys(data).forEach((key) => {","302","            const array = data[key];","303","            if (!array) return;","304","            array.forEach((model) => {","305","              graph.updateComboTree(model.id, model.parentId, false);","306","            });","307","          });","308","          graph.removeItem(createdCombo.id, false);","309","          break;","310","        case 'uncombo':","311","          const targetCombo = data.combos[data.combos.length - 1];","312","          const childrenIds = data.nodes.concat(data.combos).map(child => child.id).filter(id => id !== targetCombo.id);","313","          graph.createCombo(targetCombo, childrenIds, false);","314","          break;","415","        case 'createCombo':","416","          const createdCombo = data.combos[ data.combos.length - 1];","417","          graph.createCombo(createdCombo, createdCombo.children.map(child => child.id), false);","418","          break;","419","        case 'uncombo':","420","          const beforeCombos = currentData.data.before.combos;","421","          const targertCombo = beforeCombos[beforeCombos.length - 1];","422","          graph.uncombo(targertCombo.id, false);","423","          break;"],"delete":[]}],"packages\/site\/docs\/api\/shapeProperties.en.md":[{"add":["17","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","40","Must be assigned in G6 3.3 and later versions. It can be any string you want but must be unique in a custom node\/edge\/combo type. Otherwise, the style updating might be wrong.","124","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","158","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","196","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","242","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","256","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","298","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","321","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","383","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","455","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","543","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["17","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","40","Must be assigned in G6 3.3 and later versions. It can be any value you want","124","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","158","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","196","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","242","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","256","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","298","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","321","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","383","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","455","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","543","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/examples\/item\/customNode\/demo\/stackChart.js":[{"add":["53","            \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","73","              \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","90","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","104","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/item\/customNode\/demo\/barChart.js":[{"add":["57","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","95","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","109","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/case\/graphDemos\/demo\/christmasBubbles.js":[{"add":["126","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","142","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","320","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["126","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","142","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","320","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/docs\/manual\/middle\/elements\/combos\/custom-combo.zh.md":[{"add":["114","        name: 'combo-keyShape', \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","128","        name: 'combo-circle-shape', \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","149","值得注意的是，G6 3.3 需要用户为自定义节点中的图形设置 `name` 和 `draggable`。**其中，`name` 的值必须在同一元素类型内唯一**。`draggable` 为 `true` 是表示允许该图形响应鼠标的拖拽事件，只有 `draggable: true` 时，图上的交互行为 `'drag-combo'` 才能在该图形上生效。若上面代码仅在 keyShape 上设置了 `draggable: true`，而右侧圆图形上没有设置，则鼠标拖拽只能在 keyShape 上响应。","248","        name: 'combo-keyShape', \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","262","        name: 'combo-marker-shape',\/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","288","值得注意的是，G6 3.3 需要用户为自定义节点中的图形设置 `name` 和 `draggable`。**其中，`name` 的值必须在同一元素类型内唯一**。`draggable` 为 `true` 是表示允许该图形响应鼠标的拖拽事件，只有 `draggable: true` 时，图上的交互行为 `'drag-combo'` 才能在该图形上生效。若上面代码仅在 keyShape 上设置了 `draggable: true`，而右侧圆图形上没有设置，则鼠标拖拽只能在 keyShape 上响应。"],"delete":["114","        name: 'combo-keyShape',","128","        name: 'combo-circle-shape',","149","值得注意的是，G6 3.3 需要用户为自定义节点中的图形设置 `name` 和 `draggable`。其中，`name` 可以是不唯一的任意值。`draggable` 为 `true` 是表示允许该图形响应鼠标的拖拽事件，只有 `draggable: true` 时，图上的交互行为 `'drag-combo'` 才能在该图形上生效。若上面代码仅在 keyShape 上设置了 `draggable: true`，而右侧圆图形上没有设置，则鼠标拖拽只能在 keyShape 上响应。","248","        name: 'combo-keyShape',","262","        name: 'combo-marker-shape',","288","值得注意的是，G6 3.3 需要用户为自定义节点中的图形设置 `name` 和 `draggable`。其中，`name` 可以是不唯一的任意值。`draggable` 为 `true` 是表示允许该图形响应鼠标的拖拽事件，只有 `draggable: true` 时，图上的交互行为 `'drag-combo'` 才能在该图形上生效。若上面代码仅在 keyShape 上设置了 `draggable: true`，而右侧圆图形上没有设置，则鼠标拖拽只能在 keyShape 上响应。"]}],"packages\/site\/docs\/manual\/middle\/elements\/nodes\/custom-node.en.md":[{"add":["114","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","133","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","161","We have registered a dimond node. Attention: you need to assign `name` and `draggable` for the shapes added in the custom node, where **the value of `name` must be unique in a custom node\/edge\/combo type**. `draggable: true` means that the shape is allowed to response the drag events. Only when `draggable: true`, the interact behavior `'drag-node'` can be responsed on this shape. In the codes above, if you only assign `draggable: true` to the `keyShape` but not the `label`, the drag events will only be responsed on the `keyShape`.","259","        name: 'diamond-keyShape', \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","295","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","505","        name: 'dom-node-keyShape', \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","564","        name: 'dom-node-keyShape', \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["114","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","133","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","161","We have registered a dimond node. Attention: you need to assign `name` and `draggable` for the shapes added in the custom node, where the `name` can be not unique with any value you want. `draggable: true` means that the shape is allowed to response the drag events. Only when `draggable: true`, the interact behavior `'drag-node'` can be responsed on this shape. In the codes above, if you only assign `draggable: true` to the `keyShape` but not the `label`, the drag events will only be responsed on the `keyShape`.","259","        name: 'diamond-keyShape',","295","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/docs\/manual\/middle\/states\/bindEvent.zh.md":[{"add":["65"," - 自定义节点\/边\/combo 中通过 addShape 增加的图形，可添加与 attrs 平级的 name 字段指定任意（**注意：同元素类型中需要是唯一的**）字符串作为 name。"],"delete":["65"," - 自定义节点\/边\/combo 中通过 addShape 增加的图形，可添加与 attrs 平级的 name 字段指定任意（同元素中唯一）字符串作为 name。请注意同个元素（节点\/边\/combo）中不同图形尽量给予不同的 name 值。"]}],"packages\/site\/docs\/manual\/cases\/edgeBundling.zh.md":[{"add":["179","        \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","194","        \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性"],"delete":["179","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","194","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/core\/src\/graph\/controller\/item.ts":[{"add":["472","    const edgeSet = new Set<IEdge>();","475","      node.getEdges().forEach(edge => edgeSet.add(edge));","483","      c.getEdges().forEach(edge => edgeSet.add(edge));","485","    edgeSet.forEach(edge => edge.refresh());","508","    graph.emit('beforeremoveitem', { item: itemModel, type });","509",""],"delete":["502","    graph.emit('beforeremoveitem', { item: itemModel });","503",""]}],"packages\/site\/examples\/item\/customEdge\/demo\/customPolyline2.js":[{"add":["36","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/FAQ\/faq.en.md":[{"add":["66","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","67","  name: 'text-shape'"],"delete":[]}],"packages\/core\/src\/global.ts":[{"add":["66","  version: '0.7.17',"],"delete":["66","  version: '0.7.16',"]}],"packages\/site\/examples\/interaction\/combo\/demo\/cRect.js":[{"add":["49","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","65","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/pc\/package.json":[{"add":["2","  \"version\": \"0.7.17\",","77","    \"@antv\/g6-core\": \"0.7.17\",","78","    \"@antv\/g6-element\": \"0.7.17\",","79","    \"@antv\/g6-plugin\": \"0.7.17\","],"delete":["2","  \"version\": \"0.7.16\",","77","    \"@antv\/g6-core\": \"0.7.16\",","78","    \"@antv\/g6-element\": \"0.7.16\",","79","    \"@antv\/g6-plugin\": \"0.7.16\","]}],"packages\/site\/examples\/item\/label\/demo\/copyLabel.js":[{"add":["112","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","140","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","154","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","160","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","175","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","189","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/case\/graphDemos\/demo\/customFlow.js":[{"add":["70","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","84","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","97","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","113","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","127","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","145","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/middle\/elements\/shape\/transform.en.md":[{"add":["26","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","121","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["26","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","121","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/docs\/manual\/advanced\/iconfont.en.md":[{"add":["54","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","70","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","83","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["54","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","70","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","83","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/examples\/tree\/compactBox\/demo\/compactBoxLeftAlign.js":[{"add":["17","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","29","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","41","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","58","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/item\/customNode\/demo\/pieChart.js":[{"add":["35","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","50","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/g6\/package.json":[{"add":["2","  \"version\": \"4.7.17\",","68","    \"@antv\/g6-pc\": \"0.7.17\""],"delete":["2","  \"version\": \"4.7.16\",","68","    \"@antv\/g6-pc\": \"0.7.16\""]}],"packages\/core\/src\/item\/edge.ts":[{"add":["94","    if (item && !item.destroyed) {","219","    const sourceItem = this.get('source');","220","    const targetItem = this.get('target');","221","    if (!sourceItem || sourceItem.destroyed || !targetItem || targetItem.destroyed) return;","222",""],"delete":["94","    if (item) {"]}],"packages\/site\/examples\/item\/customNode\/demo\/card.js":[{"add":["66","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","78","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","94","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","108","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","124","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","138","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","245","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","260","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","276","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","305","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","319","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","333","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","347","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","361","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","382","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","398","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","411","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/api\/Group.en.md":[{"add":["34","| name | String | Required, and the name of the shape which **must be unique** in a custom node\/edge\/combo type. Besides, `name` can be used for searching this shape, e.g. `const shape = group.find(element => element.get('name') === 'shape-name')`. The usage of find can be found at [find(fn)](#findfn) |","70","| name | String | Required, and the name of the shape which **must be unique** in a custom node\/edge\/combo type. Besides, `name` can be used for searching this shape, e.g. `const shape = group.find(element => element.get('name') === 'shape-name')`. The usage of find can be found at [find(fn)](#findfn) |","90","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["34","| name | String | The name of the shape which can be not unique. It is required for each shape in G6 3.3. Besides, `name` can be used for searching this shape, e.g. `const shape = group.find(element => element.get('name') === 'shape-name')`. The usage of find can be found at [find(fn)](#findfn) |","70","| name | String | The name of the shape which can be not unique. It is required for each shape in G6 3.3. Besides, `name` can be used for searching this shape, e.g. `const shape = group.find(element => element.get('name') === 'shape-name')`. The usage of find can be found at [find(fn)](#findfn) |","90","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/core\/package.json":[{"add":["2","  \"version\": \"0.7.17\","],"delete":["2","  \"version\": \"0.7.16\","]}],"packages\/site\/examples\/scatter\/edge\/demo\/pointInLine.js":[{"add":["18","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/case\/treeDemos\/demo\/customFlow.js":[{"add":["148","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","158","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","168","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","252","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","269","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","283","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","298","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/examples\/item\/customEdge\/demo\/edgeMulLabel.js":[{"add":["28","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","42","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","56","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/FAQ\/performance-opt.en.md":[{"add":["66","  name: 'custom-circle', \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","121","      name: 'xxx' \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["66","  name: 'custom-circle',","121","      name: 'xxx'"]}],"packages\/site\/examples\/interaction\/pagination\/demo\/treePagination.js":[{"add":["137","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","151","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/advanced\/iconfont.zh.md":[{"add":["54","        \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","70","      \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","83","      \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性"],"delete":["54","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","70","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","83","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/docs\/manual\/middle\/elements\/shape\/shape-and-properties.en.md":[{"add":["45","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","99","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","128","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","155","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","181","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","207","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","235","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","283","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","323","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","364","  \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":["45","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","99","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","128","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","155","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","181","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","207","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","235","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","283","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","323","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","364","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/examples\/tree\/indented\/demo\/filesystem.js":[{"add":["33","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","53","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/middle\/elements\/shape\/shape-and-properties.zh.md":[{"add":["46","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","100","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","129","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","156","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","182","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","208","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","236","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","284","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","324","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","364","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性"],"delete":["46","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","100","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","129","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","156","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","182","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","208","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","236","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","284","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","324","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","364","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/examples\/tree\/customItemTree\/demo\/customTree.js":[{"add":["15","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","28","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","53","          \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/api\/graphFunc\/combo.zh.md":[{"add":["53","### graph.createCombo(combo, elements, stack)","63","| stack | boolean | false | **v4.7.17 及后续版本支持** 操作是否入 undo & redo 栈，当实例化 Graph 时设置 enableStack 为 true 时，默认情况下会自动入栈，入栈以后，就支持 undo & redo 操作，如果不需要，则设置该参数为 false 即可 |","80","### graph.uncombo(combo, stack)","89","| stack | boolean | false | **v4.7.17 及后续版本支持** 操作是否入 undo & redo 栈，当实例化 Graph 时设置 enableStack 为 true 时，默认情况下会自动入栈，入栈以后，就支持 undo & redo 操作，如果不需要，则设置该参数为 false 即可 |","97","","98","### graph.updateCombos()","99","","100","根据子元素（子节点与子 combo）的 bbox 更新所有 combos 的绘制，包括 combos 的位置和范围。","101","","102","**用法**","103","","104","```javascript","105","\/\/ 更新所有 combos","106","graph.updateCombos();","107","```","108","","109","### graph.updateCombo(combo)","110","","111","仅更新 combo 及其所有祖先 combo。建议在使用 graph.updateItem 来更新节点位置时，调用该方法以更新节点的祖先 combos。","112","","113","**参数**","114","","115","| 名称  | 类型            | 是否必选 | 描述                   |","116","| ----- | --------------- | -------- | ---------------------- |","117","| combo | string \/ ICombo | true     | Combo ID 或 Combo 实例 |","118","","119","**用法**","120","","121","```javascript","122","\/\/ 更新了某个节点的位置","123","const node1 = graph.findById('node1');","124","graph.updateItem(node1, {","125","  x: 100,","126","  y: 100,","127","});","128","const comboId = node1.getModel().comboId;","129","","130","\/\/ 更新 node1 所属的 combo 及其所有祖先 combo 的大小和位置","131","graph.updateCombo(comboId);","132","```","133","","134","### graph.updateComboTree(item, parentId)","135","","136","更新 Combo 结构，例如移动子树等。","137","","138","**参数**","139","","140","| 名称     | 类型                    | 是否必选 | 描述                                        |","141","| -------- | ----------------------- | -------- | ------------------------------------------- |","142","| item     | string \/ INode \/ ICombo | true     | 需要被更新的 Combo 或 节点 ID               |","143","| parentId | string \/ undefined      | false    | 新的父 combo ID，undefined 代表没有父 combo |","144","","145","**用法**","146","","147","```javascript","148","\/\/ 将 combo1 从父 combo 中移出，完成后同原父 combo 平级","149","graph.updateComboTree('combo1')","150","","151","\/\/ 将 combo1 移动到 Combo2 下面，作为 Combo2 的子元素","152","graph.updateComboTree('combo1', 'combo2')","153","```","154",""],"delete":["53","### graph.createCombo(combo, elements)","79","### graph.uncombo(combo)"]}],"packages\/site\/docs\/api\/Group.zh.md":[{"add":["34","| name | String | 图形分组的标识，必须指定，**在同一元素类型中必须唯一**。另外，`name` 可以用于组内搜索到该元素：`const shape = group.find(element => element.get('name') === 'shape-name')`，find 函数用法见 [find(fn)](#findfn) |","70","| name | String | 图形的标识，必须指定，**在同一元素类型中必须唯一**。另外，`name` 可以用于组内搜索到该元素：`const shape = group.find(element => element.get('name') === 'shape-name')`，find 函数用法见 [find(fn)](#findfn) |","91","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性"],"delete":["34","| name | String | 图形分组的标识，非必须指定，可以不唯一。在 G6 3.3 及以后版本中必须指定。另外，`name` 可以用于组内搜索到该元素：`const shape = group.find(element => element.get('name') === 'shape-name')`，find 函数用法见 [find(fn)](#findfn) |","70","| name | String | 图形的标识，可以不唯一。在 G6 3.3 及以后版本中必须指定。另外，`name` 可以用于组内搜索到该元素：`const shape = group.find(element => element.get('name') === 'shape-name')`，find 函数用法见 [find(fn)](#findfn) |","91","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/docs\/manual\/middle\/elements\/nodes\/custom-node.zh.md":[{"add":["117","      \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","137","        \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","165","上面的代码自定义了一个菱形节点。值得注意的是，G6 3.3 需要用户为自定义节点中的图形设置 `name` 和 `draggable`。**其中，`name` 值必须在同元素类型内唯一**。`draggable` 为 `true` 是表示允许该图形响应鼠标的拖拽事件，只有 `draggable: true` 时，图上的交互行为 `'drag-node'` 才能在该图形上生效。若上面代码仅在 keyShape 上设置了 `draggable: true`，而 label 图形上没有设置，则鼠标拖拽只能在 keyShape 上响应。","265","        name: 'diamond-keyShape', \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","301","      \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","508","        name: 'dom-node-keyShape',  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","517","上面的代码自定义了一个名为 `'dom-node'` 的带有 DOM 的节点。值得注意的是，G6 3.3 需要用户为自定义节点中的图形设置 `name` 和 `draggable`。**其中，`name` 值必须在同元素类型内唯一**。`draggable` 为 `true` 是表示允许该图形响应鼠标的拖拽事件，只有 `draggable: true` 时，图上的交互行为 `'drag-node'` 才能在该图形上生效。","567","        name: 'dom-node-keyShape',  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性"],"delete":["117","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","137","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","165","上面的代码自定义了一个菱形节点。值得注意的是，G6 3.3 需要用户为自定义节点中的图形设置 `name` 和 `draggable`。其中，`name` 可以是不唯一的任意值。`draggable` 为 `true` 是表示允许该图形响应鼠标的拖拽事件，只有 `draggable: true` 时，图上的交互行为 `'drag-node'` 才能在该图形上生效。若上面代码仅在 keyShape 上设置了 `draggable: true`，而 label 图形上没有设置，则鼠标拖拽只能在 keyShape 上响应。","265","        name: 'diamond-keyShape',","301","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","516","上面的代码自定义了一个名为 `'dom-node'` 的带有 DOM 的节点。值得注意的是，G6 3.3 需要用户为自定义节点中的图形设置 `name` 和 `draggable`。其中，`name` 可以是不唯一的任意值。`draggable` 为 `true` 是表示允许该图形响应鼠标的拖拽事件，只有 `draggable: true` 时，图上的交互行为 `'drag-node'` 才能在该图形上生效。"]}],"packages\/site\/examples\/case\/treeDemos\/demo\/knowledgeTreeGraph.js":[{"add":["44","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","72","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","87","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","106","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","130","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","146","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","168","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","182","        \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type","214","      \/\/ must be assigned in G6 3.3 and later versions. it can be any string you want, but should be unique in a custom item type"],"delete":[]}],"packages\/site\/docs\/manual\/middle\/elements\/shape\/transform.zh.md":[{"add":["26","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","121","      \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性"],"delete":["26","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","121","      \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/pc\/src\/graph\/controller\/event.ts":[{"add":["15","  private resetHandler!: Fun;","16","","25","    this.destroy();","58","","59","    \/\/ 数据变更，重置一些状态","60","    if (this.resetHandler) graph.off('afterchangedata', this.resetHandler);","61","    this.resetHandler = wrapBehavior(this, 'resetStatus') as Fun;","62","    graph.on('afterchangedata', this.resetHandler);","223","  private resetStatus() {","224","    this.dragging = false;","225","    this.preItem = null;","226","  }","227","","242","    this.resetStatus();","245","    (this.resetHandler as Fun | null) = null;"],"delete":["229","    this.dragging = false;","230","    this.preItem = null;"]}],"packages\/site\/docs\/api\/shapeProperties.zh.md":[{"add":["17","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","40","图形名称标识，G6 3.3 版本以上必须配置。**且在统一自定义元素类型中，值必须唯一。**否则可能导致图形样式更新与恢复的错误。","124","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","158","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","196","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","242","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","256","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","300","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","323","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","385","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","457","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","544","  \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性"],"delete":["17","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","40","图形名称标识，G6 3.3 版本以上必须配置。","124","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","158","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","196","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","242","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","256","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","300","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","323","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","385","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","457","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you wantPath","544","  \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want"]}],"packages\/site\/docs\/manual\/FAQ\/upgradeGuide.zh.md":[{"add":["244","G6 3.3 中，新增图形时建议指定 `draggable`，必须指定 `name`（**`name` 值在同一元素类型中需要不唯一**）。若不添加，可能导致节点\/边上的非 keyShape 图形不能响应部分事件。添加方式如下：","254","      name: 'key-shape', \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","261","      name: 'circle-shape', \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","286","      name: 'marker-shape', \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","301","      name: 'marker-shape', \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性","325","  name: 'fan-shape' \/\/ 在 G6 3.3 及之后的版本中，必须指定 name，可以是任意字符串，但需要在同一个自定义元素类型中保持唯一性"],"delete":["244","G6 3.3 中，新增图形时建议指定 `name` 与 `draggable`。若不添加，可能导致节点\/边上的非 keyShape 图形不能响应部分事件。添加方式如下：","254","      name: 'key-shape', \/\/ Not unique, you can assign any string value to it","261","      name: 'circle-shape', \/\/ Not unique, you can assign any string value to it","286","      name: 'marker-shape',","301","      name: 'marker-shape',"]}],"packages\/site\/docs\/api\/graphFunc\/combo.en.md":[{"add":["140","### graph.createCombo(combo, elements, stack)","150","| stack | boolean | false | **Supported by v4.7.17 and later versions** Whether to push the operator into the undo & redo stack. If the `enableStack` is `true`, this operation will be automatically pushed into the stack by default. Set `stack` to be `false` if you do not want it. |","151","","168","### graph.uncombo(combo, stack)","177","| stack | boolean | false | **Supported by v4.7.17 and later versions** Whether to push the operator into the undo & redo stack. If the `enableStack` is `true`, this operation will be automatically pushed into the stack by default. Set `stack` to be `false` if you do not want it. |","185","### graph..updateCombos()","186","","187","Update the sizes and positions of all the combos according to the bboxes of its children.","188","","189","**Usage**","190","","191","```javascript","192","\/\/ Update all the combos","193","graph.updateCombos();","194","```","195","","196","### graph.updateCombo(combo)","197","","198","Update the positions and sizes of the combo and all of its ancestors.","199","","200","**Parameters**","201","","202","| Name  | Type            | Required | Description                         |","203","| ----- | --------------- | -------- | ----------------------------------- |","204","| combo | string \/ ICombo | true     | The ID or the instance of the combo |","205","","206","**Usage**","207","","208","```javascript","209","\/\/ Update a node's position","210","const node1 = graph.findById('node1');","211","graph.updateItem(node1, {","212","  x: 100,","213","  y: 100,","214","});","215","","216","\/\/ the combo who contains the node","217","const comboId = node1.getModel().comboId;","218","","219","\/\/ Update the combo and all its ancestors who contains node1","220","graph.updateCombo(comboId);","221","```","222","","223","### graph.updateComboTree(item, parentId)","224","","225","Update the hierarchy structure of the combo, such as move a combo into another one.","226","","227","**Parameters**","228","","229","| Name | Type | Required | Description |","230","| --- | --- | --- | --- |","231","| item | string \/ INode \/ ICombo | The ID or the item of the node\/combo to be updated |","232","| parentId | string | undefined | The ID of the new parent combo, undefined means updating the item with no parent |","233","","234","**Usage**","235","","236","```javascript","237","\/\/ move combo1 out of its parent combo. combo1 will be in the same hierarchy level as its old parent.","238","graph.updateComboTree('combo1')","239","","240","\/\/ move combo1 into combo2. combo1 will be the child of combo2.","241","graph.updateComboTree('combo1', 'combo2')","242","```","243","","244",""],"delete":["140","### graph.createCombo(combo, elements)","166","### graph.uncombo(combo)"]}]}},"8b79166e75702dce458427d419b870d9f575528e":{"changes":{"packages\/element\/package.json":"MODIFY","packages\/plugin\/package.json":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/pc\/package.json":"MODIFY","packages\/pc\/tests\/unit\/combo-edge-spec.ts":"MODIFY"},"diff":{"packages\/element\/package.json":[{"add":["63","    \"@antv\/g6-core\": \"*\","],"delete":["63","    \"@antv\/g6-core\": \"0.2.7\","]}],"packages\/plugin\/package.json":[{"add":["24","    \"@antv\/g6-core\": \"*\","],"delete":["24","    \"@antv\/g6-core\": \"0.2.7\","]}],"packages\/g6\/package.json":[{"add":["68","    \"@antv\/g6-pc\": \"*\""],"delete":["68","    \"@antv\/g6-pc\": \"0.2.7\""]}],"packages\/pc\/package.json":[{"add":["76","    \"@antv\/g6-core\": \"*\",","77","    \"@antv\/g6-plugin\": \"*\",","78","    \"@antv\/g6-element\": \"*\","],"delete":["76","    \"@antv\/g6-core\": \"0.2.7\",","77","    \"@antv\/g6-plugin\": \"0.2.7\",","78","    \"@antv\/g6-element\": \"0.2.7\","]}],"packages\/pc\/tests\/unit\/combo-edge-spec.ts":[{"add":["620","})"],"delete":["620","})"]}]}},"ca86f670e9847d01544e64a4edd0d70b099a47ca":{"changes":{"src\/shape\/nodes\/triangle.ts":"MODIFY","src\/shape\/shapeBase.ts":"MODIFY","src\/shape\/nodes\/ellipse.ts":"MODIFY","package.json":"MODIFY","src\/behavior\/collapse-expand-group.ts":"MODIFY","src\/shape\/nodes\/diamond.ts":"MODIFY","src\/shape\/edges\/polyline-util.ts":"MODIFY","tests\/unit\/shape\/edges\/polyline-spec.ts":"MODIFY","src\/shape\/nodes\/circle.ts":"MODIFY","src\/shape\/nodes\/star.ts":"MODIFY","src\/types\/index.ts":"MODIFY","src\/shape\/nodes\/modelRect.ts":"MODIFY"},"diff":{"src\/shape\/nodes\/triangle.ts":[{"add":["87","          draggable: true"],"delete":["88","","89","        image.set('capture', false);"]}],"src\/shape\/shapeBase.ts":[{"add":["61","      draggable: true,"],"delete":["61","      capture: false,"]}],"src\/shape\/nodes\/ellipse.ts":[{"add":["78","          draggable: true"],"delete":["79","","80","        image.set('capture', false);"]}],"package.json":[{"add":["52","    \"test-live\": \"DEBUG_MODE=1 jest --watch  .\/tests\/unit\/shape\/edges\/polyline-spec.ts\","],"delete":["52","    \"test-live\": \"DEBUG_MODE=1 jest --watch  .\/tests\/unit\/shape\/register-spec.ts\","]}],"src\/behavior\/collapse-expand-group.ts":[{"add":["22","      (trigger = this.trigger);"],"delete":["22","      ({ trigger } = this.trigger);"]}],"src\/shape\/nodes\/diamond.ts":[{"add":["74","          draggable: true"],"delete":["75","","76","        image.set('capture', false);"]}],"src\/shape\/edges\/polyline-util.ts":[{"add":["99","      x: point.x > bbox.x ? bbox.maxX : bbox.minX,","105","    y: point.y > bbox.y ? bbox.maxY : bbox.minY,"],"delete":["99","      x: point.x > bbox.centerX ? bbox.maxX : bbox.minX,","105","    y: point.y > bbox.centerY ? bbox.maxY : bbox.minY,"]}],"tests\/unit\/shape\/edges\/polyline-spec.ts":[{"add":["17","      defaultEdge: {","20","      defaultNode: {","21","        type: 'rect',","22","        size: [100, 50],","23","        style: {","24","          opacity: 0.1","25","        }","26","      }","28","    it.only('default polyline config', () => {","272","    it.only('label', () => {"],"delete":["17","      defaultNode: {","21","    it('default polyline config', () => {","265","    it('label', () => {"]}],"src\/shape\/nodes\/circle.ts":[{"add":["73","          draggable: true"],"delete":["74","","75","        image.set('capture', false);"]}],"src\/shape\/nodes\/star.ts":[{"add":["75","          draggable: true"],"delete":["76","","77","        image.set('capture', false);"]}],"src\/types\/index.ts":[{"add":["118","  shadowColor?: string;","119","  shadowBlur?: number;","120","  shadowOffsetX?: number;","121","  shadowOffsetY?: number;"],"delete":[]}],"src\/shape\/nodes\/modelRect.ts":[{"add":["117","          draggable: true","141","        group.addShape('image', {","151","          draggable: true","178","          draggable: true","293","          draggable: true","305","          draggable: true","314","            draggable: true","401","            draggable: true","432","            draggable: true"],"delete":["140","        const image = group.addShape('image', {","151","","152","        image.set('capture', false);","179","","180","        image.set('capture', false);"]}]}},"5defe9cf0087208c89f80f1503c1ffb85a701f89":{"changes":{"packages\/core\/src\/item\/item.ts":"MODIFY","packages\/core\/tests\/unit\/state\/image-state-spec.ts":"ADD","CHANGELOG.md":"MODIFY"},"diff":{"packages\/core\/src\/item\/item.ts":[{"add":["386","        if (key !== 'img' || isString(val)) {"],"delete":["386","        if (key !== 'img') {"]}],"packages\/core\/tests\/unit\/state\/image-state-spec.ts":[{"add":[],"delete":[]}],"CHANGELOG.md":[{"add":["5","- fix: image node with state changing, closes: #2923;"],"delete":[]}]}},"c25e1b367c8daa804a92d2f54dadf0a846f2fa04":{"changes":{"tests\/unit\/plugins\/minimap-spec.ts":"MODIFY","CHANGELOG.md":"MODIFY","src\/plugins\/minimap\/index.ts":"MODIFY"},"diff":{"tests\/unit\/plugins\/minimap-spec.ts":[{"add":["387","","388","","389","describe('minimap with hidden shape', () => {","390","  G6.registerNode('my-node', {","391","    drawShape: (cfg, group) => {","392","      const mainGroup = group.addGroup({","393","        id: 'main-group',","394","      });","395","      const rect = mainGroup.addShape('rect', {","396","        attrs: {","397","          fill: '#fff',","398","        },","399","        name: 'main-box',","400","      });","401","","402","      const shape = mainGroup.addShape('rect', {","403","        attrs: {","404","          fill: '#fff',","405","          stroke: '#FA8C16',","406","          radius: 4,","407","        },","408","        name: 'main-shape',","409","      });","410","","411","      if (cfg.open) {","412","        mainGroup.addShape('rect', {","413","          attrs: {","414","            x: 0,","415","            y: -4,","416","            width: 266,","417","            height: 4,","418","            fill: '#FA8C16',","419","            stroke: '#FA8C16',","420","            radius: [6, 6, 0, 0],","421","          },","422","          name: 'css-rect',","423","        });","424","      } else {","425","        mainGroup.addShape('rect', {","426","          attrs: {","427","            x: 0,","428","            y: 0,","429","            width: 4,","430","            height: 40,","431","            fill: '#FA8C16',","432","            stroke: '#FA8C16',","433","            radius: [6, 0, 0, 6],","434","          },","435","          name: 'css-rect',","436","        });","437","      }","438","      const text = mainGroup.addShape('text', {","439","        attrs: {","440","          text: '文本0',","441","          x: 14,","442","          y: 20,","443","          textAlign: 'left',","444","          textBaseline: 'middle',","445","          fill: '#666',","446","          fontSize: 14","447","        },","448","","449","        name: 'rect-shape',","450","        zIndex: 0,","451","      });","452","","453","      const detailGroup = group.addGroup({","454","        id: 'detail-group',","455","      });","456","      detailGroup.addShape('text', {","457","        attrs: {","458","          text: '文本1',","459","          x: 14,","460","          y: 46,","461","          textAlign: 'left',","462","          textBaseline: 'middle',","463","          fill: '#666',","464","        },","465","        name: 'desc',","466","      });","467","      detailGroup.addShape('text', {","468","        attrs: {","469","          text: '文本2',","470","          x: 14,","471","          y: 66,","472","          textAlign: 'left',","473","          textBaseline: 'middle',","474","          fill: '#666',","475","        },","476","        name: 'dbName',","477","      });","478","      detailGroup.addShape('text', {","479","        attrs: {","480","          text: '文本3',","481","          x: 134,","482","          y: 66,","483","          textAlign: 'left',","484","          textBaseline: 'middle',","485","          fill: '#666',","486","        },","487","        name: 'dbType',","488","      });","489","      detailGroup.addShape('image', {","490","        attrs: {","491","          x: 0,","492","          y: 60,","493","          width: 16,","494","          height: 16,","495","          img:","496","            'https:\/\/g.alicdn.com\/cm-design\/arms-trace\/1.0.155\/styles\/armsTrace\/images\/TAIR.png',","497","        },","498","        \/\/ must be assigned in G6 3.3 and later versions. it can be any value you want","499","        name: 'btn',","500","        data: cfg.detail,","501","      });","502","      if (cfg.open) {","503","        detailGroup.show();","504","        rect.attr({","505","          x: 0,","506","          y: 0,","507","          width: 280,","508","          height: 134,","509","        });","510","        shape.attr({","511","          x: 0,","512","          y: 0,","513","          width: 266,","514","          height: 134,","515","        });","516","      } else {","517","        detailGroup.hide();","518","        rect.attr({","519","          x: 0,","520","          y: 0,","521","          width: 280,","522","          height: 40,","523","        });","524","        shape.attr({","525","          x: 0,","526","          y: 0,","527","          width: 266,","528","          height: 40,","529","        });","530","      }","531","","532","      return rect;","533","    },","534","    update: undefined","535","  }, 'single-node');","536","","537","  it('svg renderer, minimap with hidden shape in custom node', (done) => {","538","    const minimap = new G6.Minimap({ size: [200, 200] });","539","    const graph = new G6.Graph({","540","      container: div,","541","      width: 500,","542","      height: 500,","543","      plugins: [minimap],","544","      renderer: 'svg',","545","      defaultNode: {","546","        type: 'my-node'","547","      }","548","    });","549","","550","    graph.addItem('node', { id: 'node1', label: 'text1', x: 50, y: 50, open: true });","551","    graph.addItem('node', { id: 'node2', label: 'text2', x: 120, y: 150, open: true });","552","    graph.addItem('node', { id: 'node3', label: 'text3', x: 150, y: 190 });","553","    graph.addItem('node', { id: 'node4', label: 'text4', x: 220, y: 250 });","554","","555","    setTimeout(() => {","556","      const minimapCanvas = minimap.getCanvas();","557","      const minimapRootGroup = minimapCanvas.get('children')[0];","558","      expect(minimapRootGroup.get('children')[3].get('children')[3].get('children')[1].get('visible')).toBe(false);","559","      done();","560","    }, 100);","561","  });","562","});"],"delete":[]}],"CHANGELOG.md":[{"add":["11","- fix: svg renderer minimap hidden elements probem, closes: #2174;"],"delete":[]}],"src\/plugins\/minimap\/index.ts":[{"add":["263","","268","","269","    \/\/ 当 renderer 是 svg，由于渲染引擎的 bug，这里需要将 visible 为 false 的元素手动隐藏","270","    const renderer = graph.get('renderer');","271","    if (renderer === SVG) {","272","      \/\/ 递归更新子元素","273","      this.updateVisible(clonedGroup);","274","    }","275","  }","276","","277","  \/\/ svg 在 canvas.add(clonedGroup) 之后会出现 visible 为 false 的元素被展示出来，需要递归更新","278","  private updateVisible(ele) {","279","    if (!ele.isGroup() && !ele.get('visible')) {","280","      ele.hide();","281","    } else {","282","      const children = ele.get('children');","283","      if (!children || !children.length) return;","284","      children.forEach(child => {","285","        if (!child.get('visible')) child.hide();","286","        this.updateVisible(child);","287","      });","288","    }"],"delete":[]}]}},"6e474ec623034234b920841c9d3fd3b7ecadd678":{"changes":{"packages\/core\/tests\/unit\/graph\/controller\/state-spec.ts":"MODIFY","packages\/element\/package.json":"MODIFY","packages\/plugin\/package.json":"MODIFY","packages\/pc\/src\/behavior\/drag-combo.ts":"MODIFY","packages\/site\/docs\/api\/shapeProperties.en.md":"MODIFY","packages\/pc\/src\/graph\/graph.ts":"MODIFY","packages\/pc\/src\/graph\/controller\/layout.ts":"MODIFY","packages\/plugin\/src\/menu\/index.ts":"MODIFY","packages\/core\/src\/graph\/controller\/item.ts":"MODIFY","packages\/site\/docs\/manual\/middle\/states\/defaultBehavior.zh.md":"MODIFY","packages\/core\/src\/element\/edge.ts":"MODIFY","packages\/core\/src\/global.ts":"MODIFY","packages\/pc\/package.json":"MODIFY","packages\/core\/tests\/unit\/graph\/controller\/mode-spec.ts":"MODIFY","packages\/core\/src\/util\/graphic.ts":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/core\/package.json":"MODIFY","packages\/site\/package.json":"MODIFY","CHANGELOG.md":"MODIFY","packages\/pc\/tests\/unit\/behavior\/drag-node-spec.ts":"MODIFY","packages\/site\/docs\/manual\/middle\/states\/defaultBehavior.en.md":"MODIFY","packages\/pc\/src\/global.ts":"MODIFY","packages\/g6\/src\/index.ts":"MODIFY","packages\/site\/docs\/api\/shapeProperties.zh.md":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/nodes\/react-node.zh.md":"MODIFY","packages\/core\/src\/graph\/controller\/mode.ts":"MODIFY","packages\/pc\/src\/behavior\/drag-node.ts":"MODIFY","packages\/core\/src\/graph\/graph.ts":"MODIFY"},"diff":{"packages\/core\/tests\/unit\/graph\/controller\/state-spec.ts":[{"add":["62","    expect(modes.default[0].type).toEqual('activate-relations');"],"delete":["62","    expect(modes.default).toEqual(['activate-relations']);"]}],"packages\/element\/package.json":[{"add":["2","  \"version\": \"0.3.8\",","63","    \"@antv\/g6-core\": \"4.3.8\",","89","    \"@antv\/g6\": \"4.3.8\""],"delete":["2","  \"version\": \"0.3.7\",","63","    \"@antv\/g6-core\": \"0.3.7\",","89","    \"@antv\/g6\": \"4.3.7\""]}],"packages\/plugin\/package.json":[{"add":["2","  \"version\": \"0.3.8\",","24","    \"@antv\/g6-core\": \"4.3.8\",","59","    \"@antv\/g6\": \"4.3.8\""],"delete":["2","  \"version\": \"0.3.7\",","24","    \"@antv\/g6-core\": \"0.3.7\",","59","    \"@antv\/g6\": \"4.3.7\""]}],"packages\/pc\/src\/behavior\/drag-combo.ts":[{"add":["79","    this.currentShouldEnd = true;","80","","189","  updatePositions(evt: IG6GraphEvent, restore: boolean) {","191","    if (this.enableDelegate || restore) {","193","        this.updateCombo(item, evt, restore);","201","    this.currentShouldEnd = this.shouldEnd.call(this, evt, item);","202","    this.updatePositions(evt, !this.currentShouldEnd);","203","    if (!this.currentShouldEnd || !item || !this.targets || item.destroyed) return;","237","","238","    const newParentCombo = comboId ? graph.findById(comboId) : undefined;","239","    this.currentShouldEnd = this.shouldEnd.call(this, evt, newParentCombo);","240","    this.updatePositions(evt, !this.currentShouldEnd);","241","    if (!this.currentShouldEnd) return;","242","","307","    if (this.currentShouldEnd) {","308","      this.updatePositions(evt);","309","    }","373","  updateCombo(item: ICombo, evt: IG6GraphEvent, restore: boolean) {","378","      this.updateSignleItem(param, evt, restore);","388","  updateSignleItem(item: Item, evt: IG6GraphEvent, restore: boolean) {","401","    let x: number = evt.x - origin.x + this.point[itemId].x;","402","    let y: number = evt.y - origin.y + this.point[itemId].y;","403","","404","    if (restore) {","405","      x += origin.x - evt.x;","406","      y += origin.y - evt.y;","407","    }","459","      this.delegateShape.set('capture', false);"],"delete":["187","  updatePositions(evt: IG6GraphEvent) {","189","    if (this.enableDelegate) {","191","        this.updateCombo(item, evt);","199","    if (!item || !this.targets || item.destroyed) {","200","      return;","201","    }","202","    this.updatePositions(evt);","232","    this.updatePositions(evt);","301","    this.updatePositions(evt);","365","  updateCombo(item: ICombo, evt: IG6GraphEvent) {","370","      this.updateSignleItem(param, evt);","380","  updateSignleItem(item: Item, evt: IG6GraphEvent) {","393","    const x: number = evt.x - origin.x + this.point[itemId].x;","394","    const y: number = evt.y - origin.y + this.point[itemId].y;"]}],"packages\/site\/docs\/api\/shapeProperties.en.md":[{"add":["460","### text","461","","462","<description> _String_ **optional** <\/description>","463","","464","The text content of the text shape.","465","","466",""],"delete":[]}],"packages\/pc\/src\/graph\/graph.ts":[{"add":["163","          try {","164","            imageData = context.getImageData(0, 0, width * pixelRatio, height * pixelRatio);","165","            compositeOperation = context.globalCompositeOperation;","166","            context.globalCompositeOperation = 'destination-over';","167","            context.fillStyle = backgroundColor;","168","            context.fillRect(0, 0, width, height);","169","          } catch (error) {","170","            console.error('Download image failed. Out of memory at ImageData creation');","171","          }","221","        try {","222","          imageData = context.getImageData(0, 0, width * pixelRatio, height * pixelRatio);","223","          compositeOperation = context.globalCompositeOperation;","224","          context.globalCompositeOperation = 'destination-over';","225","          context.fillStyle = backgroundColor;","226","          context.fillRect(0, 0, width, height);","227","        } catch (error) {","228","          console.error('Download image failed. Out of memory at ImageData creation');","229","        }","318","          try { ","319","            imageData = context.getImageData(0, 0, vWidth * pixelRatio, vHeight * pixelRatio);","320","            compositeOperation = context.globalCompositeOperation;","321","            context.globalCompositeOperation = 'destination-over';","322","            context.fillStyle = backgroundColor;","323","            context.fillRect(0, 0, vWidth, vHeight);","324","          } catch (error) {","325","            console.error('Download image failed. Out of memory at ImageData creation');","326","          }","437","    if (!dataURL || dataURL === 'data:') {","438","      console.error('Download image failed. The graph is too large or there is invalid attribute values in graph items');","439","      return;","440","    }"],"delete":["163","          imageData = context.getImageData(0, 0, width * pixelRatio, height * pixelRatio);","164","          compositeOperation = context.globalCompositeOperation;","165","          context.globalCompositeOperation = 'destination-over';","166","          context.fillStyle = backgroundColor;","167","          context.fillRect(0, 0, width, height);","217","        imageData = context.getImageData(0, 0, width * pixelRatio, height * pixelRatio);","218","        compositeOperation = context.globalCompositeOperation;","219","        context.globalCompositeOperation = 'destination-over';","220","        context.fillStyle = backgroundColor;","221","        context.fillRect(0, 0, width, height);","310","          imageData = context.getImageData(0, 0, vWidth * pixelRatio, vHeight * pixelRatio);","311","          compositeOperation = context.globalCompositeOperation;","312","          context.globalCompositeOperation = 'destination-over';","313","          context.fillStyle = backgroundColor;","314","          context.fillRect(0, 0, vWidth, vHeight);"]}],"packages\/pc\/src\/graph\/controller\/layout.ts":[{"add":["31","const GPU_LAYOUT_NAMES = ['fruchterman', 'gForce'];","32","const LAYOUT_PIPES_ADJUST_NAMES = ['force', 'grid', 'circular'];","111","      if (graph.get('destroyed')) return;","229","    \/\/ init hidden nodes","504","      if (!LAYOUT_PIPES_ADJUST_NAMES.includes(adjust)) {","539","    return GPU_LAYOUT_NAMES.includes(layoutName);"],"delete":["31","const GPULayoutNames = ['fruchterman', 'gForce'];","32","const LayoutPipesAdjustNames = ['force', 'grid', 'circular'];","228","    \/\/ init hidden ndoes","503","      if (!LayoutPipesAdjustNames.includes(adjust)) {","538","    const length = GPULayoutNames.length;","539","    for (let i = 0; i < length; i++) {","540","      if (GPULayoutNames[i] === layoutName) return true;","541","    }","542","    return false;"]}],"packages\/plugin\/src\/menu\/index.ts":[{"add":[],"delete":["100","    e.stopPropagation();"]}],"packages\/core\/src\/graph\/controller\/item.ts":[{"add":["176","          if (!item.destroyed) {","177","            graph.collapseCombo(item as ICombo);","178","          }"],"delete":["176","          graph.collapseCombo(item as ICombo);"]}],"packages\/site\/docs\/manual\/middle\/states\/defaultBehavior.zh.md":[{"add":["25","  - `shouldUpdate(e)`：是否允许当前被操作的 combo 被拖拽，参见下面示例；","26","  - `shouldEnd(e, newParent)`：【v4.3.8 后支持】是否允许当前被操作的 combo 完成拖拽。第二个参数为拖拽释放时检测到的新父 combo，若释放在画布上，则 `newParent` 为 `undefined`，参见下面示例。","53","        \/\/ shouldEnd【v4.3.8 后支持】","54","        shouldEnd: (e, newParent) => {","55","          \/\/ 不可以将 combo 释放到 combo1 上","56","          if (newParent && newParent.getModel().id === 'combo1') return false;","57","          return true;","58","        }"],"delete":["25","  - `shouldUpdate(e)`：是否允许当前被操作的 combo 被拖拽，参见下面示例。"]}],"packages\/core\/src\/element\/edge.ts":[{"add":["275","    let bgOffsetX = offsetX - backgroundWidth \/ 2;","276","    if (labelCfg.position === 'start') {","277","      bgOffsetX =  offsetX - padding[2];","278","    } else if (labelCfg.position === 'end') {","279","      bgOffsetX =  offsetX - backgroundWidth;","280","    }","281","","285","      bgOffsetX,","376","      const rect = this.drawLabelBg(cfg, group, label, labelStyle, rotate);","383","  drawLabelBg(cfg: ModelConfig, group: IGroup, label: IElement, labelStyle: any, rotate: number) {"],"delete":["278","      offsetX - backgroundWidth \/ 2,","283","    const rad = offsetStyle.angle;","284","","285","    if (rad > (1 \/ 2) * Math.PI && rad < ((3 * 1) \/ 2) * Math.PI) {","286","      offsetStyle = getLabelPosition(","287","        pathShape,","288","        pointPercent,","289","        offsetX + backgroundWidth \/ 2,","290","        offsetY + backgroundHeight \/ 2,","291","        autoRotate,","292","      );","293","    }","294","","381","      const rect = this.drawLabelBg(cfg, group, label);","388","  drawLabelBg(cfg: ModelConfig, group: IGroup, label: IElement) {","391","    const labelStyle = this.getLabelStyle!(cfg, labelCfg, group);","392","    const rotate = labelStyle.rotate;"]}],"packages\/core\/src\/global.ts":[{"add":["66","  version: '0.3.8',"],"delete":["66","  version: '0.3.7',"]}],"packages\/pc\/package.json":[{"add":["2","  \"version\": \"0.3.8\",","76","    \"@antv\/g6-core\": \"0.3.8\",","77","    \"@antv\/g6-plugin\": \"0.3.8\",","78","    \"@antv\/g6-element\": \"0.3.8\","],"delete":["2","  \"version\": \"0.3.7\",","76","    \"@antv\/g6-core\": \"0.3.7\",","77","    \"@antv\/g6-plugin\": \"0.3.7\",","78","    \"@antv\/g6-element\": \"0.3.7\","]}],"packages\/core\/tests\/unit\/graph\/controller\/mode-spec.ts":[{"add":["64","    expect(modeController.modes.dragx[0].type).toEqual('drag');"],"delete":["64","    expect(modeController.modes.dragx[0]).toEqual('drag');"]}],"packages\/core\/src\/util\/graphic.ts":[{"add":["276","    if (rad > 0.5 * PI && rad < 1.5 * PI) {"],"delete":["276","    if (rad > (1 \/ 2) * PI && rad < ((3 * 1) \/ 2) * PI) {"]}],"packages\/g6\/package.json":[{"add":["2","  \"version\": \"4.3.8\",","68","    \"@antv\/g6-pc\": \"4.3.8\""],"delete":["2","  \"version\": \"4.3.7\",","68","    \"@antv\/g6-pc\": \"0.3.7\""]}],"packages\/core\/package.json":[{"add":["2","  \"version\": \"0.3.8\","],"delete":["2","  \"version\": \"0.3.7\","]}],"packages\/site\/package.json":[{"add":["3","  \"version\": \"4.3.8\",","38","    \"@antv\/g6\": \"4.3.8\","],"delete":["3","  \"version\": \"4.3.7\",","38","    \"@antv\/g6\": \"4.3.7\","]}],"CHANGELOG.md":[{"add":["2","#### 4.3.8","3","","4","- fix: addBehavior with behavior string name, closes: #3020;","5","- fix: drag-node shouldEnd does not stop the dragging node behavior, closes: #3173;","6","- fix: drag-combo fails to merge combo with enableDelegate, closes: #3137;","7","- fix: uncombo does not trigger afterremoveitem event, closes: #3179;","8","- fix: error label background position when the edge label has position start, closes: #3129;","9","- fix: destroyed graph judgement, closes: #3203;","10","- fix: edge click event will not be triggered when the contextmenu is configure with trigger click, closes: #3201;","11","- feat: drag-combo with shouldEnd, closes: #3202;","12","- chore: information for failing to download image, closes: #2980;","13",""],"delete":[]}],"packages\/pc\/tests\/unit\/behavior\/drag-node-spec.ts":[{"add":["48","    graph.emit('canvas:drop', { x: 120, y: 120, item: node });","51","    console.log('matrix',matrix)","95","    graph.emit('canvas:drop', { x: 120, y: 120, item: node });","263","    graph.emit('canvas:drop', { x: 200, y: 200, item: node0 });","387","        graph.emit('canvas:drop', { x: 140, y: 140, item: source });","390","          path = edge","391","            .get('group')","392","            .get('children')[0]","393","            .attr('path');","394","          expect(path[0][1]).toEqual(97.77817459305203);","395","          expect(path[0][2]).toEqual(97.77817459305203);","396","          setTimeout(() => {","397","            expect(mathEqual(289, path[1][1])).toEqual(true);","398","            expect(mathEqual(300, path[1][2])).toEqual(true);","399","            graph.destroy();","400","            done()","401","          }, 50)"],"delete":["384","        path = edge","385","          .get('group')","386","          .get('children')[0]","387","          .attr('path');","388","        expect(path[0][1]).toEqual(97.77817459305203);","389","        expect(path[0][2]).toEqual(97.77817459305203);","391","          expect(mathEqual(289, path[1][1])).toEqual(true);","392","          expect(mathEqual(300, path[1][2])).toEqual(true);","393","          graph.destroy();","394","          done()"]}],"packages\/site\/docs\/manual\/middle\/states\/defaultBehavior.en.md":[{"add":["25","  - `shouldUpdate(e)`: Whether allow the behavior happens on the current item (e.item), see the example below for detail;","26","  - `shouldEnd(e, newParent)`: 【supported by v4.3.8 and later versions】Whether allow the behavior ends with current item (e.item) and the new parent combo. the second parameter is the detected new parent when drop. If it is dropped on the canvas, `newParent` is `undefined`, see the example below for detail.","53","        \/\/ shouldEnd【supported by v4.3.8 and later versions】","54","        shouldEnd: (e, newParent) => {","55","          \/\/ The combos are not allow to be drop on the combo with id combo1","56","          if (newParent && newParent.getModel().id === 'combo1') return false;","57","          return true;","58","        }"],"delete":["25","  - `shouldUpdate(e)`: Whether allow the behavior happens on the current item (e.item), see the example below for detail."]}],"packages\/pc\/src\/global.ts":[{"add":["9","  version: '0.3.8',"],"delete":["9","  version: '0.3.7',"]}],"packages\/g6\/src\/index.ts":[{"add":["2","G6.version = '4.3.8';","6","export const version = '4.3.8';"],"delete":["2","G6.version = '4.3.7';","6","export const version = '4.3.7';"]}],"packages\/site\/docs\/api\/shapeProperties.zh.md":[{"add":["462","### text","463","","464","<description> _String_ **optional** <\/description>","465","","466","文本文字内容。","467","","468",""],"delete":[]}],"packages\/site\/docs\/manual\/middle\/elements\/nodes\/react-node.zh.md":[{"add":["1","title: 使用 React 定义节点","120","展示了这样一个卡片的节点：","127","#### 图形 React 组件","129","定义 React 组件节点的时候，你不能使用任何的 hook 或者异步获取的逻辑，因为目前节点绘制需要是一个同步的过程，并且，我们推荐把所有状态以及数据信息放在节点本身 data 中，这样可以更方便的进行管理。在React组件节点中，所有的数据流动都应该是：节点数据 -> react 组件 props(cfg) -> 节点内容变化。组件本身需要是没有任何副作用的，所有对于节点数据的改变，都是基于 updateItem 的。","131","#### React 组件内部的布局","133","如果你没有做任何定位或者布局，所有布局都会按照正常的文档流，自上而下排布。为了让大家有更自由的布局方式， React 内部还支持了 flex 布局，你可以通过操作：`alignContent`,`alignItems`,`alignSelf`,`display`,`flex`,`flexBasis`,`flexGrow`,`flexShrink`,`flexDirection`,`flexWrap`,`height`,`width`,`justifyContent`,`margin`,`padding`,`maxHeight`,`maxWidth`,`minHeight`,`minWidth` 这几个属性来控制节点内部的布局。","135","#### 基于 React 组件 Shape 的事件处理","137","为了更加方便的控制节点，我们支持了在节点内部的某一个图形进行事件绑定(事件冒泡会在后续版本支持)，这些事件绑定函数都有统一的参数： `(evt: G6本身的事件, node: 事件发生的节点, shape: 事件发生的Shape, graph: 发出事件的graph)`，目前我们支持了大部分的 G6 事件：`onClick`,`onDBClick `,`onMouseEnter`,`onMouseMove `,`onMouseOut`,`onMouseOver `,`onMouseLeave`,`onMouseDown `,`onMouseUp `,`onDragStart `,`onDrag`,`onDragEnd `,`onDragEnter `,`onDragLeave `,`onDragOver`,`onDrop`,`onContextMenu`","139","⚠️ 注意： 使用了事件后，需要使用函数 `appenAutoShapeListener(graph)` 对所进行对图进行事件挂载才可以生效，该方法可以直接从 `@antv\/g6-react-node` 包引出。","141","#### 基于 React 组件 Shape 的简单动画（alpha）","143","为了更加方便给节点添加动画，所以我们内置了一些简单的动画来使用，希望能满足基本交互的效果，第一期我们暂时只推出了六种动画， `animation` 属性设置后就有动画，属性为空则停止动画。"],"delete":["1","title: 使用React直接定义节点","120","他展示了这样一个卡片的节点：","127","#### 图形React组件","129","定义React组件节点的时候，你不能使用任何的hook或者异步获取的逻辑，因为目前节点绘制需要是一个同步的过程，并且，我们推荐把所有状态以及数据信息放在节点本身data中，这样可以更方便的进行管理。在React组件节点中，所有的数据流动都应该是：节点数据 -> react组件props(cfg) -> 节点内容变化。组件本身需要是没有任何副作用的，所有对于节点数据的改变，都是基于updateItem的。","131","#### React组件内部的布局","133","如果你没有做任何定位或者布局，所有布局都会按照正常的文档流，自上而下排布。为了让大家有更自由的布局方式，React内部还支持了flex布局，你可以通过操作：`alignContent`,`alignItems`,`alignSelf`,`display`,`flex`,`flexBasis`,`flexGrow`,`flexShrink`,`flexDirection`,`flexWrap`,`height`,`width`,`justifyContent`,`margin`,`padding`,`maxHeight`,`maxWidth`,`minHeight`,`minWidth` 这几个属性来控制节点内部的布局。","135","#### 基于React组件Shape的事件处理","137","为了更加方便的控制节点，我们支持了在节点内部的某一个图形进行事件绑定(事件冒泡会在后续版本支持)，这些事件绑定函数都有统一的参数： `(evt: G6本身的事件, node: 事件发生的节点, shape: 事件发生的Shape, graph: 发出事件的graph)`，目前我们支持了大部分的G6事件：`onClick`,`onDBClick `,`onMouseEnter`,`onMouseMove `,`onMouseOut`,`onMouseOver `,`onMouseLeave`,`onMouseDown `,`onMouseUp `,`onDragStart `,`onDrag`,`onDragEnd `,`onDragEnter `,`onDragLeave `,`onDragOver`,`onDrop`,`onContextMenu`","139","⚠️ 注意： 使用了事件后，需要使用函数 `appenAutoShapeListener(graph)` 对所进行对图进行事件挂载才可以生效，该方法可以直接从`@antv\/g6-react-node`包引出。","141","#### 基于React组件Shape的简单动画（alpha）","143","为了更加方便给节点添加动画，所以我们内置了一些简单的动画来使用，希望能满足基本交互的效果，第一期我们暂时只推出了六种动画，`animation`属性设置后就有动画，属性为空则停止动画。"]}],"packages\/core\/src\/graph\/controller\/mode.ts":[{"add":["196","    this.formatModes();"],"delete":[]}],"packages\/pc\/src\/behavior\/drag-node.ts":[{"add":["97","    this.currentShouldEnd = true;","217","    if (!this.origin) {","290","    this.currentShouldEnd = this.shouldEnd.call(this, evt, item);","291","    \/\/ 若不允许结束，则将节点位置设置回初识位置。后面的逻辑仍需要执行","292","    this.updatePositions(evt, !this.currentShouldEnd);","293","    if (!this.currentShouldEnd || !this.validationCombo(item)) return;","326","    this.currentShouldEnd = this.shouldEnd.call(this, evt, undefined);","327","    \/\/ 若不允许结束，则将节点位置设置回初识位置。后面的逻辑仍需要执行","328","    this.updatePositions(evt, !this.currentShouldEnd);","329","    if (!this.targets || this.targets.length === 0 || !this.currentShouldEnd) return;","356","    const newParentCombo = comboId ? graph.findById(comboId) : undefined;","357","    this.currentShouldEnd = this.shouldEnd.call(this, evt, newParentCombo);","358","    \/\/ 若不允许结束，则将节点位置设置回初识位置。后面的逻辑仍需要执行","359","    this.updatePositions(evt, !this.currentShouldEnd);","360","    if (!this.currentShouldEnd) return;","361","","418","  updatePositions(evt: IG6GraphEvent, restore: boolean) {","432","      else if (!restore) this.targets.map(node => this.update(node, evt));","433","    } else this.targets.map(node => this.update(node, evt, restore));","440","  update(item: Item, evt: IG6GraphEvent, restore: boolean) {","451","    let x: number = evt.x - origin.x + this.point[nodeId].x;","452","    let y: number = evt.y - origin.y + this.point[nodeId].y;","453","","454","    if (restore) {","455","      x += origin.x - evt.x;","456","      y += origin.y - evt.y;","457","    }"],"delete":["216","    if (!this.origin || !this.shouldEnd.call(this, evt)) {","232","    this.updatePositions(evt);","290","    if (!this.validationCombo(item)) return;","291","","292","    this.updatePositions(evt);","293","","326","    if (!this.targets || this.targets.length === 0) return;","327","    this.updatePositions(evt);","350","    this.updatePositions(evt);","411","  updatePositions(evt: IG6GraphEvent) {","425","      else this.targets.map(node => this.update(node, evt));","426","    }","433","  update(item: Item, evt: IG6GraphEvent) {","444","    const x: number = evt.x - origin.x + this.point[nodeId].x;","445","    const y: number = evt.y - origin.y + this.point[nodeId].y;"]}],"packages\/core\/src\/graph\/graph.ts":[{"add":["1640","          this.emit('afterremoveitem', { item: comboItem });"],"delete":[]}]}},"c5cf67b7bb342d35c10bb1643be32f7a2319b20e":{"changes":{"packages\/element\/package.json":"MODIFY","packages\/plugin\/package.json":"MODIFY","packages\/pc\/src\/behavior\/drag-combo.ts":"MODIFY","packages\/pc\/src\/behavior\/scroll-canvas.ts":"MODIFY","packages\/pc\/src\/graph\/graph.ts":"MODIFY","packages\/pc\/src\/behavior\/lasso-select.ts":"MODIFY","packages\/pc\/src\/graph\/controller\/layout.ts":"MODIFY","packages\/pc\/src\/behavior\/create-edge.ts":"MODIFY","packages\/pc\/src\/behavior\/zoom-canvas.ts":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/methods\/lock-node.en.md":"MODIFY","packages\/core\/src\/graph\/controller\/item.ts":"MODIFY","packages\/site\/docs\/manual\/middle\/elements\/methods\/lock-node.zh.md":"MODIFY","packages\/site\/docs\/manual\/middle\/states\/defaultBehavior.zh.md":"MODIFY","packages\/core\/src\/graph\/controller\/view.ts":"MODIFY","packages\/pc\/src\/behavior\/click-select.ts":"MODIFY","packages\/core\/src\/global.ts":"MODIFY","packages\/site\/docs\/api\/Behavior.zh.md":"MODIFY","packages\/site\/examples\/case\/graphDemos\/demo\/sequence.js":"ADD","packages\/pc\/package.json":"MODIFY","packages\/pc\/src\/behavior\/collapse-expand.ts":"MODIFY","packages\/plugin\/src\/minimap\/index.ts":"MODIFY","packages\/pc\/src\/behavior\/activate-relations.ts":"MODIFY","packages\/g6\/package.json":"MODIFY","packages\/site\/docs\/api\/Behavior.en.md":"MODIFY","packages\/site\/examples\/case\/graphDemos\/demo\/meta.json":"MODIFY","packages\/pc\/src\/behavior\/tooltip-base.ts":"MODIFY","packages\/core\/package.json":"MODIFY","packages\/pc\/src\/behavior\/brush-select.ts":"MODIFY","packages\/pc\/tests\/unit\/graph\/tree-graph-spec.ts":"MODIFY","packages\/site\/package.json":"MODIFY","packages\/plugin\/tests\/unit\/minimap-spec.ts":"MODIFY","CHANGELOG.md":"MODIFY","packages\/pc\/src\/interface\/graph.ts":"MODIFY","packages\/site\/docs\/manual\/middle\/states\/defaultBehavior.en.md":"MODIFY","packages\/pc\/src\/behavior\/drag-canvas.ts":"MODIFY","packages\/pc\/src\/global.ts":"MODIFY","packages\/g6\/src\/index.ts":"MODIFY","packages\/pc\/src\/graph\/tree-graph.ts":"MODIFY","packages\/site\/docs\/api\/graphFunc\/watermarker.zh.md":"MODIFY","packages\/pc\/src\/behavior\/drag-node.ts":"MODIFY","packages\/site\/docs\/api\/graphFunc\/watermarker.en.md":"MODIFY","packages\/site\/docs\/manual\/middle\/states\/custom-behavior.en.md":"MODIFY","packages\/site\/docs\/manual\/middle\/states\/custom-behavior.zh.md":"MODIFY"},"diff":{"packages\/element\/package.json":[{"add":["2","  \"version\": \"0.7.16\",","63","    \"@antv\/g6-core\": \"0.7.16\","],"delete":["2","  \"version\": \"0.7.15\",","63","    \"@antv\/g6-core\": \"0.7.15\","]}],"packages\/plugin\/package.json":[{"add":["2","  \"version\": \"0.7.16\",","24","    \"@antv\/g6-core\": \"0.7.16\",","25","    \"@antv\/g6-element\": \"0.7.16\","],"delete":["2","  \"version\": \"0.7.15\",","24","    \"@antv\/g6-core\": \"0.7.15\",","25","    \"@antv\/g6-element\": \"0.7.15\","]}],"packages\/pc\/src\/behavior\/drag-combo.ts":[{"add":["65","    if (!this.shouldUpdate(evt, this)) {","209","    this.currentShouldEnd = this.shouldEnd(evt, item, this);","247","    this.currentShouldEnd = this.shouldEnd(evt, newParentCombo, this);"],"delete":["65","    if (!this.shouldUpdate.call(this, evt)) {","209","    this.currentShouldEnd = this.shouldEnd.call(this, evt, item);","247","    this.currentShouldEnd = this.shouldEnd.call(this, evt, newParentCombo);"]}],"packages\/pc\/src\/behavior\/scroll-canvas.ts":[{"add":["15","      allowDragOnItem: true","27","    const target = ev.target;","28","    const targetIsCanvas = target && target.isCanvas && target.isCanvas();","29","    if (!this.allowDragOnItem && !targetIsCanvas) return;"],"delete":[]}],"packages\/pc\/src\/graph\/graph.ts":[{"add":["87","        window.devicePixelRatio = pixelRatio;","507","  public setImageWaterMarker(imgURL: string | undefined = Global.waterMarkerImage, config?: WaterMarkerConfig) {","522","    if (!imgURL) {","523","      const dom = compatible ? container : document.querySelector('.g6-graph-watermarker') as HTMLElement;","524","      if (dom) dom.style.cssText = undefined;","525","      if (canvas) canvas.clear();","526","      return;","527","    }","528","","539","        window.devicePixelRatio = pixelRatio;","543","    } else {","544","      canvas.clear();","591","  public setTextWaterMarker(texts: string[] | string | undefined, config?: WaterMarkerConfig) {","606","    if (!texts?.length) {","607","      const dom = compatible ? container : document.querySelector('.g6-graph-watermarker') as HTMLElement;","608","      if (dom) dom.style.cssText = undefined;","609","      if (canvas) canvas.clear();","610","      return;","611","    }","612","","623","        window.devicePixelRatio = pixelRatio;","627","    } else {","628","      canvas.clear();","645","    let displayTexts = isString(texts) ? [texts] : texts;","646","    for (let i = displayTexts.length - 1; i >= 0; i--) {","648","      ctx.fillText(displayTexts[i], x, y + i * lineHeight);"],"delete":["506","  public setImageWaterMarker(imgURL: string = Global.waterMarkerImage, config?: WaterMarkerConfig) {","580","  public setTextWaterMarker(texts: string[], config?: WaterMarkerConfig) {","624","    for (let i = texts.length - 1; i >= 0; i--) {","626","      ctx.fillText(texts[i], x, y + i * lineHeight);"]}],"packages\/pc\/src\/behavior\/lasso-select.ts":[{"add":["172","        if (shouldUpdate(node, 'select', this)) {","192","            shouldUpdate(edge, 'select', this)"],"delete":["172","        if (shouldUpdate(node, 'select')) {","192","            shouldUpdate(edge, 'select')"]}],"packages\/pc\/src\/graph\/controller\/layout.ts":[{"add":["259","    \/\/ the layout does not support GPU, will run in CPU","260","    if (enableGPU && !this.hasGPUVersion(layoutType)) {","261","      console.warn(","262","        `The '${layoutType}' layout does not support GPU calculation for now, it will run in CPU.`,","263","      );","264","      enableGPU = false;","265","    }"],"delete":[]}],"packages\/pc\/src\/behavior\/create-edge.ts":[{"add":["79","      if (!self.shouldEnd(ev, self)) return;","86","        }, self);","127","      if (!self.shouldBegin(ev, self)) return;","134","        }, self);"],"delete":["79","      if (!self.shouldEnd.call(self, ev)) return;","86","        });","127","      if (!self.shouldBegin.call(self, ev)) return;","134","        });"]}],"packages\/pc\/src\/behavior\/zoom-canvas.ts":[{"add":["54","    if (this.shouldBegin && !this.shouldBegin(evt, this)) {","150","    if (this.shouldBegin && !this.shouldBegin(e, this)) {","154","    if (!this.shouldUpdate(e, this)) {"],"delete":["54","    if (this.shouldBegin && !this.shouldBegin.call(this, evt)) {","150","    if (this.shouldBegin && !this.shouldBegin.call(this, e)) {","154","    if (!this.shouldUpdate.call(this, e)) {"]}],"packages\/site\/docs\/manual\/middle\/elements\/methods\/lock-node.en.md":[{"add":["83","      if (this.shouldBegin(e, this)) {","93","    if (this.shouldUpdate(e, this)) {","108","    if (this.shouldEnd(e, this)) {","180","    if (!this.shouldUpdate(e, this)) {"],"delete":["83","      if (this.shouldBegin.call(this, e)) {","93","    if (this.shouldUpdate.call(this, e)) {","108","    if (this.shouldEnd.call(this, e)) {","180","    if (!this.shouldUpdate.call(this, e)) {"]}],"packages\/core\/src\/graph\/controller\/item.ts":[{"add":["408","      if (!edge?.destroyed && !edge?.getSource()?.destroyed && !edge?.getTarget()?.destroyed) {"],"delete":["408","      if (edge && !edge.destroyed) {"]}],"packages\/site\/docs\/manual\/middle\/elements\/methods\/lock-node.zh.md":[{"add":["83","      if (this.shouldBegin(e, this)) {","93","    if (this.shouldUpdate(e, this)) {","108","    if (this.shouldEnd(e, this)) {","180","    if (!this.shouldUpdate(e, this)) {"],"delete":["83","      if (this.shouldBegin.call(this, e)) {","93","    if (this.shouldUpdate.call(this, e)) {","108","    if (this.shouldEnd.call(this, e)) {","180","    if (!this.shouldUpdate.call(this, e)) {"]}],"packages\/site\/docs\/manual\/middle\/states\/defaultBehavior.zh.md":[{"add":["25","  - `shouldUpdate(e, self)`：是否允许当前被操作的 combo 被拖拽，参见下面示例。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldEnd` 中访问该实例；","26","  - `shouldEnd(e, newParent, self)`：【v4.3.8 后支持】是否允许当前被操作的 combo 完成拖拽。第二个参数为拖拽释放时检测到的新父 combo，若释放在画布上，则 `newParent` 为 `undefined`，参见下面示例。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldEnd` 中访问该实例。","48","        shouldUpdate: (e, self) => {","54","        shouldEnd: (e, newParent, self) => {","115","  - `shouldBegin(e, self)`：是否允许触发该操作。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldBegin` 中访问该实例；","166","  - `allowDragOnItem`：是否允许用户在节点\/边\/ combo 上拖拽时响应，默认为 false；","213","  - `shouldUpdate(e, self)`：是否允许发生缩放。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldBegin` 中访问该实例；","240","  - `shouldBegin(e, self)`：是否允许当前被操作的节点被拖动。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldBegin` 中访问该实例；","241","  - `shouldUpdate(e, self)`：是否允许当前被操作的节点在拖动过程中更新自身\/ delegate 位置。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldUpdate` 中访问该实例；","242","  - `shouldEnd(e, targetItem: Item, self)`：是否允许当前被操作的节点在拖拽结束时更新位置。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldEnd` 中访问该实例。","265","        shouldBegin: (e, self) => {","288","  - `shouldBegin(e, self)`：是否允许该 behavior 发生，参考下面示例。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldBegin` 中访问该实例；","289","  - `shouldUpdate(e, self)`：是否允许对该 behavior 发生状态响应，参考下面示例。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldUpdate` 中访问该实例。","328","        shouldBegin: (e, self) => {","336","        shouldUpdate: (e, self) => {","366","  - `shouldBegin(e, self)`：是否允许 toolip 出现。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldBegin` 中访问该实例；","367","  - `shouldUpdate(e, self)`：是否允许 toolip 内容更新。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldUpdate` 中访问该实例。","411","  - `shouldBegin(e, self)`：是否允许 toolip 出现。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldBegin` 中访问该实例；","412","  - `shouldUpdate(e, self)`：是否允许 toolip 内容更新。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldUpdate` 中访问该实例。","425","  - `shouldUpdate(item: Item, { event: G6Event, action: 'deactivate' | 'activate' }, self)`：是否允许该 behavior 发生。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldUpdate` 中访问该实例。","491","  - `shouldUpdate(item: Item, action: string, self)`：是否允许对该 behavior 发生，参考下面示例。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldUpdate` 中访问该实例。","528","        shouldUpdate: (e, self) => {","600","  - `shouldUpdate(item: Item, action: string, self)`：是否允许对该 behavior 发生，参考下面示例。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldUpdate` 中访问该实例；","601","  - `shouldDeselect({ action: string, nodes: INode[], edges: IEdge[] })`：当前条件下是否允许取消选中。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldDeselect` 中访问该实例。","616","  - `onChange(item: Item, collapsed: boolean, self)`：收起或展开的回调函数。警告：V3.1.2 版本中将移除；","617","  - `shouldBegin(e, collapsed: boolean, self)`：是否允许该 behavior 在当前操作的 item 上发生。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldBegin` 中访问该实例；","618","  - `shouldUpdate(e, collapsed: boolean, self)`：更新节点 `collapsed` 字段后，是否允许调用 `onChange` 以及重新布局。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldUpdate` 中访问该实例；","638","        shouldBegin: (e, self) => {","666","  - `shouldBegin(e, self)`：是否允许当前被操作的条件下开始创建边。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldBegin` 中访问该实例；","667","  - `shouldEnd(e, self)`：是否允许当前被操作的条件下结束创建边。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldEnd` 中访问该实例；"],"delete":["25","  - `shouldUpdate(e)`：是否允许当前被操作的 combo 被拖拽，参见下面示例；","26","  - `shouldEnd(e, newParent)`：【v4.3.8 后支持】是否允许当前被操作的 combo 完成拖拽。第二个参数为拖拽释放时检测到的新父 combo，若释放在画布上，则 `newParent` 为 `undefined`，参见下面示例。","48","        shouldUpdate: (e) => {","54","        shouldEnd: (e, newParent) => {","115","  - `shouldBegin(e)`：是否允许触发该操作；","212","  - `shouldUpdate(e)`：是否允许发生缩放；","239","  - `shouldBegin(e)`：是否允许当前被操作的节点被拖动；","240","  - `shouldUpdate(e)`：是否允许当前被操作的节点在拖动过程中更新自身\/ delegate 位置；","241","  - `shouldEnd(e)`：是否允许当前被操作的节点在拖拽结束时更新位置。","264","        shouldBegin: (e) => {","287","  - `shouldBegin(e)`：是否允许该 behavior 发生，参考下面示例；","288","  - `shouldUpdate(e)`：是否允许对该 behavior 发生状态响应，参考下面示例。","327","        shouldBegin: (e) => {","335","        shouldUpdate: (e) => {","365","  - `shouldBegin(e)`：是否允许 toolip 出现；","366","  - `shouldUpdate(e)`：是否允许 toolip 内容更新。","410","  - `shouldBegin(e)`：是否允许 toolip 出现；","411","  - `shouldUpdate(e)`：是否允许 toolip 内容更新。","424","  - `shouldUpdate(e)`：是否允许该 behavior 发生。","490","  - `shouldUpdate(e)`：是否允许对该 behavior 发生，参考下面示例。","527","        shouldUpdate: (e) => {","599","  - `shouldUpdate(e)`：是否允许对该 behavior 发生，参考下面示例。","614","  - `onChange`：收起或展开的回调函数。警告：V3.1.2 版本中将移除；","615","  - `shouldBegin(e)`：是否允许该 behavior 在当前操作的 item 上发生。","635","        shouldBegin: (e) => {","663","  - `shouldBegin(e)`：是否允许当前被操作的条件下开始创建边；","664","  - `shouldEnd(e)`：是否允许当前被操作的条件下结束创建边；"]}],"packages\/core\/src\/graph\/controller\/view.ts":[{"add":["35","    let bbox;","36","","37","    \/\/ if reaches optimizeThreshold, fitView according to the 4 corner nodes","38","    const nodes = graph.getNodes();","39","    if (nodes.length > graph.get('optimizeThreshold')) {","40","      let minX = Infinity;","41","      let minY = Infinity;","42","      let maxX = -Infinity;","43","      let maxY = -Infinity;","44","      nodes.forEach(node => {","45","        const { x, y } = node.getModel();","46","        if (minX > x) minX = x;","47","        if (minY > y) minY = y;","48","        if (maxX < x) maxX = x;","49","        if (maxY < y) maxY = y;","50","      });","51","      const matrix = group.getMatrix() || [1, 0, 0, 0, 1, 0, 0, 0, 1];","52","      const { x: transMinX, y: transMinY } = applyMatrix({ x: minX, y: minY }, matrix);","53","      const { x: transMaxX, y: transMaxY } = applyMatrix({ x: maxX, y: maxY }, matrix);","54","      bbox = {","55","        minX: transMinX,","56","        maxX: transMaxX,","57","        minY: transMinY,","58","        maxY: transMaxY,","59","        width: transMaxX - transMinX,","60","        height: transMaxY - transMinY,","61","        x: transMinX,","62","        y: transMinY","63","      }","64","    } else {","65","      bbox = group.getCanvasBBox();","66","    }","148","    let bbox;","149","","150","    \/\/ if reaches optimizeThreshold, fitView according to the 4 corner nodes","151","    const nodes = graph.getNodes();","152","    if (nodes.length > graph.get('optimizeThreshold')) {","153","      let minX = Infinity;","154","      let minY = Infinity;","155","      let maxX = -Infinity;","156","      let maxY = -Infinity;","157","      nodes.forEach(node => {","158","        const { x, y } = node.getModel();","159","        if (minX > x) minX = x;","160","        if (minY > y) minY = y;","161","        if (maxX < x) maxX = x;","162","        if (maxY < y) maxY = y;","163","      });","164","      bbox = {","165","        minX, maxX, minY, maxY,","166","        width: maxX - minX,","167","        height: maxY - minY,","168","        x: minX,","169","        y: minY","170","      }","171","    } else {","172","      bbox = group.getCanvasBBox();","173","    }","177","    const viewCenter = this.getViewCenter();","219","    let bbox;","220","","221","    \/\/ if reaches optimizeThreshold, fitView according to the 4 corner nodes","222","    const nodes = graph.getNodes();","223","    if (nodes.length > graph.get('optimizeThreshold')) {","224","      let minX = Infinity;","225","      let minY = Infinity;","226","      let maxX = -Infinity;","227","      let maxY = -Infinity;","228","      nodes.forEach(node => {","229","        const { x, y } = node.getModel();","230","        if (minX > x) minX = x;","231","        if (minY > y) minY = y;","232","        if (maxX < x) maxX = x;","233","        if (maxY < y) maxY = y;","234","      });","235","      bbox = {","236","        minX, maxX, minY, maxY,","237","        width: maxX - minX,","238","        height: maxY - minY,","239","        x: minX,","240","        y: minY","241","      }","242","    } else {","243","      bbox = group.getCanvasBBox();","244","    }","245","","249","    const viewCenter = this.getViewCenter();"],"delete":["35","    const bbox = group.getCanvasBBox();","117","    const bbox = group.getCanvasBBox();","120","    const viewCenter = this.getViewCenter();","163","    const bbox = group.getCanvasBBox();","166","    const viewCenter = this.getViewCenter();"]}],"packages\/pc\/src\/behavior\/click-select.ts":[{"add":["53","    if (!shouldBegin(evt, self)) {","98","      if (shouldUpdate(evt, self)) {","114","      if (shouldUpdate(evt, self)) {","133","    if (!shouldBegin(evt, this)) {"],"delete":["53","    if (!shouldBegin.call(self, evt)) {","98","      if (shouldUpdate.call(self, evt)) {","114","      if (shouldUpdate.call(self, evt)) {","133","    if (!shouldBegin.call(this, evt)) {"]}],"packages\/core\/src\/global.ts":[{"add":["66","  version: '0.7.16',"],"delete":["66","  version: '0.7.15',"]}],"packages\/site\/docs\/api\/Behavior.zh.md":[{"add":["156","### BehaviorOption.shouldBegin(evt, self)","158","是否阻止行为发生，默认返回 `true`，不阻止行为，需要在处理逻辑中自行调用。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldBegin` 中访问该实例。","164","  shouldBegin(evt, self) {","171","### BehaviorOption.shouldUpdate(evt, self)","173","是否更新数据及更改视图，默认返回 `true`，允许更新，如果返回 `false`，则不更新数据和视图。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldUpdate` 中访问该实例。","187","        shouldUpdate: (e, self) => {","199","### BehaviorOption.shouldEnd(evt, self)","201","是否结束行为，默认返回 `true`。**v4.7.16 起支持** 最后一个参数为 behavior 实例，方便在箭头函数定义的 `shouldEnd` 中访问该实例。"],"delete":["156","### BehaviorOption.shouldBegin(evt)","158","是否阻止行为发生，默认返回 `true`，不阻止行为，需要在处理逻辑中自行调用。","164","  shouldBegin() {","171","### BehaviorOption.shouldUpdate(evt)","173","是否更新数据及更改视图，默认返回 `true`，允许更新，如果返回 `false`，则不更新数据和视图。","187","        shouldUpdate: (e) => {","199","### BehaviorOption.shouldEnd(evt)","201","是否结束行为，默认返回 `true`。"]}],"packages\/site\/examples\/case\/graphDemos\/demo\/sequence.js":[{"add":[],"delete":[]}],"packages\/pc\/package.json":[{"add":["2","  \"version\": \"0.7.16\",","77","    \"@antv\/g6-core\": \"0.7.16\",","78","    \"@antv\/g6-element\": \"0.7.16\",","79","    \"@antv\/g6-plugin\": \"0.7.16\","],"delete":["2","  \"version\": \"0.7.15\",","77","    \"@antv\/g6-core\": \"0.7.15\",","78","    \"@antv\/g6-element\": \"0.7.15\",","79","    \"@antv\/g6-plugin\": \"0.7.15\","]}],"packages\/pc\/src\/behavior\/collapse-expand.ts":[{"add":["11","      onChange() { },","46","    if (!this.shouldBegin(e, collapsed, this)) {","52","    if (!this.shouldUpdate(e, collapsed, this)) {","55","    this.onChange(item, collapsed, this);"],"delete":["11","      onChange() {},","46","    if (!this.shouldBegin(e, collapsed)) {","52","    if (!this.shouldUpdate(e, collapsed)) {","55","    this.onChange(item, collapsed);"]}],"packages\/plugin\/src\/minimap\/index.ts":[{"add":["24","  hideEdge?: boolean; \/\/ hide the edges on the minimap to enhance the performance","46","      hideEdge: false,","80","    const isFireFox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;","81","    const isSafari = navigator.userAgent.toLowerCase().indexOf('safari') > -1;","91","        draggable=${isSafari || isFireFox ? false : true}","112","    const dragstartevent = isSafari || isFireFox ? 'mousedown' : 'dragstart';","114","      dragstartevent,","155","    const dragListener = (e: GraphEvent) => {","156","      if (!dragging || isNil(e.clientX) || isNil(e.clientY)) {","157","        return;","158","      }","159","","160","      let dx = x - e.clientX;","161","      let dy = y - e.clientY;","162","","163","      \/\/ 若视口移动到最左边或最右边了,仅移动到边界","164","      if (left - dx < 0 || left - dx + width >= size[0]) {","165","        dx = 0;","166","      }","167","","168","      \/\/ 若视口移动到最上或最下边了，仅移动到边界","169","      if (top - dy < 0 || top - dy + height >= size[1]) {","170","        dy = 0;","171","      }","172","","173","      left -= dx;","174","      top -= dy;","175","","176","      \/\/ 先移动视口，避免移动到边上以后出现视口闪烁","177","      modifyCSS(viewport, {","178","        left: `${left}px`,","179","        top: `${top}px`,","180","      });","181","","182","      \/\/ graph 移动需要偏移量 dx\/dy * 缩放比例才会得到正确的移动距离","183","      graph!.translate((dx * zoom) \/ ratio, (dy * zoom) \/ ratio);","184","","185","      x = e.clientX;","186","      y = e.clientY;","187","    }","188","    if (!isSafari && !isFireFox) {","189","      viewport.addEventListener(","190","        'drag',","191","        dragListener,","192","        false,","193","      );","194","    }","195","","196","    const dragendListener = () => {","197","      dragging = false;","198","      cfgs.refresh = true;","199","    };","200","    const dragendevent = isSafari || isFireFox ? 'mouseup' : 'dragend';","202","      dragendevent,","203","      dragendListener,","207","    containerDOM.addEventListener('mouseleave', dragendListener);","208","    containerDOM.addEventListener('mouseup', dragendListener);","209","","210","    if (isSafari || isFireFox) {","211","      containerDOM.addEventListener(","212","        'mousemove',","213","        dragListener,","214","        false,","215","      );","216","    }","291","    let clonedGroup;","292","    if (this.get('hideEdge')) {","293","      clonedGroup = canvas.addGroup();","294","      graphGroup.get('children').forEach(group => {","295","        if (group.get('id').includes('-edge')) return;","296","        clonedGroup.add(group.clone());","297","      })","298","    } else {","299","      clonedGroup = graphGroup.clone();","300","      clonedGroup.resetMatrix();","301","      canvas.add(clonedGroup);","302","    }","334","    if (!this.get('hideEdge')) {","335","      each(graph!.getEdges(), (edge) => {","336","        this.updateOneEdgeKeyShape(edge, group);","337","      });","338","    }","420","      mappedItem.toFront();","447","    if (!this.get('hideEdge')) {","448","      each(graph!.getEdges(), (edge) => {","449","        this.updateOneEdgeKeyShape(edge, group);","450","      });","451","    }","531","      mappedItem.toFront();"],"delete":["87","        draggable=true","90","    const isFireFox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;","110","      'dragstart',","152","      isFireFox ? 'dragover' : 'drag',","153","      (e: GraphEvent) => {","154","        if (!dragging || isNil(e.clientX) || isNil(e.clientY)) {","155","          return;","156","        }","157","","158","        let dx = x - e.clientX;","159","        let dy = y - e.clientY;","160","","161","        \/\/ 若视口移动到最左边或最右边了,仅移动到边界","162","        if (left - dx < 0 || left - dx + width >= size[0]) {","163","          dx = 0;","164","        }","165","","166","        \/\/ 若视口移动到最上或最下边了，仅移动到边界","167","        if (top - dy < 0 || top - dy + height >= size[1]) {","168","          dy = 0;","169","        }","170","","171","        left -= dx;","172","        top -= dy;","173","","174","        \/\/ 先移动视口，避免移动到边上以后出现视口闪烁","175","        modifyCSS(viewport, {","176","          left: `${left}px`,","177","          top: `${top}px`,","178","        });","179","","180","        \/\/ graph 移动需要偏移量 dx\/dy * 缩放比例才会得到正确的移动距离","181","        graph!.translate((dx * zoom) \/ ratio, (dy * zoom) \/ ratio);","182","","183","        x = e.clientX;","184","        y = e.clientY;","185","      },","189","    viewport.addEventListener(","190","      'dragend',","191","      () => {","192","        dragging = false;","193","        cfgs.refresh = true;","194","      },","195","      false,","196","    );","270","    const clonedGroup = graphGroup.clone();","271","","272","    clonedGroup.resetMatrix();","273","","275","    canvas.add(clonedGroup);","307","    each(graph!.getEdges(), (edge) => {","308","      this.updateOneEdgeKeyShape(edge, group);","309","    });","417","    each(graph!.getEdges(), (edge) => {","418","      this.updateOneEdgeKeyShape(edge, group);","419","    });"]}],"packages\/pc\/src\/behavior\/activate-relations.ts":[{"add":["85","      if (!self.shouldUpdate(e.item, { event: e, action: 'activate' }, self)) {","217","      if (!self.shouldUpdate(e.item, { event: e, action: 'deactivate' }, self)) return;"],"delete":["85","      if (!self.shouldUpdate(e.item, { event: e, action: 'activate' })) {","217","      if (!self.shouldUpdate(e.item, { event: e, action: 'deactivate' })) return;"]}],"packages\/g6\/package.json":[{"add":["2","  \"version\": \"4.7.16\",","68","    \"@antv\/g6-pc\": \"0.7.16\""],"delete":["2","  \"version\": \"4.7.15\",","68","    \"@antv\/g6-pc\": \"0.7.15\""]}],"packages\/site\/docs\/api\/Behavior.en.md":[{"add":["156","### BehaviorOption.shouldBegin(evt, self)","158","Whether to prevent the behavior. Return `true` by default, which means do not prevent the behavior. User should call it by themselves. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldBegin`.","164","  shouldBegin(evt, self) {","171","### BehaviorOption.shouldUpdate(evt, self)","173","Whether to update the data and the view. Returns `true` by default, which means allow updating. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldUpdate`.","187","        shouldUpdate: (e, self) => {","199","### BehaviorOption.shouldEnd(evt, self)","201","Whether to end the behavior. Returns `true` by default. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldEnd`."],"delete":["156","### BehaviorOption.shouldBegin(evt)","158","Whether to prevent the behavior. Return `true` by default, which means do not prevent the behavior. User should call it by themselves.","164","  shouldBegin() {","171","### BehaviorOption.shouldUpdate(evt)","173","Whether to update the data and the view. Returns `true` by default, which means allow updating.","187","        shouldUpdate: (e) => {","199","### BehaviorOption.shouldEnd(evt)","201","Whether to end the behavior. Returns `true` by default."]}],"packages\/site\/examples\/case\/graphDemos\/demo\/meta.json":[{"add":["69","    },","70","    {","71","      \"filename\": \"sequence.js\",","72","      \"title\": {","73","        \"zh\": \"时序图\",","74","        \"en\": \"Sequence Graph\"","75","      },","76","      \"screenshot\": \"https:\/\/mdn.alipayobjects.com\/huamei_qa8qxu\/afts\/img\/A*2eo7So4AY4IAAAAAAAAAAAAADmJ7AQ\"","79","}"],"delete":["71","}"]}],"packages\/pc\/src\/behavior\/tooltip-base.ts":[{"add":["11","    if (!this.shouldUpdate(e, this)) {","21","    if (!this.shouldEnd(e, this)) {","51","    if (!shouldBegin(e, this)) {"],"delete":["11","    if (!this.shouldUpdate(e)) {","21","    if (!this.shouldEnd(e)) {","51","    if (!shouldBegin(e)) {"]}],"packages\/core\/package.json":[{"add":["2","  \"version\": \"0.7.16\","],"delete":["2","  \"version\": \"0.7.15\","]}],"packages\/pc\/src\/behavior\/brush-select.ts":[{"add":["16","      onSelect() { },","17","      onDeselect() { },","132","    const bbox = item.getBBox();","133","    return (","134","      bbox.centerX >= left &&","135","      bbox.centerX <= right &&","136","      bbox.centerY >= top &&","137","      bbox.centerY <= bottom","138","    );","155","        shouldUpdate(node, 'select', this)","175","            shouldUpdate(edge, 'select', this)","189","          shouldUpdate(combo, 'select', this)"],"delete":["16","      onSelect() {},","17","      onDeselect() {},","132","      const bbox = item.getBBox();","133","      return (","134","        bbox.centerX >= left &&","135","        bbox.centerX <= right &&","136","        bbox.centerY >= top &&","137","        bbox.centerY <= bottom","138","      );","155","        shouldUpdate(node, 'select')","175","            shouldUpdate(edge, 'select')","189","          shouldUpdate(combo, 'select')"]}],"packages\/pc\/tests\/unit\/graph\/tree-graph-spec.ts":[{"add":["123","    graph.on('afteraddchild', function (e) {","129","        e.item.get('parent').getModel().id === 'SubTreeNode3.1',"],"delete":["123","    graph.on('afteraddchild', function(e) {","129","          e.item.get('parent').getModel().id === 'SubTreeNode3.1',"]}],"packages\/site\/package.json":[{"add":["3","  \"version\": \"4.7.16\","],"delete":["3","  \"version\": \"4.7.15\","]}],"packages\/plugin\/tests\/unit\/minimap-spec.ts":[{"add":["458","","537","      \/\/ use different events for different browsers","538","      \/\/ electron: Mozilla\/5.0 (Macintosh; Intel Mac OS X 11_5_2) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/87.0.4280.141 Electron\/11.5.0 Safari\/537.36","539","      const isFireFox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;","540","      const isSafari = navigator.userAgent.toLowerCase().indexOf('safari') > -1;","541","      const dragstartevent = isSafari || isFireFox ? 'mousedown' : 'dragstart';","542","      const dragevent = isSafari || isFireFox ? 'mousemove' : 'drag';","543","      const dragDOM = isSafari || isFireFox ? minimap.get('canvas').get('container') : viewport;","544","      const dragendevent = isSafari || isFireFox ? 'mouseup' : 'dragend';","545","","546","      Simulate.simulate(viewport, dragstartevent, {","552","      Simulate.simulate(dragDOM, dragevent, {","557","      Simulate.simulate(viewport, dragendevent, {","1085",""],"delete":["458","      ","537","      Simulate.simulate(viewport, 'dragstart', {","543","      Simulate.simulate(viewport, dragEvent, {","548","      Simulate.simulate(viewport, 'dragend', {","1076","  "]}],"CHANGELOG.md":[{"add":["2","### 4.7.16","3","","4","- feat: allowDragOnItem config for scroll-canvas, closes: #3062;","5","- feat: allow to setTextWaterMarker and setImageWaterMarker with an undefined parameter to remove the watermarker, closes: #3478;","6","- feat: hideEdge config for minimap to enhance the performance, closes: #3158;","7","- fix: minimap has incorrect shape zIndex with keyShape type and delegate type, closes: #3132;","8","- fix: minimap viewport dragging problem in firefox and safari, closes: #2939;","9","- docs: add sequence demo to site, closes: #3027;","10","- perf: unify the formats of shouldBegin, shouldUpdate, and shouldEnd in behaviors, closes: #3028;","11","- perf: fitView and fitCenter according to the corner ndoes insead of getCanvasBBox to avoid maximum call stack size exceeded, closes: #2447;","12","- fix: treeGraph changeData with node properties lost, closes: #3215;","13","- fix: error occurs while calling updateLayout from gpu layout to a cpu layout, closes: #3272;","14","- fix: error occurs while calling changeData to remove a node in a combo, cloases: #3293;","15",""],"delete":[]}],"packages\/pc\/src\/interface\/graph.ts":[{"add":["60","  setImageWaterMarker: (imgURL: string | undefined, config: WaterMarkerConfig) => void;","67","  setTextWaterMarker: (texts: string[] | string | undefined, config?: WaterMarkerConfig) => void;"],"delete":["60","  setImageWaterMarker: (imgURL: string, config: WaterMarkerConfig) => void;","67","  setTextWaterMarker: (texts: string[], config?: WaterMarkerConfig) => void;"]}],"packages\/site\/docs\/manual\/middle\/states\/defaultBehavior.en.md":[{"add":["25","  - `shouldUpdate(e, self)`: Whether allow the behavior happens on the current item (e.item), see the example below for detail. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldUpdate`;","26","  - `shouldEnd(e, newParent, self)`:  **Supported after v4.3.8.** Whether allow the behavior ends with current item (e.item) and the new parent combo. the second parameter is the detected new parent when drop. If it is dropped on the canvas, `newParent` is `undefined`, see the example below for detail. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldEnd`.","48","        shouldUpdate: (e, self) => {","54","        shouldEnd: (e, newParent, self) => {","114","  - `shouldBegin(e, self)`: Whether allow the behavior happen on the current item (e.item). **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldBegin`;","164","  - `allowDragOnItem`: whether response when the users drag on items(node\/edge\/combo), `true` by default;","210","  - `shouldUpdate(e, self)`: Whether allow the behavior happen. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldUpdate`.","236","  - `shouldBegin(e, self)`: Whether allow the behavior happen. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldBegin`;","237","  - `shouldUpdate(e, self)`: Whether allow update the node\/ delegate's position while dragging. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldUpdate`;","238","  - `shouldEnd(e, targetItem: Item, self)`: Whether allow update the node\/ delegate's position after drag end. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldEnd`.","261","        shouldBegin: (e, self) => {","264","          return true;","285","  - `shouldBegin(e, self)`: Whether allow the behavior happen on the current item (e.item), see the example below. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldBegin`;","286","  - `shouldUpdate(e, self)`: Whether allow the behavior changes the state and state style of the on the current item (e.item), see the example below. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldUpdate`;","326","      shouldBegin: (e, self) => {","334","      shouldUpdate: (e, self) => {","363","  - `shouldBegin(e, self)`: Whether allow the tooltip the show up. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldBegin`;","364","  - `shouldUpdate(e, self)`: Whether allow the tooltip to be updated. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldUpdate`.","408","  - `shouldBegin(e, self)`: Whether allow the tooltip the show up. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldBegin`;","409","  - `shouldUpdate(e, self)`: Whether allow the tooltip to be updated. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldUpdate`.","422","  - `shouldUpdate(item: Item, { event: G6Event, action: 'deactivate' | 'activate' }, self)`: Whether allow the behavior happen. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldUpdate`;","489","  - `shouldUpdate(item: Item, action: string, self)`: Whether allow the behavior happen on the current manipulated item (e.item). See the example below. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldUpdate`;","528","      shouldUpdate: (e, self) => {","599","  - `shouldUpdate(item: Item, action: string, self)`: Whether allow the behavior happen on the current manipulated item (e.item). See the example below. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldUpdate`;","600","  - `shouldDeselect({ action: string, nodes: INode[], edges: IEdge[] })`: Whether allow to deselect the items at current conditions. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldDeselect`.","615","  - `onChange(item: Item, collapsed: boolean, self)`: The callback function after collapsing or expanding. **Warining**: it will be removed from V3.1.2;","616","  - `shouldBegin(e, collapsed: boolean, self)`: Whether allow this behavior happen on the current item (e.item). **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldBegin`;","617","  - `shouldUpdate(e, collapsed: boolean, self)`: whether allow call `onChange` and relayout the graph after update the `collpased` to the node. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldUpdate`;","637","        shouldBegin: (e, self) => {","716","  - `shouldBegin(e, self)`: Whether allow the behavior begins with the condition `e`. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldBegin`;","717","  - `shouldEnd(e, self)`: Whether allow the behavior ends under the condition `e`. **Supported after v4.7.16** The last parameter is the behavior instance, which will be convenient to get it in arrow function formatted `shouldEnd`;"],"delete":["25","  - `shouldUpdate(e)`: Whether allow the behavior happens on the current item (e.item), see the example below for detail;","26","  - `shouldEnd(e, newParent)`: 【supported by v4.3.8 and later versions】Whether allow the behavior ends with current item (e.item) and the new parent combo. the second parameter is the detected new parent when drop. If it is dropped on the canvas, `newParent` is `undefined`, see the example below for detail.","48","        shouldUpdate: (e) => {","54","        shouldEnd: (e, newParent) => {","114","  - `shouldBegin(e)`: Whether allow the behavior happen on the current item (e.item);","209","  - `shouldUpdate(e)`: Whether allow the behavior happen.","235","  - `shouldBegin(e)`: Whether allow the behavior happen;","236","  - `shouldUpdate(e)`: Whether allow update the node\/ delegate's position while dragging;","237","  - `shouldEnd(e)`: Whether allow update the node\/ delegate's position after drag end.","260","        shouldBegin: (e) => {","283","  - `shouldBegin(e)`: Whether allow the behavior happen on the current item (e.item), see the example below;","284","  - `shouldUpdate(e)`: Whether allow the behavior changes the state and state style of the on the current item (e.item), see the example below.","324","      shouldBegin: e => {","332","      shouldUpdate: e => {","361","  - `shouldBegin(e)`: Whether allow the tooltip the show up;","362","  - `shouldUpdate(e)`: Whether allow the tooltip to be updated.","406","  - `shouldBegin(e)`: Whether allow the tooltip the show up;","407","  - `shouldUpdate(e)`: Whether allow the tooltip to be updated.","420","  - `shouldUpdate(e)`: Whether allow the behavior happen.","487","  - `shouldUpdate(e)`: Whether allow the behavior happen on the current manipulated item (e.item). See the example below.","526","      shouldUpdate: e => {","597","  - `shouldUpdate(e)`: Whether allow the behavior happen on the current manipulated item (e.item). See the example below.","612","  - `onChange`: The callback function after collapsing or expanding. **Warining**: it will be removed from V3.1.2;","613","  - `shouldBegin(e)`: Whether allow this behavior happen on the current item (e.item).","633","        shouldBegin: (e) => {","704","### drag-node-with-group","705","","706","- Description: Allow users to drag the nodes in the group;","707","- Configurations:","708","  - `type: 'drag-node-with-group'`;","709","  - `delegateStyle`: The style of the `delegate` when dragging the node.","710","  - `maxMultiple`;","711","  - `minMultiple`;","712","  - `shouldBegin(e)`: Whether allow the current node (e.item) to be dragged.","713","","714","**Using Default Configuration**","715","","716","```javascript","717","const graph = new G6.Graph({","718","  modes: {","719","    default: ['drag-node-with-group'],","720","  },","721","});","722","```","723","","732","  - `shouldBegin(e)`: Whether allow the behavior begins with the condition `e`;","733","  - `shouldEnd(e)`: Whether allow the behavior ends under the condition `e`;"]}],"packages\/pc\/src\/behavior\/drag-canvas.ts":[{"add":["133","    if (!this.shouldBegin(e, this)) {","209","      if (this.shouldBegin(e, this)) {","220","    if (this.shouldUpdate(e, this)) {","272","    if (this.shouldEnd(e, this)) {"],"delete":["133","    if (!this.shouldBegin.call(this, e)) {","209","      if (this.shouldBegin.call(this, e)) {","220","    if (this.shouldUpdate.call(this, e)) {","272","    if (this.shouldEnd.call(this, e)) {"]}],"packages\/pc\/src\/global.ts":[{"add":["9","  version: '0.7.16',"],"delete":["9","  version: '0.7.15',"]}],"packages\/g6\/src\/index.ts":[{"add":["2","G6.version = '4.7.16';","6","export const version = '4.7.16';"],"delete":["2","G6.version = '4.7.15';","6","export const version = '4.7.15';"]}],"packages\/pc\/src\/graph\/tree-graph.ts":[{"add":["197","    current.set('model', Object.assign(model, data.data));"],"delete":["197","    current.set('model', data.data);"]}],"packages\/site\/docs\/api\/graphFunc\/watermarker.zh.md":[{"add":["13","| texts  | String[] \/ string \/ undefined | true     | 水印文字内容数组，数组中的不同项将会换行 |","39","| imgURL | String \/ undefined | true | 水印图片，默认为 'https:\/\/gw.alipayobjects.com\/os\/s\/prod\/antv\/assets\/image\/logo-with-text-73b8a.svg' |"],"delete":["13","| texts  | String[] | true     | 水印文字内容数组，数组中的不同项将会换行 |","39","| imgURL | String[] | true | 水印图片，默认为 'https:\/\/gw.alipayobjects.com\/os\/s\/prod\/antv\/assets\/image\/logo-with-text-73b8a.svg' |"]}],"packages\/pc\/src\/behavior\/drag-node.ts":[{"add":["135","    if (!this.shouldBegin({ ...evt, ...this.mousedown }, this)) {","233","    if (!this.shouldUpdate(evt, this)) return;","330","    this.currentShouldEnd = this.shouldEnd(evt, item, this);","366","    this.currentShouldEnd = this.shouldEnd(evt, undefined, this);","397","    this.currentShouldEnd = this.shouldEnd(evt, newParentCombo, this);"],"delete":["135","    if (!this.shouldBegin.call(this, { ...evt, ...this.mousedown })) {","233","    if (!this.shouldUpdate.call(this, evt)) return;","330","    this.currentShouldEnd = this.shouldEnd.call(this, evt, item);","366","    this.currentShouldEnd = this.shouldEnd.call(this, evt, undefined);","397","    this.currentShouldEnd = this.shouldEnd.call(this, evt, newParentCombo);"]}],"packages\/site\/docs\/api\/graphFunc\/watermarker.en.md":[{"add":["13","| texts | String[] \/ string \/ undefined | true | The text array for the water marker, the each item in the array with take one line |","39","| imgURL | String \/ undefined | true | The url of the image for the water marker, the default value is `'https:\/\/gw.alipayobjects.com\/os\/s\/prod\/antv\/assets\/image\/logo-with-text-73b8a.svg'` |"],"delete":["13","| texts | String[] | true | The text array for the water marker, the each item in the array with take one line |","39","| imgURL | String[] | true | The url of the image for the water marker, the default value is `'https:\/\/gw.alipayobjects.com\/os\/s\/prod\/antv\/assets\/image\/logo-with-text-73b8a.svg'` |"]}],"packages\/site\/docs\/manual\/middle\/states\/custom-behavior.en.md":[{"add":["78","    if (this.shouldUpdate(e, self)) {"],"delete":["78","    if (this.shouldUpdate(e)) {"]}],"packages\/site\/docs\/manual\/middle\/states\/custom-behavior.zh.md":[{"add":["78","    if (this.shouldUpdate(e, self)) {"],"delete":["78","    if (this.shouldUpdate(e)) {"]}]}}}