{"36a3b5db49d059cea36d2226cc769e37d67af14f":{"changes":{"tests\/bugs\/2212-spec.ts":"ADD","src\/chart\/controller\/slider.ts":"MODIFY","src\/chart\/view.ts":"MODIFY"},"diff":{"tests\/bugs\/2212-spec.ts":[{"add":[],"delete":[]}],"src\/chart\/controller\/slider.ts":[{"add":["79","      const min = this.slider.component.get('start') || 0;","80","      const max = this.slider.component.get('end') || 1;"],"delete":["79","      const min = this.slider.component.get('start');","80","      const max = this.slider.component.get('end');"]}],"src\/chart\/view.ts":[{"add":["641","      throw new Error(`Can't use built in variable name \"${name}\", please change another one.`);"],"delete":["641","      throw new Error(`Can't built in variable name \"${name}\", please change another one.`);"]}]}},"4bd575b4a0b328f051f5c0aaf9d30b1aa68f4085":{"changes":{"src\/attr\/color-util.js":"MODIFY","test\/bugs\/issue-678-spec.js":"ADD","test\/bugs\/issue-649-spec.js":"MODIFY","test\/bugs\/issue-291-spec.js":"MODIFY","test\/bugs\/issue-325-spec.js":"MODIFY"},"diff":{"src\/attr\/color-util.js":[{"add":["6","\/\/ const RGB_REG = \/rgb\\((\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)\/;","7","const RGB_REG = \/rgba?\\(([\\s.,0-9]+)\\)\/;","87","      const matchs = RGB_REG.exec(rst);","88","      const cArray = matchs[1].split(\/\\s*,\\s*\/);"],"delete":["6","const RGB_REG = \/rgb\\((\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)\/;","86","      const cArray = RGB_REG.exec(rst);","87","      cArray.shift();"]}],"test\/bugs\/issue-678-spec.js":[{"add":[],"delete":[]}],"test\/bugs\/issue-649-spec.js":[{"add":["3","describe('#649', () => {"],"delete":["3","describe('#528', () => {"]}],"test\/bugs\/issue-291-spec.js":[{"add":["2",""],"delete":[]}],"test\/bugs\/issue-325-spec.js":[{"add":["3","describe('#325', () => {"],"delete":["3","describe('#360', () => {"]}]}},"fbda97e5e776eb6a876071de70713d43b9e5f5fc":{"changes":{"test\/unit\/chart\/controller\/axis-spec.js":"MODIFY","test\/bugs\/issue-689-spec.js":"ADD","src\/coord\/polar.js":"MODIFY"},"diff":{"test\/unit\/chart\/controller\/axis-spec.js":[{"add":["213","        y: 124.94090329888789","267","        y: 124.94090329888789","271","        y: 151.49164063853073"],"delete":["213","        y: 124.64752917336064","267","        y: 124.64752917336064","271","        y: 151.1982665130035"]}],"test\/bugs\/issue-689-spec.js":[{"add":[],"delete":[]}],"src\/coord\/polar.js":[{"add":["91","    if (Math.abs(endAngle - startAngle) >= Math.PI * 2) {","102","    for (let i = Math.min(startAngle, endAngle); i < Math.max(startAngle, endAngle); i += Math.PI \/ 18) {","103","      xs.push(Math.cos(i));","104","      ys.push(Math.sin(i));"],"delete":["91","    if (endAngle - startAngle >= Math.PI * 2) {","102","    for (let i = -Math.PI * 5 \/ 2; i < Math.PI * 3 \/ 2; i += Math.PI \/ 2) {","103","      if (startAngle <= i && i <= endAngle) {","104","        xs.push(Math.cos(i));","105","        ys.push(Math.sin(i));","106","      }"]}]}},"9e66f90583a11ba7fde3a37d7ac14b380c74045a":{"changes":{"test\/bugs\/issue-318-spec.js":"ADD","src\/geom\/mixin\/tooltip.js":"MODIFY"},"diff":{"test\/bugs\/issue-318-spec.js":[{"add":[],"delete":[]}],"src\/geom\/mixin\/tooltip.js":[{"add":["380","          item.size = self.getSize(point[FIELD_ORIGIN]); \/\/ 如果字段发生了映射，宽度计算就会报错"],"delete":["380","          item.size = self.getSize();"]}]}},"0bed416d2623261f5b90a0f6e04fd80d3bfc167b":{"changes":{"test\/bugs\/issue-885-spec.js":"ADD","src\/geom\/mixin\/tooltip.js":"MODIFY"},"diff":{"test\/bugs\/issue-885-spec.js":[{"add":[],"delete":[]}],"src\/geom\/mixin\/tooltip.js":[{"add":["189","    if (Util.indexOf([ 'heatmap', 'point' ], type) > -1) {"],"delete":["189","    if (Util.indexOf([ 'heatmap' ], type) > -1) {"]}]}},"f11299e70ae558b938e92c5f9bcad954a9dc0138":{"changes":{"src\/geom\/heatmap.js":"MODIFY","package.json":"MODIFY"},"diff":{"src\/geom\/heatmap.js":[{"add":["9","const SHADOW_CANVAS = 'shadowCanvas';","139","    let canvas = self.get(SHADOW_CANVAS);","140","    if (!canvas) {","141","      canvas = document.createElement('canvas');","142","      self.set(SHADOW_CANVAS, canvas);","145","    canvas.width = width;","146","    canvas.height = height;","147","    return canvas.getContext('2d');","151","    const ctx = this._getShadowCanvasCtx();","152","    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);"],"delete":["9","const SHADOW_CANVAS_CTX = 'shadowCanvasCtx';","139","    let ctx = self.get(SHADOW_CANVAS_CTX);","140","    if (ctx) {","141","      return ctx;","144","    const heatmapCanvas = document.createElement('canvas');","145","    heatmapCanvas.width = width;","146","    heatmapCanvas.height = height;","147","    ctx = heatmapCanvas.getContext('2d');","148","    self.set(SHADOW_CANVAS_CTX, ctx);","149","    return ctx;","153","    const ctx = this.get(SHADOW_CANVAS_CTX);","154","    if (ctx) {","155","      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);","156","    }"]}],"package.json":[{"add":["76","    \"start\": \"npm run dev\","],"delete":[]}]}},"4d02444c5f40faf2c7f3592e720111510a6e41ab":{"changes":{"src\/geom\/shape\/interval.js":"MODIFY","test\/bugs\/issue-213-spec.js":"ADD","src\/animate\/index.js":"MODIFY","test\/unit\/geom\/shape\/interval-spec.js":"MODIFY"},"diff":{"src\/geom\/shape\/interval.js":[{"add":["179","      [ 'M', points[0].x, points[0].y ], [ 'L', points[1].x, points[1].y ], [ 'L', points[2].x, points[2].y ], [ 'L', points[2].x, points[2].y ], [ 'Z' ]"],"delete":["179","      [ 'M', points[0].x, points[0].y ], [ 'L', points[1].x, points[1].y ], [ 'L', points[2].x, points[2].y ], [ 'Z' ]"]}],"test\/bugs\/issue-213-spec.js":[{"add":[],"delete":[]}],"src\/animate\/index.js":[{"add":["98","        if (coord && name !== 'label') {"],"delete":["98","        if (coord) {"]}],"test\/unit\/geom\/shape\/interval-spec.js":[{"add":["376","      expect(shapeNull.attr('path').length).eql(5);"],"delete":["376","      expect(shapeNull.attr('path').length).eql(4);"]}]}},"2e4acb180562b483c2a665570e52fae755834d66":{"changes":{"test\/bugs\/issue-515-spec.js":"ADD","src\/geom\/mixin\/select.js":"MODIFY"},"diff":{"test\/bugs\/issue-515-spec.js":[{"add":[],"delete":[]}],"src\/geom\/mixin\/select.js":[{"add":["17","function getOriginAttrs(selectedCfg, shape) {","18","  const originAttrs = {};","19","  Util.each(selectedCfg, function(v, k) {","20","    if (k === 'transform') {","21","      k = 'matrix';","22","    }","23","    let originValue = shape.__attrs[k];","24","    if (Util.isArray(originValue)) {","25","      originValue = Util.cloneDeep(originValue);\/\/ 缓存原来的属性，由于 __attrs.matrix 是数组，所以此处需要深度复制","26","    }","27","    originAttrs[k] = originValue;","28","  });","29","  return originAttrs;","30","}","31","","96","        if (shape.get('animating')) { \/\/ 停止动画","97","          shape.stopAnimate();","98","        }","99","        shape.set('_originAttrs', getOriginAttrs(selectedStyle, shape));","110","      shape.set('_originAttrs', null);"],"delete":["81","        shape.set('_originAttrs', Util.cloneDeep(shape.__attrs));"]}]}},"34f842b44dbc249c15c5db4753bea8b98fddcf2d":{"changes":{"src\/component\/legend\/category.js":"MODIFY"},"diff":{"src\/component\/legend\/category.js":[{"add":["422","          \/\/ update checked status","423","          clickedItem.checked = true;","455","          \/\/ 在判断最后一个图例后再更新checked状态，防止点击最后一个图例item时图例样式没有变化但是checked状态改变了 fix #422","456","          clickedItem.checked = !clickedItem.checked;"],"delete":["419","        \/\/ update checked status","420","        clickedItem.checked = (mode === 'single') ? true : !(clickedItem.checked);"]}]}},"19ca46ff9a64bea6cdf7ce8dc72505db5742c79a":{"changes":{"src\/chart\/view.ts":"MODIFY","src\/facet\/facet.ts":"MODIFY"},"diff":{"src\/chart\/view.ts":[{"add":["1288","    this.renderFacet(isUpdate);","1722","   * @param isUpdate","1724","  private renderFacet(isUpdate: boolean) {","1726","      if (isUpdate) {","1727","        this.facetInstance.update();","1728","      } else {","1729","        this.facetInstance.clear();","1730","        \/\/ 计算分面数据","1731","        this.facetInstance.init();","1732","        \/\/ 渲染组件和 views","1733","        this.facetInstance.render();","1734","      }"],"delete":["1288","    this.renderFacet();","1723","  private renderFacet() {","1725","      this.facetInstance.clear();","1726","      \/\/ 计算分面数据","1727","      this.facetInstance.init();","1728","      \/\/ 渲染组件和 views","1729","      this.facetInstance.render();"]}],"src\/facet\/facet.ts":[{"add":["77","   * 更新 facet","78","   *\/","79","  public update() {","80","    \/\/ 其实不用做任何事情，因为 facet 最终生成的 View 和 Geometry 都在父 view 的更新中处理了","81","  }","82","","83","  \/**"],"delete":[]}]}},"7a55eb9df2d6521512647edec049adb112967498":{"changes":{"__tests__\/integration\/charts\/index.ts":"MODIFY","__tests__\/integration\/snapshots\/gdp2BoxplotLog.png":"ADD","src\/mark\/boxplot.ts":"MODIFY","__tests__\/integration\/charts\/gdp2-boxplot-log.ts":"ADD"},"diff":{"__tests__\/integration\/charts\/index.ts":[{"add":["157","export { gdp2BoxplotLog } from '.\/gdp2-boxplot-log';"],"delete":[]}],"__tests__\/integration\/snapshots\/gdp2BoxplotLog.png":[{"add":[],"delete":[]}],"src\/mark\/boxplot.ts":[{"add":["58","    const { data, encode, style = {}, ...rest } = options;","81","          ...rest,","102","        ...rest,"],"delete":["58","    const { data, encode, style = {} } = options;"]}],"__tests__\/integration\/charts\/gdp2-boxplot-log.ts":[{"add":[],"delete":[]}]}},"41150eb380107ed10b3282ec58245b874844b28c":{"changes":{"src\/chart\/view.js":"MODIFY","test\/bugs\/issue-238-spec.js":"MODIFY"},"diff":{"src\/chart\/view.js":[{"add":["893","      if (animate && this.get('rendered')) {","904","    this.set('rendered', true);"],"delete":["893","      if (animate) {"]}],"test\/bugs\/issue-238-spec.js":[{"add":["3","  it('Endless loop when calling chart.forceFit()', () => {"],"delete":["3","  it.only('Endless loop when calling chart.forceFit()', () => {"]}]}},"ab393001b231094da04cd68ad37038a7d9caba92":{"changes":{"test\/bugs\/issue-569-spec.js":"ADD","src\/geom\/label\/geom-labels.js":"MODIFY"},"diff":{"test\/bugs\/issue-569-spec.js":[{"add":[],"delete":[]}],"src\/geom\/label\/geom-labels.js":[{"add":["255","        if ((point.x instanceof Array && point.x.indexOf(p.x) === -1) || (typeof (point.x) === 'number' && point.x !== p.x)) {"],"delete":["255","        if (point.x.indexOf(p.x) === -1) {"]}]}},"cd544b5fa0bd552b15955352a7555a8b9f29bdff":{"changes":{"test\/bugs\/issue-569-spec.js":"ADD","src\/geom\/label\/geom-labels.js":"MODIFY"},"diff":{"test\/bugs\/issue-569-spec.js":[{"add":[],"delete":[]}],"src\/geom\/label\/geom-labels.js":[{"add":["255","        if ((Util.isArray(p.x) && point.x.indexOf(p.x) === -1) || (Util.isNumber(p.x) && point.x !== p.x)) {"],"delete":["255","        if (point.x.indexOf(p.x) === -1) {"]}]}},"4dcd057ca8a89c3b8504d27e2c33afc963b24e4b":{"changes":{"test\/bugs\/issue-311-spec.js":"ADD","src\/chart\/chart.js":"MODIFY"},"diff":{"test\/bugs\/issue-311-spec.js":[{"add":[],"delete":[]}],"src\/chart\/chart.js":[{"add":["226","            if (scale.field && scale.type !== 'identity' && !_isScaleExist(scales, scale)) {"],"delete":["226","            if (scale.type !== 'identity' && !_isScaleExist(scales, scale)) {"]}]}},"696d0ccdc5af3907b5f75e15e04b32b0f704e986":{"changes":{"__tests__\/plots\/static\/index.ts":"MODIFY","__tests__\/integration\/snapshots\/static\/alphabetIntervalFill.png":"ADD","src\/shape\/interval\/color.ts":"MODIFY","__tests__\/plots\/static\/alphabet-interval-fill.ts":"ADD"},"diff":{"__tests__\/plots\/static\/index.ts":[{"add":["185","export { alphabetIntervalFill } from '.\/alphabet-interval-fill';"],"delete":[]}],"__tests__\/integration\/snapshots\/static\/alphabetIntervalFill.png":[{"add":[],"delete":[]}],"src\/shape\/interval\/color.ts":[{"add":["149","    return (","150","      select(rect(points, value, coordinate, extendedStyle))","151","        .call(applyStyle, defaults)","152","        .style(colorAttribute, color)","153","        .style(toOpacityKey(options), opacity)","154","        .style('lineWidth', lineWidth)","155","        .style('stroke', stroke === undefined ? color : stroke)","156","        \/\/ shape.style has higher priority.","157","        .call(applyStyle, rest)","158","        .node()","159","    );"],"delete":["149","    return select(rect(points, value, coordinate, extendedStyle))","150","      .call(applyStyle, { ...defaults, ...rest })","151","      .style(toOpacityKey(options), opacity)","152","      .style(colorAttribute, color)","153","      .style('lineWidth', lineWidth)","154","      .style('stroke', stroke === undefined ? color : stroke)","155","      .node();"]}],"__tests__\/plots\/static\/alphabet-interval-fill.ts":[{"add":[],"delete":[]}]}},"4adbd587c73bdeca7cb301afd52d7cfa874b2ed7":{"changes":{"__tests__\/integration\/api-chart-render-update-non-animation.spec.ts":"ADD","__tests__\/integration\/snapshots\/api\/chart-render-update-attributes\/step1.png":"ADD","__tests__\/plots\/api\/chart-render-update-non-animation.ts":"ADD","__tests__\/integration\/snapshots\/api\/chart-render-update-non-animation\/step0.png":"ADD","src\/animation\/morphing.ts":"MODIFY","__tests__\/integration\/snapshots\/api\/chart-render-update-attributes\/step0.png":"ADD","__tests__\/integration\/api-chart-render-update-attribute.spec.ts":"ADD","src\/utils\/helper.ts":"MODIFY","__tests__\/plots\/api\/index.ts":"MODIFY","__tests__\/plots\/api\/chart-render-update-attributes.ts":"ADD","src\/runtime\/plot.ts":"MODIFY"},"diff":{"__tests__\/integration\/api-chart-render-update-non-animation.spec.ts":[{"add":[],"delete":[]}],"__tests__\/integration\/snapshots\/api\/chart-render-update-attributes\/step1.png":[{"add":[],"delete":[]}],"__tests__\/plots\/api\/chart-render-update-non-animation.ts":[{"add":[],"delete":[]}],"__tests__\/integration\/snapshots\/api\/chart-render-update-non-animation\/step0.png":[{"add":[],"delete":[]}],"src\/animation\/morphing.ts":[{"add":["7","import { copyAttributes } from '..\/utils\/helper';","184","  animation.onfinish = () => {","185","    copyAttributes(pathShape, to);","186","  };","187",""],"delete":[]}],"__tests__\/integration\/snapshots\/api\/chart-render-update-attributes\/step0.png":[{"add":[],"delete":[]}],"__tests__\/integration\/api-chart-render-update-attribute.spec.ts":[{"add":[],"delete":[]}],"src\/utils\/helper.ts":[{"add":["1","import { lowerFirst, upperFirst } from '@antv\/util';"],"delete":["1","import { lowerFirst, startsWith, upperFirst } from '@antv\/util';"]}],"__tests__\/plots\/api\/index.ts":[{"add":["22","export { chartRenderUpdateAttributes } from '.\/chart-render-update-attributes';","23","export { chartRenderUpdateNonAnimation } from '.\/chart-render-update-non-animation';"],"delete":[]}],"__tests__\/plots\/api\/chart-render-update-attributes.ts":[{"add":[],"delete":[]}],"src\/runtime\/plot.ts":[{"add":["825","              if (animation === null) {","826","                if (this.nodeName === node.nodeName) copyAttributes(this, node);","827","                else this.parentNode.replaceChild(node, this);","828","              }"],"delete":["825","              if (animation === null) copyAttributes(this, node);"]}]}},"a0c1a44dce4345cdaa6183332188fe950a8e1e02":{"changes":{"src\/transform\/filter.ts":"MODIFY","__tests__\/plots\/interaction\/index.ts":"MODIFY","__tests__\/integration\/snapshots\/interaction\/temperatures-line-legend-filter-children-text\/step0.svg":"ADD","__tests__\/plots\/interaction\/temperatures-line-legend-filter-children-text.ts":"ADD"},"diff":{"src\/transform\/filter.ts":[{"add":["50","          value: newIndex","51","            .map((i) => encode.value[FI[i]])","52","            .filter((v) => v !== undefined),"],"delete":["50","          value: newIndex.map((i) => encode.value[FI[i]]),"]}],"__tests__\/plots\/interaction\/index.ts":[{"add":["14","export { temperaturesLineLegendFilterChildrenText } from '.\/temperatures-line-legend-filter-children-text';"],"delete":[]}],"__tests__\/integration\/snapshots\/interaction\/temperatures-line-legend-filter-children-text\/step0.svg":[{"add":[],"delete":[]}],"__tests__\/plots\/interaction\/temperatures-line-legend-filter-children-text.ts":[{"add":[],"delete":[]}]}},"5d446486006b1a3b1a3d415ba39c2d92b6d19ab7":{"changes":{"src\/runtime\/plot.ts":"MODIFY","__tests__\/unit\/runtime\/annotationText.spec.ts":"MODIFY"},"diff":{"src\/runtime\/plot.ts":[{"add":["72","      .map((d) => \/mark\\.(.*)\/.exec(d)?.[1])","73","      .filter(defined),"],"delete":["72","      .filter((d) => d.startsWith('mark'))","73","      .map((d) => d.split('.').pop()),"]}],"__tests__\/unit\/runtime\/annotationText.spec.ts":[{"add":["150","                  const path: any[] = [];","339","  it('render({...}) should render view with single annotation', () => {","340","    const chart = render<G2Spec>({","341","      type: 'layer',","342","      children: [","343","        {","344","          type: 'interval',","345","          coordinate: [{ type: 'theta', innerRadius: 0.5 }],","346","          scale: { color: { guide: null } },","347","          data: [","348","            { genre: 'Sports', sold: 275 },","349","            { genre: 'Strategy', sold: 115 },","350","            { genre: 'Action', sold: 120 },","351","            { genre: 'Shooter', sold: 350 },","352","            { genre: 'Other', sold: 150 },","353","          ],","354","          encode: {","355","            y: 'sold',","356","            color: 'genre',","357","          },","358","        },","359","        {","360","          type: 'annotation.text',","361","          data: [{ x: 0.5, y: 0.5, text: 'G2' }],","362","          scale: {","363","            x: { guide: null },","364","            y: { guide: null },","365","          },","366","          encode: {","367","            x: 'x',","368","            y: 'y',","369","            text: 'text',","370","            color: 'black',","371","          },","372","          style: {","373","            fontSize: 60,","374","            textBaseline: 'middle',","375","            fontWeight: 'bold',","376","          },","377","        },","378","      ],","379","    });","380","    mount(createDiv(), chart);","381","  });","382",""],"delete":["150","                  const path = [];"]}]}},"4a582eddf814d8f09ae94bdbc2bfd1a32f11c88c":{"changes":{"src\/api\/chart.ts":"MODIFY"},"diff":{"src\/api\/chart.ts":[{"add":[],"delete":["131","  render(): void;","132","  node(): HTMLElement;"]}]}},"6863a69f43af0306f7871ad123b57e27539ccbca":{"changes":{"tests\/bugs\/2258-spec.ts":"ADD","\/dev\/null":"DELETE","tests\/unit\/chart\/view\/index-spec.ts":"MODIFY","src\/chart\/view.ts":"MODIFY"},"diff":{"tests\/bugs\/2258-spec.ts":[{"add":[],"delete":[]}],"\/dev\/null":[{"add":[],"delete":[]}],"tests\/unit\/chart\/view\/index-spec.ts":[{"add":["180","    expect(view.getTheme().defaultColor).toBe('#5B8FF9');"],"delete":[]}],"src\/chart\/view.ts":[{"add":["15","  mix,","54","import { getTheme } from '..\/theme';","168","    \/\/ 初始化 theme","169","    this.themeObject = isObject(theme) ? deepMix({}, getTheme('default'), theme) : getTheme(theme);","691","    this.themeObject = isObject(theme) ? deepMix({}, this.themeObject, theme) : getTheme(theme);"],"delete":["20","  mix,","56","import { mergeTheme } from '..\/util\/theme';","164","    this.themeObject = mergeTheme({}, theme);","690","    this.themeObject = mergeTheme(this.themeObject, theme);"]}]}},"09c9df62bb8ea5181fd22a822a88cd71b7862269":{"changes":{"src\/chart\/view.js":"MODIFY","src\/geom\/base.js":"MODIFY","test\/bugs\/issue-291-spec.js":"ADD"},"diff":{"src\/chart\/view.js":[{"add":["76","      animate: true,","77","      visible: true","421","    const geoms = this.get('geoms');","422","    \/\/ 如果进行过滤，那么 geom 默认隐藏时会出现不一致","423","    \/\/ 默认隐藏时坐标轴不绘制，但是调用了 geom.show() 后，则图形显示了，坐标轴依然不见","424","    \/* .filter(function(geom) {","426","    }); *\/","435","    const geoms = this.get('geoms');","436","    \/* .filter(function(geom) {","438","    }); *\/","947","    \/\/ 如果 view 隐藏了，隐藏所有的图形和坐标轴","948","    if (!this.get('visible')) {","949","      this.changeVisible(false, true); \/\/ 隐藏所有的图形，但是不绘制","950","    }","953","  changeVisible(visible, stopDraw) {","962","    if (!stopDraw) {","963","      const canvas = this.get('canvas');","964","      canvas.draw();","965","    }"],"delete":["76","      animate: true","420","    const geoms = this.get('geoms').filter(function(geom) {","422","    });","431","    const geoms = this.get('geoms').filter(function(geom) {","433","    });","944","  changeVisible(visible) {","953","    const canvas = this.get('canvas');","954","","955","    canvas.draw();"]}],"src\/geom\/base.js":[{"add":["169","      animateCfg: null,","170","      visible: true","449","        viewId,","450","        visible: self.get('visible')","772","      geomType: type,","773","      visible: self.get('visible')"],"delete":["169","      animateCfg: null","448","        viewId","770","      geomType: type"]}],"test\/bugs\/issue-291-spec.js":[{"add":[],"delete":[]}]}},"d7edf5e658ab32788a94d80eeb65555cf572c8a8":{"changes":{"src\/geometry\/shape\/point\/image.ts":"MODIFY","src\/geometry\/shape\/point\/util.ts":"MODIFY"},"diff":{"src\/geometry\/shape\/point\/image.ts":[{"add":["10","    let pointPosition = points[0];","11","    if (cfg.isStack) {","12","      pointPosition = points[1];","13","    } else if (points.length > 1) {","32","        x: (pointPosition.x as number) - size \/ 2,","33","        y: (pointPosition.y as number) - size,"],"delete":["10","    if (points.length > 1) {","29","        x: (points[0].x as number) - size \/ 2,","30","        y: (points[0].y as number) - size,"]}],"src\/geometry\/shape\/point\/util.ts":[{"add":["21","  let pointPosition = points[0];","22","  if (cfg.isStack) {","23","    pointPosition = points[1];","24","  } else if (points.length > 1) {","44","      ...pointPosition,"],"delete":["21","","22","  if (points.length > 1) {","42","      ...points[0],"]}]}},"c24f6eb09ae05778fa464380a63fd52e0d5e4f74":{"changes":{"src\/chart\/controller\/legend.js":"MODIFY","test\/bugs\/issue-406-spec.js":"ADD","src\/component\/legend\/continuous.js":"MODIFY"},"diff":{"src\/chart\/controller\/legend.js":[{"add":["419","        value: tick.tickValue, \/\/ tick.text","433","        value: scale.min,","440","        value: scale.max,","455","      attr,","456","      numberFormatter: scale.formatter"],"delete":["419","        value: tick.text,","433","        value: scale.getText(scale.invert(0)),","440","        value: scale.getText(scale.invert(1)),","455","      attr"]}],"test\/bugs\/issue-406-spec.js":[{"add":[],"delete":[]}],"src\/component\/legend\/continuous.js":[{"add":["81","      numberFormatter: null, \/\/ 如果数字已经有格式化函数，从外部传入","112","    const numberFormatter = this.get('numberFormatter');","113","    if (numberFormatter) {","114","      value = numberFormatter(value);","115","    }"],"delete":[]}]}},"cc3648296f4701c8ef5dd52284277030acbb4e40":{"changes":{"src\/chart\/view.js":"MODIFY"},"diff":{"src\/chart\/view.js":[{"add":["78","      animate: Global.animate,"],"delete":["78","      animate: true,"]}]}},"636c1a8e85dabc9947b3d1d3cbf06a5a2bc76217":{"changes":{"src\/chart\/view.js":"MODIFY","test\/bugs\/issue-629-spec.js":"ADD","src\/geom\/base.js":"MODIFY"},"diff":{"src\/chart\/view.js":[{"add":["967","      \/\/ if (geom.get('visible')) { \/\/ geom 隐藏时不受","968","      geom.changeVisible(visible, true);","969","      \/\/ }"],"delete":["967","      if (geom.get('visible')) { \/\/ geom 隐藏时不受","968","        geom.changeVisible(visible, true);","969","      }"]}],"test\/bugs\/issue-629-spec.js":[{"add":[],"delete":[]}],"src\/geom\/base.js":[{"add":["1121","    const me = this;","1122","    me.set('visible', visible);","1124","    if (shapeContainer) {","1125","      shapeContainer.set('visible', visible);","1126","    }","1131","    if (!stopDraw && shapeContainer) {"],"delete":["1122","    shapeContainer.set('visible', visible);","1127","    if (!stopDraw) {"]}]}},"ed80aa231304b428f49c5eba212ab1f949f37956":{"changes":{"test\/bugs\/issue-398-spec.js":"MODIFY"},"diff":{"test\/bugs\/issue-398-spec.js":[{"add":["3","describe('#398', () => {"],"delete":["3","describe('#371', () => {"]}]}},"d6c8d7deb3c0baf90670c0c4a8bf1f7baf905d9a":{"changes":{"src\/component\/guide\/region-filter.js":"MODIFY","demos\/bar.html":"MODIFY","src\/global.js":"MODIFY","CHANGELOG.md":"MODIFY"},"diff":{"src\/component\/guide\/region-filter.js":[{"add":["49","          \/\/ const shapeAttr = Util.mix({}, shape.attr());","50","          const shapeAttr = Util.cloneDeep(shape.attr());"],"delete":["49","          const shapeAttr = Util.mix({}, shape.attr());"]}],"demos\/bar.html":[{"add":["50","      chart.guide().regionFilter({","51","        start: [ 'min', 60 ],","52","        end: [ 'max', 160 ],","53","        color: '#ff0000',","54","        apply: [ 'interval' ]","55","      });","56",""],"delete":[]}],"src\/global.js":[{"add":["8","  version: '3.3.1',"],"delete":["8","  version: '3.3.0',"]}],"CHANGELOG.md":[{"add":["0","#### 3.3.0 (2018-10-16)","1","","2","##### New Features","3","","4","- chore(demo): add some guide demos.","5","- chore(dev): @babel\/env => @babel\/preset-env","6","- chore(dev): add scripts for npm run pixel-test","7","- chore(dev): update issue templates","8","- chore: modify components reference","9","- feat(theme): add chart view theme to tooltip","10","- feat: add default style for guide component.","11","- feat: add label type: interval","12","- feat: component legend","13","- feat: demo for custom html legend. fix: custom html and htmlpage category legend","14","- feat: double direction interaction (from chart to legend)","15","- feat: legend component html scroll","16","- feat: legend demos","17","- feat: legend-component, html controller, offset","18","- feat: mini tooltip","19","- feat: tooltip controller module import","20","- refactor(axis): AxisController","21","- refactor(demo): modify demos' styles","22","- refactor(demo): modify html tooltip styles","23","- refactor(geom-labels): merge master","24","- refactor(legend): update demo html style","25","- refactor(tooltip): modify tooltip marker style","26","- refactor: adapt to new guide components.","27","- refactor: better guide.render().","28","- refactor: modify some test case with Labels","29","- refactor: tooltip controller","30","- refactor: use @antv\/components to render label instead of Labels","31","- refactor: use components to render label instead of `Labels`","32","- refator: modify label callback args to fields","33","- revert: remove polar coordinate support","34","- test(bin): add scripts for npm run pixel-test","35","- test: add Node.js 10","36","- test: delete some tests; fix: @antv\/component\/lib","37","- test: legend controller","38","","39","##### Bug Fixes","40","","41","- fix(area): modify default style of area","42","- fix(area): remove default fillOpacity from area shape","43","- fix(axis): clear axis component correctly in axisController","44","- fix(axis): set default label offset to 8px","45","- fix(dev): require lib version instead of src","46","- fix(geom-labels): add unit test of scaled coord labels","47","- fix(geom-labels): change label dependency to lib","48","- fix(geom-labels): fix callback value type","49","- fix(geom-labels): fix default label textStyle sometimes doesn't work","50","- fix(geom-labels): fix label dependency","51","- fix(geom-labels): fix label offset format to match with component","52","- fix(geom-labels): fix offset exception when coord is scaled","53","- fix(geom-labels): fix polygon label position calculation","54","- fix(geom-labels): fix transposed text align logic","55","- fix(geom-labels): modify label position calculation when geom is polygon","56","- fix(geom-labels): resume drawLines","57","- fix(label): merge labelLine only if a value is assigned to it","58","- fix(legend): fix default style of color-legend demo","59","- fix(legend): fix default style of legend marker of area","60","- fix(legend): fix default style of legend marker of area & demo styles","61","- fix(legend): marker for area should be a closed path","62","- fix(pie-label): fix labelLine end point error","63","- fix(test): auto padding in ci evironment","64","- fix(tooltip): fixed tooltip won't hide when plotleave fired","65","- fix(tooltip): should not merge viewTheme into default tooltip cfg again","66","- fix(tooltip): viewTheme in controller","67","- fix(tooltip):mini-tooltip flash","68","- fix: configuration to control the interaction from chart to legend -- reactive [boolean]","69","- fix: fix polar labels don't work","70","- fix: html legend filter","71","- fix: scales to scale","72","- fix: viewTheme","73","","74",""],"delete":[]}]}},"3fc10032d21863aba11a7c9f2412fc2ecbdf24de":{"changes":{"test\/bugs\/issue-439-spec.js":"MODIFY","test\/bugs\/issue-1186-spec.js":"ADD","src\/chart\/util\/bbox-of-back-plot.js":"MODIFY","package.json":"MODIFY","src\/global.js":"MODIFY","src\/chart\/controller\/axis.js":"MODIFY","src\/chart\/chart.js":"MODIFY","test\/bugs\/issue-1188-spec.js":"MODIFY"},"diff":{"test\/bugs\/issue-439-spec.js":[{"add":["36","      animate: false,","37","      pixelRatio: 2"],"delete":["36","      animate: false"]}],"test\/bugs\/issue-1186-spec.js":[{"add":[],"delete":[]}],"src\/chart\/util\/bbox-of-back-plot.js":[{"add":["38","  Util.each(backPlot.get('children'), group => {","39","    \/\/ 这段代码假设了子元素是 axis，同时 title 超出长度，","40","    \/\/ 这种临时代码需要在 4.0 中修复掉","41","    if (group instanceof G.Group) {","42","      Util.each(group.get('children'), element => {","43","        if ((element instanceof G.Group && element.get('children').length) || element instanceof G.Path) {","44","          bbox = mergeBBox(bbox, element.getBBox());","45","        } else if (element instanceof G.Text) { \/\/ title","46","          const elementBBox = getTitleBBox(element);","47","          const dx = Math.abs(elementBBox.maxX - elementBBox.minX);","48","          const dy = Math.abs(elementBBox.maxY - elementBBox.minY);","49","          if (dx < dy) {","50","            bbox = mergeBBox(bbox, Util.mix(bbox, {","51","              minX: Math.min(bbox.minX, elementBBox.minX),","52","              maxX: Math.max(bbox.maxX, elementBBox.maxX)","53","            }));","54","          } else {","55","            bbox = mergeBBox(bbox, Util.mix(bbox, {","56","              minY: Math.min(bbox.minY, elementBBox.minY),","57","              maxY: Math.max(bbox.maxY, elementBBox.maxY)","58","            }));","59","          }","60","        }","61","      });"],"delete":["38","  Util.each(backPlot.get('children'), element => {","39","    if ((element instanceof G.Group && element.get('children').length) || element instanceof G.Path) {","40","      bbox = mergeBBox(bbox, element.getBBox());","41","    } else if (element instanceof G.Text) { \/\/ title","42","      const elementBBox = getTitleBBox(element);","43","      const dx = Math.abs(elementBBox.maxX - elementBBox.minX);","44","      const dy = Math.abs(elementBBox.maxY - elementBBox.minY);","45","      if (dx < dy) {","46","        bbox = mergeBBox(bbox, Util.mix(bbox, {","47","          minX: Math.min(bbox.minX, elementBBox.minX),","48","          maxX: Math.max(bbox.maxX, elementBBox.maxX)","49","        }));","50","      } else {","51","        bbox = mergeBBox(bbox, Util.mix(bbox, {","52","          minY: Math.min(bbox.minY, elementBBox.minY),","53","          maxY: Math.max(bbox.maxY, elementBBox.maxY)","54","        }));","55","      }"]}],"package.json":[{"add":["2","  \"version\": \"3.5.8-beta.1\","],"delete":["2","  \"version\": \"3.5.7\","]}],"src\/global.js":[{"add":["8","  version: '3.5.8-beta.1',"],"delete":["8","  version: '3.5.7',"]}],"src\/chart\/controller\/axis.js":[{"add":["452","      \/\/ 每个 axis 需要单独的 group，","453","      \/\/ 否则所有的 aixs 的文本都混在一起了","454","      \/\/ 同时无法知道是哪个坐标轴的事件","455","      group: container.addGroup({","456","        viewId","457","      })"],"delete":["452","      group: container"]}],"src\/chart\/chart.js":[{"add":["111","    \/\/ 这段代码临时处理了title 过长的情况，但是是非常不好的代码"],"delete":[]}],"test\/bugs\/issue-1188-spec.js":[{"add":["40","    const axisShapes = axisController.axes[0].get('group').get('children');"],"delete":["40","    const axisShapes = axisController.container.get('children');"]}]}},"ad838eb4ecb651d15b8331279f68ed66e71d20ba":{"changes":{"test\/bugs\/issue-408-spec.js":"ADD","src\/util.js":"MODIFY"},"diff":{"test\/bugs\/issue-408-spec.js":[{"add":[],"delete":[]}],"src\/util.js":[{"add":["219","    \/\/ 存在 NaN 时，min,max 判定会出问题","220","    values = Util.filter(values, function(v) {","221","      return !isNaN(v);","222","    });"],"delete":[]}]}},"7700c537888500a889f6791c718467d39345ba62":{"changes":{"test\/bugs\/issue-1306-spec.js":"ADD","src\/geom\/label\/geom-labels.js":"MODIFY","test\/bugs\/pr-935-spec.js":"MODIFY"},"diff":{"test\/bugs\/issue-1306-spec.js":[{"add":[],"delete":[]}],"src\/geom\/label\/geom-labels.js":[{"add":["449","      cfg.point = origin;"],"delete":[]}],"test\/bugs\/pr-935-spec.js":[{"add":["94","    const attrs = labels.get('children')[0].get('attrs');","97","    expect(attrs.textAlign).to.equal('left');"],"delete":["94","    const origin = labels.get('children')[0].get('origin');","97","    expect(origin.textAlign).to.equal('left');"]}]}},"521f25107423a1085770996ebb3841d23c77a55d":{"changes":{"src\/chart\/controller\/tooltip.js":"MODIFY","test\/bugs\/issue-368-spec.js":"ADD","src\/component\/tooltip\/index.js":"MODIFY"},"diff":{"src\/chart\/controller\/tooltip.js":[{"add":["187","      \/\/ bugfix: when set the title in the tooltip:change event does not take effect.","188","      if (tooltip.isContentChange(title, items)) {","189","        chart.emit('tooltip:change', {","190","          tooltip,","191","          x,","192","          y,","193","          items","194","        });","195","        tooltip.setContent(title, items);","196","        if (!Util.isEmpty(markersItems)) {","197","          if (self.options.hideMarkers === true) { \/\/ 不展示 tooltip marker","198","            tooltip.set('markerItems', markersItems); \/\/ 用于 tooltip 辅助线的定位","199","          } else {","200","            tooltip.setMarkers(markersItems, Global.tooltipMarker);","201","          }","203","          tooltip.clearMarkers();"],"delete":["185","      chart.emit('tooltip:change', {","186","        tooltip,","187","        x,","188","        y,","189","        items","190","      });","191","      \/\/ bugfix: when set the title in the tooltip:change event does not take effect.","194","      tooltip.setContent(title, items);","195","      if (!Util.isEmpty(markersItems)) {","196","        if (self.options.hideMarkers === true) { \/\/ 不展示 tooltip marker","197","          tooltip.set('markerItems', markersItems); \/\/ 用于 tooltip 辅助线的定位","199","          tooltip.setMarkers(markersItems, Global.tooltipMarker);","201","      } else {","202","        tooltip.clearMarkers();","204",""]}],"test\/bugs\/issue-368-spec.js":[{"add":[],"delete":[]}],"src\/component\/tooltip\/index.js":[{"add":["368","  isContentChange(title, items) {","386","    \/\/ const isChange = this.isContentChange(title, items);","387","    \/\/ if (isChange) {","388","    \/\/ 在外面进行判断是否内容发生改变","389","    const timeStamp = +new Date();","390","    this.set('items', items);","391","    this.set('titleContent', title);","392","    this.set('timeStamp', timeStamp);","393","    this._renderTooltip();","394","    \/\/ }"],"delete":["368","  _isContentChange(title, items) {","386","    const isChange = this._isContentChange(title, items);","387","    if (isChange) {","388","      const timeStamp = +new Date();","389","      this.set('items', items);","390","      this.set('titleContent', title);","391","      this.set('timeStamp', timeStamp);","392","      this._renderTooltip();","393","    }"]}]}},"01000533c4b2f6140121727a2a21663b43efe5e3":{"changes":{"src\/chart\/util\/bbox-of-back-plot.js":"MODIFY","test\/bugs\/issue-1188-spec.js":"ADD"},"diff":{"src\/chart\/util\/bbox-of-back-plot.js":[{"add":["47","          minX: Math.min(bbox.minX, elementBBox.minX),","48","          maxX: Math.max(bbox.maxX, elementBBox.maxX)","52","          minY: Math.min(bbox.minY, elementBBox.minY),","53","          maxY: Math.max(bbox.maxY, elementBBox.maxY)"],"delete":["47","          minX: bbox.minX - dx,","48","          maxX: bbox.maxX + dx","52","          minY: bbox.minY - dy,","53","          maxY: bbox.maxY + dy"]}],"test\/bugs\/issue-1188-spec.js":[{"add":[],"delete":[]}]}},"071fa7c2c0959eae2b946c628e65e5fd242c18d6":{"changes":{"src\/geometry\/heatmap.ts":"MODIFY","src\/geometry\/base.ts":"MODIFY","src\/geometry\/path.ts":"MODIFY","tests\/bugs\/2016-spec.ts":"MODIFY","tests\/bugs\/2141-spec.ts":"ADD"},"diff":{"src\/geometry\/heatmap.ts":[{"add":["18","  protected createElements(mappingData: MappingDatum[], index: number, isUpdate: boolean = false) {"],"delete":["18","  protected createElements(mappingData: MappingDatum[], isUpdate: boolean = false) {"]}],"src\/geometry\/base.ts":[{"add":["823","","824","    dataArray.forEach((eachGroup, index) => {","827","      this.createElements(mappingData, index, isUpdate);","828","    });","1276","  protected createElements(mappingData: MappingDatum[], index: number, isUpdate: boolean = false): Element[] {","1278","    each(mappingData, (mappingDatum, subIndex) => {","1279","      let id = this.getElementId(mappingDatum);","1280","      if (elementsMap[id]) {","1281","        \/\/ 存在重复数据，则根据再根据 index 进行区分","1282","        id = `${id}-${index}-${subIndex}`;","1283","      }","1284","","1285","      let result = lastElementsMap[id];","1301","      elements.push(result);","1302","      elementsMap[id] = result;"],"delete":["823","    for (const eachGroup of dataArray) {","826","      this.createElements(mappingData, isUpdate);","827","    }","1275","  protected createElements(mappingData: MappingDatum[], isUpdate: boolean = false): Element[] {","1277","    each(mappingData, (mappingDatum) => {","1278","      const id = this.getElementId(mappingDatum);","1279","      let result = lastElementsMap[id] || elementsMap[id];","1295","      if (!elementsMap[id]) {","1296","        \/\/ 保证唯一性","1297","        elements.push(result);","1298","        elementsMap[id] = result;","1299","      }"]}],"src\/geometry\/path.ts":[{"add":["38","  protected createElements(mappingData: MappingDatum[], index: number, isUpdate: boolean = false): Element[] {","44","    let result = lastElementsMap[elementId];","66","    elements.push(result);","67","    elementsMap[elementId] = result;"],"delete":["38","  protected createElements(mappingData: MappingDatum[], isUpdate: boolean = false): Element[] {","44","    let result = lastElementsMap[elementId] || elementsMap[elementId];","66","    if (!elementsMap[elementId]) {","67","      elements.push(result);","68","      elementsMap[elementId] = result;","69","    }"]}],"tests\/bugs\/2016-spec.ts":[{"add":["30","    expect(point.elements.length).toBe(4);","33","    expect(point.elements.length).toBe(4);"],"delete":["30","    expect(point.elements.length).toBe(2);","33","    expect(point.elements.length).toBe(2);"]}],"tests\/bugs\/2141-spec.ts":[{"add":[],"delete":[]}]}},"17e0dcba897510303d5edd1790fefcae2e3144f0":{"changes":{"src\/component\/legend\/category.js":"MODIFY","test\/bugs\/issue-775-spec.js":"ADD"},"diff":{"src\/component\/legend\/category.js":[{"add":["23","  if (Util.isNil(nodeClass)) {","24","    return node;","25","  }","436","      itemListDom.onclick = ev => {","511","      itemListDom.onmousemove = ev => {","532","      itemListDom.onmouseout = ev => {"],"delete":["433","      legendWrapper.onclick = ev => {","508","      legendWrapper.onmousemove = ev => {","529","      legendWrapper.onmouseout = ev => {"]}],"test\/bugs\/issue-775-spec.js":[{"add":[],"delete":[]}]}},"5a124fd45118fb27c8c4b60978374861af77f1b6":{"changes":{"test\/bugs\/issue-326-spec.js":"ADD","src\/chart\/chart.js":"MODIFY","src\/chart\/controller\/event.js":"MODIFY"},"diff":{"test\/bugs\/issue-326-spec.js":[{"add":[],"delete":[]}],"src\/chart\/chart.js":[{"add":["371","  \/\/ isShapeInView() {","372","  \/\/   return true;","373","  \/\/ }"],"delete":["371","  isShapeInView() {","372","    return true;","373","  }"]}],"src\/chart\/controller\/event.js":[{"add":["97","        const parent = view.get('parent');","98","        if (parent) { \/\/ chart 上也需要抛出该事件，本期先不抛出","99","          parent.emit(name, eventObj);","100","        }"],"delete":["98","      \/\/ const parent = view.get('parent');","99","      \/\/ if (parent) { \/\/ chart 上也需要抛出该事件，本期先不抛出","100","      \/\/   parent.emit(name, eventObj);","101","      \/\/ }"]}]}},"2d042fa5b7191daa140b441bea1c772379116313":{"changes":{"src\/geom\/shape\/area.js":"MODIFY","src\/geom\/shape\/line.js":"MODIFY","test\/bugs\/bug-252-spec.js":"ADD","test\/unit\/geom\/shape\/area-spec.js":"MODIFY"},"diff":{"src\/geom\/shape\/area.js":[{"add":["32","function getPath(cfg, smooth, shape) {","34","  const pointsArr = [];","39","    topLinePoints.push(point[1]);","40","    bottomLinePoints.push(point[0]);","42","  if (!isInCircle) {","43","    bottomLinePoints = bottomLinePoints.reverse();","44","  }","45","  pointsArr.push(topLinePoints, bottomLinePoints);","46","  Util.each(pointsArr, function(points, index) {","48","    points = shape.parsePoints(points);","49","    const p1 = points[0];","51","      points.push({ x: p1.x, y: p1.y });","52","    }","53","    if (smooth) {","54","      subPath = PathUtil.getSplinePath(points, false, cfg.constraint);","55","    } else {","56","      subPath = PathUtil.getLinePath(points, false);","57","    }","58","    if (!isInCircle && index > 0) {","174","    const path = getPath(cfg, false, this);","175","    \/\/ path = this.parsePath(path, false);","197","    const path = getPath(cfg, true, this);","198","   \/\/ path = this.parsePath(path, false);","214","    const path = getPath(cfg, false, this);","215","    \/\/ path = this.parsePath(path, false);","232","    const path = getPath(cfg, true, this);"],"delete":["32","function getPath(cfg, smooth) {","34","  const points = [];","39","    topLinePoints.push(point[0]);","40","    bottomLinePoints.push(point[1]);","42","  bottomLinePoints = bottomLinePoints.reverse();","43","  points.push(topLinePoints, bottomLinePoints);","44","  Util.each(points, function(point, index) {","46","    if (smooth) {","47","      subPath = PathUtil.getSplinePath(point, false);","48","    } else {","49","      subPath = PathUtil.getLinePath(point, false);","50","    }","52","      const p1 = point[0];","53","      subPath.push([ 'L', p1.x, p1.y ]);","54","    } else if (index > 0) {","170","    let path = getPath(cfg, false);","171","    path = this.parsePath(path, false);","193","    let path = getPath(cfg, true);","194","    path = this.parsePath(path, false);","210","    let path = getPath(cfg, false);","211","    path = this.parsePath(path, false);","228","    let path = getPath(cfg, true);","229","    path = this.parsePath(path, false);"]}],"src\/geom\/shape\/line.js":[{"add":["63","    if (isInCircle) {","64","      path.push([ 'Z' ]);","65","    }","68","    const constraint = cfg.constraint;","69","    if (isInCircle && points.length) {","70","      points.push({ x: points[0].x, y: points[0].y });","71","    }","74",""],"delete":["65","    const constraint = isInCircle ? null : cfg.constraint;","68","  if (isInCircle) {","69","    path.push([ 'Z' ]);","70","  }"]}],"test\/bugs\/bug-252-spec.js":[{"add":[],"delete":[]}],"test\/unit\/geom\/shape\/area-spec.js":[{"add":["163","      expect(shape.attr('path').length).eql(5);","168","      expect(shape.attr('path')[4].length).eql(1);","289","      expect(shape.attr('path').length).equal(7);"],"delete":["163","      expect(shape.attr('path').length).eql(7);","168","      expect(shape.attr('path')[4].length).eql(7);"]}]}},"28d17a966beba5daa73347f55805ea2b99fc06fe":{"changes":{"test\/unit\/coord\/polar-spec.js":"MODIFY","test\/unit\/geom\/util\/path-spec.js":"MODIFY","test\/unit\/geom\/label\/geom-labels-spec.js":"MODIFY","test\/unit\/geom\/shape\/line-spec.js":"MODIFY","test\/unit\/geom\/label\/pie-labels-spec.js":"MODIFY","test\/bugs\/issue-838-spec.js":"MODIFY","src\/interaction\/drag.js":"ADD","test\/unit\/chart\/controller\/axis-spec.js":"MODIFY","test\/unit\/component\/guide\/text-spec.js":"MODIFY","test\/unit\/geom\/geom-spec.js":"MODIFY","test\/unit\/component\/guide\/line-spec.js":"MODIFY","src\/interaction\/zoom.js":"ADD","test\/unit\/coord\/helix-spec.js":"MODIFY","src\/interaction\/base.js":"ADD","test\/unit\/geom\/shape\/interval-spec.js":"MODIFY","test\/unit\/geom\/shape\/shape-spec.js":"MODIFY","src\/interaction\/shapeSelect.js":"ADD","test\/unit\/geom\/shape\/edge-spec.js":"MODIFY","test\/unit\/animate\/index-spec.js":"MODIFY","test\/unit\/component\/guide\/region-spec.js":"MODIFY","test\/unit\/component\/guide\/image-spec.js":"MODIFY","test\/unit\/geom\/label\/polar-labels-spec.js":"MODIFY","src\/chart\/controller\/coord.js":"MODIFY","test\/bugs\/issue-689-spec.js":"MODIFY","test\/unit\/component\/guide\/base-spec.js":"MODIFY","test\/unit\/component\/guide\/html-spec.js":"MODIFY","src\/util.js":"MODIFY","test\/unit\/coord\/cartesian-spec.js":"MODIFY","src\/core.js":"MODIFY","test\/unit\/geom\/shape\/point-spec.js":"MODIFY","src\/interaction\/index.js":"MODIFY","test\/unit\/component\/guide\/arc-spec.js":"MODIFY","test\/unit\/geom\/shape\/schema-spec.js":"MODIFY","\/dev\/null":"DELETE","test\/unit\/chart\/controller\/guide-spec.js":"MODIFY","test\/bugs\/issue-878-spec.js":"ADD","test\/unit\/component\/axis\/helix-spec.js":"MODIFY","test\/unit\/chart\/view-spec.js":"MODIFY","src\/interaction\/brush.js":"ADD","test\/unit\/geom\/shape\/polygon-spec.js":"MODIFY","package.json":"MODIFY","test\/unit\/geom\/shape\/area-spec.js":"MODIFY","test\/bugs\/issue-730-spec.js":"MODIFY","test\/unit\/animate\/animate-spec.js":"MODIFY"},"diff":{"test\/unit\/coord\/polar-spec.js":[{"add":["1","const Polar = require('@antv\/coord\/lib\/polar');"],"delete":["1","const Polar = require('..\/..\/..\/src\/coord\/polar');"]}],"test\/unit\/geom\/util\/path-spec.js":[{"add":["2","const Coord = require('@antv\/coord\/lib\/');"],"delete":["2","const Coord = require('..\/..\/..\/..\/src\/coord\/');"]}],"test\/unit\/geom\/label\/geom-labels-spec.js":[{"add":["7","const Coord = require('@antv\/coord\/lib\/');"],"delete":["7","const Coord = require('..\/..\/..\/..\/src\/coord\/');"]}],"test\/unit\/geom\/shape\/line-spec.js":[{"add":["3","const Coord = require('@antv\/coord\/lib\/');"],"delete":["3","const Coord = require('..\/..\/..\/..\/src\/coord\/');"]}],"test\/unit\/geom\/label\/pie-labels-spec.js":[{"add":["4","const Coord = require('@antv\/coord\/lib\/');"],"delete":["4","const Coord = require('..\/..\/..\/..\/src\/coord\/');"]}],"test\/bugs\/issue-838-spec.js":[{"add":["4","describe('#838 tooltip enterable', () => {"],"delete":["4","describe('#811 tooltip enterable', () => {"]}],"src\/interaction\/drag.js":[{"add":[],"delete":[]}],"test\/unit\/chart\/controller\/axis-spec.js":[{"add":["2","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["2","const Coord = require('..\/..\/..\/..\/src\/coord\/index');"]}],"test\/unit\/component\/guide\/text-spec.js":[{"add":["2","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["2","const Coord = require('..\/..\/..\/..\/src\/coord\/index');"]}],"test\/unit\/geom\/geom-spec.js":[{"add":["5","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["5","const Coord = require('..\/..\/..\/src\/coord\/index');"]}],"test\/unit\/component\/guide\/line-spec.js":[{"add":["2","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["2","const Coord = require('..\/..\/..\/..\/src\/coord\/index');"]}],"src\/interaction\/zoom.js":[{"add":[],"delete":[]}],"test\/unit\/coord\/helix-spec.js":[{"add":["1","const Helix = require('@antv\/coord\/lib\/helix');"],"delete":["1","const Helix = require('..\/..\/..\/src\/coord\/helix');"]}],"src\/interaction\/base.js":[{"add":[],"delete":[]}],"test\/unit\/geom\/shape\/interval-spec.js":[{"add":["3","const Coord = require('@antv\/coord\/lib\/');"],"delete":["3","const Coord = require('..\/..\/..\/..\/src\/coord\/');"]}],"test\/unit\/geom\/shape\/shape-spec.js":[{"add":["2","const Coord = require('@antv\/coord\/lib\/');"],"delete":["2","const Coord = require('..\/..\/..\/..\/src\/coord\/');"]}],"src\/interaction\/shapeSelect.js":[{"add":[],"delete":[]}],"test\/unit\/geom\/shape\/edge-spec.js":[{"add":["4","const Coord = require('@antv\/coord\/lib\/');"],"delete":["4","const Coord = require('..\/..\/..\/..\/src\/coord\/');"]}],"test\/unit\/animate\/index-spec.js":[{"add":["2","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["2","const Coord = require('..\/..\/..\/src\/coord\/index');"]}],"test\/unit\/component\/guide\/region-spec.js":[{"add":["2","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["2","const Coord = require('..\/..\/..\/..\/src\/coord\/index');"]}],"test\/unit\/component\/guide\/image-spec.js":[{"add":["2","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["2","const Coord = require('..\/..\/..\/..\/src\/coord\/index');"]}],"test\/unit\/geom\/label\/polar-labels-spec.js":[{"add":["3","const Coord = require('@antv\/coord\/lib\/');"],"delete":["3","const Coord = require('..\/..\/..\/..\/src\/coord\/');"]}],"src\/chart\/controller\/coord.js":[{"add":["5","const Coord = require('@antv\/coord\/lib\/');"],"delete":["5","const Coord = require('..\/..\/coord\/index');"]}],"test\/bugs\/issue-689-spec.js":[{"add":["1","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["1","const Coord = require('..\/..\/src\/coord\/index');"]}],"test\/unit\/component\/guide\/base-spec.js":[{"add":["2","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["2","const Coord = require('..\/..\/..\/..\/src\/coord\/index');"]}],"test\/unit\/component\/guide\/html-spec.js":[{"add":["2","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["2","const Coord = require('..\/..\/..\/..\/src\/coord\/index');"]}],"src\/util.js":[{"add":["7","const Util = Utils.mix({}, Utils, {","8","  assign: Utils.mix, \/\/ simple mix","9","  merge: Utils.deepMix, \/\/ deep mix","13","  snapEqual: Utils.isNumberEqual,","14","  remove: Utils.pull,","42","});","48","  values: Utils.valuesOfKey,","51","  remove: Utils.pull"],"delete":["5","const G = require('@antv\/g\/lib');","6","const CommonUtil = G.CommonUtil;","9","const Util = CommonUtil.assign({","10","  DomUtil: G.DomUtil,","11","  MatrixUtil: G.MatrixUtil,","12","  PathUtil: G.PathUtil,","16","  snapEqual(v1, v2) {","17","    return Math.abs(v1 - v2) < 0.001;","18","  },","46","}, Utils, CommonUtil);","52","  values: Utils.values,","55","  remove: CommonUtil.remove"]}],"test\/unit\/coord\/cartesian-spec.js":[{"add":["2","const Cartesian = require('@antv\/coord\/lib\/cartesian');"],"delete":["2","const Cartesian = require('..\/..\/..\/src\/coord\/cartesian');"]}],"src\/core.js":[{"add":["20","  DomUtil: Util.DomUtil,","21","  MatrixUtil: Util.MatrixUtil,","22","  PathUtil: Util.PathUtil"],"delete":["20","  DomUtil: G.DomUtil,","21","  MatrixUtil: G.MatrixUtil,","22","  PathUtil: G.PathUtil"]}],"test\/unit\/geom\/shape\/point-spec.js":[{"add":["3","const Coord = require('@antv\/coord\/lib\/');"],"delete":["3","const Coord = require('..\/..\/..\/..\/src\/coord\/');"]}],"src\/interaction\/index.js":[{"add":["6","const Util = require('..\/util');","8","const Interactions = {","9","  Base: require('.\/base'),","10","  Brush: require('.\/brush'),","11","  Drag: require('.\/drag'),","12","  ShapeSelect: require('.\/shapeSelect'),","13","  Zoom: require('.\/zoom')","14","};","16","G2._Interactions = {};","17","G2.registerInteraction = function(type, constructor) {","18","  G2._Interactions[type] = constructor;","19","};","20","G2.getInteraction = function(type) {","21","  return G2._Interactions[type];","22","};","24","\/\/ binding on View","25","View.prototype.getInteractions = function() {","26","  const me = this;","27","  if (!me._interactions) {","28","    me._interactions = {};","29","  }","30","  return me._interactions;","31","};","32","View.prototype._setInteraction = function(type, interaction) {","33","  const me = this;","34","  const interactions = me.getInteractions();","35","  if (interactions[type] && interactions[type] !== interaction) { \/\/ only one interaction for a key","36","    interactions[type].destroy();","37","  }","38","  interactions[type] = interaction;","39","};","40","View.prototype.clearInteraction = function(type) {","41","  const me = this;","42","  const interactions = me.getInteractions();","43","  if (type) {","44","    interactions[type] && interactions[type].destroy();","45","    delete interactions[type];","46","  } else {","47","    Util.each(interactions, (interaction, key) => {","48","      interaction.destroy();","49","      delete interactions[key];","50","    });","51","  }","52","};","53","View.prototype.interact = View.prototype.interaction = function(type, cfg) {","54","  const me = this;","55","  const Ctor = G2.getInteraction(type);","56","  const interaction = new Ctor(cfg, me);","57","  me._setInteraction(type, interaction);","58","  return me;","59","};","60","","61","G2.registerInteraction('brush', Interactions.Brush);","62","G2.registerInteraction('Brush', Interactions.Brush);","63","G2.registerInteraction('drag', Interactions.Drag);","64","G2.registerInteraction('Drag', Interactions.Drag);","65","G2.registerInteraction('zoom', Interactions.Zoom);","66","G2.registerInteraction('Zoom', Interactions.Zoom);","67","G2.registerInteraction('shape-select', Interactions.ShapeSelect);","68","G2.registerInteraction('ShapeSelect', Interactions.ShapeSelect);","69","","70","module.exports = Interactions;"],"delete":["4","","5","const Interaction = require('@antv\/interaction\/lib');","9","Interaction.helper.bindInteraction(G2, View);","11","G2.registerInteraction('brush', Interaction.Brush);","12","G2.registerInteraction('Brush', Interaction.Brush);","13","G2.registerInteraction('drag', Interaction.Drag);","14","G2.registerInteraction('Drag', Interaction.Drag);","15","G2.registerInteraction('zoom', Interaction.Zoom);","16","G2.registerInteraction('Zoom', Interaction.Zoom);","17","G2.registerInteraction('shape-select', Interaction.ShapeSelect);","18","G2.registerInteraction('ShapeSelect', Interaction.ShapeSelect);","20","module.exports = Interaction;"]}],"test\/unit\/component\/guide\/arc-spec.js":[{"add":["2","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["2","const Coord = require('..\/..\/..\/..\/src\/coord\/index');"]}],"test\/unit\/geom\/shape\/schema-spec.js":[{"add":["3","const Coord = require('@antv\/coord\/lib\/');"],"delete":["3","const Coord = require('..\/..\/..\/..\/src\/coord\/');"]}],"\/dev\/null":[{"add":[],"delete":[]}],"test\/unit\/chart\/controller\/guide-spec.js":[{"add":["3","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["3","const Coord = require('..\/..\/..\/..\/src\/coord\/index');"]}],"test\/bugs\/issue-878-spec.js":[{"add":[],"delete":[]}],"test\/unit\/component\/axis\/helix-spec.js":[{"add":["3","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["3","const Coord = require('..\/..\/..\/..\/src\/coord\/index');"]}],"test\/unit\/chart\/view-spec.js":[{"add":["4","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["4","const Coord = require('..\/..\/..\/src\/coord\/index');"]}],"src\/interaction\/brush.js":[{"add":[],"delete":[]}],"test\/unit\/geom\/shape\/polygon-spec.js":[{"add":["3","const Coord = require('@antv\/coord\/lib\/');"],"delete":["3","const Coord = require('..\/..\/..\/..\/src\/coord\/');"]}],"package.json":[{"add":["97","    \"@antv\/adjust\": \"~0.0.7\",","98","    \"@antv\/attr\": \"~0.0.7\",","99","    \"@antv\/coord\": \"~0.0.3\",","100","    \"@antv\/g\": \"~3.2.2\",","101","    \"@antv\/scale\": \"~0.0.9\",","102","    \"@antv\/util\": \"~1.2.5\","],"delete":["97","    \"@antv\/adjust\": \"~0.0.6\",","98","    \"@antv\/attr\": \"~0.0.6\",","99","    \"@antv\/g\": \"~3.1.1\",","100","    \"@antv\/interaction\": \"~0.1.5\",","101","    \"@antv\/scale\": \"~0.0.8\",","102","    \"@antv\/util\": \"~1.0.12\","]}],"test\/unit\/geom\/shape\/area-spec.js":[{"add":["3","const Coord = require('@antv\/coord\/lib\/');"],"delete":["3","const Coord = require('..\/..\/..\/..\/src\/coord\/');"]}],"test\/bugs\/issue-730-spec.js":[{"add":["3","const Coord = require('@antv\/coord\/lib\/');"],"delete":["3","const Coord = require('..\/..\/src\/coord\/');"]}],"test\/unit\/animate\/animate-spec.js":[{"add":["2","const Coord = require('@antv\/coord\/lib\/index');"],"delete":["2","const Coord = require('..\/..\/..\/src\/coord\/index');"]}]}},"60086a36c1717aac1b7799d55b364f66df0ddaba":{"changes":{"src\/chart\/view.js":"MODIFY","test\/bugs\/issue-sync-spec.js":"ADD","src\/global.js":"MODIFY","src\/chart\/chart.js":"MODIFY","test\/unit\/scale\/auto\/number-spec.js":"MODIFY"},"diff":{"src\/chart\/view.js":[{"add":["877","    const views = this.get('views');","878","    \/\/ 如果存在 views 则初始化子 view 的方法","879","    Util.each(views, function(view) {","880","      view.drawComponents();","881","    });","910","    this.drawComponents();"],"delete":["873","    this.drawComponents();"]}],"test\/bugs\/issue-sync-spec.js":[{"add":[],"delete":[]}],"src\/global.js":[{"add":["14","  snapCountArray: [ 0, 1, 1.2, 1.5, 1.6, 2, 2.2, 2.4, 2.5, 3, 4, 5, 6, 7.5, 8, 10 ],"],"delete":["14","  snapCountArray: [ 0, 1, 1.2, 1.5, 1.6, 2, 2.2, 2.4, 3, 4, 5, 6, 7.5, 8, 10 ],"]}],"src\/chart\/chart.js":[{"add":["505","      this.drawComponents();"],"delete":[]}],"test\/unit\/scale\/auto\/number-spec.js":[{"add":["200","  it('with count 5', function() {","201","    const rst = auto({","202","      min: 0,","203","      minCount: 5,","204","      maxCount: 5,","205","      max: 10","206","    });","207","    expect(rst.ticks).eql([ 0, 2.5, 5, 7.5, 10 ]);","208","  });","209",""],"delete":[]}]}},"0872aa920219ebc2221383578520d12895a49e98":{"changes":{"demos\/line-time.html":"MODIFY","test\/bugs\/issue-607-spec.js":"ADD","src\/scale\/time.js":"MODIFY"},"diff":{"demos\/line-time.html":[{"add":["13","  <div id=\"mountNode\"><\/div>","16","    const data = [];","18","      container: 'mountNode',","22","    chart.source(data, {","23","      time: {","24","        alias: '时间',","25","        type: 'time',","26","        mask: 'MM:ss',","27","        tickCount: 10,","28","        nice: false","29","      },","30","      temperature: {","31","        alias: '平均温度(°C)',","32","        min: 10,","33","        max: 35","34","      },","35","      type: {","36","        type: 'cat'","37","      }","38","    });","40","      .position('time*temperature')","41","      .color('type', [ '#ff7f0e', '#2ca02c' ])","42","      .shape('smooth')","43","      .size(2);","45","    setInterval(function() {","46","      const now = new Date();","47","      const time = now.getTime();","48","      const temperature1 = ~~(Math.random() * 5) + 22;","49","      const temperature2 = ~~(Math.random() * 7) + 17;","50","      if (data.length >= 200) {","51","        data.shift();","52","        data.shift();","53","      }","54","      data.push({","55","        time,","56","        temperature: temperature1,","57","        type: '记录1'","58","      });","59","      data.push({","60","        time,","61","        temperature: temperature2,","62","        type: '记录2'","63","      });","64","      chart.changeData(data);","65","    }, 1000);"],"delete":["13","  <div id=\"canvas\"><\/div>","14","  <script src=\".\/assets\/jquery-3.2.1.min.js\"><\/script>","17","  $.getJSON('.\/data\/tem.json', data => {","19","      container: 'canvas',","23","    chart.source(data);","25","      .position('date*Austin');","27","  });"]}],"test\/bugs\/issue-607-spec.js":[{"add":[],"delete":[]}],"src\/scale\/time.js":[{"add":["42","    if (values && values.length) { \/\/ 重新计算最大最小值"],"delete":["42","    if (values) { \/\/ 重新计算最大最小值"]}]}},"1e328b75299fbc56b62194dfe81b48308e93fc3f":{"changes":{"__tests__\/integration\/snapshots\/static\/alphabetIntervalFunnel.png":"ADD","__tests__\/plots\/static\/index.ts":"MODIFY","__tests__\/plots\/static\/alphabet-interval-pyramid.ts":"ADD","src\/shape\/interval\/pyramid.ts":"MODIFY","__tests__\/plots\/static\/alphabet-interval-funnel.ts":"ADD","__tests__\/integration\/snapshots\/static\/alphabetIntervalPyramid.png":"ADD","src\/shape\/interval\/funnel.ts":"MODIFY"},"diff":{"__tests__\/integration\/snapshots\/static\/alphabetIntervalFunnel.png":[{"add":[],"delete":[]}],"__tests__\/plots\/static\/index.ts":[{"add":["5","export { alphabetIntervalFunnel } from '.\/alphabet-interval-funnel';","6","export { alphabetIntervalPyramid } from '.\/alphabet-interval-pyramid';"],"delete":[]}],"__tests__\/plots\/static\/alphabet-interval-pyramid.ts":[{"add":[],"delete":[]}],"src\/shape\/interval\/pyramid.ts":[{"add":[],"delete":["3","import { Color } from '.\/color';","48","  ...Color.props,"]}],"__tests__\/plots\/static\/alphabet-interval-funnel.ts":[{"add":[],"delete":[]}],"__tests__\/integration\/snapshots\/static\/alphabetIntervalPyramid.png":[{"add":[],"delete":[]}],"src\/shape\/interval\/funnel.ts":[{"add":["0","import { Path } from '@antv\/g';","1","import { line, curveLinearClosed } from 'd3-shape';","5","import { select } from '..\/..\/utils\/selection';","6","import { applyStyle, getShapeTheme, reorder, toOpacityKey } from '..\/utils';","43","    const { index, mark, shape, defaultShape } = value;","44","    const { defaultColor, ...defaults } = getShapeTheme(","45","      theme,","46","      mark,","47","      shape,","48","      defaultShape,","49","    );","52","    const tpShape = !!isTranspose(coordinate);","54","    const [p0, p1, p2, p3] = tpShape ? reorder(funnelPoints) : funnelPoints;","55","    const { color = defaultColor, opacity } = value;","56","    const b = line().curve(curveLinearClosed)([p0, p1, p2, p3]);","57","    return select(new Path({}))","58","      .call(applyStyle, defaults)","59","      .style('path', b)","60","      .style('fill', color)","61","      .style('fillOpacity', opacity)","62","      .call(applyStyle, style)","63","      .node();","68","  defaultMarker: 'square',"],"delete":["3","import { Color } from '.\/color';","40","    const { index } = value;","44","    return Color({ colorAttribute: 'fill', ...style })(","45","      funnelPoints,","46","      value,","47","      coordinate,","48","      theme,","49","      point2d,","50","      ...args,","51","    );","56","  ...Color.props,","57","  defaultMarker: 'funnel',"]}]}},"f82b5bc60b3c715bc3ef1873871c355929ed91ae":{"changes":{"src\/geom\/shape\/violin.js":"MODIFY","test\/bugs\/issue-1177-spec.js":"ADD"},"diff":{"src\/geom\/shape\/violin.js":[{"add":["36","  if (first) {","37","    path.push([ 'L', first.x, first.y ]);","38","    path.push([ 'z' ]);","39","  }"],"delete":["36","  path.push([ 'L', first.x, first.y ]);","37","  path.push([ 'z' ]);"]}],"test\/bugs\/issue-1177-spec.js":[{"add":[],"delete":[]}]}},"0b72606307d2b075a59cc62296a1e2830d97e9fe":{"changes":{"src\/chart\/controller\/tooltip.js":"MODIFY","src\/component\/tooltip\/index.js":"MODIFY"},"diff":{"src\/chart\/controller\/tooltip.js":[{"add":["19","        if (!Util.isObject(item[key]) && item[key] !== sub[key]) {"],"delete":["19","        if (item[key] !== sub[key]) {"]}],"src\/component\/tooltip\/index.js":[{"add":["377","            if (!Util.isObject(item[key]) && item[key] !== preItem[key]) {"],"delete":["377","            if (item[key] !== preItem[key]) {"]}]}},"00815aa39d777219ca55bc2c5e67852365392242":{"changes":{"__tests__\/integration\/utils\/renderSpec.ts":"MODIFY","src\/runtime\/render.ts":"MODIFY","__tests__\/integration\/snapshots\/interaction\/penguins-point-highlight\/step0.png":"MODIFY"},"diff":{"__tests__\/integration\/utils\/renderSpec.ts":[{"add":[],"delete":["21","  \/\/ Wait for the next tick.","22","  await sleep(20);"]}],"src\/runtime\/render.ts":[{"add":["96","      \/\/ Wait for the next tick.","97","      canvas.requestAnimationFrame(() => {","98","        emitter.emit(ChartEvent.AFTER_RENDER);","99","        resolve?.();","100","      });","113","  resolve?: () => void,","114","  reject?: (e: Error) => void,","139","  plot<T>({ ...keyed, width, height }, selection, library, context)","140","    .then(() => {","141","      const canvas = group.ownerDocument.defaultView;","142","      canvas.requestAnimationFrame(() => {","143","        emitter.emit(ChartEvent.AFTER_RENDER);","144","        resolve?.();","145","      });","146","    })","147","    .catch((e) => {","148","      reject?.(e);","149","    });"],"delete":["96","      emitter.emit(ChartEvent.AFTER_RENDER);","97","      resolve?.();","110","  callback?: () => void,","135","  plot<T>({ ...keyed, width, height }, selection, library, context).then(() => {","136","    emitter.emit(ChartEvent.AFTER_RENDER);","137","    callback?.();","138","  });"]}],"__tests__\/integration\/snapshots\/interaction\/penguins-point-highlight\/step0.png":[{"add":[],"delete":[]}]}},"86d2b6a1fb6302f11f2839c3e94f843de6d9310d":{"changes":{"src\/global.js":"MODIFY","test\/unit\/global-spec.js":"ADD"},"diff":{"src\/global.js":[{"add":["7","\/\/ const Global = {};","8","const Global = {","28","  \/\/ for (const k in Global) {","29","  \/\/   if (Global.hasOwnProperty(k)) {","30","  \/\/     delete Global[k];","31","  \/\/   }","32","  \/\/ }","42","  Util.deepMix(Global, newTheme);","47","Global.setTheme = setTheme;","48",""],"delete":["7","const Global = {};","8","const Default = {","28","  for (const k in Global) {","29","    if (Global.hasOwnProperty(k)) {","30","      delete Global[k];","31","    }","32","  }","42","  Util.deepMix(Global, Default, newTheme);","43","  Global.setTheme = setTheme;"]}],"test\/unit\/global-spec.js":[{"add":[],"delete":[]}]}},"7a72e3787aa3630e899e899e30ac7c7b34613e28":{"changes":{"__tests__\/integration\/snapshots\/api\/markChangeDataTooltip.html":"ADD","__tests__\/plots\/api\/mark-change-data.ts":"MODIFY","__tests__\/main.ts":"MODIFY","__tests__\/integration\/api-mark-change-data-tooltip.spec.ts":"ADD","__tests__\/plots\/api\/mark-change-data-tooltip.ts":"ADD","src\/interaction\/native\/utils.ts":"MODIFY","__tests__\/plots\/api\/index.ts":"MODIFY"},"diff":{"__tests__\/integration\/snapshots\/api\/markChangeDataTooltip.html":[{"add":[],"delete":[]}],"__tests__\/plots\/api\/mark-change-data.ts":[{"add":["42","  return { chart, finished, button, canvas: chart.context().canvas };"],"delete":["42","  return { chart, finished, button };"]}],"__tests__\/main.ts":[{"add":["159","      const { canvas } = render({ container });","160","      \/\/ @ts-ignore","161","      if (canvas instanceof Canvas) window.__g_instances__ = [canvas];"],"delete":["159","      render({ container });"]}],"__tests__\/integration\/api-mark-change-data-tooltip.spec.ts":[{"add":[],"delete":[]}],"__tests__\/plots\/api\/mark-change-data-tooltip.ts":[{"add":[],"delete":[]}],"src\/interaction\/native\/utils.ts":[{"add":["21","  return select(root)","22","    .selectAll(`.${ELEMENT_CLASS_NAME}`)","23","    .nodes()","24","    .filter((d) => !d.__removed__);"],"delete":["21","  return select(root).selectAll(`.${ELEMENT_CLASS_NAME}`).nodes();"]}],"__tests__\/plots\/api\/index.ts":[{"add":["5","export { markChangeDataTooltip } from '.\/mark-change-data-tooltip';"],"delete":[]}]}},"4af93c6c2c4af59571520b274cde4ba369599e9f":{"changes":{"test\/bugs\/issue-285-spec.js":"ADD","src\/scale\/time.js":"MODIFY","package.json":"MODIFY","test\/bugs\/issue-242-spec.js":"ADD","test\/bugs\/issue-240-spec.js":"ADD"},"diff":{"test\/bugs\/issue-285-spec.js":[{"add":[],"delete":[]}],"src\/scale\/time.js":[{"add":["50","        if (isNaN(timeStamp)) {","51","          throw new TypeError(`Invalid Time: ${v}`);","52","        }"],"delete":[]}],"package.json":[{"add":["22","    \"@antv\/data-set\": \"~0.8.0\","],"delete":["22","    \"@antv\/data-set\": \"~0.7.0\","]}],"test\/bugs\/issue-242-spec.js":[{"add":[],"delete":[]}],"test\/bugs\/issue-240-spec.js":[{"add":[],"delete":[]}]}},"8bef72fee515833a633b68a4988671950a68adf8":{"changes":{"package.json":"MODIFY","src\/chart\/chart.js":"MODIFY"},"diff":{"package.json":[{"add":["83","    \"@antv\/g\": \"~2.0.4\","],"delete":["83","    \"@antv\/g\": \"~2.0.2\","]}],"src\/chart\/chart.js":[{"add":["100","      width = DomUtil.getWidth(container, width);","222","    const oldWidth = self.get('width');","223","    const width = DomUtil.getWidth(container, oldWidth);","224","    if (width !== oldWidth) {","225","      const height = self.get('height');","226","      self.changeSize(width, height);","248","    self.emit('afterchangesize');"],"delete":["100","      width = DomUtil.getWidth(container);","222","    const width = DomUtil.getWidth(container);","223","    if (width !== this.get('width')) {","224","      const height = this.get('height');","225","      this.changeSize(width, height);","247","    this.emit('afterchangesize');"]}]}},"f31ccca70fa8ccebc06e66bfa88f65d45b95b849":{"changes":{"src\/util\/scale.ts":"MODIFY","tests\/unit\/util\/scale-spec.ts":"MODIFY"},"diff":{"src\/util\/scale.ts":[{"add":["4","const dateRegex = \/^(?:(?!0000)[0-9]{4}([-\/.]+)(?:(?:0?[1-9]|1[0-2])\\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\\1(?:29|30)|(?:0?[13578]|1[02])\\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-\/.]+)0?2\\2(?:29))(\\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$\/;"],"delete":["4","const dateRegex = \/^(?:(?!0000)[0-9]{4}([-\/.]+)(?:(?:0?[1-9]|1[0-2])\\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\\1(?:29|30)|(?:0?[13578]|1[02])\\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-\/.]?)0?2\\2(?:29))(\\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$\/;"]}],"tests\/unit\/util\/scale-spec.ts":[{"add":["3","  const data1 = [{ a: 1, b: '2', c: '2010-01-01', d: 1, e: null, f: '20200229', g: '20200202' }];","96","","97","  it('dateRegex test for yyyymmdd', () => {","98","    expect(createScaleByField('f', data1).type).toBe('cat');","99","    expect(createScaleByField('g', data1).type).toBe('cat');","100","  });"],"delete":["3","  const data1 = [{ a: 1, b: '2', c: '2010-01-01', d: 1, e: null }];"]}]}},"39ae3c39aae8e7206da954e17e78ae80a9efe712":{"changes":{"test\/bugs\/issue-378-spec.js":"ADD","test\/bugs\/issue-368-spec.js":"MODIFY","src\/scale\/time-cat.js":"MODIFY"},"diff":{"test\/bugs\/issue-378-spec.js":[{"add":[],"delete":[]}],"test\/bugs\/issue-368-spec.js":[{"add":["62","      height: 540,","63","      animate: false","86","    chart.destroy();"],"delete":["62","      height: 540","85",""]}],"src\/scale\/time-cat.js":[{"add":["153","          tickValue: tick, \/\/ 用于坐标轴上文本动画时确定前后帧的对应关系"],"delete":[]}]}},"28c7122c779f41720a8204560c3e952c093895d5":{"changes":{"test\/bugs\/issue-1221-spec.js":"ADD","package.json":"MODIFY"},"diff":{"test\/bugs\/issue-1221-spec.js":[{"add":[],"delete":[]}],"package.json":[{"add":["100","    \"@antv\/component\": \"~0.3.2\","],"delete":["100","    \"@antv\/component\": \"~0.3.1\","]}]}},"7b0b307b2a897712c753cb0a5c033d7e6f408fdc":{"changes":{"docs\/common\/marker-cfg.md":"MODIFY","docs\/manual\/faq.zh.md":"MODIFY","tests\/bugs\/2474-spec.ts":"ADD","docs\/manual\/tutorial\/legend.zh.md":"MODIFY","src\/util\/legend.ts":"MODIFY","package.json":"MODIFY","docs\/manual\/upgrade.zh.md":"MODIFY"},"diff":{"docs\/common\/marker-cfg.md":[{"add":["0","#### *MarkerCfg*  配置","2","| 参数名  | 类型                  | 默认值 | 描述                                                                     |","3","| ------- | --------------------- | ------ | ------------------------------------------------------------------------ |","4","| symbol  | *string \\| function*  | -      | 配置图例 marker 的 symbol 形状，详见 [marker.symbol 配置](#markersymbol) |","5","| style   | [ShapeAttrs](shape)   | -      | 图例项 marker 的配置项                                                   |","6","| spacing | number                | -      | 图例项 marker 同后面 name 的间距                                         |","8","#### marker.symbol","9","","10","内置一些 symbol 类型，可以指定具体的标记类型，也可以通过回调的方式返回 symbol 绘制的 path 命令","11","","12","内置支持的标记类型有：`\"circle\" | \"square\" | \"line\" | \"diamond\" | \"triangle\" | \"triangle-down\" | \"hexagon\" | \"bowtie\" | \"cross\" | \"tick\" | \"plus\" | \"hyphen\"`","13","","14","回调的方式为：`(x: number, y: number, r: number) => PathCommand`；"],"delete":["0","_MarkerCfg_ 配置如下：","2","| 参数名  | 类型                         | 是否必选 | 默认值 | 描述                             |","3","| ------- | ---------------------------- | -------- | ------ | -------------------------------- |","4","| symbol  | _Marker_ \\| _MarkerCallback_ |          | -      | 配置图例 marker 的 symbol 形状   |","5","| style   | [ShapeAttrs](shape)          |          | -      | 图例项 marker 的配置项           |","6","| spacing | number                       |          | -      | 图例项 marker 同后面 name 的间距 |","8","_Marker_ 为支持的标记类型有： \"circle\" | \"square\" | \"line\" | \"diamond\" | \"triangle\" | \"triangleDown\" | \"hexagon\" | \"bowtie\" | \"cross\" | \"tick\" | \"plus\" | \"hyphen\"；","9","_MarkerCallback_ 为 `(x: number, y: number, r: number) => PathCommand`；"]}],"docs\/manual\/faq.zh.md":[{"add":["163","","164","## Legend 设置 marker.symbol 出错或不展示","165","","166","G2 4.0 支持的 legend marker 标记类型(symbol)有：`\"circle\" | \"square\" | \"line\" | \"diamond\" | \"triangle\" | \"triangle-down\" | \"hexagon\" | \"bowtie\" | \"cross\" | \"tick\" | \"plus\" | \"hyphen\"`，具体可以见 [API](..\/api\/general\/legend#marker)","167","","168","- 🗑️ `triangleDown` 标记类型移除，变更为 `triangle-down`","169","- 🗑️ `hollow-*` 等标记类型移除，可以通过设置 `style` 来达到空心的效果"],"delete":[]}],"tests\/bugs\/2474-spec.ts":[{"add":[],"delete":[]}],"docs\/manual\/tutorial\/legend.zh.md":[{"add":["7","- shape, color, size 这三个图形属性如果判断接收的参数是数据源的字段时，会自动生成不同的图例；","8","- shape 属性，会根据不同的 shape 类型生成图例；","9","- color 属性，会赋予不同的图例项不同的颜色来区分图形；","10","- size 属性，在图例上显示图形的大小。","23","  itemGap: 20, \/\/ 图例项之间的间距","29","  title: null, \/\/ 不展示图例 title","37","| 属性名       | 解释                                                                                                                                                                                                                                                                                                                                               | 默认值                                           |","38","| :----------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :----------------------------------------------- | ------ | --------- | ---------- | --------------- | --------- | -------- | ------- | ------ | ------ | -------- | --------------------------- |","39","| position     | 图例的显示位置，支持 12 个定位位置，配置值 'left-top','left-center','left-bottom','right-top','right-top','right-bottom','top-left','top-center','top-bottom','bottom-left','bottom-center','bottom-right'。也可使用'left'（默认为 left-bottom'),'right'（默认为'right-bottom'),'top'（默认为 top-center'),'bottom'（默认为 bottom-center') 定位。 | 'bottom-center'                                  |","40","| title        | 用于图例标题的显示样式配置，如果值为 null 则不展示。                                                                                                                                                                                                                                                                                               | 左右两侧图例默认展示标题，上下图例默认不展示标题 |","41","| background   | 用于图例背景色的配置                                                                                                                                                                                                                                                                                                                               | 默认没有背景色                                   |","42","| offsetX      | 整个图例的水平偏移距离                                                                                                                                                                                                                                                                                                                             | --                                               |","43","| offsetY      | 整个图例的垂直偏移距离                                                                                                                                                                                                                                                                                                                             | --                                               |","44","| width        | 图例的整体宽度（用于连续图例）                                                                                                                                                                                                                                                                                                                     | 20                                               |","45","| height       | 图例的整体高度（用于连续图例）                                                                                                                                                                                                                                                                                                                     | 156                                              |","46","| autoWrap     | 图例项过多时是否自动换行（用于分类图例）                                                                                                                                                                                                                                                                                                           | true，自动换行                                   |","47","| marker       | 配置图例 marker 的显示样式，通过指定 `marker.symbol` 来改变不同的'circle'                                                                                                                                                                                                                                                                          | 'square'                                         | 'line' | 'diamond' | 'triangle' | 'triangle-down' | 'hexagon' | 'bowtie' | 'cross' | 'tick' | 'plus' | 'hyphen' | 不同的几何标记不同的 marker |","48","| attachLast   | 是否启用尾部跟随图例（适用于`line`、`lineStack`、`area`、`areaStack`图表类型）                                                                                                                                                                                                                                                                     | false                                            |","49","| clickable    | 图例项是否可以点击                                                                                                                                                                                                                                                                                                                                 | true                                             |","50","| hoverable    | 是否默认开启鼠标 hover 到图例项上的交互                                                                                                                                                                                                                                                                                                            | true                                             |","51","| selectedMode | clickable 为 true 时生效，图例的选中模式，单选或者多选                                                                                                                                                                                                                                                                                             | 'multiple' 默认多选                              |","52","| onHover      | 自定义图例项鼠标 hover 事件，hoverable 为 false 不生效                                                                                                                                                                                                                                                                                             | --                                               |","53","| onClick      | 自定义图例项点击事件， clickable 为 false 不生效                                                                                                                                                                                                                                                                                                   | --                                               |","73","  { year: 'Year 2012', region: 'Oceania', population: 38 },","80","  padding: [20, 90, 95, 80],","87","  marker: 'square', \/\/ 设置图例 marker 的显示样式","97","| 属性名           | 解释                                                                                                         | 默认值            |","98","| :--------------- | :----------------------------------------------------------------------------------------------------------- | :---------------- |","99","| allowAllCanceled | （分类图例）是否保留一项不能取消勾选，默认为 false，即最后一项不能取消勾选                                   | false             |","100","| unCheckColor     | 未选中时 marker 的颜色                                                                                       | '#bfbfbf'         |","101","| textStyle        | 图例项文本的样式配置                                                                                         | {fill: '#3c3c3c'} |","102","| itemWidth        | 图例项的宽度，当图例有很多图例项，并且用户想要这些图例项在同一平面内垂直对齐，此时这个属性可帮用户实现此效果 | --                |","103","| itemFormatter    | 用于格式化图例每项的文本显示，是个回调函数                                                                   | --                |","125","  selectedMode: 'single',","162","  { 部门: '部门4', 小组: '组名21', 完成人数: 52, 未完成人数: 9 },","172","    },","176","    callback: (obj) => {","179","    },","185","    value: '人数',","191","  padding: [5, 100, 80],","194","chart.filter('部门', (val) => {","202","  hoverable: false,","207","    formatter: (value) => {","210","    },","211","  },","213","chart.interval().position('小组*人数').color('部门').shape('完成状态', ['rect', 'hollowRect']).style({","214","  lineWidth: 1,","215","});","257","        symbol: 'square',","258","      },","263","        symbol: 'square',","264","      },","265","    },","266","  ],","267","});","292","  containerTpl: { string }, \/\/ 可选，默认容器模板不满足要求时使用","293","  itemTpl: { string } | { function }, \/\/ 可选，用户设置的图例项 html 模板，默认提供的模板不满足要求时使用","307","  { country: 'The Netherlands', litres: 50 },","311","const dv = ds.createView().source(data).transform({","312","  type: 'percent',","313","  field: 'litres',","314","  dimension: 'country',","315","  as: 'percent',","316","});","322","  padding: [20, 120, 20, 160],","326","    formatter: (val) => {","329","    },","331","  nice: false,","335","  radius: 1,","339","  itemTpl: '<li data-index={index}><span style=\"color:{color}\">{name}:<\/span>{value}<\/li>',","344","  containerTpl:","345","    '<div class=\"g2-legend\">' +","351","    return (","352","      '<tr class=\"g2-legend-list-item item-' +","353","      index +","354","      ' ' +","355","      checked +","356","      '\" data-value=\"' +","357","      value +","358","      '\" data-color=' +","359","      color +","361","      '<td width=150 style=\"border: none;padding:0;\"><i class=\"g2-legend-marker\" style=\"width:10px;height:10px;display:inline-block;margin-right:10px;background-color:' +","362","      color +","363","      ';\"><\/i>' +","364","      '<span class=\"g2-legend-text\">' +","365","      value +","366","      '<\/span><\/td>' +","367","      '<td style=\"text-align: right;border: none;padding:0;\">' +","368","      obj.litres +","369","      '<\/td>' +","370","      '<\/tr>'","371","    );","376","    marginTop: '-107px',","379","    border: 'none',","380","  },","382","chart.filter('country', (val) => {","385","chart","386","  .intervalStack()","388","  .color('country', ['#67b7dc', '#84b761', '#fdd400', '#cc4748', '#cd82ad', '#2f4074', '#448e4d', '#b7b83f', '#b9783f'])","392","    },","396","    stroke: '#fff',","403","- 1. 隐藏图例","410","- 2. 更改图例位置","414","  position: 'bottom',","418","- 3. 图例显示位置不够"],"delete":["7","* shape, color, size 这三个图形属性如果判断接收的参数是数据源的字段时，会自动生成不同的图例；","8","* shape 属性，会根据不同的 shape 类型生成图例；","9","* color 属性，会赋予不同的图例项不同的颜色来区分图形；","10","* size 属性，在图例上显示图形的大小。","23","  itemGap: 20 \/\/ 图例项之间的间距","29","  title: null \/\/ 不展示图例 title","37","| 属性名 | 解释 | 默认值 |","38","| :--- | :--- | :--- |","39","| position | 图例的显示位置，支持 12 个定位位置，配置值 'left-top','left-center','left-bottom','right-top','right-top','right-bottom','top-left','top-center','top-bottom','bottom-left','bottom-center','bottom-right'。也可使用'left'（默认为 left-bottom'),'right'（默认为'right-bottom'),'top'（默认为 top-center'),'bottom'（默认为 bottom-center') 定位。 | 'bottom-center' |","40","| title | 用于图例标题的显示样式配置，如果值为 null 则不展示。 | 左右两侧图例默认展示标题，上下图例默认不展示标题 |","41","| background | 用于图例背景色的配置 | 默认没有背景色 |","42","| offsetX | 整个图例的水平偏移距离 | -- |","43","| offsetY | 整个图例的垂直偏移距离 | -- |","44","| width | 图例的整体宽度（用于连续图例） | 20 |","45","| height | 图例的整体高度（用于连续图例） | 156 |","46","| autoWrap | 图例项过多时是否自动换行（用于分类图例） | true，自动换行 |","47","| marker | 配置图例 marker 的显示样式，支持指定 `point` 几何标记支持的所有 shape（除去 'rect')：'circle', 'square', 'bowtie', 'diamond', 'hexagon', 'triangle', 'triangle-down', 'hollowCircle', 'hollowSquare', 'hollowBowtie', 'hollowDiamond', 'hollowHexagon', 'hollowTriangle', 'hollowTriangle-down', 'cross', 'tick', 'plus', 'hyphen', 'line' | 不同的几何标记不同的 marker |","48","| attachLast | 是否启用尾部跟随图例（适用于`line`、`lineStack`、`area`、`areaStack`图表类型） | false |","49","| clickable | 图例项是否可以点击 | true |","50","| hoverable | 是否默认开启鼠标 hover 到图例项上的交互 | true |","51","| selectedMode | clickable 为 true 时生效，图例的选中模式，单选或者多选 | 'multiple' 默认多选 |","52","| onHover | 自定义图例项鼠标 hover 事件，hoverable 为 false 不生效 | -- |","53","| onClick | 自定义图例项点击事件， clickable 为 false 不生效 | -- |","73","  { year: 'Year 2012', region: 'Oceania', population: 38 }","80","  padding: [ 20, 90, 95, 80 ]","87","  marker: 'square' \/\/ 设置图例 marker 的显示样式","97","| 属性名 | 解释 | 默认值 |","98","| :--- | :--- | :--- |","99","| allowAllCanceled | （分类图例）是否保留一项不能取消勾选，默认为 false，即最后一项不能取消勾选 | false |","100","| unCheckColor | 未选中时 marker 的颜色 | '#bfbfbf' |","101","| textStyle | 图例项文本的样式配置 | {fill: '#3c3c3c'} |","102","| itemWidth | 图例项的宽度，当图例有很多图例项，并且用户想要这些图例项在同一平面内垂直对齐，此时这个属性可帮用户实现此效果 | -- |","103","| itemFormatter | 用于格式化图例每项的文本显示，是个回调函数 | -- |","125","  selectedMode: 'single'","162","  { 部门: '部门4', 小组: '组名21', 完成人数: 52, 未完成人数: 9 }","172","    }","176","    callback: obj => {","179","    }","185","    value: '人数'","191","  padding: [ 5, 100, 80 ]","194","chart.filter('部门', val => {","202","  hoverable: false","207","    formatter: value => {","210","    }","211","  }","213","chart.interval()","214","  .position('小组*人数')","215","  .color('部门')","216","  .shape('完成状态', [ 'rect', 'hollowRect' ])","217","  .style({","218","    lineWidth: 1","219","  });","261","        symbol: 'square'","262","      }","267","        symbol: 'square'","268","      }","269","    }","270","  ]","271","})","296","  containerTpl: {string}, \/\/ 可选，默认容器模板不满足要求时使用","297","  itemTpl: {string} | {function}, \/\/ 可选，用户设置的图例项 html 模板，默认提供的模板不满足要求时使用","311","  { country: 'The Netherlands', litres: 50 }","315","const dv = ds.createView()","316","  .source(data)","317","  .transform({","318","    type: 'percent',","319","    field: 'litres',","320","    dimension: 'country',","321","    as: 'percent'","322","  });","328","  padding: [ 20, 120, 20, 160 ]","332","    formatter: val => {","335","    }","337","  nice: false","341","  radius: 1","345","  itemTpl: '<li data-index={index}><span style=\"color:{color}\">{name}:<\/span>{value}<\/li>'","350","  containerTpl: '<div class=\"g2-legend\">' +","356","    return '<tr class=\"g2-legend-list-item item-' + index + ' ' + checked +","357","      '\" data-value=\"' + value + '\" data-color=' + color +","359","      '<td width=150 style=\"border: none;padding:0;\"><i class=\"g2-legend-marker\" style=\"width:10px;height:10px;display:inline-block;margin-right:10px;background-color:' + color + ';\"><\/i>' +","360","      '<span class=\"g2-legend-text\">' + value + '<\/span><\/td>' +","361","      '<td style=\"text-align: right;border: none;padding:0;\">' + obj.litres + '<\/td>' +","362","      '<\/tr>';","367","    marginTop: '-107px'","370","    border: 'none'","371","  }","373","chart.filter('country', val => {","376","chart.intervalStack()","378","  .color('country', [ '#67b7dc', '#84b761', '#fdd400', '#cc4748', '#cd82ad', '#2f4074', '#448e4d', '#b7b83f', '#b9783f' ])","382","    }","386","    stroke: '#fff'","393","* 1. 隐藏图例","400","* 2. 更改图例位置","404","  position: 'bottom'","408","* 3. 图例显示位置不够","411","","412",""]}],"src\/util\/legend.ts":[{"add":["0","import { LegendMarkerCfg } from '@antv\/component';","10","\/** 线条形 marker symbol *\/","11","const STROKES_SYMBOLS = ['line', 'cross', 'tick', 'plus', 'hyphen'];","12","","13","function adpatorMarkerStyle(marker: LegendMarkerCfg, color: string) {","14","  const symbol = marker.symbol;","15","  if (isString(symbol) && STROKES_SYMBOLS.indexOf(symbol) !== -1) {","16","    marker.style = deepMix({}, marker.style, { lineWidth: 1, stroke: color, fill: null });","17","  }","18","}","19","","85","      adpatorMarkerStyle(marker, color);"],"delete":[]}],"package.json":[{"add":["58","    \"@antv\/gatsby-theme-antv\": \"^1.0.4\","],"delete":["58","    \"@antv\/gatsby-theme-antv\": \"^1.0.0-beta.19\","]}],"docs\/manual\/upgrade.zh.md":[{"add":["15","## 整体变化","26","## API 变更","30","### 不兼容改动","66","### 配置项以及接口变更","114","#### Tooltip","116","`chart.tooltip()` 配置项更新，同时将 G2 3.x 版本中一些针对特定图表的内置规则删除，需要用户自己通过提供的配置项进行配置，具体配置属性详见 [API](..\/api\/general\/tooltip)。","117","","118","- tooltip 的背景辅助框不再配置项中支持，需要使用 `chart.interaction('active-region');` 同时支持直角坐标系和极坐标系。","122","#### Legend（图例）","124","<details>","125","  <summary>","126","  `chart.legend()`  配置项更新，具体的配置见 [API](..\/api\/general\/legend)。以下列举了一些 3.x 常用的属性以及 4.0 的替代方案(点击展开)：","127","  <\/summary>","129","- 🗑️ `clickable` 属性移除，如想要取消 legend 勾选交互，可以通过 `chart.removeInteraction('legend-filter')` 移除分类图例的勾选交互。","130","- 🗑️ `selectedMode` 属性移除，4.0 可通过自定义交互行为实现。","131","- 🗑️ `onClick` 属性移除，4.0 可通过监听 legend 事件实现：`chart.on('legend:click', (ev) => {})`。","132","- 🗑️ `slidable` 属性移除，4.0 可以通过 `chart.removeInteraction('continuous-filter')` 移除连续图例的滑块交互。","133","- 🗑️ `hoverable` 属性移除，4.0 可以通过 `chart.interaction('legend-active')` 等交互行为实现，参考交互语法 demo: https:\/\/g2.antv.vision\/en\/examples\/interaction\/component#legend-active。","134","- 🗑️ `onHover` 属性移除，4.0 可以通过监听 legend 事件实现：`chart.on('legend:mousemove', (ev) => {})`。","135","","136","<\/details>","137","","138","#### Label（数据标签）","139","","140","`geometry.label()` 接口更新，不再支持 html 类型的 label，详见 [API](..\/api\/general\/label)。","141","","142","#### Axis（坐标轴）","143","","144","`chart.axis()`  配置项更新，详见 [API](..\/api\/general\/axis)。","145","","146","#### Annotation（图形标注）","147","","148","`chart.annotation()`  各个类型的 annotation 配置项更新，详见 [API](..\/api\/general\/annotation)。","149","","150","#### Style（几何标记样式）","151","","152","`geometry().style()` 方法的回调函数写法变更，不再支持一个配置属性一个回调的方式，而是使用一个回调："],"delete":["15","## 变更说明","16","","17","### 整体变化","28","### API 变更","32","#### 不兼容改动","68","#### 配置项以及接口变更","116","- `chart.tooltip()` 配置项更新，同时将 G2 3.x 版本中一些针对特定图表的内置规则删除，需要用户自己通过提供的配置项进行配置，具体配置属性详见 [API](..\/api\/general\/tooltip)。","118","  - tooltip 的背景辅助框不再配置项中支持，需要使用 `chart.interaction('active-region');` 同时支持直角坐标系和极坐标系。","122","- `chart.legend()`  配置项更新，具体的配置见 [API](..\/api\/general\/legend)。以下列举了一些 3.x 常用的属性以及 4.0 的替代方案：","124","  - 🗑️ `clickable` 属性移除，如想要取消 legend 勾选交互，可以通过 `chart.removeInteraction('legend-filter')` 移除分类图例的勾选交互。","125","  - 🗑️ `selectedMode` 属性移除，4.0 可通过自定义交互行为实现。","126","  - 🗑️ `onClick` 属性移除，4.0 可通过监听 legend 事件实现：`chart.on('legend:click', (ev) => {})`。","127","  - 🗑️ `slidable` 属性移除，4.0 可以通过 `chart.removeInteraction('continuous-filter')` 移除连续图例的滑块交互。","128","  - 🗑️ `hoverable` 属性移除，4.0 可以通过 `chart.interaction('legend-active')` 等交互行为实现，参考交互语法 demo: https:\/\/g2.antv.vision\/en\/examples\/interaction\/component#legend-active。","129","  - 🗑️ `onHover` 属性移除，4.0 可以通过监听 legend 事件实现：`chart.on('legend:mousemove', (ev) => {})`。","131","- `chart.axis()`  配置项更新，详见 [API](..\/api\/general\/axis)。","132","- `chart.annotation()`  各个类型的 annotation 配置项更新，详见 [API](..\/api\/general\/annotation)。","133","- `geometry().style()` 方法的回调函数写法变更，不再支持一个配置属性一个回调的方式，而是使用一个回调：","144","- `geometry.label()` 接口更新，不再支持 html 类型的 label，详见 [API](..\/api\/general\/label)。","145",""]}]}},"daf3b8a81ffb10d93875250e1128542af59d3618":{"changes":{"tests\/bugs\/2425-spec.ts":"ADD","src\/geometry\/shape\/util\/path.ts":"MODIFY","tests\/unit\/geometry\/shape\/line-spec.ts":"MODIFY"},"diff":{"tests\/bugs\/2425-spec.ts":[{"add":[],"delete":[]}],"src\/geometry\/shape\/util\/path.ts":[{"add":["115","  const hasConstraint = !!constraint;","121","  let nextCp0: Position;","122","  let cp1: Position;","123","  let cp0: Position;","125","  if (hasConstraint) {","126","    [min, max] = constraint;","136","    if (i === 0 && !isLoop) {","137","      cp0 = point;","138","    } else if (i === len - 1 && !isLoop) {","139","      cp1 = point;","140","      cps.push(cp0);","141","      cps.push(cp1);","143","      prevPoint = points[isLoop ? (i ? i - 1 : len - 1) : i - 1];","144","      nextPoint = points[isLoop ? (i + 1) % len : i + 1];","145","","146","      let v: [number, number] = [0, 0];","147","      v = vec2.sub(v, nextPoint, prevPoint) as [number, number];","148","      v = vec2.scale(v, v, smooth) as [number, number];","149","","150","      let d0 = vec2.distance(point, prevPoint);","151","      let d1 = vec2.distance(point, nextPoint);","152","","153","      const sum = d0 + d1;","154","      if (sum !== 0) {","155","        d0 \/= sum;","156","        d1 \/= sum;","158","","159","      let v1 = vec2.scale([0, 0], v, -d0);","160","      let v2 = vec2.scale([0, 0], v, d1);","161","","162","      cp1 = vec2.add([0, 0], point, v1) as Position;","163","      nextCp0 = vec2.add([0, 0], point, v2) as Position;","164","","165","      \/\/ 下一个控制点必须在这个点和下一个点之间","166","      nextCp0 = vec2.min([0, 0], nextCp0, vec2.max([0, 0], nextPoint, point)) as Position;","167","      nextCp0 = vec2.max([0, 0], nextCp0, vec2.min([0, 0], nextPoint, point)) as Position;","168","","169","      \/\/ 重新计算 cp1 的值","170","      v1 = vec2.sub([0, 0], nextCp0, point);","171","      v1 = vec2.scale([0, 0], v1, -d0 \/ d1);","172","      cp1 = vec2.add([0, 0], point, v1) as Position;","173","","174","      \/\/ 上一个控制点必须要在上一个点和这一个点之间","175","      cp1 = vec2.min([0, 0], cp1, vec2.max([0, 0], prevPoint, point)) as Position;","176","      cp1 = vec2.max([0, 0], cp1, vec2.min([0, 0], prevPoint, point)) as Position;","177","","178","      \/\/ 重新计算 nextCp0 的值","179","      v2 = vec2.sub([0, 0], point, cp1);","180","      v2 = vec2.scale([0, 0], v2, d1 \/ d0);","181","      nextCp0 = vec2.add([0, 0], point, v2) as Position;","182","","183","      if (hasConstraint) {","184","        cp1 = vec2.max([0, 0], cp1, min) as Position;","185","        cp1 = vec2.min([0, 0], cp1, max) as Position;","186","        nextCp0 = vec2.max([0, 0], nextCp0, min) as Position;","187","        nextCp0 = vec2.min([0, 0], nextCp0, max) as Position;","188","      }","189","","190","      cps.push(cp0);","191","      cps.push(cp1);","192","      cp0 = nextCp0;","199",""],"delete":["118","  const hasConstraint = !!constraint;","121","  if (hasConstraint) {","122","    min = [Infinity, Infinity];","123","    max = [-Infinity, -Infinity];","130","    min = vec2.min([0, 0], min, constraint[0]) as [number, number];","131","    max = vec2.max([0, 0], max, constraint[1]) as [number, number];","136","    if (isLoop) {","137","      prevPoint = points[i ? i - 1 : len - 1];","138","      nextPoint = points[(i + 1) % len];","140","      if (i === 0 || i === len - 1) {","141","        cps.push(point);","142","        continue;","143","      } else {","144","        prevPoint = points[i - 1];","145","        nextPoint = points[i + 1];","148","    let v: [number, number] = [0, 0];","149","    v = vec2.sub(v, nextPoint, prevPoint) as [number, number];","150","    v = vec2.scale(v, v, smooth) as [number, number];","151","","152","    let d0 = vec2.distance(point, prevPoint);","153","    let d1 = vec2.distance(point, nextPoint);","154","","155","    const sum = d0 + d1;","156","    if (sum !== 0) {","157","      d0 \/= sum;","158","      d1 \/= sum;","159","    }","160","","161","    const v1 = vec2.scale([0, 0], v, -d0);","162","    const v2 = vec2.scale([0, 0], v, d1);","163","","164","    let cp0 = vec2.add([0, 0], point, v1);","165","    let cp1 = vec2.add([0, 0], point, v2);","166","","167","    if (hasConstraint) {","168","      cp0 = vec2.max([0, 0], cp0, min);","169","      cp0 = vec2.min([0, 0], cp0, max);","170","      cp1 = vec2.max([0, 0], cp1, min);","171","      cp1 = vec2.min([0, 0], cp1, max);","172","    }","173","","174","    cps.push(cp0);","175","    cps.push(cp1);"]}],"tests\/unit\/geometry\/shape\/line-spec.ts":[{"add":["307","        ['C', 68, 10, 80, 10, 80, 10],","308","        ['C', 80, 10, 20, 10, 20, 10],"],"delete":["307","        ['C', 68, 10, 84, 10, 80, 10],","308","        ['C', 68, 10, 20, 10, 20, 10],"]}]}},"720ced03237b156e53189c8eb57d1cfbd3ffe0e3":{"changes":{"src\/chart\/controller\/legend.js":"MODIFY","test\/bugs\/issue-1209-spec.js":"ADD"},"diff":{"src\/chart\/controller\/legend.js":[{"add":["161","      const { field: itemField } = ev.item;","166","          if (field === itemField) {","173","          if (field === itemField) {","824","      const value = scale.alias || scale.field;","832","          const item = {","833","            value,","834","            marker,","835","            field: scale.field","836","          };"],"delete":["161","      const value = ev.item.value;","166","          if (field === value) {","173","          if (field === value) {","824","      const value = scale.field;","832","          const item = { value, marker };"]}],"test\/bugs\/issue-1209-spec.js":[{"add":[],"delete":[]}]}},"901fc0ce507e180cfaf85bc2c39081e64e09d661":{"changes":{"test\/bugs\/issue-1057-spec.js":"ADD","src\/chart\/controller\/legend.js":"MODIFY"},"diff":{"test\/bugs\/issue-1057-spec.js":[{"add":[],"delete":[]}],"src\/chart\/controller\/legend.js":[{"add":["661","    } else {","662","      return;","721","      if (legend) {","722","        self._bindHoverEvent(legend, field);","723","        legendOptions.reactive && self._bindChartMove(scale);","724","      }"],"delete":["719","      self._bindHoverEvent(legend, field);","720","      legendOptions.reactive && self._bindChartMove(scale);"]}]}},"0611856bb33e0988e6837feb488c8fc50a86ac9f":{"changes":{"src\/chart\/controller\/legend.js":"MODIFY","src\/chart\/chart.js":"MODIFY"},"diff":{"src\/chart\/controller\/legend.js":[{"add":["69","        \/\/ 如果背景小于则直接使用 plotRange","111","          Util.Array.remove(filterVals, clickedValue);","114","              return isSingeSelected ? field === clickedValue : !Util.inArray(filterVals, field);","120","                return isSingeSelected ? field === clickedValue : !Util.inArray(filterVals, field);","125","          filterVals.push(clickedValue);","129","              return !Util.inArray(filterVals, field);","135","                return !Util.inArray(filterVals, field);","291","  _isFiltered(scale, filterVals, scaleValue) {","295","    let rst = true;","296","    scaleValue = scale.invert(scaleValue);","297","    Util.each(filterVals, val => {","298","      if (scale.getText(val) === scale.getText(scaleValue)) {","299","        rst = false;"],"delete":["69","          \/\/ 如果背景小于则直接使用 plotRange","111","          filterVals.push(clickedValue);","114","              return isSingeSelected ? field === clickedValue : Util.inArray(filterVals, field);","120","                return isSingeSelected ? field === clickedValue : Util.inArray(filterVals, field);","125","          Util.Array.remove(filterVals, clickedValue);","129","              return Util.inArray(filterVals, field);","135","                return Util.inArray(filterVals, field);","291","  _isFiltered(scale, values, value) {","295","    let rst = false;","296","    value = scale.invert(value);","297","    Util.each(values, val => {","298","      rst = rst || scale.getText(val) === scale.getText(value);","299","      if (rst) {"]}],"src\/chart\/chart.js":[{"add":["235","              const checkedValues = view.getFilteredValues(scale.field);","236","              const filteredValues = scale.values.filter(val => !Util.inArray(checkedValues, val));"],"delete":["235","              const filteredValues = view.getFilteredValues(scale.field);"]}]}},"d6037d89e79b57c8ed8fb74eae78f73448d32716":{"changes":{"test\/bugs\/issue-454-spec.js":"ADD","src\/geom\/mixin\/tooltip.js":"MODIFY"},"diff":{"test\/bugs\/issue-454-spec.js":[{"add":[],"delete":[]}],"src\/geom\/mixin\/tooltip.js":[{"add":["405","          itemCfg.size = self.getSize(point[FIELD_ORIGIN]);"],"delete":["405","          itemCfg.size = self.getSize();"]}]}},"c3357c1f2ae09ab7b024c343be52a61dd4c3c83f":{"changes":{"src\/chart\/controller\/tooltip.ts":"MODIFY"},"diff":{"src\/chart\/controller\/tooltip.ts":[{"add":["113","        this.tooltip.show(); \/\/ tooltip 有可能被隐藏，需要保证显示状态"],"delete":[]}]}},"a94f17bb6a3f7d9b0648077619bcd70994dd33a4":{"changes":{"src\/chart\/controller\/tooltip.js":"MODIFY","test\/bugs\/issue-368-spec.js":"MODIFY"},"diff":{"src\/chart\/controller\/tooltip.js":[{"add":["186","      let title = first.title || first.name;","194","        \/\/ bugfix: when set the title in the tooltip:change event does not take effect.","195","        title = items[0].title || items[0].name;"],"delete":["186","      const title = first.title || first.name;","187","      \/\/ bugfix: when set the title in the tooltip:change event does not take effect."]}],"test\/bugs\/issue-368-spec.js":[{"add":["48","  it('tooltip:change and change title', () => {","49","    const div = document.createElement('div');","50","    document.body.appendChild(div);","51","    const data = [","52","      { genre: 'Sports', sold: 275 },","53","      { genre: 'Strategy', sold: 115 },","54","      { genre: 'Action', sold: 120 },","55","      { genre: 'Shooter', sold: 350 },","56","      { genre: 'Other', sold: 150 }","57","    ];","58","","59","    const chart = new G2.Chart({","60","      container: div,","61","      width: 540,","62","      height: 540","63","    });","64","","65","    chart.source(data);","66","","67","    chart.line()","68","      .position('genre*sold')","69","      .color('red');","70","","71","    chart.render();","72","    chart.on('tooltip:change', ev => {","73","      const items = ev.items;","74","      items[0].title = 'xxx';","75","    });","76","","77","    chart.showTooltip({","78","      x: 200,","79","      y: 201","80","    });","81","","82","    const controller = chart.get('tooltipController');","83","    const tooltip = controller.tooltip;","84","    expect(tooltip.get('titleContent')).equal('xxx');","85","","86","  });"],"delete":[]}]}},"cabe1f0b225d3ed94260c895bda9b893d452f1f9":{"changes":{"src\/geometry\/interval.ts":"MODIFY","src\/util\/scale.ts":"MODIFY","tests\/unit\/util\/scale-spec.ts":"MODIFY","tests\/bugs\/2930-spec.ts":"ADD"},"diff":{"src\/geometry\/interval.ts":[{"add":["8","import { getMaxScale } from '..\/util\/scale';","75","        max: getMaxScale(yScale),"],"delete":["74","        max: Math.max(Math.max.apply(null, yScale.values), yScale.max),"]}],"src\/util\/scale.ts":[{"add":["116","","117","\/**","118"," * @function y轴scale的max","119"," * @param {yScale}","120"," *\/","121","export function getMaxScale(scale: Scale) {","122","  \/\/ 过滤values[]中 NaN\/undefined\/null 等","123","  const values = scale.values.filter(item => !isNil(item) && !isNaN(item))","124","","125","  return Math.max(...values, isNil(scale.max) ? -Infinity : scale.max);","126","}"],"delete":[]}],"tests\/unit\/util\/scale-spec.ts":[{"add":["0","import { createScaleByField, getName, syncScale, getMaxScale } from '..\/..\/..\/src\/util\/scale';","111","","112","  it('getMaxScale', () => {","113","    const data = [","114","      { type: \"分类一\", value: NaN },","115","      { type: \"分类二\", value: undefined },","116","      { type: \"分类三\", value: null },","117","      { type: \"分类四\", value: -1.2 },","118","      { type: \"分类五\", value: -1 },","119","      { type: \"分类六\", value: 0 },","120","      { type: \"其他\", value: 1 },","121","    ];","122","    const scale = createScaleByField('value', data, { max: 0.5 });","123","    expect(getMaxScale(scale)).toBe(1);","124","  });"],"delete":["0","import { createScaleByField, getName, syncScale } from '..\/..\/..\/src\/util\/scale';"]}],"tests\/bugs\/2930-spec.ts":[{"add":[],"delete":[]}]}},"ee666450b8493aa3c709bb757325dcf49c57e110":{"changes":{"src\/interaction\/native\/brushFilter.ts":"MODIFY","src\/animation\/morphing.ts":"MODIFY","__tests__\/integration\/snapshots\/animation\/iris-point-shapes-keyframe\/interval2-3.png":"ADD","__tests__\/integration\/snapshots\/animation\/iris-point-shapes-keyframe\/interval2-0.png":"ADD","__tests__\/integration\/snapshots\/animation\/iris-point-shapes-keyframe\/interval2-1.png":"ADD","__tests__\/integration\/snapshots\/animation\/iris-point-shapes-keyframe\/interval2-2.png":"ADD","__tests__\/plots\/animation\/index.ts":"MODIFY","__tests__\/plots\/animation\/iris-point-shapes-keyframe.ts":"ADD"},"diff":{"src\/interaction\/native\/brushFilter.ts":[{"add":["62","    root.removeEventListener('click', click);"],"delete":["62","    root.removeEventListener('dblclick', click);"]}],"src\/animation\/morphing.ts":[{"add":["124","function hasUniqueString(search: string, pattern: string): boolean {","125","  const first = search.indexOf(pattern);","126","  const last = search.lastIndexOf(pattern);","127","  return first === last;","128","}","129","","130","\/\/ Path definition with multiple m and M command has sub path.","131","\/\/ eg. 'M10,10...M20,20', 'm10,10...m20,20'","132","function hasSubPath(path: string): boolean {","133","  return !hasUniqueString(path, 'm') || !hasUniqueString(path, 'M');","134","}","135","","136","function shape2path(shape: DisplayObject): string {","137","  const path = convertToPath(shape);","138","  if (!path) return;","139","  \/\/ Path definition with sub path can't do path morphing animation,","140","  \/\/ so skip this kind of path.","141","  if (hasSubPath(path)) return;","142","  return path;","143","}","144","","156","  const fromPath = shape2path(from);","157","  const toPath = shape2path(to);"],"delete":["135","  const fromPath = convertToPath(from);","136","  const toPath = convertToPath(to);"]}],"__tests__\/integration\/snapshots\/animation\/iris-point-shapes-keyframe\/interval2-3.png":[{"add":[],"delete":[]}],"__tests__\/integration\/snapshots\/animation\/iris-point-shapes-keyframe\/interval2-0.png":[{"add":[],"delete":[]}],"__tests__\/integration\/snapshots\/animation\/iris-point-shapes-keyframe\/interval2-1.png":[{"add":[],"delete":[]}],"__tests__\/integration\/snapshots\/animation\/iris-point-shapes-keyframe\/interval2-2.png":[{"add":[],"delete":[]}],"__tests__\/plots\/animation\/index.ts":[{"add":["19","export { irisPointShapesKeyframe } from '.\/iris-point-shapes-keyframe';"],"delete":[]}],"__tests__\/plots\/animation\/iris-point-shapes-keyframe.ts":[{"add":[],"delete":[]}]}},"df60733e206d8d83bfd46b485df32a6ba0e80bd4":{"changes":{"tests\/bugs\/2272-spec.ts":"ADD","src\/geometry\/label\/base.ts":"MODIFY"},"diff":{"tests\/bugs\/2272-spec.ts":[{"add":[],"delete":[]}],"src\/geometry\/label\/base.ts":[{"add":["44","      if (!labelCfg || isNil(mappingData.x) || isNil(mappingData.y)) {"],"delete":["44","      if (!labelCfg) {"]}]}},"d6d9ea7aaedd72ad881e6dbfcd7c1f7976d23d94":{"changes":{"test\/bugs\/issue-345-spec.js":"ADD","src\/theme\/default.js":"MODIFY"},"diff":{"test\/bugs\/issue-345-spec.js":[{"add":[],"delete":[]}],"src\/theme\/default.js":[{"add":["5","const COLOR_PLATE_8 = [","6","  '#1890FF',","7","  '#2FC25B',","8","  '#FACC14',","9","  '#223273',","10","  '#8543E0',","11","  '#13C2C2',","12","  '#3436C7',","13","  '#F04864'","14","];","15","const COLOR_PLATE_16 = [","16","  '#1890FF',","17","  '#41D9C7',","18","  '#2FC25B',","19","  '#FACC14',","20","  '#E6965C',","21","  '#223273',","22","  '#7564CC',","23","  '#8543E0',","24","  '#5C8EE6',","25","  '#13C2C2',","26","  '#5CA3E6',","27","  '#3436C7',","28","  '#B381E6',","29","  '#F04864',","30","  '#D598D9'","31","];","32","const COLOR_PLATE_24 = [ '#1890FF',","33","  '#66B5FF',","34","  '#41D9C7',","35","  '#2FC25B',","36","  '#6EDB8F',","37","  '#9AE65C',","38","  '#FACC14',","39","  '#E6965C',","40","  '#57AD71',","41","  '#223273',","42","  '#738AE6',","43","  '#7564CC',","44","  '#8543E0',","45","  '#A877ED',","46","  '#5C8EE6',","47","  '#13C2C2',","48","  '#70E0E0',","49","  '#5CA3E6',","50","  '#3436C7',","51","  '#8082FF',","52","  '#DD81E6',","53","  '#F04864',","54","  '#FA7D92',","55","  '#D598D9' ];","56","const COLOR_PIE = [","57","  '#1890FF',","58","  '#13C2C2',","59","  '#2FC25B',","60","  '#FACC14',","61","  '#F04864',","62","  '#8543E0',","63","  '#3436C7',","64","  '#223273' ];","65","const COLOR_PIE_16 = [","66","  '#1890FF',","67","  '#73C9E6',","68","  '#13C2C2',","69","  '#6CD9B3',","70","  '#2FC25B',","71","  '#9DD96C',","72","  '#FACC14',","73","  '#E6965C',","74","  '#F04864',","75","  '#D66BCA',","76","  '#8543E0',","77","  '#8E77ED',","78","  '#3436C7',","79","  '#737EE6',","80","  '#223273',","81","  '#7EA2E6'","82","];"],"delete":["5","const COLOR_PLATE_8 = [ '#1890FF', '#2FC25B', '#FACC14', '#223273', '#8543E0', '#13C2C2', '#3436C7', '#F04864' ];","6","const COLOR_PLATE_16 = [ '#1890FF', '#41D9C7', '#2FC25B', '#FACC14', '#E6965C', '#223273', '#7564CC', '#8543E0',","7","  '#5C8EE6', '#13C2C2', '#5CA3E6', '#3436C7', '#B381E6', '#F04864', '#D598D9' ];","8","const COLOR_PLATE_24 = [ '#1890FF', '#66B5FF', '#41D9C7', '#2FC25B', '#6EDB8F', '#9AE65C', '#FACC14', '#E6965C',","9","  '#57AD71', '#223273', '#738AE6', '#7564CC', '#8543E0', '#A877ED', '#5C8EE6', '#13C2C2', '#70E0E0', '#5CA3E6',","10","  '#3436C7', '#8082FF', '#DD81E6', '#F04864', '#FA7D92', '#D598D9' ];","11","const COLOR_PIE = [ '#1890FF', '#13C2C2', '#2FC25B', '#FACC14', '#F04864', '#8543E0', '#3436C7', '#223273' ];","12","const COLOR_PIE_16 = [ '#1890FF', '#73C9E6', '#13C2C2', '#6CD9B3', '#2FC25B', '#9DD96C', '#FACC14', '#E6965C',","13","  '#F04864', '#D66BCA', '#8543E0', '#8E77ED', '#3436C7', '#737EE6', '#223273', '#7EA2E6' ];"]}]}},"a10f75140a8bcaeb3d7fe33f3b17cb0940ea6bb9":{"changes":{"test\/bugs\/issue-502-spec.js":"ADD","src\/chart\/controller\/event.js":"MODIFY","test\/bugs\/issue-424-spec.js":"MODIFY"},"diff":{"test\/bugs\/issue-502-spec.js":[{"add":[],"delete":[]}],"src\/chart\/controller\/event.js":[{"add":["153","    \/\/ if (preViews.length && point.views.length === 0) {","154","    \/\/   view.emit('plotleave', self._getEventObj(ev, point, preViews));","155","    \/\/ }","171","    const preViews = self.curViews || [];","172","    const evtObj = self._getEventObj(ev, point, preViews);","173","    if (point.views.length === 0 && evtObj.toElement.tagName !== 'CANVAS') {","174","      console.log(preViews, self);","175","      view.emit('plotleave', evtObj);","176","    }"],"delete":["153","    if (preViews.length && point.views.length === 0) {","154","      view.emit('plotleave', self._getEventObj(ev, point, preViews));","155","    }","171","    view.emit('plotleave', self._getEventObj(ev, point, self.curViews));"]}],"test\/bugs\/issue-424-spec.js":[{"add":["3","describe('#424', () => {"],"delete":["3","describe.only('#424', () => {"]}]}},"475f21bdc77f390fa4ede9e8374b52874573b9d9":{"changes":{"test\/unit\/chart\/controller\/axis-spec.js":"MODIFY","package.json":"MODIFY","src\/chart\/controller\/axis.js":"MODIFY","src\/component\/axis\/grid.js":"MODIFY","test\/bugs\/issue-243-spec.js":"ADD"},"diff":{"test\/unit\/chart\/controller\/axis-spec.js":[{"add":["314","      expect(axisCfg.grid.items.length).to.equal(12); \/\/ fixed: fill gaps"],"delete":["314","      expect(axisCfg.grid.items.length).to.equal(9);"]}],"package.json":[{"add":["68","    \"test-all\": \"npm run test && npm run test-bugs\",","78","      \"test-all\""],"delete":["77","      \"test\",","78","      \"test-bugs\""]}],"src\/chart\/controller\/axis.js":[{"add":["29","function fillAxisTicks(ticks, isLinear, gridCentering) {","30","  let result = [];","31","  if (ticks.length >= 2 && isLinear && gridCentering) {","32","    result.push({","33","      text: '',","34","      tickValue: '',","35","      value: 0","36","    });","37","  }","38","  if (ticks[0].value !== 0) {","39","    result.push({","40","      text: '',","41","      tickValue: '',","42","      value: 0","43","    });","44","  }","45","  result = result.concat(ticks);","46","  if (result[result.length - 1].value !== 1) {","47","    result.push({","48","      text: '',","49","      tickValue: '',","50","      value: 1","51","    });","52","  }","53","  return result;","54","}","55","","75","  _getMiddleValue(curValue, ticks, index, isLinear) {","76","    if (curValue === 0 && !isLinear) {","77","      return 0;","78","    }","79","    if (curValue === 1) {","80","      return 1;","83","    if (!isLinear && nextValue === 1) {","84","      return 1;","85","    }","314","        const ticks = fillAxisTicks(cfg.ticks, scale.isLinear, cfg.grid.align === 'center');","319","            value = self._getMiddleValue(value, ticks, idx, scale.isLinear);"],"delete":["48","  _getMiddleValue(curValue, ticks, index) {","49","    const tickCount = ticks.length;","50","    if (index === tickCount - 1) {","51","      return null;","282","        const ticks = cfg.ticks;","287","            value = self._getMiddleValue(value, ticks, idx);","315","","316","        \/\/ TODO: 临时解决，需要添加一条以满足最后一格能颜色交替","317","        if ((ticks.length % 2 === 0) && (cfg.grid.align === 'center') && cfg.grid.alternateColor) {","318","          gridPoints.push({","319","            points: [","320","              { x: coord.end.x, y: coord.start.y },","321","              { x: coord.end.x, y: coord.end.y }","322","            ]","323","          });","324","        }"]}],"src\/component\/axis\/grid.js":[{"add":[],"delete":["69",""]}],"test\/bugs\/issue-243-spec.js":[{"add":[],"delete":[]}]}},"6a3ecba1df65861818624eb2e711dcbdccbb19f9":{"changes":{"src\/chart\/controller\/axis.ts":"MODIFY","src\/interface.ts":"MODIFY","src\/chart\/controller\/annotation.ts":"MODIFY"},"diff":{"src\/chart\/controller\/axis.ts":[{"add":["5","import { DEFAULT_ANIMATE_CFG } from '..\/..\/animate\/';","6","","700","      animateOption: deepMix({}, DEFAULT_ANIMATE_CFG, {","701","        appear: null, \/\/ 默认不做出场动画","702","      }, get(cfg, 'animateOption', {})),"],"delete":["23","const DEFAULT_ANIMATE_CFG = {","24","  appear: null,","25","  update: {","26","    duration: 400,","27","    easing: 'easeQuadInOut',","28","  }, \/\/ 更新时发生变更的动画配置","29","  enter: {","30","    duration: 400,","31","    easing: 'easeQuadInOut',","32","  }, \/\/ 更新时新增元素的入场动画配置","33","  leave: {","34","    duration: 300,","35","    easing: 'easeQuadIn',","36","  }, \/\/ 更新时销毁动画配置","37","};","38","","714","      animateOption: deepMix({}, DEFAULT_ANIMATE_CFG, get(cfg, 'animateOption', {})),"]}],"src\/interface.ts":[{"add":["416","  \/** 动画参数配置，当且仅当 `animate` 属性为 true，即动画开启时生效。 *\/","417","  animateOption?: ComponentAnimateOption;"],"delete":[]}],"src\/chart\/controller\/annotation.ts":[{"add":["622","    \/\/ 合并主题，用户配置优先级高于默认主题","632","    cfg.animateOption = deepMix({}, DEFAULT_ANIMATE_CFG, cfg.animateOption, option.animateOption);"],"delete":["622","    \/\/ 合并主题，用户配置优先级高于主题","632","    cfg.animateOption = deepMix({}, DEFAULT_ANIMATE_CFG, cfg.animateOption);"]}]}}}